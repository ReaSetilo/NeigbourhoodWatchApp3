import{b as pc,a as Pd,C as Nd}from"./template-B_1vptV0.js";import{c as M,b as R,e as Z,g as We,i as u,a as x,h as at,S as Kt,E as v,d as O,P as m,N as pt,C as Vt,j as ii,k as G,B as E,T as ks,l as Ke,m as Se,n as pe,o as Me,p as $,q as H,t as Oi,F as eo,u as Ot,v as cc,w as Ie,x as qe,s as At,f as ve,A as It,y as dt,z as Je,L as zt,D as dc,G as Mh,H as fr,I as Rs,J as ce,K as ts,M as Gt,O as ft,Q as Nr,R as Hd,U as Vd,V as fc,W as Ci,X as Fh,Y as ws,Z as Pt,_ as zd,$ as qd,a0 as Wd,a1 as jd,a2 as Ud,a3 as Cs,a4 as Ss,a5 as Gd}from"./sanitize-helper-CTTLmxlq.js";import{s as _d,r as mr,w as gc,B as Ys,c as wr}from"./button-qKIcIH9O.js";import{a as mc}from"./chunk-NISHYRIK-bW9Td-MD.js";var Kd=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),ti=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},to="e-check",Oh="e-checkbox-disabled",Hr="e-frame",io="e-stop",so="e-label",ro="e-ripple-container",no="e-rtl",ao="e-checkbox-wrapper",Yd=["title","class","style","disabled","readonly","name","value","id","tabindex","aria-label","required"],Xd=(function(a){Kd(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.isFocused=!1,s.isMouseClick=!1,s.clickTriggered=!1,s.validCheck=!0,s.type="checkbox",s}return t.prototype.changeState=function(e,i,s){var r=this.getWrapper(),n=null;r&&(n=r.getElementsByClassName(Hr)[0]),e==="check"?(n&&(n.classList.remove(io),n.classList.add(to)),this.element.checked=!0,(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!i&&s?(this.element.checked=!1,this.validCheck=!1):(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):e==="uncheck"?(n&&R([n],[to,io]),this.element.checked=!1,(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!i&&s?(this.element.checked=!0,this.validCheck=!1):(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):(n&&(n.classList.remove(to),n.classList.add(io)),this.element.indeterminate=!0,this.indeterminate=!0)},t.prototype.clickHandler=function(e){if(e.target.tagName==="INPUT"&&this.clickTriggered){this.changeState(this.checked?"check":"uncheck"),this.clickTriggered=!1;return}(e.target.tagName==="SPAN"||e.target.tagName==="LABEL"||M(e.target,".e-label"))&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck",!1,!0),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck",!1,!0),this.checked=!1):(this.changeState("check",!1,!0),this.checked=!0);var i={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",i),e.stopPropagation()},t.prototype.destroy=function(){var e=this,i=this.getWrapper();a.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),this.tagName==="INPUT"?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),Z(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(s){e.element.removeAttribute(s)})):(["class"].forEach(function(s){i.removeAttribute(s)}),i.innerHTML="",this.element=i,this.refreshing&&(["e-control","e-checkbox","e-lib"].forEach(function(s){e.element.classList.add(s)}),We("ej2_instances",[this],this.element))))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.getLabel=function(){return this.element?this.element.parentElement:null},t.prototype.initialize=function(){u(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.element.setAttribute("tabindex","0"),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&typeof this.value=="boolean"&&this.value===!0&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(ao)||(e=this.createElement("div",{className:ao}),this.element.parentNode&&this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.htmlAttributes.id?this.htmlAttributes.id:this.element.id}}),s=this.createElement("span",{className:"e-icons "+Hr});e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(no),this.cssClass&&x([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),e.appendChild(i),i.appendChild(this.element),_d(this,i),i.appendChild(s),this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(ro)[0];mr(e,i)},t.prototype.labelMouseLeaveHandler=function(e){var i=this.getLabel().getElementsByClassName(ro)[0];if(i){for(var s=i.querySelectorAll(".e-ripple-element"),r=s.length-1;r>0;r--)i.removeChild(i.childNodes[r]);mr(e,i)}},t.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(ro)[0];if(i){for(var s=i.querySelectorAll(".e-ripple-element"),r=0;r<s.length-1;r++)i.removeChild(i.childNodes[r]);mr(e,i)}},t.prototype.onPropertyChanged=function(e,i){for(var s=this.getWrapper(),r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];switch(o){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,s.classList.remove(Oh),s.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":i.cssClass&&R([s],i.cssClass.split(/\s+/).filter(function(p){return p.length>0})),e.cssClass&&x([s],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?s.classList.add(no):s.classList.remove(no);break;case"label":this.setText(e.label);break;case"labelPosition":{var l=s.getElementsByClassName(so)[0],h=s.getElementsByTagName("label")[0];Z(l),e.labelPosition==="After"?h.appendChild(l):h.insertBefore(l,s.getElementsByClassName(Hr)[0]);break}case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&typeof e.value=="object")break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper();break}}},t.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=gc(this.createElement,"EJS-CHECKBOX","checkbox",e,ao,"checkbox"),this.element.hasAttribute("id")&&this.isAngular&&this.element.tagName==="EJS-CHECKBOX"&&(e.id=this.element.id,this.element.removeAttribute("id")),this.element=e,this.element.getAttribute("type")!=="checkbox"&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=at("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(Oh),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var i=this.getWrapper();if(i){var s=i.getElementsByClassName(so)[0];if(s)s.innerHTML=this.enableHtmlSanitizer?Kt.sanitize(e):e;else{e=this.enableHtmlSanitizer?Kt.sanitize(e):e,s=this.createElement("span",{className:so,innerHTML:e});var r=i.getElementsByTagName("label")[0];this.labelPosition==="Before"?r.insertBefore(s,i.getElementsByClassName(Hr)[0]):r.appendChild(s)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;if(v.remove(this.element,"keyup",this.keyUpHandler),v.remove(this.element,"focus",this.focusHandler),v.remove(this.element,"focusout",this.focusOutHandler),e){v.remove(e,"click",this.clickHandler);var i=e.getElementsByTagName("label")[0];i&&(v.remove(i,"mousedown",this.labelMouseDownHandler),v.remove(i,"mouseup",this.labelMouseUpHandler),v.remove(i,"mouseleave",this.labelMouseLeaveHandler))}var s=M(this.element,"form");s&&v.remove(s,"reset",this.formResetHandler),this.tagName==="EJS-CHECKBOX"&&v.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();v.add(e,"click",this.clickHandler,this),v.add(this.element,"keyup",this.keyUpHandler,this),v.add(this.element,"focus",this.focusHandler,this),v.add(this.element,"focusout",this.focusOutHandler,this);var i=e.getElementsByTagName("label")[0];v.add(i,"mousedown",this.labelMouseDownHandler,this),v.add(i,"mouseup",this.labelMouseUpHandler,this),v.add(i,"mouseleave",this.labelMouseLeaveHandler,this);var s=M(this.element,"form");s&&v.add(s,"reset",this.formResetHandler,this),this.tagName==="EJS-CHECKBOX"&&v.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&typeof this.value=="object"){var i=this.element.value;if(i&&this.value)if(e)for(var s=0;s<this.value.length;s++)i===this.value[s]&&(this.changeState("check"),this.setProperties({checked:!0},!0));else{var r=this.value.indexOf(i);return this.checked?r<0&&this.value.push(i):r>-1&&this.value.splice(r,1),this.value}}return this.validCheck?this.element.checked:!this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!u(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e],r=this.getWrapper();if(Yd.indexOf(s)>-1)if(s==="class")x([r],this.htmlAttributes[""+s].split(" "));else if(s==="title")r.setAttribute(s,this.htmlAttributes[""+s]);else if(s==="style"){var n=this.getWrapper().getElementsByClassName(Hr)[0];n.setAttribute(s,this.htmlAttributes[""+s])}else s==="disabled"?(this.htmlAttributes[""+s]==="true"&&this.setDisabled(),this.element.setAttribute(s,this.htmlAttributes[""+s])):this.element.setAttribute(s,this.htmlAttributes[""+s]);else r.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},ti([O()],t.prototype,"change",void 0),ti([O()],t.prototype,"created",void 0),ti([m(!1)],t.prototype,"checked",void 0),ti([m("")],t.prototype,"cssClass",void 0),ti([m(!1)],t.prototype,"disabled",void 0),ti([m(!1)],t.prototype,"indeterminate",void 0),ti([m("")],t.prototype,"label",void 0),ti([m("After")],t.prototype,"labelPosition",void 0),ti([m("")],t.prototype,"name",void 0),ti([m("")],t.prototype,"value",void 0),ti([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),ti([m({})],t.prototype,"htmlAttributes",void 0),t=ti([pt],t),t})(Vt),Qd=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),ci=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},oo="e-label",lo="e-ripple-container",ho="e-rtl",uo="e-radio-wrapper",$d=["title","class","style","disabled","readonly","name","value","id"],Bh=(function(a){Qd(t,a);function t(i,s){var r=a.call(this,i,s)||this;return r.isFocused=!1,r.type="radio",r}e=t,t.prototype.changeHandler=function(i){this.checked=!0,this.dataBind();var s=this.element.getAttribute("value");s=this.isVue&&s?this.element.value:this.value;var r=typeof this.value;this.isVue&&r==="boolean"&&(s=s==="true"),this.trigger("change",{value:s,event:i}),this.isAngular&&i.stopPropagation()},t.prototype.updateChange=function(){for(var i,s,r=this.getRadioGroup(),n=0;n<r.length;n++)i=r[n],i!==this.element&&(s=ii(i,e),s.checked=!1,this.tagName==="EJS-RADIOBUTTON"&&(s.angularValue=this.value))},t.prototype.destroy=function(){var i=this,s=this.wrapper;a.prototype.destroy.call(this),s&&(this.disabled||this.unWireEvents(),this.tagName==="INPUT"?(s.parentNode&&s.parentNode.insertBefore(this.element,s),Z(s),this.element.checked=!1,["name","value","disabled"].forEach(function(r){i.element.removeAttribute(r)})):(["role","aria-checked","class"].forEach(function(r){s.removeAttribute(r)}),s.innerHTML="",this.element=this.wrapper,this.refreshing&&(["e-control","e-radio","e-lib"].forEach(function(r){i.element.classList.add(r)}),We("ej2_instances",[this],this.element))))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var i=this.getLabel();i&&i.classList.remove("e-focus")},t.prototype.getModuleName=function(){return"radio"},t.prototype.getSelectedValue=function(){for(var i,s=this.getRadioGroup(),r=0,n=s.length;r<n;r++)if(i=s[r],i.checked)return i.value;return""},t.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getWrapper=function(){return this.element.parentElement?this.element.parentElement:null},t.prototype.getLabel=function(){return this.element.nextElementSibling?this.element.nextElementSibling:null},t.prototype.initialize=function(){u(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var i=this.element.getAttribute("value"),s=typeof this.value;this.isVue&&s==="boolean"&&(i=i==="true"),(this.isVue?this.value&&s!=="boolean"&&!i:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var i=this.element.parentElement;i.classList.contains(uo)||(i=this.createElement("div",{className:uo}),this.element.parentNode&&this.element.parentNode.insertBefore(i,this.element));var s=this.createElement("label",{attrs:{for:this.element.id}});i.appendChild(this.element),i.appendChild(s),i.classList.add("e-wrapper"),this.enableRtl&&s.classList.add(ho),this.cssClass&&x([i],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(i){var s=this.getLabel().getElementsByClassName(lo)[0];mr(i,s)},t.prototype.labelMouseLeaveHandler=function(i){var s=this.getLabel().getElementsByClassName(lo)[0];if(s){for(var r=s.querySelectorAll(".e-ripple-element"),n=r.length-1;n>0;n--)s.removeChild(s.childNodes[n]);mr(i,s)}},t.prototype.labelMouseUpHandler=function(i){var s=this.getLabel().getElementsByClassName(lo)[0];if(s){for(var r=s.querySelectorAll(".e-ripple-element"),n=r.length-1;n>0;n--)s.removeChild(s.childNodes[n]);mr(i,s)}},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&G(this.element,{checked:"true"})},t.prototype.onPropertyChanged=function(i,s){for(var r=this.getWrapper(),n=this.getLabel(),o=0,l=Object.keys(i);o<l.length;o++){var h=l[o];switch(h){case"checked":i.checked&&this.updateChange(),this.element.checked=i.checked;break;case"disabled":i.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":s.cssClass&&R([r],s.cssClass.split(/\s+/).filter(function(c){return c.length>0})),i.cssClass&&x([r],i.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":i.enableRtl?n.classList.add(ho):n.classList.remove(ho);break;case"label":this.setText(i.label);break;case"labelPosition":i.labelPosition==="Before"?n.classList.add("e-right"):n.classList.remove("e-right");break;case"name":this.element.setAttribute("name",i.name);break;case"value":var p=typeof this.htmlAttributes.value;if(!u(this.htmlAttributes)&&(this.htmlAttributes.value||p==="boolean"&&!this.htmlAttributes.value))break;this.element.setAttribute("value",i.value);break;case"htmlAttributes":this.updateHtmlAttribute();break}}},t.prototype.preRender=function(){var i=this.element;if(this.formElement=M(this.element,"form"),this.tagName=this.element.tagName,i=gc(this.createElement,"EJS-RADIOBUTTON","radio",i,uo,"radio"),this.element=i,this.element.getAttribute("type")!=="radio"&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=at("e-"+this.getModuleName())),this.tagName==="EJS-RADIOBUTTON"){var s=this.element.getAttribute("formcontrolname");s&&(this.setProperties({name:s},!0),this.element.setAttribute("name",s))}},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){this.element.disabled=!0},t.prototype.setText=function(i){var s=this.getLabel(),r=s.getElementsByClassName(oo)[0];r?r.textContent=i:(i=this.enableHtmlSanitizer?Kt.sanitize(i):i,r=this.createElement("span",{className:oo,innerHTML:i}),s.appendChild(r)),this.labelPosition==="Before"?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},t.prototype.updateHtmlAttribute=function(){if(!u(this.htmlAttributes))for(var i=0,s=Object.keys(this.htmlAttributes);i<s.length;i++){var r=s[i],n=this.element.parentElement;$d.indexOf(r)>-1?r==="class"?x([n],this.htmlAttributes[""+r].replace(/\s+/g," ").trim().split(" ")):r==="title"||r==="style"?n.setAttribute(r,this.htmlAttributes[""+r]):this.element.setAttribute(r,this.htmlAttributes[""+r]):n.setAttribute(r,this.htmlAttributes[""+r])}},t.prototype.unWireEvents=function(){var i=this.wrapper;if(v.remove(this.element,"change",this.changeHandler),v.remove(this.element,"focus",this.focusHandler),v.remove(this.element,"focusout",this.focusOutHandler),v.remove(this.element,"keyup",this.keyUpHandler),i){var s=i.getElementsByTagName("label")[0];s&&(v.remove(s,"mousedown",this.labelMouseDownHandler),v.remove(s,"mouseup",this.labelMouseUpHandler),v.remove(s,"mouseleave",this.labelMouseLeaveHandler))}this.formElement&&v.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.wireEvents=function(){var i=this.getLabel();v.add(this.element,"change",this.changeHandler,this),v.add(this.element,"keyup",this.keyUpHandler,this),v.add(this.element,"focus",this.focusHandler,this),v.add(this.element,"focusout",this.focusOutHandler,this);var s=i.getElementsByClassName(oo)[0];s&&(v.add(s,"mousedown",this.labelMouseDownHandler,this),v.add(s,"mouseup",this.labelMouseUpHandler,this),v.add(s,"mouseleave",this.labelMouseLeaveHandler,this)),this.formElement&&v.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()};var e;return ci([O()],t.prototype,"change",void 0),ci([O()],t.prototype,"created",void 0),ci([m(!1)],t.prototype,"checked",void 0),ci([m("")],t.prototype,"cssClass",void 0),ci([m(!1)],t.prototype,"disabled",void 0),ci([m("")],t.prototype,"label",void 0),ci([m("After")],t.prototype,"labelPosition",void 0),ci([m("")],t.prototype,"name",void 0),ci([m("")],t.prototype,"value",void 0),ci([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),ci([m({})],t.prototype,"htmlAttributes",void 0),t=e=ci([pt],t),t})(Vt),Jd=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Ph=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Zd="e-hscroll",us="e-rtl",ps="e-overlay",ef="e-hscroll-bar",tf="e-hscroll-content",Vr="e-nav-arrow",zr="e-nav-right-arrow",Tn="e-nav-left-arrow",Fs="e-scroll-nav",po="e-scroll-right-nav",Nh="e-scroll-left-nav",Hh="e-scroll-device",Ln="e-scroll-overlay",co="e-scroll-right-overlay",fo="e-scroll-left-overlay",Vh=40,yl=(function(a){Jd(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.preRender=function(){this.browser=E.info.name,this.browserCheck=this.browser==="mozilla",this.isDevice=E.isDevice,this.customStep=!0;var e=this.element;this.ieCheck=this.browser==="edge"||this.browser==="msie",this.initialize(),e.id===""&&(e.id=at("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(us)},t.prototype.render=function(){this.touchModule=new ks(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),v.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(Hh),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){u(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:tf}),i=this.createElement("div",{className:ef});i.setAttribute("tabindex","-1");for(var s=this.element,r=[].slice.call(s.children),n=0,o=r;n<o.length;n++){var l=o[n];e.appendChild(l)}i.appendChild(e),s.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){var e=["scrollStep"];return this.addOnPersist(e)},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove(Zd),e.classList.remove(Hh),e.classList.remove(us);var i=Ke(".e-"+e.id+"_nav."+Fs,e),s=Ke("."+Ln,e);[].slice.call(s).forEach(function(l){Z(l)});for(var r=0,n=[].slice.call(this.scrollItems.children);r<n.length;r++){var o=n[r];e.appendChild(o)}this.uniqueId&&this.element.removeAttribute("id"),Z(this.scrollEle),i.length>0&&(Z(i[0]),u(i[1])||Z(i[1])),v.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,a.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Ke(".e-scroll-nav:not(."+ps+")",this.element);e?this.element.classList.add(ps):this.element.classList.remove(ps),[].slice.call(i).forEach(function(s){s.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var i=e.id.concat("_nav"),s=this.createElement("div",{className:Ln+" "+co}),r="e-"+e.id.concat("_nav "+Fs+" "+po),n=this.createElement("div",{id:i.concat("_right"),className:r}),o=this.createElement("div",{className:zr+" "+Vr+" e-icons"});n.appendChild(o);var l=this.createElement("div",{className:Ln+" "+fo});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(s),e.appendChild(n),e.insertBefore(l,e.firstChild),this.eventBinding([n])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),s="e-"+e.id.concat("_nav "+Fs+" "+po),r={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},n=this.createElement("div",{className:s,attrs:r});n.setAttribute("aria-disabled","false");var o=this.createElement("div",{className:zr+" "+Vr+" e-icons"}),l="e-"+e.id.concat("_nav "+Fs+" "+Nh),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},p=this.createElement("div",{className:l+" "+ps,attrs:h});p.setAttribute("aria-disabled","true");var c=this.createElement("div",{className:Tn+" "+Vr+" e-icons"});p.appendChild(c),n.appendChild(o),e.appendChild(n),e.insertBefore(p,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),p.classList.add("e-ie-align")),this.eventBinding([n,p])},t.prototype.onKeyPress=function(e){var i=this;if(e.key==="Enter"){var s=function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(function(){s()},100)}},t.prototype.onKeyUp=function(e){e.key==="Enter"&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(s){new ks(s,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),s.addEventListener("keydown",i.onKeyPress.bind(i)),s.addEventListener("keyup",i.onKeyUp.bind(i)),s.addEventListener("mouseup",i.repeatScroll.bind(i)),s.addEventListener("touchend",i.repeatScroll.bind(i)),s.addEventListener("contextmenu",function(r){r.preventDefault()}),v.add(s,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,s=e.originalEvent.target;s=this.contains(s,Fs)?s.firstElementChild:s;var r=10,n=function(){i.eleScrolling(r,s,!0)};this.timeout=window.setInterval(function(){n()},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,s){var r=this.element,n=i.classList;n.contains(Fs)&&(n=i.querySelector("."+Vr).classList),this.contains(r,us)&&this.browserCheck&&(e=-e),!this.contains(r,us)||this.browserCheck||this.ieCheck?n.contains(zr)?this.frameScrollRequest(e,"add",s):this.frameScrollRequest(e,"",s):n.contains(Tn)?this.frameScrollRequest(e,"add",s):this.frameScrollRequest(e,"",s)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var i=this.scrollEle,s;e.velocity<=1?s=e.distanceX/(e.velocity*10):s=e.distanceX/e.velocity;var r=.5,n=function(){var o=Math.sin(r);o<=0?window.cancelAnimationFrame(o):(e.swipeDirection==="Left"?i.scrollLeft+=s*o:e.swipeDirection==="Right"&&(i.scrollLeft-=s*o),r-=.5,window.requestAnimationFrame(n))};n()},t.prototype.scrollUpdating=function(e,i){i==="add"?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,i,s){var r=this,n=10;if(s){this.scrollUpdating(e,i);return}this.customStep||[].slice.call(Ke("."+Ln,this.element)).forEach(function(l){e-=l.offsetWidth});var o=function(){var l,h;r.contains(r.element,us)&&r.browserCheck?(l=-e,h=-n):(l=e,h=n),l<n?window.cancelAnimationFrame(h):(r.scrollUpdating(h,i),e-=h,window.requestAnimationFrame(o))};o()},t.prototype.touchHandler=function(e){var i=this.scrollEle,s=e.distanceX;this.ieCheck&&this.contains(this.element,us)&&(s=-s),e.scrollDirection==="Left"?i.scrollLeft=i.scrollLeft+s:e.scrollDirection==="Right"&&(i.scrollLeft=i.scrollLeft-s)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=u(e)?i:e,r=s.querySelector("."+Vr);u(e)?Se(r,[zr],[Tn]):Se(r,[Tn],[zr])}else e&&i&&(e.classList.add(ps),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(ps),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var i=e.target,s=i.offsetWidth;this.element;var r=this.element.querySelector("."+Nh),n=this.element.querySelector("."+po),o=this.element.querySelector("."+fo),l=this.element.querySelector("."+co),h=i.scrollLeft;if(h<=0&&(h=-h),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(o=this.element.querySelector("."+co),l=this.element.querySelector("."+fo)),h<Vh?o.style.width=h+"px":o.style.width="40px",i.scrollWidth-Math.ceil(s+h)<Vh?l.style.width=i.scrollWidth-Math.ceil(s+h)+"px":l.style.width="40px"),h===0)this.arrowDisabling(r,n);else if(Math.ceil(s+h+.1)>=i.scrollWidth)this.arrowDisabling(n,r);else{var p=this.element.querySelector("."+Fs+"."+ps);p&&(p.classList.remove(ps),p.setAttribute("aria-disabled","false"),p.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(us):this.element.classList.remove(us);break}}},Ph([m(null)],t.prototype,"scrollStep",void 0),t=Ph([pt],t),t})(Vt),sf=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),zh=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},rf="e-vscroll",Rn="e-rtl",cs="e-overlay",nf="e-vscroll-bar",af="e-vscroll-content",qr="e-nav-arrow",Mn="e-nav-up-arrow",Wr="e-nav-down-arrow",Os="e-scroll-nav",qh="e-scroll-up-nav",go="e-scroll-down-nav",Wh="e-scroll-device",Fn="e-scroll-overlay",jh="e-scroll-up-overlay",Uh="e-scroll-down-overlay",Gh=40,ys=(function(a){sf(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.preRender=function(){this.browser=E.info.name,this.browserCheck=this.browser==="mozilla",this.isDevice=E.isDevice,this.customStep=!0;var e=this.element;this.ieCheck=this.browser==="edge"||this.browser==="msie",this.initialize(),e.id===""&&(e.id=at("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Rn)},t.prototype.render=function(){this.touchModule=new ks(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),v.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(Wh),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),v.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){u(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=pe("div",{className:af}),i=pe("div",{className:nf});i.setAttribute("tabindex","-1");for(var s=this.element,r=[].slice.call(s.children),n=0,o=r;n<o.length;n++){var l=o[n];e.appendChild(l)}i.appendChild(e),s.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){var e=["scrollStep"];return this.addOnPersist(e)},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",R([this.element],[rf,Wh,Rn]);var i=Ke(".e-"+e.id+"_nav."+Os,e),s=Ke("."+Fn,e);[].slice.call(s).forEach(function(l){Z(l)});for(var r=0,n=[].slice.call(this.scrollItems.children);r<n.length;r++){var o=n[r];e.appendChild(o)}this.uniqueId&&this.element.removeAttribute("id"),Z(this.scrollEle),i.length>0&&(Z(i[0]),u(i[1])||Z(i[1])),v.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,a.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Ke(".e-scroll-nav:not(."+cs+")",this.element);e?this.element.classList.add(cs):this.element.classList.remove(cs),[].slice.call(i).forEach(function(s){s.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var i=e.id.concat("_nav"),s=pe("div",{className:Fn+" "+Uh}),r="e-"+e.id.concat("_nav "+Os+" "+go),n=pe("div",{id:i.concat("down"),className:r}),o=pe("div",{className:Wr+" "+qr+" e-icons"});n.appendChild(o);var l=pe("div",{className:Fn+" "+jh});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(s),e.appendChild(n),e.insertBefore(l,e.firstChild),this.eventBinding([n])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),s="e-"+e.id.concat("_nav "+Os+" "+go),r=pe("div",{id:i.concat("_down"),className:s});r.setAttribute("aria-disabled","false");var n=pe("div",{className:Wr+" "+qr+" e-icons"}),o="e-"+e.id.concat("_nav "+Os+" "+qh),l=pe("div",{id:i.concat("_up"),className:o+" "+cs});l.setAttribute("aria-disabled","true");var h=pe("div",{className:Mn+" "+qr+" e-icons"});l.appendChild(h),r.appendChild(n),r.setAttribute("tabindex","0"),e.appendChild(r),e.insertBefore(l,e.firstChild),this.ieCheck&&(r.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([r,l])},t.prototype.onKeyPress=function(e){var i=this;if(e.key==="Enter"){var s=function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(function(){s()},100)}},t.prototype.onKeyUp=function(e){e.key==="Enter"&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(s){new ks(s,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),s.addEventListener("keydown",i.onKeyPress.bind(i)),s.addEventListener("keyup",i.onKeyUp.bind(i)),s.addEventListener("mouseup",i.repeatScroll.bind(i)),s.addEventListener("touchend",i.repeatScroll.bind(i)),s.addEventListener("contextmenu",function(r){r.preventDefault()}),v.add(s,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,s=e.originalEvent.target;s=this.contains(s,Os)?s.firstElementChild:s;var r=10,n=function(){i.eleScrolling(r,s,!0)};this.timeout=window.setInterval(function(){n()},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,s){var r=i.classList;r.contains(Os)&&(r=i.querySelector("."+qr).classList),r.contains(Wr)?this.frameScrollRequest(e,"add",s):r.contains(Mn)&&this.frameScrollRequest(e,"",s)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var i=this.scrollEle,s;e.velocity<=1?s=e.distanceY/(e.velocity*10):s=e.distanceY/e.velocity;var r=.5,n=function(){var o=Math.sin(r);o<=0?window.cancelAnimationFrame(o):(e.swipeDirection==="Up"?i.scrollTop+=s*o:e.swipeDirection==="Down"&&(i.scrollTop-=s*o),r-=.02,window.requestAnimationFrame(n))};n()},t.prototype.scrollUpdating=function(e,i){i==="add"?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,i,s){var r=this,n=10;if(s){this.scrollUpdating(e,i);return}this.customStep||[].slice.call(Ke("."+Fn,this.element)).forEach(function(l){e-=l.offsetHeight});var o=function(){e<n?window.cancelAnimationFrame(n):(r.scrollUpdating(n,i),e-=n,window.requestAnimationFrame(o))};o()},t.prototype.touchHandler=function(e){var i=this.scrollEle,s=e.distanceY;e.scrollDirection==="Up"?i.scrollTop=i.scrollTop+s:e.scrollDirection==="Down"&&(i.scrollTop=i.scrollTop-s)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=u(e)?i:e,r=s.querySelector("."+qr);u(e)?Se(r,[Wr],[Mn]):Se(r,[Mn],[Wr])}else e.classList.add(cs),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(cs),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var i=e.target,s=i.offsetHeight,r=this.element.querySelector("."+qh),n=this.element.querySelector("."+go),o=this.element.querySelector("."+jh),l=this.element.querySelector("."+Uh),h=i.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(h<Gh?o.style.height=h+"px":o.style.height="40px",i.scrollHeight-Math.ceil(s+h)<Gh?l.style.height=i.scrollHeight-Math.ceil(s+h)+"px":l.style.height="40px"),h===0)this.arrowDisabling(r,n);else if(Math.ceil(s+h+.1)>=i.scrollHeight)this.arrowDisabling(n,r);else{var p=this.element.querySelector("."+Os+"."+cs);p&&(p.classList.remove(cs),p.setAttribute("aria-disabled","false"),p.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Rn):this.element.classList.remove(Rn);break}}},zh([m(null)],t.prototype,"scrollStep",void 0),t=zh([pt],t),t})(Vt);function Li(a,t,e,i,s,r){var n,o,l=t.parentElement;if(i==="vscroll"?(n=r||t.getBoundingClientRect().height,o=e.getBoundingClientRect().height):(n=t.getBoundingClientRect().width,o=e.getBoundingClientRect().width),n<o)return _h(a,t,e,i,s,r);if(l){var h=l.getBoundingClientRect().width;return h<n&&i==="hscroll"?(o=h,t.style.maxWidth=h+"px",_h(a,t,e,i,s,r)):e}else return e}function _h(a,t,e,i,s,r){var n=a("div",{className:"e-menu-"+i});t.appendChild(n),n.appendChild(e),r?(n.style.overflow="hidden",n.style.height=r+"px"):(n.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden");var o;return i==="vscroll"?(o=new ys({enableRtl:s},n),o.scrollStep=Me(".e-"+i+"-bar",t).offsetHeight/2):(o=new yl({enableRtl:s},n),o.scrollStep=Me(".e-"+i+"-bar",t).offsetWidth),n}function Ui(a,t,e){if(a){var i=Me(".e-menu-parent",t);i?(a.destroy(),t.parentElement.appendChild(i),Z(t)):(a.destroy(),Z(t))}}var se=(function(){function a(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="",typeof t=="string"?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return Object.defineProperty(a.prototype,"moduleName",{get:function(){return"query"},enumerable:!0,configurable:!0}),a.prototype.setKey=function(t){return this.key=t,this},a.prototype.using=function(t){return this.dataManager=t,this},a.prototype.execute=function(t,e,i,s){return t=t||this.dataManager,t?t.executeQuery(this,e,i,s):P.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},a.prototype.executeLocal=function(t){return t=t||this.dataManager,t?t.executeLocal(this):P.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},a.prototype.clone=function(){var t=new a;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},a.prototype.from=function(t){return this.fromTable=t,this},a.prototype.addParams=function(t,e){return typeof e=="function"?this.params.push({key:t,fn:e}):this.params.push({key:t,value:e}),this},a.prototype.distinct=function(t){return typeof t=="string"?this.distincts=[].slice.call([t],0):this.distincts=t.slice(0),this},a.prototype.expand=function(t){return typeof t=="string"?this.expands=[].slice.call([t],0):this.expands=t.slice(0),this},a.prototype.where=function(t,e,i,s,r,n){e=e?e.toLowerCase():null;var o=null;return typeof t=="string"?o=new we(t,e,i,s,r,n):t instanceof we&&(o=t),this.queries.push({fn:"onWhere",e:o}),this},a.prototype.search=function(t,e,i,s,r){typeof e=="string"&&(e=[e]),(!i||i==="none")&&(i="contains");var n=P.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:s,ignoreAccent:r,comparer:n}}),this},a.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},a.prototype.sortByForeignKey=function(t,e,i,s){var r=u(s)?"ascending":s,n,o;if(typeof t=="string"&&P.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),e="descending"),(!e||typeof e=="string")&&(r=e?e.toLowerCase():"ascending",e=P.fnSort(e)),i){n=a.filterQueries(this.queries,"onSortBy");for(var l=0;l<n.length;l++)if(o=n[l].e.fieldName,typeof o=="string"){if(o===t)return this}else if(o instanceof Array){for(var h=0;h<o.length;h++)if(o[h]===t||t.toLowerCase()===o[h]+" desc")return this}}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:e,direction:r}}),this},a.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},a.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},a.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},a.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},a.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},a.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},a.prototype.select=function(t){return typeof t=="string"&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},a.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},a.prototype.foreignKey=function(t){return this.fKey=t,this},a.prototype.requiresCount=function(){return this.isCountRequired=!0,this},a.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},a.filterQueries=function(t,e){return t.filter(function(i){return i.fn===e})},a.filterQueryLists=function(t,e){for(var i=t.filter(function(n){return e.indexOf(n.fn)!==-1}),s={},r=0;r<i.length;r++)s[i[r].fn]||(s[i[r].fn]=i[r].e);return s},a})(),we=(function(){function a(t,e,i,s,r,n){return s===void 0&&(s=!1),this.ignoreAccent=!1,this.isComplex=!1,typeof t=="string"?(this.field=t,this.operator=e.toLowerCase(),this.value=i,this.matchCase=n,this.ignoreCase=s,this.ignoreAccent=r,this.isComplex=!1,this.comparer=P.fnOperators.processOperator(this.operator)):(t instanceof a&&i instanceof a||i instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return a.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"and")},a.prototype.and=function(t,e,i,s,r){return a.combine(this,t,e,i,"and",s,r)},a.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"or")},a.prototype.or=function(t,e,i,s,r){return a.combine(this,t,e,i,"or",s,r)},a.ornot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"or not")},a.prototype.ornot=function(t,e,i,s,r){return a.combine(this,t,e,i,"ornot",s,r)},a.andnot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"and not")},a.prototype.andnot=function(t,e,i,s,r){return a.combine(this,t,e,i,"andnot",s,r)},a.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,s=t.length;i<s;i++)e.push(this.fromJSONData(t[i]));return e}var r=t;return this.fromJSONData(r)},a.prototype.validate=function(t){var e=this.predicates?this.predicates:[],i,s;if(!this.isComplex&&this.comparer)return this.condition&&this.condition.indexOf("not")!==-1?(this.condition=this.condition.split("not")[0]===""?void 0:this.condition.split("not")[0],!this.comparer.call(this,P.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,P.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);this.condition&&this.condition.indexOf("not")!==-1?s=this.condition.indexOf("and")!==-1:s=this.condition==="and";for(var r=0;r<e.length;r++)if(r>0&&this.condition&&this.condition.indexOf("not")!==-1&&(e[r].condition=e[r].condition?e[r].condition+"not":"not"),i=e[r].validate(t),s){if(!i)return!1}else if(i)return!0;return s},a.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},a.combinePredicates=function(t,e){if(t.length===1){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new a(t[0],e,t.slice(1))},a.combine=function(t,e,i,s,r,n,o){return e instanceof a?a[r](t,e):typeof e=="string"?a[r](t,new a(e,i,s,n,o)):P.throwError("Predicate - "+r+" : invalid arguments")},a.fromJSONData=function(t){for(var e=t.predicates||[],i=e.length,s=[],r,n=0;n<i;n++)s.push(this.fromJSONData(e[n]));return t.isComplex?r=new a(s[0],t.condition,s.slice(1)):r=new a(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent),r},a})(),Kh={GroupGuid:"{271bbba0-1ee7}"},P=(function(){function a(){}return a.getValue=function(t,e){return typeof t=="function"?t.call(e||{}):t},a.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},a.notEndsWith=function(t,e){return t.slice&&t.slice(-e.length)!==e},a.startsWith=function(t,e){return t.slice(0,e.length)===e},a.notStartsWith=function(t,e){return t.slice(0,e.length)!==e},a.wildCard=function(t,e){var i,s;if(e.indexOf("[")!==-1&&(e=e.split("[").join("[[]")),e.indexOf("(")!==-1&&(e=e.split("(").join("[(]")),e.indexOf(")")!==-1&&(e=e.split(")").join("[)]")),e.indexOf("\\")!==-1&&(e=e.split("\\").join("[\\\\]")),e.indexOf("*")!==-1){e.charAt(0)!=="*"&&(e="^"+e),e.charAt(e.length-1)!=="*"&&(e=e+"$"),i=e.split("*");for(var r=0;r<i.length;r++)i[r].indexOf(".")===-1?i[r]=i[r]+".*":i[r]=i[r]+"*";e=i.join("")}(e.indexOf("%3f")!==-1||e.indexOf("?")!==-1)&&(s=e.indexOf("%3f")!==-1?e.split("%3f"):e.split("?"),e=s.join("."));var n=new RegExp(e,"g");return n.test(t)},a.like=function(t,e){return e.indexOf("%")!==-1?e.charAt(0)==="%"&&e.lastIndexOf("%")<2?(e=e.substring(1,e.length),a.startsWith(a.toLowerCase(t),a.toLowerCase(e))):e.charAt(e.length-1)==="%"&&e.indexOf("%")>e.length-3?(e=e.substring(0,e.length-1),a.endsWith(a.toLowerCase(t),a.toLowerCase(e))):(e.lastIndexOf("%")!==e.indexOf("%")&&e.lastIndexOf("%")>e.indexOf("%")+1&&(e=e.substring(e.indexOf("%")+1,e.lastIndexOf("%"))),t.indexOf(e)!==-1):!1},a.fnSort=function(t){return t=t?a.toLowerCase(t):"ascending",t==="ascending"?this.fnAscending:this.fnDescending},a.fnAscending=function(t,e){return u(t)&&u(e)?0:e==null?-1:typeof t=="string"?t.localeCompare(e):t==null?1:t-e},a.fnDescending=function(t,e){return u(t)&&u(e)?0:e==null?1:typeof t=="string"?t.localeCompare(e)*-1:t==null?-1:e-t},a.extractFields=function(t,e){for(var i={},s=0;s<e.length;s++)i=this.setValue(e[s],this.getObject(e[s],t),i);return i},a.select=function(t,e){for(var i=[],s=0;s<t.length;s++)i.push(this.extractFields(t[s],e));return i},a.group=function(t,e,i,s,r,n,o){s=s||1;var l=t,h="GroupGuid";if(l.GroupGuid===Kh[h]){for(var p=function(I){if(u(r))l[I].items=c.group(l[I].items,e,i,l.level+1,null,n,o),l[I].count=l[I].items.length;else{var A=-1,T=r.filter(function(L){return L.key===l[I].key});A=r.indexOf(T[0]),l[I].items=c.group(l[I].items,e,i,l.level+1,r[A].items,n,o),l[I].count=r[A].count}},c=this,d=0;d<l.length;d++)p(d);return l.childLevels+=1,l}var f={},g=[];g.GroupGuid=Kh[h],g.level=s,g.childLevels=0,g.records=l;for(var y=function(I){var A=b.getVal(l,I,e);if(u(n)||(A=n(A,e)),!f[A]&&(f[A]={key:A,count:0,items:[],aggregates:{},field:e},g.push(f[A]),!u(r))){var T=r.filter(function(L){return L.key===f[A].key});f[A].count=T[0].count}f[A].count=u(r)?f[A].count+=1:f[A].count,(!o||o&&i.length)&&f[A].items.push(l[I])},b=this,C=0;C<l.length;C++)y(C);if(i&&i.length)for(var S=function(I){for(var A={},T=void 0,L=i,_=0;_<i.length;_++)if(T=a.aggregates[i[_].type],u(r))T&&(A[L[_].field+" - "+L[_].type]=T(g[I].items,L[_].field));else{var X=r.filter(function(re){return re.key===g[I].key});T&&(A[L[_].field+" - "+L[_].type]=T(X[0].items,L[_].field))}g[I].aggregates=A},C=0;C<g.length;C++)S(C);if(o&&g.length&&i.length)for(var C=0;C<g.length;C++)g[C].items=[];return l.length&&g||l},a.buildHierarchy=function(t,e,i,s,r){var n,o={},l;for(s.result&&(s=s.result),s.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),n=0;n<s.length;n++){var h=this.getObject(t,s[n]);l=o[h]||(o[h]=[]),l.push(s[n])}for(n=0;n<i.length;n++){var h=this.getObject(r||t,i[n]);i[n][e]=o[h]}},a.getFieldList=function(t,e,i){if(i===void 0&&(i=""),e==null)return this.getFieldList(t,[],i);for(var s=t,r=Object.keys(t),n=0,o=r;n<o.length;n++){var l=o[n];typeof s[l]=="object"&&!(s[l]instanceof Array)?this.getFieldList(s[l],e,i+l+"."):e.push(i+l)}return e},a.getObject=function(t,e){if(!t)return e;if(e){if(t.indexOf(".")===-1)if(u(e[t])){var i=t.charAt(0).toLowerCase()+t.slice(1),s=t.charAt(0).toUpperCase()+t.slice(1);return u(e[i])?u(e[s])?null:e[s]:e[i]}else return e[t];for(var r=e,n=t.split("."),o=0;o<n.length&&r!=null;o++){if(r=r[n[o]],r===void 0){var l=n[o].charAt(0).toUpperCase()+n[o].slice(1);r=e[l]||e[l.charAt(0).toLowerCase()+l.slice(1)]||null}e=r}return r}},a.setValue=function(t,e,i){var s=t.toString().split("."),r=i||{},n=r,o,l=s.length,h;for(o=0;o<l;o++)h=s[o],o+1===l?n[h]=e===void 0?void 0:e:u(n[h])&&(n[h]={}),n=n[h];return r},a.sort=function(t,e,i){var s=this;return t.length<=1?t:t.slice().sort(function(r,n){return i(s.getVal([r],0,e),s.getVal([n],0,e),r,n)})},a.ignoreDiacritics=function(t){if(typeof t!="string")return t;var e=t.split(""),i=e.map(function(s){return s in a.diacritics?a.diacritics[s]:s});return i.join("")},a.ignoreDiacriticsForArrays=function(t){return Array.isArray(t)?t.map(function(e){return a.ignoreDiacritics(e)}):[]},a.merge=function(t,e,i,s){for(var r=[],n;t.length>0||e.length>0;)t.length>0&&e.length>0?s?n=s(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:n=t[0][i]<t[0][i]?t:e:n=t.length>0?t:e,r.push(n.shift());return r},a.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},a.toLowerCase=function(t){return u(t)?"":typeof t=="string"?t.toLowerCase():t instanceof Date?t.toString().toLowerCase():t.toString()},a.callAdaptorFunction=function(t,e,i,s){if(e in t){var r=t[e](i,s);u(r)||(i=r)}return i},a.getAddParams=function(t,e,i){var s={};return a.callAdaptorFunction(t,"addParams",{dm:e,query:i,params:i?i.params:[],reqParams:s}),s},a.isPlainObject=function(t){return!!t&&t.constructor===Object},a.isCors=function(){var t=null,e="XMLHttpRequest";try{t=new window[e]}catch{}return!!t&&"withCredentials"in t},a.getGuid=function(t){var e="0123456789abcdef",i;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(s,r){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),i=n[0]%16|0}return e[r===19?i&3|8:i]})},a.isNull=function(t){return t==null},a.getItemFromComparer=function(t,e,i){var s,r,n,o=0,l=typeof a.getVal(t,0,e)=="string";if(t.length)for(;u(s)&&o<t.length;)s=a.getVal(t,o,e),n=t[o++];for(;o<t.length;o++)r=a.getVal(t,o,e),!u(r)&&(l&&(s=+s,r=+r),i(s,r)>0&&(s=r,n=t[o]));return n},a.distinct=function(t,e,i){i=u(i)?!1:i;var s=[],r,n={};return t.forEach(function(o,l){r=typeof t[l]=="object"?a.getVal(t,l,e):t[l],r in n||(s.push(i?t[l]:r),n[r]=1)}),s},a.processData=function(t,e){var i=this.prepareQuery(t),s=new N(e);t.requiresCounts&&i.requiresCount();var r=s.executeLocal(i),n={result:t.requiresCounts?r.result:r,count:r.count,aggregates:JSON.stringify(r.aggregates)};return t.requiresCounts?n:r},a.prepareQuery=function(t){var e=this,i=new se;if(t.select&&i.select(t.select),t.where){var s=a.parse.parseJson(t.where);s.filter(function(n){if(u(n.condition))i.where(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent);else{var o=[];n.field?o.push(new we(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent)):o=o.concat(e.getPredicate(n.predicates)),n.condition==="or"?i.where(we.or(o)):n.condition==="and"&&i.where(we.and(o))}})}if(t.search){var r=a.parse.parseJson(t.search);r.filter(function(n){return i.search(n.key,n.fields,n.operator,n.ignoreCase,n.ignoreAccent)})}return t.aggregates&&t.aggregates.filter(function(n){return i.aggregate(n.type,n.field)}),t.sorted&&t.sorted.filter(function(n){return i.sortBy(n.name,n.direction)}),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(function(n){return i.group(n)}),i},a.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];if(s.field)e.push(new we(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent));else{for(var r=[],n=this.getPredicate(s.predicates),o=0,l=Object.keys(n);o<l.length;o++){var h=l[o];r.push(n[h])}e.push(s.condition==="or"?we.or(r):we.and(r))}}return e},a.serverTimezoneOffset=null,a.timeZoneHandling=!0,a.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+`
`+e.stack}},a.aggregates={sum:function(t,e){for(var i=0,s,r=typeof a.getVal(t,0,e)!="number",n=0;n<t.length;n++)s=a.getVal(t,n,e),!isNaN(s)&&s!==null&&(r&&(s=+s),i+=s);return i},average:function(t,e){return a.aggregates.sum(t,e)/t.length},min:function(t,e){var i;return typeof e=="function"&&(i=e,e=null),a.getObject(e,a.getItemFromComparer(t,e,i||a.fnAscending))},max:function(t,e){var i;return typeof e=="function"&&(i=e,e=null),a.getObject(e,a.getItemFromComparer(t,e,i||a.fnDescending))},truecount:function(t,e){return new N(t).executeLocal(new se().where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new N(t).executeLocal(new se().where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},a.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},a.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},a.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},a.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},a.diacritics={"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A","":"A","":"A","":"AA",:"AE",:"AE",:"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B",:"B",:"B",:"B",:"B","":"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"C","":"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D","":"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F","":"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"G","":"G","":"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"H","":"H","":"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J","":"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"K","":"K","":"K","":"K","":"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L","":"L","":"L","":"L","":"L","":"L","":"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M","":"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N","":"N",:"N","":"N","":"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O","":"O","":"O",:"OI","":"OO",:"OU","":"P",:"P",:"P",:"P",:"P","":"P","":"P","":"P","":"P","":"Q",:"Q","":"Q","":"Q","":"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"R","":"R","":"R","":"R","":"R","":"S",:"S","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"S","":"S","":"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T","":"T","":"T","":"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"U","":"V",:"V",:"V",:"V",:"V","":"V","":"V","":"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Y","":"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"Z","":"Z","":"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a","":"a",:"a","":"aa",:"ae",:"ae",:"ae","":"ao","":"au","":"av","":"av","":"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"c","":"c","":"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d","":"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"e",:"e",:"e","":"f",:"f",:"f",:"f","":"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"g","":"g","":"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h","":"h","":"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j","":"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"k","":"k","":"k","":"k","":"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l","":"l","":"l","":"l","":"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n","":"n","":"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o","":"o","":"o",:"o",:"oi",:"ou","":"oo","":"p",:"p",:"p",:"p",:"p","":"p","":"p","":"p","":"p","":"q",:"q","":"q","":"q","":"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"r",:"r","":"r","":"r","":"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"s","":"s","":"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t","":"t","":"t","":"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v","":"v",:"v","":"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"y","":"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z","":"z","":"z","":"z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},a.fnOperators={equal:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?a.toLowerCase(t)===a.toLowerCase(e):t===e},notequal:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),!a.fnOperators.equal(t,e,i)},lessthan:function(t,e,i){return i?a.toLowerCase(t)<a.toLowerCase(e):(u(t)&&(t=void 0),t<e)},greaterthan:function(t,e,i){return i?a.toLowerCase(t)>a.toLowerCase(e):(u(t)&&(t=void 0),t>e)},lessthanorequal:function(t,e,i){return i?a.toLowerCase(t)<=a.toLowerCase(e):(u(t)&&(t=void 0),t<=e)},greaterthanorequal:function(t,e,i){return i?a.toLowerCase(t)>=a.toLowerCase(e):t>=e},contains:function(t,e,i,s){return e===""?!0:(s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?!u(t)&&!u(e)&&a.toLowerCase(t).indexOf(a.toLowerCase(e))!==-1:!u(t)&&!u(e)&&t.toString().indexOf(e)!==-1)},doesnotcontain:function(t,e,i,s){return e===""?!1:(s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?!u(t)&&!u(e)&&a.toLowerCase(t).indexOf(a.toLowerCase(e))===-1:!u(t)&&!u(e)&&t.toString().indexOf(e)===-1)},isnotnull:function(t){return t!=null},isnull:function(t){return t==null},startswith:function(t,e,i,s){return e===""?!0:(s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.startsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.startsWith(t,e))},doesnotstartwith:function(t,e,i,s){return e===""?!1:(s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.notStartsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.notStartsWith(t,e))},like:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.like(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.like(t,e)},isempty:function(t){return t===void 0||t===""},isnotempty:function(t){return t!==void 0&&t!==""},wildcard:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?(t||typeof t=="boolean")&&e&&typeof t!="object"&&a.wildCard(a.toLowerCase(t),a.toLowerCase(e)):(t||typeof t=="boolean")&&e&&a.wildCard(t,e)},endswith:function(t,e,i,s){return e===""?!0:(s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.endsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.endsWith(t,e))},doesnotendwith:function(t,e,i,s){return e===""?!1:(s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.notEndsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.notEndsWith(t,e))},processSymbols:function(t){var e=a.operatorSymbols[t];if(e){var i=a.fnOperators[e];return i}return a.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var e=a.fnOperators[t];return e||a.fnOperators.processSymbols(t)},in:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacriticsForArrays(e)),i?!u(t)&&e&&e.length>0&&e.map(function(r){return a.toLowerCase(r)}).indexOf(a.toLowerCase(t))>-1:t instanceof Date?!u(t)&&e&&e.length>0&&Array.isArray(e)&&e.some(function(r){return r instanceof Date&&r.getTime()===t.getTime()}):!u(t)&&e&&e.length>0&&e.indexOf(t)>-1},notin:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacriticsForArrays(e)),i?!u(t)&&e&&e.length>0&&e.map(function(r){return a.toLowerCase(r)}).indexOf(a.toLowerCase(t))===-1:t instanceof Date?!u(t)&&e&&e.length>0&&Array.isArray(e)&&e.every(function(r){return!(r instanceof Date)||r.getTime()!==t.getTime()}):!u(t)&&e&&e.length>0&&e.indexOf(t)===-1}},a.parse={parseJson:function(t){return typeof t=="string"&&(/^[\s]*\[|^[\s]*\{(.)+:/g.test(t)||t.indexOf('"')===-1)?t=JSON.parse(t,a.parse.jsonReviver):t instanceof Array?a.parse.iterateAndReviveArray(t):typeof t=="object"&&t!==null&&a.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var e=0;e<t.length;e++)typeof t[e]=="object"&&t[e]!==null?a.parse.iterateAndReviveJson(t[e]):typeof t[e]=="string"&&(!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[e])||t[e].toString().indexOf('"')===-1)?t[e]=a.parse.jsonReviver("",t[e]):t[e]=a.parse.parseJson(t[e])},iterateAndReviveJson:function(t){for(var e,i=Object.keys(t),s=0,r=i;s<r.length;s++){var n=r[s];a.startsWith(n,"__")||(e=t[n],typeof e=="object"?e instanceof Array?a.parse.iterateAndReviveArray(e):e&&a.parse.iterateAndReviveJson(e):t[n]=a.parse.jsonReviver(t[n],e))}},jsonReviver:function(t,e){if(typeof e=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),s=a.timeZoneHandling?a.serverTimezoneOffset:null;if(i)return a.dateParse.toTimeZone(new Date(parseInt(i[1],10)),s,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var r=e.indexOf("Z")>-1||e.indexOf("z")>-1,n=e.split(/[^0-9.]/);if(r){if(n[5].indexOf(".")>-1){var o=n[5].split(".");n[5]=o[0],n[6]=new Date(e).getUTCMilliseconds().toString()}else n[6]="00";e=a.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5]?n[5]:"00",10),parseInt(n[6],10)),a.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5]?n[5]:"00",10)),h=parseInt(n[6],10),p=parseInt(n[7],10);if(isNaN(h)&&isNaN(p))return l;e.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-p):l.setHours(l.getHours()+h,l.getMinutes()+p),e=a.dateParse.toTimeZone(l,a.serverTimezoneOffset,!1)}a.serverTimezoneOffset==null&&(e=a.dateParse.addSelfOffset(e))}}return e},isJson:function(t){return typeof t[0]=="string"?t:a.parse.parseJson(t)},isGuid:function(t){var e=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i,i=e.exec(t);return i!=null},replacer:function(t,e){return a.isPlainObject(t)?a.parse.jsonReplacer(t,e):t instanceof Array?a.parse.arrayReplacer(t):t instanceof Date?a.parse.jsonReplacer({val:t},e).val:t},jsonReplacer:function(t,e){for(var i,s=Object.keys(t),r=0,n=s;r<n.length;r++){var o=n[r];if(i=t[o],i instanceof Date){var l=i;a.serverTimezoneOffset==null?t[o]=a.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+a.serverTimezoneOffset*36e5),t[o]=a.dateParse.toTimeZone(a.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var e=0;e<t.length;e++)a.isPlainObject(t[e])?t[e]=a.parse.jsonReplacer(t[e]):t[e]instanceof Date&&(t[e]=a.parse.jsonReplacer({date:t[e]}).date);return t},jsonDateReplacer:function(t,e){if(t==="value"&&e){if(typeof e=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(i)e=a.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var s=e.split(/[^0-9]/);e=a.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),null,!0)}}if(e instanceof Date)return e=a.dateParse.addSelfOffset(e),a.serverTimezoneOffset===null?a.dateParse.toTimeZone(a.dateParse.addSelfOffset(e),null).toJSON():(e=a.dateParse.toTimeZone(e,e.getTimezoneOffset()/60-a.serverTimezoneOffset,!1),e.toJSON())}return e}},a.dateParse={addSelfOffset:function(t){return new Date(+t-t.getTimezoneOffset()*6e4)},toUTC:function(t){return new Date(+t+t.getTimezoneOffset()*6e4)},toTimeZone:function(t,e,i){if(e===null)return t;var s=i?a.dateParse.toUTC(t):t;return new Date(+s-e*36e5)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),s=i>=0?"+":"-",r=function(o){var l=Math.floor(Math.abs(o));return(l<10?"0":"")+l},n=e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+s+r(i/60)+":"+r(i%60);return n}},a})(),Vi=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),of={GroupGuid:"{271bbba0-1ee7}"},vc=(function(){function a(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=a,this.dataSource=t,this.pvt={}}return a.prototype.processResponse=function(t,e,i,s){return t},a})(),ka=(function(a){Vi(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.processQuery=function(e,i){for(var s=e.dataSource.json.slice(0),r=s.length,n=!0,o,l,h={},p=0,c=[],d=[],f,g=0;g<i.lazyLoad.length;g++)p++,h[i.lazyLoad[g].key]=i.lazyLoad[g].value;var y={},b=!1;if(i.lazyLoad.length){for(var g=0;g<i.queries.length;g++)if(l=i.queries[g],l.fn==="onGroup"&&!u(l.e.format)){b=!0;break}}for(var g=0;g<i.queries.length;g++){if(l=i.queries[g],(l.fn==="onPage"||l.fn==="onGroup"||l.fn==="onSortBy"&&!b)&&i.lazyLoad.length){l.fn==="onGroup"&&c.push(l.e),l.fn==="onPage"&&(f=l.e),l.fn==="onSortBy"&&d.unshift(l.e);continue}o=this[l.fn].call(this,s,l.e,i),l.fn==="onAggregates"?y[l.e.field+" - "+l.e.type]=o:s=o!==void 0?o:s,(l.fn==="onPage"||l.fn==="onSkip"||l.fn==="onTake"||l.fn==="onRange")&&(n=!1),n&&(r=s.length)}if(p){var C={query:i,lazyLoad:h,result:s,group:c,page:f,sort:d},S=this.lazyLoadGroup(C);s=S.result,r=S.count}return i.isCountRequired&&(s={result:s,count:r,aggregates:y}),s},t.prototype.lazyLoadGroup=function(e){var i=0,s=this.getAggregate(e.query),r=e.result;if(u(e.lazyLoad.onDemandGroupInfo)){var p=e.group[0].fieldName;r=P.group(r,p,s,null,null,e.group[0].comparer,!0),i=r.length;var h=r;if(e.sort.length){var c=e.sort.length>1?e.sort.filter(function(f){return f.fieldName===p})[0]:e.sort[0];r=this.onSortBy(r,c,e.query,!0)}e.page&&(r=this.onPage(r,e.page,e.query)),this.formGroupResult(r,h)}else{for(var n=e.lazyLoad.onDemandGroupInfo,o=n.where.length-1;o>=0;o--)r=this.onWhere(r,n.where[o]);if(e.group.length!==n.level){var l=e.group[n.level].fieldName;r=P.group(r,l,s,null,null,e.group[n.level].comparer,!0),e.sort.length&&(r=this.onSortBy(r,e.sort[parseInt(n.level.toString(),10)],e.query,!0))}else for(var o=e.sort.length-1;o>=n.level;o--)r=this.onSortBy(r,e.sort[parseInt(o.toString(),10)],e.query,!1);i=r.length;var h=r;r=r.slice(n.skip),r=r.slice(0,n.take),e.group.length!==n.level&&this.formGroupResult(r,h)}return{result:r,count:i}},t.prototype.formGroupResult=function(e,i){if(e.length&&i.length){var s="GroupGuid",r="childLevels",n="level",o="records";e[s]=i[s],e[r]=i[r],e[n]=i[n],e[o]=i[o]}return e},t.prototype.getAggregate=function(e){var i=se.filterQueries(e.queries,"onAggregates"),s=[];if(i.length)for(var r=void 0,n=0;n<i.length;n++)r=i[n].e,s.push({type:r.type,field:P.getValue(r.field,e)});return s},t.prototype.batchRequest=function(e,i,s){var r,n=i.deletedRecords.length;for(r=0;r<i.addedRecords.length;r++)this.insert(e,i.addedRecords[r]);for(r=0;r<i.changedRecords.length;r++)this.update(e,s.key,i.changedRecords[r]);for(r=0;r<n;r++)this.remove(e,s.key,i.deletedRecords[r]);return i},t.prototype.onWhere=function(e,i){return!e||!e.length?e:e.filter(function(s){if(i)return i.validate(s)})},t.prototype.onAggregates=function(e,i){var s=P.aggregates[i.type];return!e||!s||e.length===0?null:s(e,i.field)},t.prototype.onSearch=function(e,i){return!e||!e.length?e:(i.fieldNames.length===0&&P.getFieldList(e[0],i.fieldNames),e.filter(function(s){for(var r=0;r<i.fieldNames.length;r++)if(i.comparer.call(s,P.getObject(i.fieldNames[r],s),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1}))},t.prototype.onSortBy=function(e,i,s,r){if(!e||!e.length)return e;var n,o=P.getValue(i.fieldName,s);if(!o)return e.sort(i.comparer);if(o instanceof Array){o=o.slice(0);for(var l=o.length-1;l>=0;l--)o[l]&&(n=i.comparer,P.endsWith(o[l]," desc")&&(n=P.fnSort("descending"),o[l]=o[l].replace(" desc","")),e=P.sort(e,o[l],n));return e}return P.sort(e,r?"key":o,i.comparer)},t.prototype.onGroup=function(e,i,s){if(!e||!e.length)return e;var r=this.getAggregate(s);return P.group(e,P.getValue(i.fieldName,s),r,null,null,i.comparer)},t.prototype.onPage=function(e,i,s){var r=P.getValue(i.pageSize,s),n=(P.getValue(i.pageIndex,s)-1)*r,o=n+r;return!e||!e.length?e:e.slice(n,o)},t.prototype.onRange=function(e,i){return!e||!e.length?e:e.slice(P.getValue(i.start),P.getValue(i.end))},t.prototype.onTake=function(e,i){return!e||!e.length?e:e.slice(0,P.getValue(i.nos))},t.prototype.onSkip=function(e,i){return!e||!e.length?e:e.slice(P.getValue(i.nos))},t.prototype.onSelect=function(e,i){return!e||!e.length?e:P.select(e,P.getValue(i.fieldNames))},t.prototype.insert=function(e,i,s,r,n){return u(n)?e.dataSource.json.push(i):e.dataSource.json.splice(n,0,i)},t.prototype.remove=function(e,i,s,r){var n=e.dataSource.json,o;for(typeof s=="object"&&!(s instanceof Date)&&(s=P.getObject(i,s)),o=0;o<n.length&&P.getObject(i,n[o])!==s;o++);return o!==n.length?n.splice(o,1):null},t.prototype.update=function(e,i,s,r){var n=e.dataSource.json,o,l;for(u(i)||(l=H(i,s)),o=0;o<n.length&&!(!u(i)&&H(i,n[o])===l);o++);return o<n.length?Oi(n[o],s):null},t})(vc),vi=(function(a){Vi(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.processQuery=function(e,i,s){var r=this.getQueryRequest(i),n=se.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=i.params,l=e.dataSource.url,h,p,c=null,d=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in n?(h=n.onPage,p=P.getValue(h.pageIndex,i),c=P.getValue(h.pageSize,i),p=(p-1)*c):"onRange"in n&&(h=n.onRange,p=h.start,c=h.end-h.start);for(var g=0;g<r.sorts.length;g++)h=P.getValue(r.sorts[g].e.fieldName,i),f.sorts.push(P.callAdaptorFunction(this,"onEachSort",{name:h,direction:r.sorts[g].e.direction},i));s&&(h=this.getFiltersFrom(s,i),h&&f.filters.push(P.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)));for(var g=0;g<r.filters.length;g++){var y=P.callAdaptorFunction(this,"onEachWhere",r.filters[g].e.toJson(),i);this.getModuleName&&this.getModuleName()==="ODataV4Adaptor"&&!u(r.filters[g].e.key)&&r.filters.length>1&&(y="("+y+")"),f.filters.push(y);for(var b=typeof f.filters[g]=="object"?Object.keys(f.filters[g]):[],C=0,S=b;C<S.length;C++){var I=S[C];P.isNull(f[I])&&delete f[I]}}for(var g=0;g<r.searches.length;g++)h=r.searches[g].e,f.searches.push(P.callAdaptorFunction(this,"onEachSearch",{fields:h.fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase,ignoreAccent:h.ignoreAccent},i));for(var g=0;g<r.groups.length;g++)f.groups.push(P.getValue(r.groups[g].e.fieldName,i));for(var g=0;g<r.aggregates.length;g++)h=r.aggregates[g].e,f.aggregates.push({type:h.type,field:P.getValue(h.field,i)});var A={};if(this.getRequestQuery(d,i,n,f,A),P.callAdaptorFunction(this,"addParams",{dm:e,query:i,params:o,reqParams:A}),i.lazyLoad.length)for(var g=0;g<i.lazyLoad.length;g++)A[i.lazyLoad[g].key]=i.lazyLoad[g].value;for(var T=Object.keys(A),L=0,_=T;L<_.length;L++){var I=_[L];(P.isNull(A[I])||A[I]===""||A[I].length===0)&&delete A[I]}!(d.skip in A&&d.take in A)&&c!==null&&(A[d.skip]=P.callAdaptorFunction(this,"onSkip",p,i),A[d.take]=P.callAdaptorFunction(this,"onTake",c,i));var X=this.pvt;return this.pvt={},this.options.requestType==="json"?{data:JSON.stringify(A,P.parse.jsonDateReplacer),url:l,pvtData:X,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(A,i,e),h=(e.dataSource.url.indexOf("?")!==-1?"&":"/")+h,{type:"GET",url:h.length?l.replace(/\/*$/,h):l,pvtData:X})},t.prototype.getRequestQuery=function(e,i,s,r,n){var o="param",l=n;l[e.from]=i.fromTable,e.apply&&i.distincts.length&&(l[e.apply]="onDistinct"in this?P.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&e.expand&&(l[e.expand]="onExpand"in this&&"onSelect"in s?P.callAdaptorFunction(this,"onExpand",{selects:P.getValue(s.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[e.select]="onSelect"in s&&!i.distincts.length?P.callAdaptorFunction(this,"onSelect",P.getValue(s.onSelect.fieldNames,i),i):"",l[e.count]=i.isCountRequired?P.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[e.search]=r.searches.length?P.callAdaptorFunction(this,"onSearch",r.searches,i):"",l[e.skip]="onSkip"in s?P.callAdaptorFunction(this,"onSkip",P.getValue(s.onSkip.nos,i),i):"",l[e.take]="onTake"in s?P.callAdaptorFunction(this,"onTake",P.getValue(s.onTake.nos,i),i):"",l[e.where]=r.filters.length||r.searches.length?P.callAdaptorFunction(this,"onWhere",r.filters,i):"",l[e.sortBy]=r.sorts.length?P.callAdaptorFunction(this,"onSortBy",r.sorts,i):"",l[e.group]=r.groups.length?P.callAdaptorFunction(this,"onGroup",r.groups,i):"",l[e.aggregates]=r.aggregates.length?P.callAdaptorFunction(this,"onAggregates",r.aggregates,i):"",l[o]=[]},t.prototype.convertToQueryString=function(e,i,s){return""},t.prototype.processResponse=function(e,i,s,r,n,o){if(r&&r.headers.get("Content-Type")&&r.headers.get("Content-Type").indexOf("application/json")!==-1){var l=P.timeZoneHandling;i&&!i.timeZoneHandling&&(P.timeZoneHandling=!1),i.enableCache||(e=P.parse.parseJson(e)),P.timeZoneHandling=l}var h=n,p=h.pvtData||{},c=e?e.groupDs:[];if(r&&r.headers.get("Content-Type")&&r.headers.get("Content-Type").indexOf("xml")!==-1)return s.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(h.data);if(d&&d.action==="batch"&&e&&e.addedRecords&&!u(o))return o.addedRecords=e.addedRecords,o;e&&e.d&&(e=e.d);var f={};e&&"count"in e&&(f.count=e.count),f.result=e&&e.result?e.result:e;var g=!1;if(Array.isArray(e.result)&&e.result.length){var y="key",b="value",C="level";if(u(e.result[0][y])||(f.result=this.formRemoteGroupedData(f.result,1,p.groups.length-1)),s&&s.lazyLoad.length&&p.groups.length){for(var S=0;S<s.lazyLoad.length;S++)if(s.lazyLoad[S][y]==="onDemandGroupInfo"){var I=s.lazyLoad[S][b][C];p.groups.length===I&&(g=!0)}}}return g||this.getAggregateResult(p,e,f,c,s),P.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},t.prototype.formRemoteGroupedData=function(e,i,s){for(var r=0;r<e.length;r++)e[r].items.length&&Object.keys(e[r].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[r].items,i+1,s-1);var n="GroupGuid",o="childLevels",l="level",h="records";return e[n]=of[n],e[l]=i,e[o]=s,e[h]=e[0].items.length?this.getGroupedRecords(e,!u(e[0].items[h])):[],e},t.prototype.getGroupedRecords=function(e,i){for(var s=[],r="records",n=0;n<e.length;n++)if(i)s=s.concat(e[n].items[r]);else for(var o=0;o<e[n].items.length;o++)s.push(e[n].items[o]);return s},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,i,s,r,n){var o,l;return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify($({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:s[o],key:s[l]},P.getAddParams(this,e,r)))}},t.prototype.beforeSend=function(e,i,s){},t.prototype.insert=function(e,i,s,r){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify($({},{value:i,table:s,action:"insert"},P.getAddParams(this,e,r)))}},t.prototype.remove=function(e,i,s,r,n){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify($({},{key:s,keyColumn:i,table:r,action:"remove"},P.getAddParams(this,e,n)))}},t.prototype.update=function(e,i,s,r,n){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify($({},{value:s,action:"update",keyColumn:i,key:P.getObject(i,s),table:r},P.getAddParams(this,e,n)))}},t.prototype.getFiltersFrom=function(e,i){var s=i.fKey,r,n=s,o=i.key,l=[];typeof e[0]!="object"&&(n=null);for(var h=0;h<e.length;h++)typeof e[0]=="object"?r=P.getObject(o||n,e[h]):r=e[h],l.push(new we(s,"equal",r));return we.or(l)},t.prototype.getAggregateResult=function(e,i,s,r,n){var o=i;if(i&&i.result&&(o=i.result),e&&e.aggregates&&e.aggregates.length){var l=e.aggregates,h=void 0,p=o,c={};i.aggregate&&(p=i.aggregate);for(var d=0;d<l.length;d++)h=P.aggregates[l[d].type],h&&(c[l[d].field+" - "+l[d].type]=h(p,l[d].field));s.aggregates=c}var f="key",g=Array.isArray(i.result)&&i.result.length&&!u(i.result[0][f]);if(e&&e.groups&&e.groups.length&&!g){for(var y=e.groups,d=0;d<y.length;d++){var b=null;u(r)||(r=P.group(r,y[d]));var C=se.filterQueries(n.queries,"onGroup")[d].e;o=P.group(o,y[d],e.aggregates,b,r,C.comparer)}s.result=o}return s},t.prototype.getQueryRequest=function(e){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=se.filterQueries(e.queries,"onSortBy"),i.groups=se.filterQueries(e.queries,"onGroup"),i.filters=se.filterQueries(e.queries,"onWhere"),i.searches=se.filterQueries(e.queries,"onSearch"),i.aggregates=se.filterQueries(e.queries,"onAggregates"),i},t.prototype.addParams=function(e){var i=e.reqParams;e.params.length&&(i.params={});for(var s=0,r=e.params;s<r.length;s++){var n=r[s];if(i[n.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[n.key]=n.value,n.fn&&(i[n.key]=n.fn.call(e.query,n.key,e.query,e.dm)),i.params[n.key]=i[n.key]}},t})(vc),vr=(function(a){Vi(t,a);function t(e){var i=a.call(this)||this;return i.options=$({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),$(i.options,e||{}),i}return t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,s){var r="",n,o,l=e.value,h=typeof l,p=e.field?t.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+P.parse.replacer(l)+"'"),h==="string"&&(l=l.replace(/'/g,"''"),e.ignoreCase&&(l=l.toLowerCase()),e.operator!=="like"&&(l=encodeURIComponent(l)),e.operator!=="wildcard"&&e.operator!=="like"&&(l="'"+l+"'"),s&&(p="cast("+p+", 'Edm.String')"),P.parse.isGuid(l)&&(o="guid"),e.ignoreCase&&(o||(p="tolower("+p+")"),l=l.toLowerCase())),e.operator==="isempty"||e.operator==="isnull"||e.operator==="isnotempty"||e.operator==="isnotnull"?(n=e.operator.indexOf("isnot")!==-1?P.odBiOperator.notequal:P.odBiOperator.equal,l=e.operator==="isnull"||e.operator==="isnotnull"?null:"''"):n=P.odBiOperator[e.operator],n)return r+=p,r+=n,o&&(r+=o),r+l;if(!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?n=P.odv4UniOperator[e.operator]:n=P.odUniOperator[e.operator],n==="like")l=l,l.indexOf("%")!==-1&&(l.charAt(0)==="%"&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.startswith:P.odUniOperator.startswith):l.charAt(l.length-1)==="%"&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.endswith:P.odUniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.contains:P.odUniOperator.contains):n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.contains:P.odUniOperator.contains),l=encodeURIComponent(l),l="'"+l+"'";else if(n==="wildcard")if(l=l,l.indexOf("*")!==-1){var c=l.split("*"),d=void 0,f=0;if(l.indexOf("*")!==0&&c[0].indexOf("%3f")===-1&&c[0].indexOf("?")===-1&&(d=c[0],d="'"+d+"'",n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.startswith:P.odUniOperator.startswith,r+=n+"(",r+=p+",",o&&(r+=o),r+=d+")",f++),l.lastIndexOf("*")!==l.length-1&&c[c.length-1].indexOf("%3f")===-1&&c[c.length-1].indexOf("?")===-1&&(d=c[c.length-1],d="'"+d+"'",n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.endswith:P.odUniOperator.endswith,f>0&&(r+=" and "),r+=n+"(",r+=p+",",o&&(r+=o),r+=d+")",f++),c.length>2){for(var g=1;g<c.length-1;g++)if(c[g].indexOf("%3f")===-1&&c[g].indexOf("?")===-1){if(d=c[g],d="'"+d+"'",n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.contains:P.odUniOperator.contains,f>0&&(r+=" and "),n==="substringof"||n==="not substringof"){var y=d;d=p,p=y}r+=n+"(",r+=p+",",o&&(r+=o),r+=d+")",f++}}f===0?(n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.contains:P.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):n="wildcard"}else n=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?P.odv4UniOperator.contains:P.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";if(n==="substringof"||n==="not substringof"){var y=l;l=p,p=y}return n!=="wildcard"&&(r+=n+"(",r+=p+",",o&&(r+=o),r+=l+")"),r},t.prototype.addParams=function(e){a.prototype.addParams.call(this,e),delete e.reqParams.params},t.prototype.onComplexPredicate=function(e,i,s){for(var r=[],n=0;n<e.predicates.length;n++)r.push("("+this.onEachWhere(e.predicates[n],i,s)+")");return r.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,i,s){return e.isComplex?this.onComplexPredicate(e,i,s):this.onPredicate(e,i,s)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&e.fields.length===0&&P.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],s=0;s<e.fields.length;s++)i.push(new we(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.search=i},t.prototype.onSearch=function(e){return this.pvt.search=we.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var s=0;s<e.name.length;s++)i.push(t.getField(e.name[s])+(e.direction==="descending"?" desc":""));else i.push(t.getField(e.name)+(e.direction==="descending"?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return e===!0?"allpages":""},t.prototype.beforeSend=function(e,i,s){P.endsWith(s.url,this.options.batch)&&s.type.toLowerCase()==="post"?(i.headers.set("Accept",this.options.multipartAccept),i.headers.set("DataServiceVersion","2.0")):i.headers.set("Accept",this.options.accept),i.headers.set("DataServiceVersion","2.0"),i.headers.set("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,i,s,r,n,o){var l="odata.metadata";if(n&&n.type==="GET"&&!this.rootUrl&&e[l]){var h=e[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}var p="pvtData";if(!u(e.d)){var c=s&&s.isCountRequired?e.d.results:e.d,d="__metadata";if(!u(c))for(var f=0;f<c.length;f++)u(c[f][d])||delete c[f][d]}var g=n&&n[p],y=this.processBatchResponse(e,s,r,n,o);if(y)return y;var b=r&&n.fetchRequest.headers.get("DataServiceVersion"),C=null,S=b&&parseInt(b,10)||2;if(s&&s.isCountRequired){var I="__count";(e[I]||e["odata.count"])&&(C=e[I]||e["odata.count"]),e.d&&(e=e.d),(e[I]||e["odata.count"])&&(C=e[I]||e["odata.count"])}S===3&&e.value&&(e=e.value),e.d&&(e=e.d),S<3&&e.results&&(e=e.results);var A={};return A.count=C,A.result=e,this.getAggregateResult(g,e,A,null,s),P.isNull(C)?A.result:{result:A.result,count:A.count,aggregates:A.aggregates}},t.prototype.convertToQueryString=function(e,i,s){var r=[],n="table",o=e[n]||"",l="$format";delete e[n],s.dataSource.requiresFormat&&(e[l]="json");for(var h=Object.keys(e),p=0,c=h;p<c.length;p++){var d=c[p];r.push(d+"="+e[d])}return r=r.join("&"),s.dataSource.url&&s.dataSource.url.indexOf("?")!==-1&&!o?r:r.length?o+"?"+r:o||""},t.prototype.localTimeReplacer=function(e,i){for(var s=0,r=u(i)?[]:Object.keys(i);s<r.length;s++){var n=r[s];i[n]instanceof Date&&(i[n]=P.dateParse.toLocalTime(i[n]))}return i},t.prototype.insert=function(e,i,s){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,i,s,r){var n;return typeof s=="string"&&!P.parse.isGuid(s)?n="('"+s+"')":n="("+s+")",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,r?"/"+r:"")+n}},t.prototype.update=function(e,i,s,r,n,o){this.options.updateType==="PATCH"&&!u(o)&&(s=this.compareAndRemove(s,o,i));var l;return typeof s[i]=="string"&&!P.parse.isGuid(s[i])?l="('"+s[i]+"')":l="("+s[i]+")",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,r?"/"+r:"")+l,data:JSON.stringify(s,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,i,s,r,n){var o=s.guid=P.getGuid(this.options.batchPre),l=e.dataSource.batchUrl||this.rootUrl?(e.dataSource.batchUrl||this.rootUrl)+"/"+this.options.batch:(e.dataSource.batchUrl||e.dataSource.url).replace(/\/*$/,"/"+this.options.batch);s.url=this.resourceTableName?this.resourceTableName:s.url;var h={url:s.url,key:s.key,cid:1,cSet:P.getGuid(this.options.changeSet)},p="--"+o+`
`;return p+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+`
`,this.pvt.changeSet=0,p+=this.generateInsertRequest(i.addedRecords,h,e),p+=this.generateUpdateRequest(i.changedRecords,h,e,n?n.changedRecords:[]),p+=this.generateDeleteRequest(i.deletedRecords,h,e),p+=h.cSet+`--
`,p+="--"+o+"--",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:p}},t.prototype.generateDeleteRequest=function(e,i,s){if(!e)return"";var r="",n={method:"DELETE ",url:function(o,l,h){var p=P.getObject(h,o[l]);if(typeof p=="number"||P.parse.isGuid(p))return"("+p+")";if(p instanceof Date){var c=o[l][h];return"("+c.toJSON()+")"}else return"('"+p+"')"},data:function(o,l){return""}};return r=this.generateBodyContent(e,i,n,s),r+`
`},t.prototype.generateInsertRequest=function(e,i,s){if(!e)return"";var r="",n={method:"POST ",url:function(o,l,h){return""},data:function(o,l){return JSON.stringify(o[l])+`

`}};return r=this.generateBodyContent(e,i,n,s),r},t.prototype.generateUpdateRequest=function(e,i,s,r){var n=this;if(!e)return"";var o="";e.forEach(function(h){return h=n.compareAndRemove(h,r.filter(function(p){return P.getObject(i.key,p)===P.getObject(i.key,h)})[0],i.key)});var l={method:this.options.updateType+" ",url:function(h,p,c){if(typeof h[p][c]=="number"||P.parse.isGuid(h[p][c]))return"("+h[p][c]+")";if(h[p][c]instanceof Date){var d=h[p][c];return"("+d.toJSON()+")"}else return"('"+h[p][c]+"')"},data:function(h,p){return JSON.stringify(h[p])+`

`}};return o=this.generateBodyContent(e,i,l,s),o},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,i,s,r){for(var n="",o=0;o<e.length;o++)n+=`
`+i.cSet+`
`,n+=this.options.changeSetContent+`

`,n+=s.method,s.method==="POST "?n+=(r.dataSource.insertUrl||r.dataSource.crudUrl||i.url)+s.url(e,o,i.key)+` HTTP/1.1
`:s.method==="PUT "||s.method==="PATCH "?n+=(r.dataSource.updateUrl||r.dataSource.crudUrl||i.url)+s.url(e,o,i.key)+` HTTP/1.1
`:s.method==="DELETE "&&(n+=(r.dataSource.removeUrl||r.dataSource.crudUrl||i.url)+s.url(e,o,i.key)+` HTTP/1.1
`),n+="Accept: "+this.options.accept+`
`,n+="Content-Id: "+this.pvt.changeSet+++`
`,n+=this.options.batchChangeSetContentType+`
`,u(e[o]["@odata.etag"])?n+=`
`:(n+="If-Match: "+e[o]["@odata.etag"]+`

`,delete e[o]["@odata.etag"]),n+=s.data(e,o);return n},t.prototype.processBatchResponse=function(e,i,s,r,n){if(s&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("xml")!==-1)return i.isCountRequired?{result:[],count:0}:[];if(r&&this.options.batch&&P.endsWith(r.url,this.options.batch)&&r.type.toLowerCase()==="post"){var o=s.headers.get("Content-Type"),l=void 0,h=void 0,p=e+"";if(o=o.substring(o.indexOf("=batchresponse")+1),p=p.split(o),p.length<2)return{};p=p[1];var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(p);c&&p.replace(c[0],"");var d=c?c[1]:"";p=p.split(d);for(var f=p.length;f>-1;f--)!/\bContent-ID:/i.test(p[f])||!/\bHTTP.+201/.test(p[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(p[f])[1],10),n.addedRecords[l]&&(h=P.parse.parseJson(/^\{.+\}/m.exec(p[f])[0]),$({},n.addedRecords[l],this.processResponse(h))));return n}return null},t.prototype.compareAndRemove=function(e,i,s){var r=this;return u(i)||Object.keys(e).forEach(function(n){if(n!==s&&n!=="@odata.etag")if(P.isPlainObject(e[n])){r.compareAndRemove(e[n],i[n]);var o=Object.keys(e[n]).filter(function(l){return l!=="@odata.etag"});o.length===0&&delete e[n]}else(e[n]===i[n]||e[n]&&i[n]&&e[n].valueOf()===i[n].valueOf())&&delete e[n]}),e},t})(vi);(function(a){Vi(t,a);function t(e){var i=a.call(this,e)||this;return i.options=$({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),$(i.options,e||{}),i}return t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(e){return e===!0?"true":""},t.prototype.onPredicate=function(e,i,s){var r="",n=e.value,o=n instanceof Date;if(i instanceof se)for(var l=this.getQueryRequest(i),h=0;h<l.filters.length;h++)l.filters[h].e.key===e.value&&(s=!0);return r=a.prototype.onPredicate.call(this,e,i,s),o&&(r=r.replace(/datetime'(.*)'$/,"$1")),P.parse.isGuid(n)&&(r=r.replace("guid","").replace(/'/g,"")),r},t.prototype.onEachSearch=function(e){var i=this.pvt.searches||[];i.push(e.key),this.pvt.searches=i},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(e){var i=this,s={},r={},n=e.expands.slice(),o=[],l=e.selects.filter(function(h){return h.indexOf(".")>-1});return l.forEach(function(h){var p=h.split(".");if(p[0]in s||(s[p[0]]=[]),p.length===2)s[p[0]].length&&Object.keys(s).indexOf(p[0])!==-1?s[p[0]][0].indexOf("$expand")!==-1&&s[p[0]][0].indexOf(";$select=")===-1?s[p[0]][0]=s[p[0]][0]+";$select="+p[1]:s[p[0]][0]=s[p[0]][0]+","+p[1]:s[p[0]].push("$select="+p[1]);else{for(var c="$select="+p[p.length-1],d="",f="",g=1;g<p.length-1;g++)d=d+"$expand="+p[g]+"(",f=f+")";var y=d+c+f;if(s[p[0]].length&&Object.keys(s).indexOf(p[0])!==-1&&i.expandQueryIndex(s[p[0]],!0)){var b=i.expandQueryIndex(s[p[0]]);s[p[0]][b]=s[p[0]][b]+y.replace("$expand=",",")}else s[p[0]].push(y)}}),Object.keys(s).forEach(function(h){n.indexOf(h)===-1&&n.push(h)}),n.forEach(function(h){r[h]=h in s?h+"("+s[h].join(";")+")":h}),Object.keys(r).forEach(function(h){return o.push(r[h])}),o.join(",")},t.prototype.expandQueryIndex=function(e,i){for(var s=0;s<e.length;s++)if(e[s].indexOf("$expand")!==-1)return i?!0:s;return i?!1:0},t.prototype.onDistinct=function(e){var i=e.map(function(s){return vr.getField(s)}).join(",");return"groupby(("+i+"))"},t.prototype.onSelect=function(e){return a.prototype.onSelect.call(this,e.filter(function(i){return i.indexOf(".")===-1}))},t.prototype.beforeSend=function(e,i,s){(s.type==="POST"||s.type==="PUT"||s.type==="PATCH")&&i.headers.set("Prefer","return=representation"),i.headers.set("Accept",this.options.accept)},t.prototype.processResponse=function(e,i,s,r,n,o){var l="@odata.context",h="@context";if(n&&n.type==="GET"&&!this.rootUrl&&(e[l]||e[h])){var p=e[l]?e[l].split("/$metadata#"):e[h].split("/$metadata#");this.rootUrl=p[0],this.resourceTableName=p[1]}var c="pvtData",d=n&&n[c],f=a.prototype.processBatchResponse.call(this,e,s,r,n,o);if(f)return f;var g=null,y="@odata.count",b="@count";s&&s.isCountRequired&&(y in e?g=e[y]:b in e&&(g=e[b])),e=u(e.value)?e:e.value;var C={};return C.count=g,C.result=e,this.getAggregateResult(d,e,C,null,s),P.isNull(g)?C.result:{result:C.result,count:g,aggregates:C.aggregates}},t})(vr);(function(a){Vi(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(e,i,s){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(i)}},t.prototype.remove=function(e,i,s,r){return{type:"DELETE",url:e.dataSource.url+"/"+s,data:JSON.stringify(s)}},t.prototype.update=function(e,i,s,r){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(s)}},t.prototype.batchRequest=function(e,i,s){var r=this,n=s.guid=P.getGuid(this.options.batchPre),o=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);s.url=this.resourceTableName?this.resourceTableName:s.url;for(var l=[],h=function(g,y){i.addedRecords.forEach(function(b,C){var S={method:"POST ",url:function(I,A,T){return""},data:function(I,A){return JSON.stringify(I[A])+`

`}};l.push("--"+n),l.push("Content-Type: application/http; msgtype=request",""),l.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||s.url)+S.url(i.addedRecords,g,s.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",b?JSON.stringify(b):"")})},p=0,c=i.addedRecords.length;p<c;p++)h(p);for(var d=function(g,y){i.changedRecords.forEach(function(b,C){var S={method:r.options.updateType+" ",url:function(I,A,T){return""},data:function(I,A){return JSON.stringify(I[A])+`

`}};l.push("--"+n),l.push("Content-Type: application/http; msgtype=request",""),l.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||s.url)+S.url(i.changedRecords,g,s.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",b?JSON.stringify(b):"")})},p=0,c=i.changedRecords.length;p<c;p++)d(p);for(var f=function(g,y){i.deletedRecords.forEach(function(b,C){var S={mtd:"DELETE ",url:function(I,A,T){var L=P.getObject(T,I[A]);if(typeof L=="number"||P.parse.isGuid(L))return"/"+L;if(L instanceof Date){var _=I[A][T];return"/"+_.toJSON()}else return"/'"+L+"'"},data:function(I,A){return""}};l.push("--"+n),l.push("Content-Type: application/http; msgtype=request",""),l.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||s.url)+S.url(i.deletedRecords,g,s.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",b?JSON.stringify(b):"")})},p=0,c=i.deletedRecords.length;p<c;p++)f(p);return l.push("--"+n+"--",""),{type:"POST",url:o,contentType:"multipart/mixed; boundary="+n,data:l.join(`\r
`)}},t.prototype.beforeSend=function(e,i,s){i.headers.set("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,i,s,r,n,o){var l="pvtData",h=n&&n[l],p=null,c={};if(n&&n.type.toLowerCase()!=="post"){var d=r&&n.fetchRequest.headers.get("DataServiceVersion"),f=d&&parseInt(d,10)||2;s&&s.isCountRequired&&(P.isNull(e.Count)||(p=e.Count)),f<3&&e.Items&&(e=e.Items),c.count=p,c.result=e,this.getAggregateResult(h,e,c,null,s)}return c.result=c.result||e,P.isNull(p)?c.result:{result:c.result,count:c.count,aggregates:c.aggregates}},t})(vr);(function(a){Vi(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.processQuery=function(e,i,s){var r=new vi().processQuery(e,i,s),n="data",o=P.parse.parseJson(r[n]),l={},h="value";if(o.param)for(var p=0;p<o.param.length;p++){var c=o.param[p],d=Object.keys(c)[0];l[d]=c[d]}l[h]=o;var f="pvtData",g="url";return{data:JSON.stringify(l,P.parse.jsonDateReplacer),url:r[g],pvtData:r[f],type:"POST",contentType:"application/json; charset=utf-8"}},t})(vi);var yc=(function(a){Vi(t,a);function t(){return a.call(this)||this}return t.prototype.insert=function(e,i,s,r,n){return this.pvt.position=n,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify($({},{value:i,table:s,action:"insert"},P.getAddParams(this,e,r)))}},t.prototype.remove=function(e,i,s,r,n){return a.prototype.remove.call(this,e,i,s),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify($({},{key:s,keyColumn:i,table:r,action:"remove"},P.getAddParams(this,e,n)))}},t.prototype.update=function(e,i,s,r,n){return this.updateType="update",this.updateKey=i,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify($({},{value:s,action:"update",keyColumn:i,key:s[i],table:r},P.getAddParams(this,e,n)))}},t.prototype.processResponse=function(e,i,s,r,n,o,l){var h,p=n?JSON.parse(n.data):e;if(e=p.action==="batch"?P.parse.parseJson(e):e,this.updateType==="add"&&a.prototype.insert.call(this,i,e,null,null,this.pvt.position),this.updateType==="update"&&a.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(h=0;h<e.added.length;h++)a.prototype.insert.call(this,i,e.added[h]);if(e.changed)for(h=0;h<e.changed.length;h++)a.prototype.update.call(this,i,l.key,e.changed[h]);if(e.deleted)for(h=0;h<e.deleted.length;h++)a.prototype.remove.call(this,i,l.key,e.deleted[h]);return e},t.prototype.batchRequest=function(e,i,s,r,n){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify($({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:s.url,key:s.key},P.getAddParams(this,e,r)))}},t.prototype.addParams=function(e){var i=new vi;i.addParams(e)},t.prototype.beforeSend=function(e,i,s){},t})(ka),lf=(function(a){Vi(t,a);function t(e){var i=a.call(this)||this;return i.options=$({},i.options,{getData:function(){},addRecord:function(){},updateRecord:function(){},deleteRecord:function(){},batchUpdate:function(){}}),$(i.options,e||{}),i}return t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t})(vi);(function(a){Vi(t,a);function t(e){var i=a.call(this)||this;return i.opt=e,i.schema=i.opt.response,i.query=i.opt.query,i.getVariables=i.opt.getVariables?i.opt.getVariables:function(){},i.getQuery=function(){return i.query},i}return t.prototype.getModuleName=function(){return"GraphQLAdaptor"},t.prototype.processQuery=function(e,i){var s=a.prototype.processQuery.apply(this,arguments),r=JSON.parse(s.data),n=["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"],o={},l="searchwhereparams";n.filter(function(c){o[c]=l.indexOf(c)>-1?JSON.stringify(r[c]):r[c]});var h=this.getVariables()||{};h.datamanager=o;var p=JSON.stringify({query:this.getQuery(),variables:h});return s.data=p,s},t.prototype.processResponse=function(e,i,s,r,n){var o=e,l,h,p=H(this.schema.result,o.data);this.schema.count&&(l=H(this.schema.count,o.data)),this.schema.aggregates&&(h=H(this.schema.aggregates,o.data),h=u(h)?h:P.parse.parseJson(h));var c=n.pvtData||{},d={result:p,aggregates:h},f=d;return c&&c.groups&&c.groups.length&&this.getAggregateResult(c,f,d,null,s),u(l)?d.result:{result:d.result,count:l,aggregates:h}},t.prototype.insert=function(){var e=a.prototype.insert.apply(this,arguments);return this.generateCrudData(e,"insert")},t.prototype.update=function(){var e=a.prototype.update.apply(this,arguments);return this.generateCrudData(e,"update")},t.prototype.remove=function(){var e=a.prototype.remove.apply(this,arguments);return this.generateCrudData(e,"remove")},t.prototype.batchRequest=function(e,i,s,r,n){var o=a.prototype.batchRequest.apply(this,arguments),l=JSON.parse(o.data);return l.key=s.key,o.data=JSON.stringify(l),this.generateCrudData(o,"batch")},t.prototype.generateCrudData=function(e,i){var s=JSON.parse(e.data);return e.data=JSON.stringify({query:this.opt.getMutation(i),variables:s}),e},t})(vi);var hf=(function(a){Vi(t,a);function t(e,i,s){var r=a.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,u(e)||(r.cacheAdaptor=e),r.pageSize=s,r.guidId=P.getGuid("cacheAdaptor");var n={keys:[],results:[]};window.localStorage.setItem(r.guidId,JSON.stringify(n));var o=r.guidId;return u(i)||setInterval(function(){for(var l=P.parse.parseJson(window.localStorage.getItem(o)),h=[],p=0;p<l.results.length;p++){var c=+new Date,d=+new Date(l.results[p].timeStamp);l.results[p].timeStamp=c-d,c-d>i&&h.push(p)}for(var p=0;p<h.length;p++)l.results.splice(h[p],1),l.keys.splice(h[p],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(l))},i),r}return t.prototype.generateKey=function(e,i){var s=this.getQueryRequest(i),r=se.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),n=e,o="onPage";o in r&&(n+=r[o].pageIndex),s.sorts.forEach(function(d){n+=d.e.direction+d.e.fieldName}),s.groups.forEach(function(d){n+=d.e.fieldName}),s.searches.forEach(function(d){n+=d.e.searchKey});for(var l=0;l<s.filters.length;l++){var h=s.filters[l];if(h.e.isComplex){var p=i.clone();p.queries=[];for(var c=0;c<h.e.predicates.length;c++)p.queries.push({fn:"onWhere",e:h.e.predicates[c],filter:i.queries.filter});n+=h.e.condition+this.generateKey(e,p)}else n+=h.e.field+h.e.operator+h.e.value}return n},t.prototype.processQuery=function(e,i,s){var r=this.generateKey(e.dataSource.url,i),n=P.parse.parseJson(window.localStorage.getItem(this.guidId)),o=n?n.results[n.keys.indexOf(r)]:null;return o!=null&&!this.isCrudAction&&!this.isInsertAction?o:(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},t.prototype.processResponse=function(e,i,s,r,n,o){if(this.isInsertAction||n&&this.cacheAdaptor.options.batch&&P.endsWith(n.url,this.cacheAdaptor.options.batch)&&n.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(e,i,s,r,n,o);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=s?this.generateKey(i.dataSource.url,s):i.dataSource.url,h={};h=P.parse.parseJson(window.localStorage.getItem(this.guidId));var p=h.keys.indexOf(l);for(p!==-1&&(h.results.splice(p,1),h.keys.splice(p,1)),h.results[h.keys.push(l)-1]={keys:l,result:e.result,timeStamp:new Date,count:e.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),e},t.prototype.beforeSend=function(e,i,s){!u(this.cacheAdaptor.options.batch)&&P.endsWith(s.url,this.cacheAdaptor.options.batch)&&s.type.toLowerCase()==="post"&&i.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||i.headers.set("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,i,s,r){return this.isCrudAction=!0,this.cacheAdaptor.update(e,i,s,r)},t.prototype.insert=function(e,i,s){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,i,s)},t.prototype.remove=function(e,i,s,r){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,i,s,r)},t.prototype.batchRequest=function(e,i,s){return this.cacheAdaptor.batchRequest(e,i,s)},t})(vi),On=function(a,t,e,i){return new(e||(e=Promise))(function(s,r){function n(h){try{l(i.next(h))}catch(p){r(p)}}function o(h){try{l(i.throw(h))}catch(p){r(p)}}function l(h){h.done?s(h.value):new e(function(p){p(h.value)}).then(n,o)}l((i=i.apply(a,t||[])).next())})},Bn=function(a,t){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,s,r,n;return n={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function o(h){return function(p){return l([h,p])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(r=h[0]&2?s.return:h[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,h[1])).done)return r;switch(s=0,r&&(h=[h[0]&2,r.value]),h[0]){case 0:case 1:r=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,s=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){e.label=h[1];break}if(h[0]===6&&e.label<r[1]){e.label=r[1],r=h;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(h);break}r[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(a,e)}catch(p){h=[6,p],s=0}finally{i=r=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},N=(function(){function a(t,e,i,s){var r=this;this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isEnableCache=!1,this.isInitialLoad=!0,this.isEnableCache=!1,s&&s.applyPostRequestMiddlewares&&(this.applyPostRequestMiddlewares=s.applyPostRequestMiddlewares),s&&s.applyPreRequestMiddlewares&&(this.applyPreRequestMiddlewares=s.applyPreRequestMiddlewares),!t&&!this.dataSource&&(t=[]),i=i||t.adaptor,t&&t.timeZoneHandling===!1&&(this.timeZoneHandling=t.timeZoneHandling);var n;if(t instanceof Array?n={json:t,offline:!0}:typeof t=="object"?(t.json||(t.json=[]),t.enablePersistence||(t.enablePersistence=!1),t.id||(t.id=""),t.ignoreOnPersist||(t.ignoreOnPersist=[]),n={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,enableCache:t.enableCache,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:t.offline!==void 0?t.offline:t.adaptor instanceof yc||t.adaptor instanceof lf?!1:!t.url,requiresFormat:t.requiresFormat,enablePersistence:t.enablePersistence,id:t.id,ignoreOnPersist:t.ignoreOnPersist}):P.throwError("DataManager: Invalid arguments"),n.requiresFormat===void 0&&!P.isCors()&&(n.requiresFormat=u(n.crossDomain)?!0:n.crossDomain),n.dataType===void 0&&(n.dataType="json"),this.isEnableCache=n.enableCache,this.dataSource=n,this.defaultQuery=e,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new vr,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new se),this.ready.then(function(l){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=l.result,r.adaptor=new ka})):this.adaptor=n.offline?new ka:new vr,!n.jsonp&&this.adaptor instanceof vr&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,this.isEnableCache){this.guidId=P.getGuid("cacheAdaptor");var o={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(o))}return n.enableCaching&&(this.adaptor=new hf(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return Object.defineProperty(a.prototype,"moduleName",{get:function(){return"datamanager"},enumerable:!0,configurable:!0}),a.prototype.getPersistedData=function(t){var e=localStorage.getItem(t||this.dataSource.id);return JSON.parse(e)},a.prototype.setPersistData=function(t,e,i){localStorage.setItem(e||this.dataSource.id,JSON.stringify(i||this.persistQuery))},a.prototype.setPersistQuery=function(t){var e=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(r){if(e.dataSource.ignoreOnPersist&&e.dataSource.ignoreOnPersist.length&&r.fn&&e.dataSource.ignoreOnPersist.some(function(l){return r.fn===l}))return!1;if(r.fn==="onWhere"){var n=r.e;if(n&&n.isComplex&&n.predicates instanceof Array){var o=n.predicates.map(function(l){if(l.predicates&&l.predicates instanceof Array){var h=l.predicates.map(function(b){var C=b.field,S=b.operator,I=b.value,A=b.ignoreCase,T=b.ignoreAccent,L=b.matchCase;return new we(C,S,I,A,T,L)});return l.condition==="and"?we.and(h):we.or(h)}else{var p=l.field,c=l.operator,d=l.value,f=l.ignoreCase,g=l.ignoreAccent,y=l.matchCase;return new we(p,c,d,f,g,y)}});r.e=new we(o[0],n.condition,o.slice(1))}}return!0});var s=$(new se,this.persistQuery);return this.isInitialLoad=!1,s}else return this.persistQuery=t,this.isInitialLoad=!1,t},a.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},a.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof se)&&P.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||P.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),t=t||this.defaultQuery;var e=this.adaptor.processQuery(this,t);if(t.subQuery){var i=t.subQuery.fromTable,s=t.subQuery.lookups,r=t.isCountRequired?e.result:e;s&&s instanceof Array&&P.buildHierarchy(t.subQuery.fKey,i,r,s,t.subQuery.key);for(var n=0;n<r.length;n++)r[n][i]instanceof Array&&(r[n]=$({},{},r[n]),r[n][i]=this.adaptor.processResponse(t.subQuery.using(new a(r[n][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(e,this,t)},a.prototype.executeQuery=function(t,e,i,s){var r=this,n="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),typeof t=="function"&&(s=i,i=e,e=t,t=null),t||(t=this.defaultQuery),t instanceof se||P.throwError("DataManager - executeQuery() : A query is required to execute");var o=new Ut,l={query:t};if(!this.dataSource.offline&&this.dataSource.url!==void 0&&this.dataSource.url!==""||!u(this.adaptor[n])||this.isCustomDataAdaptor(this.adaptor)){var h=this.isEnableCache?this.processQuery(t):this.adaptor.processQuery(this,t);u(this.adaptor[n])?!u(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,o,l,t)):(l=a.getDeferedArgs(t,h,l),o.resolve(l)):this.adaptor[n](h,o,l,t)}else a.nextTick(function(){var p=r.executeLocal(t);l=a.getDeferedArgs(t,p,l),o.resolve(l)});return(e||i)&&o.promise.then(e,i),s&&o.promise.then(s,s),o.promise},a.prototype.getQueryRequest=function(t){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=se.filterQueries(t.queries,"onSortBy"),e.groups=se.filterQueries(t.queries,"onGroup"),e.filters=se.filterQueries(t.queries,"onWhere"),e.searches=se.filterQueries(t.queries,"onSearch"),e.aggregates=se.filterQueries(t.queries,"onAggregates"),e},a.prototype.generateKey=function(t,e){var i=this.getQueryRequest(e),s=se.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=t,n="onPage";i.sorts.forEach(function(d){r+=d.e.direction+d.e.fieldName}),i.groups.forEach(function(d){r+=d.e.fieldName}),i.searches.forEach(function(d){r+=d.e.searchKey});for(var o=0;o<i.filters.length;o++){var l=i.filters[o];if(l.e.isComplex){var h=e.clone();h.queries=[];for(var p=0;p<l.e.predicates.length;p++)h.queries.push({fn:"onWhere",e:l.e.predicates[p],filter:e.queries.filter});r+=l.e.condition+this.generateKey(t,h)}else r+=l.e.field+l.e.operator+l.e.value}if(!u(this.previousCacheQuery)&&this.previousCacheQuery!==r){var c={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(c))}return this.previousCacheQuery=r,n in s&&(r+=s[n].pageIndex),r},a.prototype.processQuery=function(t){var e=this.generateKey(this.dataSource.url,t),i=JSON.parse(window.localStorage.getItem(this.guidId)),s=i?i.results[i.keys.indexOf(e)]:null;return s!=null?P.parse.parseJson(s):this.adaptor.processQuery(this,t)},a.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},a.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},a.prototype.extendRequest=function(t,e,i){return $({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},a.prototype.makeRequest=function(t,e,i,s){var r=this,n=!!s.subQuerySelector,o=function(b){i.error=b,e.reject(i)},l=function(b,C,S,I,A,T,L){i.xhr=S,i.count=C?parseInt(C.toString(),10):0,i.result=b,i.request=I,i.aggregates=T,i.actual=A,i.virtualSelectRecords=L,e.resolve(i)},h=function(b,C){var S=new Ut,I={parent:i};s.subQuery.isChild=!0;var A=r.adaptor.processQuery(r,s.subQuery,b?r.adaptor.processResponse(b):C),T=r.makeRequest(A,S,I,s.subQuery);return n||S.then(function(L){b&&(P.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,b,L,s.subQuery.key),l(b,L.count,L.xhr))},o),T},p=function(b,C){if(r.isGraphQLAdaptor(r.adaptor)&&!u(b.errors))return o(b.errors);r.isCustomDataAdaptor(r.adaptor)&&(C=$({},r.fetchReqOption,C)),C.contentType.indexOf("xml")===-1&&r.dateParse&&!r.isEnableCache&&(b=P.parse.parseJson(b));var S,I=r.afterReponseRequest(b);I.then(function(A){if(S=r.adaptor.processResponse(A,r,s,C.fetchRequest,C),r.isEnableCache){var T=s?r.generateKey(r.dataSource.url,s):r.dataSource.url,L={};L=JSON.parse(window.localStorage.getItem(r.guidId));var _=L.keys.indexOf(T);_!==-1&&(L.results.splice(_,1),L.keys.splice(_,1)),L.results[L.keys.push(T)-1]={keys:T,result:S.result,timeStamp:new Date,count:S.count},window.localStorage.setItem(r.guidId,JSON.stringify(L))}C.contentType.indexOf("xml")===-1&&r.dateParse&&r.isEnableCache&&(S=P.parse.parseJson(S));var X=0,re=null,ye="virtualSelectRecords",V=A[ye];if(s.isCountRequired&&(X=S.count,re=S.aggregates,S=S.result),!s.subQuery){l(S,X,C.fetchRequest,C.type,A,re,V);return}n||h(S,C)}).catch(function(A){return r.dataManagerFailure(A,e,i)})},c=this.extendRequest(t,p,o);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=c;var g=c;this.adaptor.options.getData({data:g.data,onSuccess:g.onSuccess,onFailure:g.onFailure})}else{var d=this.useMiddleware(c),f;d.then(function(b){f=new eo(c),f.beforeSend=function(){r.beforeSend(f.fetchRequest,f,b)},c=f.send(),c.catch(function(C){return!0}),r.requests.push(f)}).catch(function(b){return r.dataManagerFailure(b,e,i)})}if(n){var d=void 0,y=s.subQuerySelector.call(this,{query:s.subQuery,parent:s});y&&y.length?(d=Promise.all([c,h(null,y)]),d.then(function(){for(var C=[],S=0;S<arguments.length;S++)C[S]=arguments[S];var I=C[0],A=r.adaptor.processResponse(I[0],r,s,r.requests[0].fetchRequest,r.requests[0]),T=0;s.isCountRequired&&(T=A.count,A=A.result);var L=r.adaptor.processResponse(I[1],r,s.subQuery,r.requests[1].fetchRequest,r.requests[1]);T=0,s.subQuery.isCountRequired&&(T=L.count,L=L.result),P.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,A,L,s.subQuery.key),n=!1,l(A,T,r.requests[0].fetchRequest)})):n=!1}return c},a.prototype.dataManagerFailure=function(t,e,i){i.error=t,e.reject(i)},a.prototype.afterReponseRequest=function(t){return On(this,void 0,void 0,function(){var e,i;return Bn(this,function(s){switch(s.label){case 0:return[4,this.applyPostRequestMiddlewares(t)];case 1:return e=s.sent(),i=new Ut,i.resolve(e),[2,i.promise]}})})},a.prototype.applyPostRequestMiddlewares=function(t){return On(this,void 0,void 0,function(){return Bn(this,function(e){return[2,t]})})},a.prototype.useMiddleware=function(t){return On(this,void 0,void 0,function(){var e,i;return Bn(this,function(s){switch(s.label){case 0:return[4,this.applyPreRequestMiddlewares(t)];case 1:return e=s.sent(),i=new Ut,i.resolve(e),[2,i.promise]}})})},a.prototype.applyPreRequestMiddlewares=function(t){return On(this,void 0,void 0,function(){return Bn(this,function(e){return[2,t]})})},a.prototype.beforeSend=function(t,e,i){this.adaptor.beforeSend(this,t,e);var s=[];this.dataSource.headers&&(s=s.concat(this.dataSource.headers));var r;i&&i.headers&&(s=s.concat(i.headers));for(var n=0;s&&n<s.length;n++){r=[];for(var o=Object.keys(s[n]),l=0,h=o;l<h.length;l++){var p=h[l];r.push(p),t.headers.set(p,s[n][p])}}},a.prototype.saveChanges=function(t,e,i,s,r){var n=this;i instanceof se&&(s=i,i=null);var o={url:i,key:e||this.dataSource.key},l=this.adaptor.batchRequest(this,t,o,s||new se,r),h="dofetchRequest";if(this.dataSource.offline)return l;if(u(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(l,this.adaptor.options.batchUpdate,t);var p=new Ut,c=new eo(l);return c.beforeSend=function(){n.beforeSend(c.fetchRequest,c)},c.onSuccess=function(d,f){n.isGraphQLAdaptor(n.adaptor)&&(u(d.errors)||c.onFailure(JSON.stringify(d.errors))),p.resolve(n.adaptor.processResponse(d,n,null,f.fetchRequest,f,t,o))},c.onFailure=function(d){p.reject([{error:d}])},c.send().catch(function(d){return!0}),p.promise}else return this.adaptor[h](l)},a.prototype.insert=function(t,e,i,s){e instanceof se&&(i=e,e=null);var r=this.adaptor.insert(this,t,e,i,s),n="dofetchRequest";return this.dataSource.offline?r:u(this.adaptor[n])?this.dofetchRequest(r,this.adaptor.options.addRecord):this.adaptor[n](r)},a.prototype.remove=function(t,e,i,s){typeof e=="object"&&(e=P.getObject(t,e)),i instanceof se&&(s=i,i=null);var r=this.adaptor.remove(this,t,e,i,s),n="dofetchRequest";if(this.dataSource.offline)return r;if(u(this.adaptor[n])){var o=this.adaptor.options.deleteRecord;return this.dofetchRequest(r,o)}else return this.adaptor[n](r)},a.prototype.update=function(t,e,i,s,r){i instanceof se&&(s=i,i=null),this.isEnableCache&&(this.cacheQuery=this.generateKey(this.dataSource.url,s));var n=this.adaptor.update(this,t,e,i,s,r),o="dofetchRequest";if(this.dataSource.offline)return n;if(u(this.adaptor[o])){var l=this.adaptor.options.updateRecord;return this.dofetchRequest(n,l)}else return this.adaptor[o](n)},a.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="CustomDataAdaptor"},a.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="GraphQLAdaptor"},a.prototype.successFunc=function(t,e,i){if(this.isGraphQLAdaptor(this.adaptor)){var s=typeof t=="object"?t:JSON.parse(t);u(s.errors)||this.failureFunc(JSON.stringify(s.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=$({},this.fetchReqOption,e));try{P.parse.parseJson(t)}catch{t=[]}if(this.isEnableCache){var r=JSON.parse(e.data);if(r.action==="insert"||r.action==="remove"){var n={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(n))}else if(r.action==="update"){var o=JSON.parse(window.localStorage.getItem(this.guidId)),s=o?o.results[o.keys.indexOf(this.cacheQuery)]:null;if(s&&s.result){for(var l=s.result,h=0;h<l.length;h++)if(l[h][r.keyColumn]===r.key){l[h]=r.value,window.localStorage.setItem(this.guidId,JSON.stringify(o));break}}}}t=this.adaptor.processResponse(P.parse.parseJson(t),this,null,e.fetchRequest,e,i),this.fetchDeffered.resolve(t)},a.prototype.failureFunc=function(t){this.isEnableCache&&(this.cacheQuery=""),this.fetchDeffered.reject([{error:t}])},a.prototype.dofetchRequest=function(t,e,i){var s=this;if(t=$({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.fetchDeffered=new Ut,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this),changes:i});else{var r=this.useMiddleware(t),n;r.then(function(o){n=new eo(t),n.beforeSend=function(){s.beforeSend(n.fetchRequest,n,o)},n.onSuccess=s.successFunc.bind(s),n.onFailure=s.failureFunc.bind(s),t=n.send(),t.catch(function(l){return!0})}).catch(function(o){return s.dataManagerFailure(o,s.fetchDeffered,{})})}return this.fetchDeffered.promise},a.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},a})(),Ut=(function(){function a(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return a})(),Be={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"},St;(function(a){a.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:a.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function i(V,q,z,U,ie){var J=$({},e,z),K=$({},t,J.ariaAttributes),Y=g(q).typeof;return Y==="string"||Y==="number"?s(V,q,U,z,ie):o(V,q,z,K.level,U,ie)}a.createList=i;function s(V,q,z,U,ie){var J=r(V,q,z,U,ie);return re(V,J,null,U)}a.createListFromArray=s;function r(V,q,z,U,ie){var J=[],K=$({},e,U);Be=L(K.moduleName);for(var Y=I(),ne=0;ne<q.length;ne++)if(!u(q[ne])){var de=void 0;if(K.itemCreating&&typeof K.itemCreating=="function"){var Ae={dataSource:q,curData:q[ne],text:q[ne],options:K};K.itemCreating(Ae)}if(z?de=T(V,q[ne],void 0,null,null,[],null,Y,ne,U):de=X(V,q[ne],void 0,null,null,U,ie),K.itemCreated&&typeof K.itemCreated=="function"){var Ae={dataSource:q,curData:q[ne],text:q[ne],item:de,options:K};K.itemCreated(Ae)}J.push(de)}return J}a.createListItemFromArray=r;function n(V,q,z,U,ie,J){var K=$({},e,z);Be=L(K.moduleName);var Y=J&&(J.getModuleName()==="listview"||J.getModuleName()==="multiselect")?K.fields:$({},a.defaultMappedFields,K.fields),ne=$({},t,K.ariaAttributes),de,Ae=[];U&&(ne.level=U);var xe=[],ge,Ee;q&&q.length&&!u(g(q).item)&&!Object.prototype.hasOwnProperty.call(g(q).item,Y.id)&&(de=I());for(var De=0;De<q.length;De++){var ee=jr(q[De],Y);if(!u(q[De])){if(K.itemCreating&&typeof K.itemCreating=="function"){var be={dataSource:q,curData:q[De],text:ee[Y.text],options:K,fields:Y};K.itemCreating(be)}var me=q[De];K.itemCreating&&typeof K.itemCreating=="function"&&(ee=jr(q[De],Y)),Object.prototype.hasOwnProperty.call(ee,Y.id)&&!u(ee[Y.id])&&(de=ee[Y.id]);var Ye=[];if(K.showCheckBox&&(K.itemNavigable&&(ee[Y.url]||ee[Y.urlAttributes])?Ae.push(V("input",{className:Be.check,attrs:{type:"checkbox"}})):Ye.push(V("input",{className:Be.check,attrs:{type:"checkbox"}}))),ie===!0){if(K.showIcon&&Object.prototype.hasOwnProperty.call(ee,Y.iconCss)&&!u(ee[Y.iconCss])&&Ye.push(V("span",{className:Be.icon+" "+ee[Y.iconCss]})),ge=T(V,me,ee,Y,K.itemClass,Ye,!!(Object.prototype.hasOwnProperty.call(me,"isHeader")&&me.isHeader),de,De,z),Ee=ge.querySelector("."+Be.anchorWrap),Object.prototype.hasOwnProperty.call(ee,Y.tooltip)){var ot=ee[Y.tooltip];if(z&&z.enableHtmlSanitizer)ot=Kt.sanitize(ot);else{var gt=V("span",{innerHTML:ot});ot=gt.innerText,gt=null}ge.setAttribute("title",ot)}K.itemNavigable&&Ae.length&&Ot(Ae,ge.firstElementChild)}else{if(ge=X(V,me,ee,Y,K.itemClass,z,J),ge.classList.add(Be.level+"-"+ne.level),ge.setAttribute("aria-level",ne.level.toString()),(ne.groupItemRole==="presentation"||ne.itemRole==="presentation")&&ge.removeAttribute("aria-level"),Ee=ge.querySelector("."+Be.anchorWrap),Object.prototype.hasOwnProperty.call(ee,Y.tooltip)){var ot=ee[Y.tooltip];if(z&&z.enableHtmlSanitizer)ot=Kt.sanitize(ot);else{var gt=V("span",{innerHTML:ot});ot=gt.innerText,gt=null}ge.setAttribute("title",ot)}if(Object.prototype.hasOwnProperty.call(ee,Y.htmlAttributes)&&ee[Y.htmlAttributes]){var fe=ee[Y.htmlAttributes];"class"in fe&&typeof fe.class=="string"&&fe.class.trim()===""&&delete fe.class,y(ge,fe)}if(Object.prototype.hasOwnProperty.call(ee,Y.enabled)&&ee[Y.enabled]===!1&&ge.classList.add(Be.disabled),Object.prototype.hasOwnProperty.call(ee,Y.isVisible)&&ee[Y.isVisible]===!1&&(ge.style.display="none"),Object.prototype.hasOwnProperty.call(ee,Y.imageUrl)&&!u(ee[Y.imageUrl])&&!K.template){var ui={src:ee[Y.imageUrl],alt:u(ee.name)?"Displaying Image":"Displaying "+ee.name+" Image"};Oi(ui,ee[Y.imageAttributes]);var bi=V("img",{className:Be.image,attrs:ui});Ee?Ee.insertAdjacentElement("afterbegin",bi):Ot([bi],ge.firstElementChild)}if(K.showIcon&&Object.prototype.hasOwnProperty.call(ee,Y.iconCss)&&!u(ee[Y.iconCss])&&!K.template){var Zt=V("div",{className:Be.icon+" "+ee[Y.iconCss]});Ee?Ee.insertAdjacentElement("afterbegin",Zt):Ot([Zt],ge.firstElementChild)}Ye.length&&Ot(Ye,ge.firstElementChild),K.itemNavigable&&Ae.length&&Ot(Ae,ge.firstElementChild),A(V,ee,Y,q,K,ge,ne.level)}if(Ee&&x([ge],[Be.navigable]),K.itemCreated&&typeof K.itemCreated=="function"){var be={dataSource:q,curData:q[De],text:ee[Y.text],item:ge,options:K,fields:Y};K.itemCreated(be)}Ae=[],xe.push(ge)}}return xe}a.createListItemFromJson=n;function o(V,q,z,U,ie,J){var K=$({},e,z),Y=n(V,q,z,U,ie,J);return re(V,Y,K.listClass,z)}a.createListFromJson=o;function l(V,q,z){if(Be=L(e.moduleName),!(!V||!V.length)){var U,ie,J=Array.prototype.slice.call(V);for(q?ie=h(q,J):ie=z===!0?J.length:-1,U=J[ie+(z===!0?-1:1)];U&&(!cc(U)||U.classList.contains(Be.disabled));)ie=ie+(z===!0?-1:1),U=J[ie];return U}}a.getSiblingLI=l;function h(V,q){if(!(!q||!V)){var z=q;return z=Array.prototype.slice.call(q),z.indexOf(V)}}a.indexOf=h;function p(V,q,z){z===void 0&&(z="None");var U=$({},a.defaultMappedFields,q),ie=new se().group(U.groupBy);ie=c(z,"key",ie);var J=d(V,ie);V=[];for(var K=0;K<J.length;K++){var Y=J[K].items,ne={},de="isHeader";ne[U.text]=J[K].key,ne[""+de]=!0;var Ae=U.text;Ae==="id"&&(Ae="text",ne[""+Ae]=J[K].key),ne._id="group-list-item-"+(J[K].key?J[K].key.toString().trim():"undefined"),ne.items=Y,V.push(ne);for(var xe=0;xe<Y.length;xe++)V.push(Y[xe])}return V}a.groupDataSource=p;function c(V,q,z){if(z===void 0&&(z=new se),V==="Ascending")z.sortBy(q,"ascending",!0);else if(V==="Descending")z.sortBy(q,"descending",!0);else for(var U=0;U<z.queries.length;U++)z.queries[U].fn==="onSortBy"&&z.queries.splice(U,1);return z}a.addSorting=c;function d(V,q){return new N(V).executeLocal(q)}a.getDataSource=d;function f(V,q){var z=$({},e,q),U=$({},a.defaultMappedFields,z.fields),ie=V.cloneNode(!0),J=[];ie.classList.add("json-parent");var K=ie.querySelectorAll(".json-parent>li");ie.classList.remove("json-parent");for(var Y=0;Y<K.length;Y++){for(var ne=K[Y],de=ne.querySelector("a"),Ae=ne.querySelector("ul"),xe={},ge=de?de.childNodes:ne.childNodes,Ee=Object.keys(ge),De=0;De<ge.length;De++)ge[Number(Ee[De])].hasChildNodes()||(xe[U.text]=ge[Number(Ee[De])].textContent);var ee=b(ne);ee.id?(xe[U.id]=ee.id,delete ee.id):xe[U.id]=I(),Object.keys(ee).length&&(xe[U.htmlAttributes]=ee),de&&(ee=b(de),Object.keys(ee).length&&(xe[U.urlAttributes]=ee)),Ae&&(xe[U.child]=f(Ae,q)),J.push(xe)}return J}a.createJsonFromElement=f;function g(V){for(var q={typeof:null,item:null},z=0;z<V.length;z++)if(!u(V[z]))return q={typeof:typeof V[z],item:V[z]};return q}function y(V,q){var z={};Oi(z,q),z.class&&(x([V],z.class.split(" ")),delete z.class),G(V,z)}function b(V){for(var q={},z=V.attributes,U=0;U<z.length;U++)q[z[U].nodeName]=z[U].nodeValue;return q}function C(V,q,z,U,ie,J){Be=L(e.moduleName);for(var K=V("ul",{className:Be.ul,attrs:{role:"presentation"}}),Y=$({},e,ie),ne=$({},a.defaultMappedFields,U),de=Pn(q),Ae=[],xe,ge=I(),Ee=0;Ee<z.length;Ee++){var De=jr(z[Ee],ne),ee=z[Ee],be=ee.isHeader;if(typeof z[Ee]=="string"||typeof z[Ee]=="number"?xe=ee:xe=De[ne.value],Y.itemCreating&&typeof Y.itemCreating=="function"){var me={dataSource:z,curData:ee,text:xe,options:Y,fields:ne};Y.itemCreating(me)}Y.itemCreating&&typeof Y.itemCreating=="function"&&(De=jr(z[Ee],ne),typeof z[Ee]=="string"||typeof z[Ee]=="number"?xe=ee:xe=De[ne.value]);var Ye=V("li",{id:ge+"-"+Ee,className:be?Be.group:Be.li,attrs:{role:"presentation"}});if(be)typeof z[Ee]=="string"||typeof z[Ee]=="number"?Ye.innerText=ee:Ye.innerText=De[ne.text];else{var ot=be?Y.groupTemplateID:Y.templateID;if(be)if(J&&J.getModuleName()!=="listview"){var gt=de(ee,J,"headerTemplate",ot,!!Y.isStringTemplate,null,Ye);gt&&Ie(gt,Ye)}else Ie(de(ee,J,"headerTemplate",ot,!!Y.isStringTemplate),Ye);else if(J&&J.getModuleName()!=="listview"){var gt=de(ee,J,"template",ot,!!Y.isStringTemplate,null,Ye);gt&&Ie(gt,Ye)}else Ie(de(ee,J,"template",ot,!!Y.isStringTemplate),Ye);Ye.setAttribute("data-value",u(xe)?"null":xe),Ye.setAttribute("role","option")}if(Y.itemCreated&&typeof Y.itemCreated=="function"){var me={dataSource:z,curData:ee,text:xe,item:Ye,options:Y,fields:ne};Y.itemCreated(me)}Ae.push(Ye)}return Ie(Ae,K),K}a.renderContentTemplate=C;function S(V,q,z,U,ie,J){for(var K=Pn(V),Y=$({},a.defaultMappedFields,z),ne=$({},e,ie),de=Y.groupBy,Ae=0,xe=U;Ae<xe.length;Ae++){var ge=xe[Ae],Ee={};if(Ee[""+de]=ge.textContent,ge.innerHTML="",J&&J.getModuleName()!=="listview"){var De=K(Ee,J,"groupTemplate",ne.groupTemplateID,!!ne.isStringTemplate,null,ge);De&&Ie(De,ge)}else Ie(K(Ee,J,"groupTemplate",ne.groupTemplateID,!!ne.isStringTemplate),ge)}return U}a.renderGroupTemplate=S;function I(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}a.generateId=I;function A(V,q,z,U,ie,J,K){var Y=q[z.child]||[],ne=q[z.hasChildren];if(Y.length&&(ne=!0,J.classList.add(Be.hasChild),ie.processSubChild)){var de=o(V,Y,ie,++K);J.appendChild(de)}if(ie.expandCollapse&&ne&&!ie.template){J.firstElementChild.classList.add(Be.iconWrapper);var Ae=ie.expandIconPosition==="Left"?Ot:Ie;Ae([V("div",{className:"e-icons "+ie.expandIconClass})],J.querySelector("."+Be.textContent))}}function T(V,q,z,U,ie,J,K,Y,ne,de){var Ae=$({},e,de),xe=$({},t,Ae.ariaAttributes),ge=q,Ee=q,De;typeof q!="string"&&typeof q!="number"&&typeof q!="boolean"&&(De=q,ge=typeof z[U.text]=="boolean"||typeof z[U.text]=="number"?z[U.text]:z[U.text]||"",Ee=z[U.value]);var ee;!u(De)&&!u(z[U.id])&&z[U.id]!==""?ee=Y:ee=Y+"-"+ne;var be=V("li",{className:(K===!0?Be.group:Be.li)+" "+(u(ie)?"":ie),id:ee,attrs:xe.groupItemRole!==""&&xe.itemRole!==""?{role:K===!0?xe.groupItemRole:xe.itemRole}:{}});return De&&Object.prototype.hasOwnProperty.call(z,U.enabled)&&z[U.enabled].toString()==="false"&&be.classList.add(Be.disabled),de&&de.enableHtmlSanitizer&&(ge=Kt.sanitize(ge)),K?be.innerText=ge:(be.setAttribute("data-value",u(Ee)?"null":Ee),be.setAttribute("role","option"),De&&Object.prototype.hasOwnProperty.call(z,U.htmlAttributes)&&z[U.htmlAttributes]&&y(be,z[U.htmlAttributes]),J.length&&!Ae.itemNavigable&&Ie(J,be),De&&(z[U.url]||z[U.urlAttributes]&&z[U.urlAttributes].href)?be.appendChild(_(V,De,U,ge,J,Ae.itemNavigable)):(J.length&&Ae.itemNavigable&&Ie(J,be),be.appendChild(document.createTextNode(ge)))),be}function L(V){return{li:"e-"+V+"-item",ul:"e-"+V+"-parent e-ul",group:"e-"+V+"-group-item",icon:"e-"+V+"-icon",text:"e-"+V+"-text",check:"e-"+V+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+V+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+V+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function _(V,q,z,U,ie,J){var K=jr(q,z),Y={href:K[z.url]};Object.prototype.hasOwnProperty.call(K,z.urlAttributes)&&K[z.urlAttributes]&&(Oi(Y,K[z.urlAttributes]),Y.href=K[z.url]?K[z.url]:K[z.urlAttributes].href);var ne;if(!J)ne=V("a",{className:Be.text+" "+Be.url,innerHTML:U});else{ne=V("a",{className:Be.text+" "+Be.url});var de=V("div",{className:Be.anchorWrap});ie&&ie.length&&Ie(ie,de),de.appendChild(document.createTextNode(U)),Ie([de],ne)}return y(ne,Y),ne}function X(V,q,z,U,ie,J,K){var Y=$({},e,J),ne=$({},t,Y.ariaAttributes),de=q,Ae,xe,ge;typeof q!="string"&&typeof q!="number"&&(ge=q,de=z[U.text]||"",Ae=u(z._id)?z[U.id]:z._id,xe=!!(Object.prototype.hasOwnProperty.call(q,"isHeader")&&q.isHeader)),J&&J.enableHtmlSanitizer&&(de=Kt.sanitize(de));var Ee=V("li",{className:(xe===!0?Be.group:Be.li)+" "+(u(ie)?"":ie),attrs:ne.groupItemRole!==""&&ne.itemRole!==""?{role:xe===!0?ne.groupItemRole:ne.itemRole}:{}});if(u(Ae)?Ee.setAttribute("data-uid",I()):Ee.setAttribute("data-uid",Ae),xe&&J&&J.groupTemplate){var De=Pn(J.groupTemplate);if(K&&K.getModuleName()!=="listview"){var ee=De(q,K,"groupTemplate",Y.groupTemplateID,!!Y.isStringTemplate,null,Ee);ee&&Ie(ee,Ee)}else Ie(De(q,K,"groupTemplate",Y.groupTemplateID,!!Y.isStringTemplate),Ee)}else if(!xe&&J&&J.template){var De=Pn(J.template);if(K&&K.getModuleName()!=="listview"){var ee=De(q,K,"template",Y.templateID,!!Y.isStringTemplate,null,Ee);ee&&Ie(ee,Ee)}else Ie(De(q,K,"template",Y.templateID,!!Y.isStringTemplate),Ee)}else{var be=V("div",{className:Be.textContent,attrs:ne.wrapperRole!==""?{role:ne.wrapperRole}:{}});if(ge&&(z[U.url]||z[U.urlAttributes]&&z[U.urlAttributes].href))be.appendChild(_(V,ge,U,de,null,Y.itemNavigable));else{var me=V("span",{className:Be.text,attrs:ne.itemText!==""?{role:ne.itemText}:{}});J&&J.enableHtmlSanitizer?me.innerText=de:me.innerHTML=de,be.appendChild(me)}Ee.appendChild(be)}return Ee}function re(V,q,z,U){var ie=$({},e,U),J=$({},t,ie.ariaAttributes);Be=L(ie.moduleName);var K=V("ul",{className:Be.ul+" "+(u(z)?"":z),attrs:J.listRole!==""?{role:J.listRole}:{}});return Ie(q,K),K}a.generateUL=re;function ye(V,q,z,U){var ie=$({},e,U);Be=L(ie.moduleName);var J=ie.expandIconPosition==="Left"?Ot:Ie;return J([V("div",{className:"e-icons "+ie.expandIconClass+" "+(u(z)?"":z)})],q.querySelector("."+Be.textContent)),q}a.generateIcon=ye})(St||(St={}));function jr(a,t){var e={};if(u(a)||typeof a=="string"||typeof a=="number"||!u(a.isHeader))return a;for(var i=0,s=Object.keys(t);i<s.length;i++){var r=s[i],n=t[""+r],o=!u(n)&&typeof n=="string"?H(n,a):void 0;u(o)||(e[""+n]=o)}return e}function Pn(a){if(a)try{return typeof a!="function"&&document.querySelector(a)?qe(document.querySelector(a).innerHTML.trim()):qe(a)}catch{return qe(a)}}var Ni,bs,ni,ln,sh=!1;function rh(a,t){var e=!1,i={left:0,top:0},s=a;if(!a||!t)return i;for(u(t.offsetParent)&&t.style.position==="fixed"&&(e=!0);(t.offsetParent||e)&&a&&t.offsetParent!==a;)i.left+=a.offsetLeft,i.top+=a.offsetTop,a=a.offsetParent;for(a=s;(t.offsetParent||e)&&a&&t.offsetParent!==a;)i.left-=a.scrollLeft,i.top-=a.scrollTop,a=a.parentElement;return i}function Tt(a,t,e,i,s){if(bs=void 0,bs=s,sh=!!i,!a)return{left:0,top:0};t||(t="left"),e||(e="top"),ln=a.ownerDocument,ni=a;var r={left:0,top:0};return uf(t.toLowerCase(),e.toLowerCase(),r)}function Gi(a,t){t.left=a}function _i(a,t){t.top=a}function uf(a,t,e){switch(Ni=ni.getBoundingClientRect(),t+a){case"topcenter":Gi(bo(),e),_i(fa(),e);break;case"topright":Gi(yo(),e),_i(fa(),e);break;case"centercenter":Gi(bo(),e),_i(vo(),e);break;case"centerright":Gi(yo(),e),_i(vo(),e);break;case"centerleft":Gi(ga(),e),_i(vo(),e);break;case"bottomcenter":Gi(bo(),e),_i(mo(),e);break;case"bottomright":Gi(yo(),e),_i(mo(),e);break;case"bottomleft":Gi(ga(),e),_i(mo(),e);break;default:case"topleft":Gi(ga(),e),_i(fa(),e);break}return ni=null,e}function bc(){return ln.documentElement.scrollTop||ln.body.scrollTop}function Cc(){return ln.documentElement.scrollLeft||ln.body.scrollLeft}function mo(){return sh?Ni.bottom:Ni.bottom+bc()}function vo(){return fa()+Ni.height/2}function fa(){return sh?Ni.top:Ni.top+bc()}function ga(){return Ni.left+Cc()}function yo(){var a=ni&&((ni.classList.contains("e-date-wrapper")||ni.classList.contains("e-datetime-wrapper"))&&ni.classList.contains("e-rtl")||ni.classList.contains("e-ddl")&&ni.classList.contains("e-rtl")||ni.classList.contains("e-date-range-wrapper"))?bs?bs.width:0:bs&&Ni.width>=bs.width?bs.width:0;return ni&&ni.classList.contains("e-rtl")&&ni.classList.contains("e-multiselect")&&(a=bs.width),Ni.right+Cc()-a}function bo(){return ga()+Ni.width/2}var Ts,Yt;function nh(a,t,e,i){if(t===void 0&&(t=null),e===void 0&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var s=a.getBoundingClientRect();if(Yt=t,Ts=a.ownerDocument,i||(i=Tt(a,"left","top")),e.X){var r=Yt?Ac():Rc(),n=hh(),o=uh(),l=n-i.left,h=i.left+s.width-o;s.width>r?l>0&&h<=0?i.left=o-s.width:h>0&&l<=0?i.left=n:i.left=l>h?o-s.width:n:l>0?i.left+=l:h>0&&(i.left-=h)}if(e.Y){var p=Yt?Dc():Lc(),c=lh(),d=ph(),f=c-i.top,g=i.top+s.height-d;s.height>p?f>0&&g<=0?i.top=d-s.height:g>0&&f<=0?i.top=c:i.top=f>g?d-s.height:c:f>0?i.top+=f:g>0&&(i.top-=g)}return i}function es(a,t,e,i){t===void 0&&(t=null);var s=Tt(a,"left","top");e&&(s.left=e),i&&(s.top=i);var r=[];Yt=t,Ts=a.ownerDocument;var n=a.getBoundingClientRect(),o=s.top,l=s.left,h=s.left+n.width,p=s.top+n.height,c=Ec(o,p),d=wc(l,h);return c.topSide&&r.push("top"),d.rightSide&&r.push("right"),d.leftSide&&r.push("left"),c.bottomSide&&r.push("bottom"),r}function pf(a,t,e,i,s,r,n,o,l){if(n===void 0&&(n=null),o===void 0&&(o={X:!0,Y:!0}),!(!t||!a||!s||!r||!o.X&&!o.Y)){var h={TL:null,TR:null,BL:null,BR:null},p={TL:null,TR:null,BL:null,BR:null},c;if(window.getComputedStyle(a).display==="none"){var d=a.style.visibility;a.style.visibility="hidden",a.style.display="block",c=a.getBoundingClientRect(),a.style.removeProperty("display"),a.style.visibility=d}else c=a.getBoundingClientRect();var f={posX:s,posY:r,offsetX:e,offsetY:i,position:{left:0,top:0}};Yt=n,Ts=t.ownerDocument,df(t,h,f,l,c),oh(p,f,c),o.X&&Ic(t,p,h,f,c,!0),o.Y&&h.TL.top>-1&&xc(t,p,h,f,c,!0),cf(a,f,c)}}function cf(a,t,e){var i=0,s=0;if(a.offsetParent!=null&&(getComputedStyle(a.offsetParent).position==="absolute"||getComputedStyle(a.offsetParent).position==="relative")){var r=Tt(a.offsetParent,"left","top",!1,e);i=r.left,s=r.top}var n=1,o=1,l=Sc(a);if(l){var h=getComputedStyle(l).transform;if(h!=="none"){var p=new DOMMatrix(h);n=p.a,o=p.d}var c=getComputedStyle(l).zoom;if(c!=="none"){var d=ah(document.body);n=d*n,o=d*o}}a.style.top=t.position.top/o+t.offsetY-s/o+"px",a.style.left=t.position.left/n+t.offsetX-i/n+"px"}function ah(a){var t=getComputedStyle(a).zoom;return parseFloat(t)||1}function Sc(a){for(;a;){var t=window.getComputedStyle(a).transform,e=ah(document.body);if(t&&t!=="none"||e&&e!==1)return a;if(a===document.body)return null;a=a.offsetParent||a.parentElement}return null}function df(a,t,e,i,s){e.position=Tt(a,e.posX,e.posY,i,s),t.TL=Tt(a,"left","top",i,s),t.TR=Tt(a,"right","top",i,s),t.BR=Tt(a,"left","bottom",i,s),t.BL=Tt(a,"right","bottom",i,s)}function oh(a,t,e){a.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},a.TR={top:a.TL.top,left:a.TL.left+e.width},a.BL={top:a.TL.top+e.height,left:a.TL.left},a.BR={top:a.TL.top+e.height,left:a.TL.left+e.width}}function wc(a,t){var e=!1,i=!1;return a-La()<hh()&&(e=!0),t>uh()&&(i=!0),{leftSide:e,rightSide:i}}function Ic(a,t,e,i,s,r){var n=wc(t.TL.left,t.TR.left);e.TL.left-La()<=hh()&&(n.leftSide=!1),e.TR.left>uh()&&(n.rightSide=!1),(n.leftSide&&!n.rightSide||!n.leftSide&&n.rightSide)&&(i.posX==="right"?i.posX="left":i.posX="right",i.offsetX=i.offsetX+s.width,i.offsetX=-1*i.offsetX,i.position=Tt(a,i.posX,i.posY,!1),oh(t,i,s),r&&Ic(a,t,e,i,s,!1))}function xc(a,t,e,i,s,r){var n=Ec(t.TL.top,t.BL.top);e.TL.top-Ta()<=lh()&&(n.topSide=!1),e.BL.top>=ph()&&a.getBoundingClientRect().bottom<window.innerHeight&&(n.bottomSide=!1),(n.topSide&&!n.bottomSide||!n.topSide&&n.bottomSide)&&(i.posY==="top"?i.posY="bottom":i.posY="top",i.offsetY=i.offsetY+s.height,i.offsetY=-1*i.offsetY,i.position=Tt(a,i.posX,i.posY,!1,s),oh(t,i,s),r&&xc(a,t,e,i,s,!1))}function Ec(a,t){var e=!1,i=!1;return a-Ta()<lh()&&(e=!0),t>ph()&&(i=!0),{topSide:e,bottomSide:i}}function Ac(){return Yt.getBoundingClientRect().width}function Dc(){return Yt.getBoundingClientRect().height}function kc(){return Yt.getBoundingClientRect().left}function Tc(){return Yt.getBoundingClientRect().top}function lh(){return Yt?Tc():0}function hh(){return Yt?kc():0}function uh(){return Yt?La()+kc()+Ac():La()+Rc()}function ph(){return Yt?Ta()+Tc()+Dc():Ta()+Lc()}function Ta(){return Ts.documentElement.scrollTop||Ts.body.scrollTop}function La(){return Ts.documentElement.scrollLeft||Ts.body.scrollLeft}function Lc(){return window.innerHeight}function Rc(){var a=window.innerWidth,t=document.documentElement.getBoundingClientRect(),e=u(document.documentElement)?0:t.width;return a-(a-e)}function Mc(){Yt=null,Ts=null}var Fc=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),vt=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Oc=(function(a){Fc(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return vt([m("left")],t.prototype,"X",void 0),vt([m("top")],t.prototype,"Y",void 0),t})(Je),Et={ROOT:"e-popup",RTL:"e-rtl",OPEN:"e-popup-open",CLOSE:"e-popup-close"},as=(function(a){Fc(t,a);function t(e,i){return a.call(this,i,e)||this}return t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"width":At(this.element,{width:ve(e.width)});break;case"height":At(this.element,{height:ve(e.height)});break;case"zIndex":At(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":{var o=e.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+o).toString()+"px";break}case"offsetY":{var l=e.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break}case"content":this.setContent();break;case"actionOnScroll":e.actionOnScroll!=="none"?this.wireScrollEvents():this.unwireScrollEvents();break}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(Et.ROOT,Et.RTL,Et.OPEN,Et.CLOSE),this.content=null,this.relateTo=null,Mc(),a.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(Et.ROOT);var e={};this.zIndex!==1e3&&(e.zIndex=this.zIndex),this.width!=="auto"&&(e.width=ve(this.width)),this.height!=="auto"&&(e.height=ve(this.height)),At(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){E.isDevice&&v.add(window,"orientationchange",this.orientationOnChange,this),this.actionOnScroll!=="none"&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++){var s=i[e];v.add(s,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){E.isDevice&&v.remove(window,"orientationchange",this.orientationOnChange),this.actionOnScroll!=="none"&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++){var s=i[e];v.remove(s,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=this.relateTo===""||u(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),typeof this.relateTo=="string"?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if(this.actionOnScroll==="reposition"?!u(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&e.target.parentElement==null)&&this.refreshPosition():this.actionOnScroll==="hide"&&this.hide(),this.actionOnScroll!=="none"&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),e.target);!i&&!this.targetInvisibleStatus?(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0):i&&(this.targetInvisibleStatus=!1)}},t.prototype.isElementOnViewport=function(e,i){for(var s=this.getScrollableParent(e),r=0;r<s.length;r++)if(!this.isElementVisible(e,s[r]))return!1;return!0},t.prototype.isElementVisible=function(e,i){var s=this.checkGetBoundingClientRect(e);if(!s.height||!s.width)return!1;if(u(this.checkGetBoundingClientRect(i))){var n=window,o={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},l=Tt(e),h={top:l.top,left:l.left,right:l.left+s.width,bottom:l.top+s.height},p={top:o.bottom-h.top,left:o.right-h.left,bottom:h.bottom-o.top,right:h.right-o.left};return p.top>0&&p.left>0&&p.right>0&&p.bottom>0}else{var r=i.getBoundingClientRect();return!(s.bottom<r.top)&&!(s.bottom>r.bottom)&&!(s.right>r.right)&&!(s.left<r.left)}},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(Et.RTL):this.element.classList.remove(Et.RTL)},t.prototype.setContent=function(){if(!u(this.content))if(this.element.innerHTML="",typeof this.content=="string")this.element.textContent=this.content;else{var e=this.getRelateToElement(),i=this.content.props;(!e.classList.contains("e-dropdown-btn")||u(i))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,i){u(e)||this.checkFixedParent(e),this.reposition(),i||this.checkCollision()},t.prototype.reposition=function(){var e,i,s=this.getRelateToElement();if(typeof this.position.X=="number"&&typeof this.position.Y=="number")e={left:this.position.X,top:this.position.Y};else if(typeof this.position.X=="string"&&typeof this.position.Y=="number"||typeof this.position.X=="number"&&typeof this.position.Y=="string"){var r=void 0,n=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY),typeof this.position.X=="string"?e={left:i.left,top:this.position.Y}:e={left:this.position.X,top:i.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(s){var o=this.element.clientHeight,n=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY,o),this.element.style.display=n}else e={left:0,top:0};u(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){var i;try{return i=e.getBoundingClientRect(),i}catch{return null}},t.prototype.getAnchorPosition=function(e,i,s,r,n,o){o===void 0&&(o=0);var l=this.checkGetBoundingClientRect(i),h=this.checkGetBoundingClientRect(e);if(u(l)||u(h))return null;var p=e,c={left:0,top:0};switch(i.offsetParent&&i.offsetParent.tagName==="BODY"&&e.tagName==="BODY"?c=Tt(e):(i.classList.contains("e-dlg-modal")&&p.tagName!=="BODY"&&(i=i.parentElement),c=rh(p,i)),s.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container"?c.left+=window.innerWidth/2-l.width/2:this.targetType==="container"?c.left+=h.width/2-l.width/2:c.left+=h.width/2;break;case"right":if(i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container")c.left+=window.innerWidth-l.width;else if(this.targetType==="container"){var d=1,f=Sc(i);if(f){var g=getComputedStyle(f).transform;if(g!=="none"){var y=new DOMMatrix(g);d=y.a}var b=getComputedStyle(f).zoom;if(b!=="none"){var C=ah(document.body);d=C*d}}c.left+=(h.width-l.width)/d}else c.left+=h.width;break}switch(s.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container"?c.top+=window.innerHeight/2-l.height/2:this.targetType==="container"?c.top+=h.height/2-l.height/2:c.top+=h.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container"?c.top+=window.innerHeight-l.height:this.targetType==="container"&&!i.classList.contains("e-dialog")?c.top+=h.height-l.height:this.targetType==="container"&&i.classList.contains("e-dialog")?c.top+=h.height-o:c.top+=h.height;break}return c.left+=r,c.top+=n,c},t.prototype.callFlip=function(e){var i=this.getRelateToElement();pf(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(es(this.element,this.viewPortElement).length!==0)if(u(this.viewPortElement)){var i=nh(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=i.left+"px"),e.Y&&(this.element.style.top=i.top+"px")}else{var s=this.checkGetBoundingClientRect(this.element),r=this.checkGetBoundingClientRect(this.viewPortElement);if(u(s)||u(r))return null;e&&e.Y===!0&&(r.top>s.top?this.element.style.top="0px":r.bottom<s.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(s.bottom-r.bottom)+"px")),e&&e.X===!0&&(r.right<s.right?this.element.style.left=parseInt(this.element.style.left,10)-(s.right-r.right)+"px":r.left>s.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(r.left-s.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,i=this.collision.Y;e==="none"&&i==="none"||(e==="flip"&&i==="flip"?this.callFlip({X:!0,Y:!0}):e==="fit"&&i==="fit"?this.callFit({X:!0,Y:!0}):(e==="flip"?this.callFlip({X:!0,Y:!1}):i==="flip"&&this.callFlip({Y:!0,X:!1}),e==="fit"?this.callFit({X:!0,Y:!1}):i==="fit"&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,i){var s=this;if(this.wireEvents(),this.getRelateToElement(),this.zIndex===1e3||!u(i)){var r=u(i)?this.element:i;this.zIndex=_a(r),At(this.element,{zIndex:this.zIndex})}e=!u(e)&&typeof e=="object"?e:this.showAnimation,(this.collision.X!=="none"||this.collision.Y!=="none")&&(R([this.element],Et.CLOSE),x([this.element],Et.OPEN),this.checkCollision(),R([this.element],Et.OPEN),x([this.element],Et.CLOSE)),u(e)?(R([this.element],Et.CLOSE),x([this.element],Et.OPEN),this.trigger("open")):(e.begin=function(){s.isDestroyed||(R([s.element],Et.CLOSE),x([s.element],Et.OPEN))},e.end=function(){s.isDestroyed||s.trigger("open")},new It(e).animate(this.element))},t.prototype.hide=function(e){var i=this;e=!u(e)&&typeof e=="object"?e:this.hideAnimation,u(e)?(R([this.element],Et.OPEN),x([this.element],Et.CLOSE),this.trigger("close")):(e.end=function(){i.isDestroyed||(R([i.element],Et.OPEN),x([i.element],Et.CLOSE),i.trigger("close"))},new It(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),bl(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var i=e.parentElement;i&&i.tagName!=="HTML";){var s=getComputedStyle(i);(s.position==="fixed"||s.position==="sticky")&&!u(this.element)&&this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&getComputedStyle(this.element.offsetParent).overflow!=="hidden"&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?ve(window.scrollY-parseInt(this.element.style.top,10)):ve(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!u(this.element)&&u(this.element.offsetParent)&&s.position==="fixed"&&this.element.style.position==="fixed"&&(this.fixedParent=!0)}},vt([m("auto")],t.prototype,"height",void 0),vt([m("auto")],t.prototype,"width",void 0),vt([m(null)],t.prototype,"content",void 0),vt([m("container")],t.prototype,"targetType",void 0),vt([m(null)],t.prototype,"viewPortElement",void 0),vt([m({X:"none",Y:"none"})],t.prototype,"collision",void 0),vt([m("")],t.prototype,"relateTo",void 0),vt([dt({},Oc)],t.prototype,"position",void 0),vt([m(0)],t.prototype,"offsetX",void 0),vt([m(0)],t.prototype,"offsetY",void 0),vt([m(1e3)],t.prototype,"zIndex",void 0),vt([m(!1)],t.prototype,"enableRtl",void 0),vt([m("reposition")],t.prototype,"actionOnScroll",void 0),vt([m(null)],t.prototype,"showAnimation",void 0),vt([m(null)],t.prototype,"hideAnimation",void 0),vt([O()],t.prototype,"open",void 0),vt([O()],t.prototype,"close",void 0),vt([O()],t.prototype,"targetExitViewport",void 0),t=vt([pt],t),t})(Vt);function bl(a,t){for(var e=getComputedStyle(a),i=[],s=/(auto|scroll)/,r=a.parentElement;r&&r.tagName!=="HTML";){var n=getComputedStyle(r);!(e.position==="absolute"&&n.position==="static")&&s.test(n.overflow+n.overflowY+n.overflowX)&&i.push(r),r=r.parentElement}return t||i.push(document),i}function _a(a){for(var t=a.parentElement,e=[];t&&t.tagName!=="BODY";){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");i!=="auto"&&s!=="static"&&e.push(i),t=t.parentElement}for(var r=[],n=0;n<document.body.children.length;n++)if(!a.isEqualNode(document.body.children[n])){var i=document.defaultView.getComputedStyle(document.body.children[n],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(document.body.children[n],null).getPropertyValue("position");i!=="auto"&&s!=="static"&&r.push(i)}r.push("999");var o=[];if(!u(a.parentElement)&&a.parentElement.tagName!=="BODY"){for(var l=[].slice.call(a.parentElement.children),n=0;n<l.length;n++)if(!a.isEqualNode(l[n])){var i=document.defaultView.getComputedStyle(l[n],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(l[n],null).getPropertyValue("position");i!=="auto"&&s!=="static"&&o.push(i)}}var h=e.concat(r,o),p=Math.max.apply(Math,h)+1;return p>2147483647?2147483647:p}var Co=["north-west","north","north-east","west","east","south-west","south","south-east"],yn="e-resize-handle",Es="e-focused-handle",ff="e-dlg-resizable",Yh=["e-restrict-left"],Bc="e-resize-viewport",gf=["north","west","east","south"],je,Ai,ch=0,dh=0,Pc=0,Nc=0,hn=0,un=0,yr,is,fh,ss,Te,Ir=null,Ra=null,Ma=null,Ji,Cl=0,Fa=!0,Xh=0,So=!0;function mf(a){Ir=a.resizeBegin,Ra=a.resizing,Ma=a.resizeComplete,je=Qh(a.element),Te=Qh(a.boundary);for(var t=a.direction.split(" "),e=0;e<t.length;e++)if(gf.indexOf(t[e])>=0&&t[e])vf(t[e]);else if(t[e].trim()!==""){var i=pe("div",{className:"e-icons "+yn+" e-"+t[e]});je.appendChild(i)}yr=a.minHeight,fh=a.minWidth,ss=a.maxWidth,is=a.maxHeight,Cl++,a.proxy&&a.proxy.element&&a.proxy.element.classList.contains("e-dialog")?$h(a.proxy):$h()}function vf(a){gh();var t=pe("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+a),a==="south"&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),a==="north"&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),a==="east"&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),a==="west"&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),je.appendChild(t)}function Qh(a){var t;return u(a)||(typeof a=="string"?t=document.querySelector(a):t=a),t}function $h(a){for(var t=a||this,e=je.querySelectorAll("."+yn),i=0;i<e.length;i++){Ai=e[i],v.add(Ai,"mousedown",Jh,t);var s=E.info.name==="msie"?"pointerdown":"touchstart";v.add(Ai,s,Zh,t)}var r=je.querySelectorAll(".e-dialog-border-resize");if(!u(r))for(var i=0;i<r.length;i++){Ai=r[i],v.add(Ai,"mousedown",Jh,t);var s=E.info.name==="msie"?"pointerdown":"touchstart";v.add(Ai,s,Zh,t)}}function Hc(a){return a.indexOf("mouse")>-1?"mouse":"touch"}function Jh(a){if(a.preventDefault(),je=a.target.parentElement,gh(),hn=a.pageX,un=a.pageY,a.target.classList.add(Es),!u(Ir)){var t=this;if(Ir(a,t)===!0)return}this.targetEle&&je&&je.querySelector("."+ff)&&(Te=this.target==="body"?null:this.targetEle,ss=this.targetEle.clientWidth,is=this.targetEle.clientHeight);var e=u(Te)?document:Te;v.add(e,"mousemove",nn,this),v.add(document,"mouseup",Oa,this);for(var i=0;i<Yh.length;i++)je.classList.contains(Yh[i])?Fa=!1:Fa=!0}function Oa(a){var t=E.info.name==="msie"?"pointermove":"touchmove",e=E.info.name==="msie"?"pointerup":"touchend",i=u(Te)?document:Te,s=E.info.name==="msie"?"pointerdown":"touchstart";if(v.remove(i,"mousemove",nn),v.remove(i,t,nn),v.remove(i,s,nn),u(document.body.querySelector("."+Es))||document.body.querySelector("."+Es).classList.remove(Es),!u(Ma)){var r=this;Ma(a,r)}v.remove(document,"mouseup",Oa),v.remove(document,e,Oa)}function gh(){ch=parseFloat(getComputedStyle(je,null).getPropertyValue("width").replace("px","")),dh=parseFloat(getComputedStyle(je,null).getPropertyValue("height").replace("px","")),Pc=je.getBoundingClientRect().left,Nc=je.getBoundingClientRect().top}function Zh(a){je=a.target.parentElement,gh();var t=je.classList.contains("e-dialog");(a.target.classList.contains(yn)||a.target.classList.contains("e-dialog-border-resize"))&&t&&a.target.classList.add(Es);var e=a.touches?a.changedTouches[0]:a;if(hn=e.pageX,un=e.pageY,!u(Ir)){var i=this;if(Ir(a,i)===!0)return}var s=E.info.name==="msie"?"pointermove":"touchmove",r=E.info.name==="msie"?"pointerup":"touchend",n=u(Te)?document:Te;v.add(n,s,nn,this),v.add(document,r,Oa,this)}function nn(a){if(a.target.classList.contains(yn)&&a.target.classList.contains(Es)?Ai=a.target:u(document.body.querySelector("."+Es))||(Ai=document.body.querySelector("."+Es)),!u(Ai)){for(var t="",e=0;e<Co.length;e++)Ai.classList.contains("e-"+Co[e])&&(t=Co[e]);if(!u(Ra)){var i=this;Ra(a,i)}switch(t){case"south":wo(a);break;case"north":Io(a);break;case"west":xo(a);break;case"east":Eo(a);break;case"south-east":wo(a),Eo(a);break;case"south-west":wo(a),xo(a);break;case"north-east":Io(a),Eo(a);break;case"north-west":Io(a),xo(a);break}}}function Ls(a){return a.getBoundingClientRect()}function wo(a){var t=document.documentElement.clientHeight,e=!1,i=a.touches?a.changedTouches[0]:a,s=i.pageY,r=Ls(je),n;u(Te)||(n=Ls(Te)),u(Te)?u(Te)&&(t-s>=0||r.top<0)&&(e=!0):e=!0;var o=dh+(s-un);o=o>yr?o:yr;var l=0;u(Te)||(l=n.top);var h=u(Te)?0:Te.offsetHeight-Te.clientHeight,p=r.top-l-h/2;if(p=p<0?0:p,r.top>0&&p+o>is){if(e=!1,je.classList.contains(Bc))return;je.style.height=is-parseInt(p.toString(),10)+"px";return}var c=0;if(e){r.top<0&&t+(r.height+r.top)>0&&(c=r.top,o+c<=30&&(o=r.height-(r.height+r.top)+30)),o+r.top>=is&&(je.style.height=r.height+(t-(r.height+r.top))+"px");var d=u(Te)?c:p;o>=yr&&o+d<=is&&(je.style.height=o+"px")}}function Io(a){var t=!1,e,i=Hc(a.type)==="mouse"?a.pageY:a.touches[0].pageY,s=Ls(je),r=u(Te)?0:Te.offsetHeight-Te.clientHeight;u(Te)||(e=Ls(Te)),(!u(Te)&&s.top-e.top>0||u(Te)&&i>0||!u(Te)&&Math.floor(s.top-e.top+s.height+(e.bottom-s.bottom))-r<=is)&&(t=!0);var n=dh-(i-un);if(t&&n>=yr&&n<=is){var o=0;u(Te)||(o=e.top);var l=Nc-o+(i-un);l=l>0?l:1,je.style.height=n+"px",je.style.top=l+"px"}}function xo(a){var t=document.documentElement.clientWidth,e=!1,i;u(Te)||(i=Ls(Te));var s=Hc(a.type)==="mouse"?a.pageX:a.touches[0].pageX,r=Ls(je),n=u(Te)?0:Te.offsetWidth-Te.clientWidth,o=u(Te)?0:i.left,l=u(Te)?0:i.width;u(Ji)&&(u(Te)?Ji=t:(Ji=r.left-o-n/2+r.width,Ji=Ji+(l-n-Ji))),(!u(Te)&&Math.floor(r.left-i.left+r.width+(i.right-r.right))-n<=ss||u(Te)&&s>=0)&&(e=!0);var h=ch-(s-hn);if(Fa&&(h=h>Ji?Ji:h),e&&h>=fh&&h<=ss){var p=0;u(Te)||(p=i.left);var c=Pc-p+(s-hn);c=c>0?c:1,h!==Xh&&So&&(je.style.width=h+"px"),Fa&&(je.style.left=c+"px",c===1?So=!1:So=!0)}Xh=h}function Eo(a){var t=document.documentElement.clientWidth,e=!1,i;u(Te)||(i=Ls(Te));var s=a.touches?a.changedTouches[0]:a,r=s.pageX,n=Ls(je);(!u(Te)&&(n.left-i.left+n.width<=ss||n.right-i.left>=n.width)||u(Te)&&t-r>0)&&(e=!0);var o=ch+(r-hn),l=0;if(u(Te)||(l=i.left),n.left-l+o>ss){if(e=!1,je.classList.contains(Bc))return;je.style.width=ss-(n.left-l)+"px"}e&&o>=fh&&o<=ss&&(je.style.width=o+"px")}function yf(a){yr=a}function bf(a){ss=a}function Cf(a){is=a}function eu(){for(var a=je.querySelectorAll("."+yn),t=0;t<a.length;t++)Z(a[t]);var e=je.querySelectorAll(".e-dialog-border-resize");if(!u(e))for(var t=0;t<e.length;t++)Z(e[t])}function Sf(){Cl--,Cl===0&&(je=null,Ai=null,Te=null,Ji=null,Ir=null,Ra=null,Ma=null)}var mh=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),ke=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},wf=(function(a){mh(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return ke([m(!0)],t.prototype,"isFlat",void 0),ke([m()],t.prototype,"buttonModel",void 0),ke([m("Button")],t.prototype,"type",void 0),ke([O()],t.prototype,"click",void 0),t})(Je),If=(function(a){mh(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return ke([m("Fade")],t.prototype,"effect",void 0),ke([m(400)],t.prototype,"duration",void 0),ke([m(0)],t.prototype,"delay",void 0),t})(Je),Nn="e-dialog",Ao="e-rtl",Do="e-dlg-header-content",tu="e-dlg-header",Hn="e-footer-content",Vn="e-dlg-modal",xf="e-dlg-content",iu="e-icon-dlg-close",Ef="e-dlg-overlay",Si="e-dlg-target",Af="e-dlg-container",di="e-scroll-disabled",Df="e-primary",kf="e-icons",Tf="e-popup",su="e-device",zn="e-dlg-fullscreen",ru="e-dlg-closeicon-btn",Lf="e-popup-close",nu="e-popup-open",au="Information",ou="e-scroll-disabled",Vc="e-alert-dialog",zc="e-confirm-dialog",ko="e-dlg-resizable",nr="e-restrict-left",lu="e-resize-viewport",Rf="e-dlg-ref-element",To="user action",Mf="close icon",Ff="escape",Of="overlayClick",Bf="e-draggable",bn=(function(a){mh(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.needsID=!0,s}return t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),this.width==="100%"&&(this.element.style.width=""),this.minHeight!==""&&(this.element.style.minHeight=ve(this.minHeight)),this.enableResize&&(this.setResize(),this.isModal&&(this.isModelResize=!0),this.animationSettings.effect==="None"&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=To},t.prototype.preRender=function(){var e=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(r){e.dlgClosedBy=Mf,e.hide(r)},this.dlgOverlayClickEventHandler=function(r){e.dlgClosedBy=Of,r.preventFocus=!1,e.trigger("overlayClick",r,function(n){n.preventFocus||e.focusContent(),e.dlgClosedBy=To})};var i={close:"Close"};if(this.l10n=new zt("dialog",i,this.locale),this.checkPositionData(),u(this.target)){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=s}},t.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},t.prototype.isNumberValue=function(e){var i=/^[-+]?\d*\.?\d+$/.test(e);return i},t.prototype.checkPositionData=function(){if(!u(this.position)){if(!u(this.position.X)&&typeof this.position.X!="number"){var e=this.isNumberValue(this.position.X);if(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}}if(!u(this.position.Y)&&typeof this.position.Y!="number"){var e=this.isNumberValue(this.position.Y);if(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i}}}},t.prototype.getEle=function(e,i){for(var s=void 0,r=0;r<e.length;r++)if(e[r].classList.contains(i)){s=e[r];break}return s},t.prototype.getMinHeight=function(){var e="0px",i="0px";u(this.element.querySelector("."+Do))||(e=getComputedStyle(this.headerContent).height);var s=this.getEle(this.element.children,Hn);u(s)||(i=getComputedStyle(s).height);var r=parseInt(e.slice(0,e.indexOf("p")),10),n=parseInt(i.slice(0,i.indexOf("p")),10);return yf(r+30+(isNaN(n)?0:n)),r+30+n},t.prototype.onResizeStart=function(e,i){if(i.trigger("resizeStart",e),!e.cancel&&this.isModelResize&&!u(this.dlgContainer)&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)){this.setPopupPosition(),this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y);var s=this.getTargetContainer(this.target);if(s instanceof Element){var r=window.getComputedStyle(s);r.getPropertyValue("direction")==="rtl"?this.element.style.position="absolute":this.element.style.position="relative"}else this.element.style.position="relative";this.element.classList.contains(nr)&&this.element.classList.remove(nr),this.isModelResize=!1}return e.cancel},t.prototype.onResizing=function(e,i){i.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,i){i.trigger("resizeStop",e),this.updatePersistData()},t.prototype.setResize=function(){if(this.enableResize){this.element.classList.add(ko);for(var e=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,s="",r=0;r<this.resizeHandles.length;r++)if(this.resizeHandles[r]==="All"){s="south north east west north-east north-west south-east south-west";break}else{var n="";switch(this.resizeHandles[r].toString()){case"SouthEast":n="south-east";break;case"SouthWest":n="south-west";break;case"NorthEast":n="north-east";break;case"NorthWest":n="north-west";break;default:n=this.resizeHandles[r].toString();break}s+=n.toLocaleLowerCase()+" "}this.enableRtl&&s.trim()==="south-east"?s="south-west":this.enableRtl&&s.trim()==="south-west"&&(s="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(nr):this.isModal&&this.target===document.body&&this.element.classList.add(lu),mf({element:this.element,direction:s,minHeight:parseInt(e.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else eu(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(nr):this.element.classList.remove(lu),this.element.classList.remove(ko)},t.prototype.getFocusElement=function(e){var i='input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]',s=e.querySelectorAll(i);return{element:s[s.length-1]}},t.prototype.keyDown=function(e){var i=this;if(e.keyCode===9&&this.isModal){var s=void 0;u(this.btnObj)||(s=this.btnObj[this.btnObj.length-1]),u(this.btnObj)&&!u(this.ftrTemplateContent)&&(s=this.getFocusElement(this.ftrTemplateContent)),u(this.btnObj)&&u(this.ftrTemplateContent)&&!u(this.contentEle)&&(s=this.getFocusElement(this.contentEle)),!u(s)&&document.activeElement===s.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),u(s)||s.element.focus())}var r=document.activeElement,n=["input","textarea"].indexOf(r.tagName.toLowerCase())>-1,o=!1;if(n||(o=r.hasAttribute("contenteditable")&&r.getAttribute("contenteditable")==="true"),e.keyCode===27&&this.closeOnEscape){this.dlgClosedBy=Ff;var l=document.querySelector(".e-popup-open:not(.e-dialog)");!u(l)&&!l.classList.contains("e-toolbar-pop")&&!l.classList.contains("e-slider-tooltip")||this.hide(e)}if(e.keyCode===13&&!e.ctrlKey&&r.tagName.toLowerCase()!=="textarea"&&n&&!u(this.primaryButtonEle)||e.keyCode===13&&e.ctrlKey&&(r.tagName.toLowerCase()==="textarea"||o)&&!u(this.primaryButtonEle)){var h,p=this.buttons.some(function(c,d){h=d;var f=c.buttonModel;return!u(f)&&f.isPrimary===!0});p&&typeof this.buttons[h].click=="function"&&!this.primaryButtonEle.disabled&&setTimeout(function(){i.buttons[h].click.call(i,e)})}},t.prototype.initialize=function(){u(this.target)||(this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target),this.isBlazorServerRender()||x([this.element],Nn),E.isDevice&&x([this.element],su),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||G(this.element,{role:"dialog"}),this.zIndex===1e3?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.setTargetContent(),this.header!==""&&!u(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),this.footerTemplate!==""&&!u(this.footerTemplate)?this.setFooterTemplate():!u(this.buttons[0])&&!u(this.buttons[0].buttonModel)&&this.setButton(),this.allowDragging&&!u(this.headerContent)&&this.setAllowDragging(),G(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal(),this.element.classList.contains(Vc)!==!0&&this.element.classList.contains(zc)!==!0&&!u(this.element.parentElement)){var i=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:Rf}),i.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}if(u(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new as(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(n){var o={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",o,function(l){l.preventFocus||e.focusContent()})},close:function(n){e.isModal&&x([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var o=document.activeElement;!u(o)&&!u(o.blur)&&o.blur(),!u(e.storeActiveElement)&&!u(e.storeActiveElement.focus)&&!e.closeArgs.preventFocus&&e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(x([this.element],Lf),this.isModal&&this.setOverlayZindex()),this.visible){if(this.show(),this.isModal){var s=this.getTargetContainer(this.target);if(s instanceof Element){var r=window.getComputedStyle(s);r.getPropertyValue("direction")==="rtl"&&this.setPopupPosition()}}}else this.isModal&&(this.dlgOverlay.style.display="none");this.initialRender=!1},t.prototype.getTargetContainer=function(e){var i=null;if(typeof e=="string")if(e.startsWith("#"))i=document.getElementById(e.substring(1));else if(e.startsWith(".")){var s=document.getElementsByClassName(e.substring(1));i=s.length>0?s[0]:null}else!(e instanceof HTMLElement)&&e!==document.body&&(i=document.querySelector(e));else e instanceof HTMLElement&&(i=e);return i},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var i=this.enableRtl?"e-south-west":"e-south-east",s=this.element.querySelector("."+i);u(s)||(s.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var i;u(e)?i=parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:i=e,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},t.prototype.positionChange=function(){this.isModal?!isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this,i="."+Do;this.element.classList.contains(Bf)||(this.dragObj=new dc(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:i,dragStart:function(s){e.trigger("dragStart",s,function(r){})},dragStop:function(s){if(e.isModal){e.IsDragStop=!0,u(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y);var r=e.getTargetContainer(e.target);if(r instanceof Element){var n=window.getComputedStyle(r);n.getPropertyValue("direction")==="rtl"?e.element.style.position="absolute":e.element.style.position="relative"}else e.element.style.position="relative"}e.trigger("dragStop",s),e.isModelResize=!1,e.element.classList.remove(nr),e.updatePersistData()},drag:function(s){e.trigger("drag",s)}}),u(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++)if(!u(this.buttons[e].buttonModel)){var i=u(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),s=this.createElement("button",{className:this.cssClass,attrs:{type:i,tabindex:"0"}});this.buttonContent.push(s.outerHTML)}this.setFooterTemplate()}for(var r,e=0,n=this.element.children;e<n.length;e++)n[e].classList.contains(Hn)&&(r=n[e].querySelectorAll("button"));for(var e=0;e<this.buttons.length;e++)u(this.buttons[e].buttonModel)||(this.isBlazorServerRender()||(this.btnObj[e]=new Ys(this.buttons[e].buttonModel)),!u(this.ftrTemplateContent)&&r.length>0&&(typeof this.buttons[e].click=="function"&&v.add(r[e],"click",this.buttons[e].click,this),typeof this.buttons[e].click=="object"&&v.add(r[e],"click",this.buttonClickHandler.bind(this,e),this)),!this.isBlazorServerRender()&&!u(this.ftrTemplateContent)&&(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]))},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:xf,id:this.element.id+"_dialog-content"}),this.headerEle?G(this.element,{"aria-describedby":this.element.id+"_title "+this.element.id+"_dialog-content"}):G(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!u(this.content)&&this.content!==""||!this.initialRender)&&(typeof this.content=="string"?this.setTemplate(this.content,this.contentEle,"content"):this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),u(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),this.height==="auto"&&(!this.isBlazorServerRender()&&E.isIE&&this.element.style.width===""&&!u(this.width)&&(this.element.style.width=ve(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,i,s){var r,n;i.classList.contains(tu)?n=this.element.id+"header":i.classList.contains(Hn)?n=this.element.id+"footerTemplate":n=this.element.id+"content",u(e.outerHTML)?(typeof e=="string"||typeof e!="string"||Mh())&&(typeof e=="string"&&(e=this.sanitizeHelper(e)),this.isVue||typeof e!="string"?r=qe(e):i.innerHTML=e):i.appendChild(e);var o=[];if(!u(r)){for(var l=!0,h=0,p=r({},this,s,n,l);h<p.length;h++){var c=p[h];o.push(c)}Ie([].slice.call(o),i)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=Kt.beforeSanitize(),s={cancel:!1,helper:null};$(i,i,s),this.trigger("beforeSanitizeHtml",i),i.cancel&&!u(i.helper)?e=i.helper(e):i.cancel||(e=Kt.serializeValue(i,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!u(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,E.isIE&&this.height==="auto"&&!u(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?x([this.element],Ao):R([this.element],Ao)),u(this.element.querySelector(".e-resize-handle"))||(eu(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(u(this.content)||this.content===""){var i=this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"")!=="";(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(s){s.nodeType!==8&&e.innerContentElement.appendChild(s)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:tu}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),G(this.element,{"aria-describedby":this.element.id+"_title"}),G(this.element,{"aria-labelledby":this.element.id+"_dialog-header"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!u(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Hn}),this.footerTemplate!==""&&!u(this.footerTemplate)?this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"):this.ftrTemplateContent.innerHTML=this.buttonContent.join(""),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){u(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Do}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:ru,attrs:{type:"button"}}),this.closeIconBtnObj=new Ys({cssClass:"e-flat",iconCss:iu+" "+kf}),this.closeIconTitle(),u(this.headerContent)?(this.createHeaderContent(),Ot([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Ot([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&(R([this.element],e.split(" ")),this.isModal&&!u(this.dlgContainer)&&R([this.dlgContainer],e.split(" "))),this.cssClass&&(x([this.element],this.cssClass.split(" ")),this.isModal&&!u(this.dlgContainer)&&x([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:Af}),this.setCSSClass(),this.element.classList.remove(nu),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),x([this.element],Vn),this.dlgOverlay=this.createElement("div",{className:Ef}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var i,s=0;s<e.length;s++){if(i=e[s],(i.clientHeight>0||i.tagName.toLowerCase()==="a"&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},t.prototype.focusableElements=function(e){if(!u(e)){var i='input,select,textarea,button,a,[contenteditable="true"],[tabindex]',s=e.querySelectorAll(i);return this.getValidFocusNode(s)}return null},t.prototype.getAutoFocusNode=function(e){var i=e.querySelector("."+ru),s="[autofocus]",r=e.querySelectorAll(s),n=this.getValidFocusNode(r);if(!u(n))i=n;else if(n=this.focusableElements(this.contentEle),u(n)){if(!u(this.primaryButtonEle))return this.element.querySelector("."+Df)}else return i=n;return i},t.prototype.disableElement=function(e,i){var s=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(s){for(;e;e=e.parentNode)if(e instanceof Element&&s.call(e,i))return e}return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),i=u(e)?this.element:e,s=E.userAgent;(s.indexOf("MSIE ")>0||s.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){v.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){v.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return Mh()},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,i){if(this.element.classList.contains(Nn))for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"content":!u(this.content)&&this.content!==""?(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),!u(this.contentEle)&&this.contentEle.getAttribute("role")!=="dialog"?(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),typeof this.content=="function"?(this.clearTemplate(["content"]),Z(this.contentEle),this.contentEle=null,this.setContent()):typeof this.content=="string"?this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()):this.setContent()):u(this.contentEle)||(Z(this.contentEle),this.contentEle=null);break;case"header":this.header===""||u(this.header)?this.headerEle&&(Z(this.headerEle),this.headerEle=null):this.setHeader();break;case"footerTemplate":if(this.footerTemplate===""||u(this.footerTemplate)){if(!this.ftrTemplateContent)return;Z(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(iu).length>0?!this.showCloseIcon&&(this.header===""||u(this.header))?(Z(this.headerContent),this.headerContent=null):this.showCloseIcon||Z(this.closeIcon):(this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":At(this.element,{height:ve(e.height)}),this.updatePersistData();break;case"width":At(this.element,{width:ve(e.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":{this.unWireButtonEvents(),this.destroyButtons(),u(this.ftrTemplateContent)||(Z(this.ftrTemplateContent),this.ftrTemplateContent=null),this.footerTemplate="",this.setButton();break}case"allowDragging":this.allowDragging&&!u(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var o=this.position.X,l=this.position.Y;u(i.position)||(u(i.position.X)||(o=i.position.X),u(i.position.Y)||(l=i.position.Y)),this.dlgContainer.classList.contains("e-dlg-"+o+"-"+l)&&this.dlgContainer.classList.remove("e-dlg-"+o+"-"+l)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(),this.isModelResize=this.enableResize&&this.isModal,this.enableResize&&this.dialogOpen&&this.resetResizeIcon();break;case"minHeight":this.minHeight!==""&&(this.element.style.minHeight=ve(this.minHeight));break}}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize(),u(this.targetEle)||(this.isModal&&!u(this.dlgContainer)?this.targetEle.appendChild(this.dlgContainer):u(this.element)||this.targetEle.appendChild(this.element))},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)u(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",u(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(R([this.element],Vn),R([document.body],[Si,di]),Z(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&v.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,i){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0;var r=_a(e);this.zIndex=r>this.zIndex?r:this.zIndex,this.isProtectedOnChange=s,i&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){bf(this.targetEle.clientWidth),Cf(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},t.prototype.removeAllChildren=function(e){for(;e.children[0];)this.removeAllChildren(e.children[0]),e.removeChild(e.children[0])},t.prototype.destroy=function(){if(!this.isDestroyed){var e=[Ao,Vn,ko,nr,zn,su],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];R([this.targetEle],[Si,di]),!u(this.element)&&this.element.classList.contains(zn)&&R([document.body],[Si,di]),this.isModal&&R([u(this.targetEle)?document.body:this.targetEle],di),this.unWireEvents(),this.unWireButtonEvents(),this.destroyButtons(),u(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),u(this.dragObj)||this.dragObj.destroy(),!u(this.popupObj.element)&&this.popupObj.element.classList.contains(Tf)&&this.popupObj.destroy(),R([this.element],e),!u(this.cssClass)&&this.cssClass!==""&&R([this.element],this.cssClass.split(" ")),!u(this.refElement)&&!u(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Z(this.refElement),this.refElement=void 0),this.isModal&&(Z(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Z(this.dlgContainer)),this.element.innerHTML=this.clonedEle.innerHTML;for(var s=0;s<i.length;s++)this.element.removeAttribute(i[s]);this.ftrTemplateContent=null,this.headerContent=null,!this.isReact&&!this.isVue&&!u(this.contentEle)&&this.removeAllChildren(this.contentEle),this.contentEle=null,this.enableResize&&Sf(),a.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){this.boundWindowResizeHandler=this.windowResizeHandler.bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.boundWindowResizeHandler),this.boundWindowResizeHandler=null},t.prototype.wireEvents=function(){this.showCloseIcon&&v.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&v.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){this.showCloseIcon&&v.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&v.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition(),this.element.classList.contains(Vn)&&this.positionChange()},t.prototype.getDimension=function(){var e=this.element.offsetWidth,i=this.element.offsetHeight;return{width:e,height:i}},t.prototype.show=function(e){var i=this;if(this.element.classList.contains(Nn)){if(!this.element.classList.contains(nu)||!u(e)){u(e)||this.fullScreen(e);var s={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",s,function(r){if(!r.cancel){if(i.element.style.maxHeight!==s.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=s.maxHeight),i.enableResize&&i.boundWindowResizeHandler==null&&!i.initialRender&&i.wireWindowResizeEvent(),i.allowDragging&&!u(i.headerContent)&&i.refreshPosition(),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!u(i.dlgOverlay))if(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",R([i.dlgOverlay],"e-fade"),u(i.targetEle))x([document.body],[Si,di]);else{i.targetEle===document.body?i.dlgContainer.style.position="fixed":i.dlgContainer.style.position="absolute",i.dlgOverlay.style.position="absolute";var n=i.getTargetContainer(i.target);if(n instanceof Element){var o=window.getComputedStyle(n);o.getPropertyValue("direction")==="rtl"?i.element.style.position="absolute":i.element.style.position="relative"}else i.element.style.position="relative";x([i.targetEle],[Si,di])}var l={name:i.animationSettings.effect==="None"&&fr==="Enable"?"ZoomIn":i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay},h=i.isModal?i.element.parentElement:i.element;if(i.calculatezIndex&&(i.setzIndex(h,!0),At(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),i.animationSettings.effect==="None"&&fr==="Enable"?i.popupObj.show(l):i.animationSettings.effect==="None"?i.popupObj.show():i.popupObj.show(l),i.isModal){var n=i.getTargetContainer(i.target);if(n instanceof Element){var o=window.getComputedStyle(n);o.getPropertyValue("direction")==="rtl"&&!i.IsDragStop&&i.setPopupPosition()}}i.dialogOpen=!0;var p=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=p}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var i=this;if(this.element.classList.contains(Nn)&&this.preventVisibility){var s={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,preventFocus:!1,closedBy:this.dlgClosedBy};this.closeArgs=s,this.trigger("beforeClose",s,function(r){if(!r.cancel){i.enableResize&&i.unWireWindowResizeEvent();var n={name:i.animationSettings.effect==="None"&&fr==="Enable"?"ZoomOut":i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.animationSettings.effect==="None"&&fr==="Enable"||(i.animationSettings.effect==="None"?i.popupObj.hide():i.popupObj.hide(n)),setTimeout(function(){i.isModal&&!u(i.targetEle)&&i.targetEle.classList.contains(Si)&&i.targetEle.classList.contains(di)&&R([i.targetEle],[Si,di]),document.body.classList.contains(Si)&&document.body.classList.contains(di)&&R([document.body],[Si,di])},i.animationSettings.duration+i.animationSettings.delay),i.dialogOpen=!1;var o=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=o}i.dlgClosedBy=To})}},t.prototype.fullScreen=function(e){if(this.element.offsetTop,this.element.offsetLeft,e){this.isModal||(this.element.style.top=document.scrollingElement.scrollTop+"px"),x([this.element],zn);var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=u(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=i,x([document.body],[Si,di]),this.allowDragging&&!u(this.dragObj)&&this.dragObj.destroy()}else R([this.element],zn),R([document.body],[Si,di]),this.allowDragging&&!u(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return u(e)?this.btnObj:this.btnObj[e]},t.prototype.unWireButtonEvents=function(){if(this.buttons.length>0&&this.footerTemplate===""&&this.ftrTemplateContent)for(var e=0;e<this.buttons.length;e++)this.buttons[e].click&&typeof this.buttons[e].click=="function"&&this.ftrTemplateContent.children[e]&&v.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.destroyButtons=function(){if(!u(this.btnObj))for(var e=0;e<this.btnObj.length;e++)this.btnObj[e]&&!this.btnObj[e].isDestroyed&&this.btnObj[e].destroy()},ke([m("")],t.prototype,"content",void 0),ke([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),ke([m(!1)],t.prototype,"enablePersistence",void 0),ke([m(!1)],t.prototype,"showCloseIcon",void 0),ke([m(!1)],t.prototype,"isModal",void 0),ke([m("")],t.prototype,"header",void 0),ke([m(!0)],t.prototype,"visible",void 0),ke([m(!1)],t.prototype,"enableResize",void 0),ke([m(["South-East"])],t.prototype,"resizeHandles",void 0),ke([m("auto")],t.prototype,"height",void 0),ke([m("")],t.prototype,"minHeight",void 0),ke([m("100%")],t.prototype,"width",void 0),ke([m("")],t.prototype,"cssClass",void 0),ke([m(1e3)],t.prototype,"zIndex",void 0),ke([m(null)],t.prototype,"target",void 0),ke([m("")],t.prototype,"footerTemplate",void 0),ke([m(!1)],t.prototype,"allowDragging",void 0),ke([Rs([{}],wf)],t.prototype,"buttons",void 0),ke([m(!0)],t.prototype,"closeOnEscape",void 0),ke([dt({},If)],t.prototype,"animationSettings",void 0),ke([dt({X:"center",Y:"center"},Oc)],t.prototype,"position",void 0),ke([O()],t.prototype,"created",void 0),ke([O()],t.prototype,"open",void 0),ke([O()],t.prototype,"beforeSanitizeHtml",void 0),ke([O()],t.prototype,"beforeOpen",void 0),ke([O()],t.prototype,"close",void 0),ke([O()],t.prototype,"beforeClose",void 0),ke([O()],t.prototype,"dragStart",void 0),ke([O()],t.prototype,"dragStop",void 0),ke([O()],t.prototype,"drag",void 0),ke([O()],t.prototype,"overlayClick",void 0),ke([O()],t.prototype,"resizeStart",void 0),ke([O()],t.prototype,"resizing",void 0),ke([O()],t.prototype,"resizeStop",void 0),ke([O()],t.prototype,"destroyed",void 0),t=ke([pt],t),t})(Vt),hu;(function(a){function t(p){var c=pe("div",{className:Vc});document.body.appendChild(c);var d,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return typeof p=="string"?d=i({content:p,position:{X:"center",Y:"top"},isModal:!0,header:au,buttons:f},c):d=i(s(p),c),d.close=function(){p&&p.close&&p.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(ou)):d.element.remove()},d}a.alert=t;function e(p){var c=pe("div",{className:zc});document.body.appendChild(c);var d,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}];return typeof p=="string"?d=i({position:{X:"center",Y:"top"},content:p,isModal:!0,header:au,buttons:f},c):d=i(r(p),c),d.close=function(){p&&p.close&&p.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(ou)):d.element.remove()},d}a.confirm=e;function i(p,c){var d=new bn(p);return d.appendTo(c),d}function s(p){var c={};return c.buttons=[],c=n(c,p),c=o(c,p),c}function r(p){var c={};return c.buttons=[],c=n(c,p),c=l(c,p),c}function n(p,c){return p.header=u(c.title)?null:c.title,p.content=u(c.content)?"":c.content,p.isModal=u(c.isModal)?!0:c.isModal,p.showCloseIcon=u(c.showCloseIcon)?!1:c.showCloseIcon,p.allowDragging=u(c.isDraggable)?!1:c.isDraggable,p.closeOnEscape=u(c.closeOnEscape)?!1:c.closeOnEscape,p.position=u(c.position)?{X:"center",Y:"top"}:c.position,p.animationSettings=u(c.animationSettings)?{effect:"Fade",duration:400,delay:0}:c.animationSettings,p.cssClass=u(c.cssClass)?"":c.cssClass,p.zIndex=u(c.zIndex)?1e3:c.zIndex,p.open=u(c.open)?null:c.open,p.width=u(c.width)?"auto":c.width,p.height=u(c.height)?"auto":c.height,p}function o(p,c){var d=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return u(c.okButton)?p.buttons=d:p.buttons[0]=h(p.buttons[0],c.okButton,d[0]),p}function l(p,c){var d={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return u(c.okButton)?p.buttons[0]=d:p.buttons[0]=h(p.buttons[0],c.okButton,d),u(c.cancelButton)?p.buttons[1]=f:p.buttons[1]=h(p.buttons[1],c.cancelButton,f),p}function h(p,c,d){var f=d;return u(c.text)||(f.buttonModel.content=c.text),u(c.icon)||(f.buttonModel.iconCss=c.icon),u(c.cssClass)||(f.buttonModel.cssClass=c.cssClass),u(c.click)||(f.click=c.click),u(c.isFlat)||(f.isFlat=c.isFlat),f}})(hu||(hu={}));var qc=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Ue=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Pf=1500,Nf=500,uu=0,pu=8,Hf=2,Ri=2,Lo="e-tooltip",cu="e-rtl",Vf="e-bigger",du="e-icons",fu="e-tooltip-close",Ro="e-tooltip-wrap",gu="e-tip-content",ar="e-arrow-tip",mu="e-arrow-tip-outer",qn="e-arrow-tip-inner",Ur="e-tip-bottom",Mo="e-tip-top",vu="e-tip-left",Fo="e-tip-right",Oo="e-popup",Gr="e-popup-open",Bo="e-popup-close",Wn="e-lib",zf="e-hidden",yu="e-tooltip-popup-container",qf=(function(a){qc(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Ue([m({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Ue([m({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t})(Je),Wf=(function(a){qc(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.mouseMoveEvent=null,s.mouseMoveTarget=null,s.containerElement=null,s.isBodyContainer=!0,s}return t.prototype.initialize=function(){this.formatPosition(),x([this.element],Lo)},t.prototype.formatPosition=function(){var e,i;this.position&&(this.position.indexOf("Top")===0||this.position.indexOf("Bottom")===0?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1]))},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:ar+" "+this.tipClass});e.appendChild(this.createElement("div",{className:mu+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:qn+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){e.indexOf("Right")===0?this.tipClass=vu:e.indexOf("Bottom")===0?this.tipClass=Mo:e.indexOf("Left")===0?this.tipClass=Fo:this.tipClass=Ur},t.prototype.renderPopup=function(e){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(Wn),this.popupObj=new as(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getScalingFactor=function(e){if(!e)return{x:1,y:1};var i={x:1,y:1},s=e.closest('[style*="transform: scale"]');if(s&&s!==this.tooltipEle&&s.contains(this.tooltipEle)){var r=window.getComputedStyle(s),n=r.getPropertyValue("transform"),o=n.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);i.x=o[0],i.y=o[3]}return i},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var i=this.element.closest('[style*="zoom"]');i&&(i.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(i).zoom));var s=Tt(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),r=this.getScalingFactor(e),n=this.calculateTooltipOffset(this.position,r.x,r.y),o=this.calculateElementPosition(s,n),l=o[0],h=o[1],p=this.collisionFlipFit(e,l,h);return p.left=p.left/r.x,p.top=p.top/r.y,this.tooltipEle.style.display="",p},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var i=this.getTooltipPosition(e);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.closePopupHandler=function(){this.isReact&&!(this.opensOn==="Click"||typeof this.content=="function")&&this.clearTemplate(["content"]),this.clear();var e={type:this.tooltipEventArgs.event?this.tooltipEventArgs.event.type:null,cancel:!1,target:this.tooltipEventArgs.target,event:this.tooltipEventArgs.event?this.tooltipEventArgs.event:null,element:this.tooltipEle,isInteracted:!u(this.tooltipEventArgs.event)};this.trigger("afterClose",e),e=null},t.prototype.calculateTooltipOffset=function(e,i,s){i===void 0&&(i=1),s===void 0&&(s=1);var r={top:0,left:0},n,o,l,h,p,c,d,f;if(i!==1||s!==1){var g=this.tooltipEle.getBoundingClientRect(),y=void 0;l=Math.round(g.width),h=Math.round(g.height),p=Me("."+ar,this.tooltipEle),p&&(y=p.getBoundingClientRect()),n=p?Math.round(y.width):0,o=p?Math.round(y.height):0,c=this.showTipPointer?uu:pu,d=o/2+Ri+(h-this.tooltipEle.clientHeight*s),f=n/2+Ri+(l-this.tooltipEle.clientWidth*i)}else l=this.tooltipEle.offsetWidth,h=this.tooltipEle.offsetHeight,p=Me("."+ar,this.tooltipEle),n=p?p.offsetWidth:0,o=p?p.offsetHeight:0,c=this.showTipPointer?uu:pu,d=o/2+Ri+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),f=n/2+Ri+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(c+=Hf),e){case"RightTop":r.left+=n+c,r.top-=h-d;break;case"RightCenter":r.left+=n+c,r.top-=h/2;break;case"RightBottom":r.left+=n+c,r.top-=d;break;case"BottomRight":r.top+=o+c,r.left-=f;break;case"BottomCenter":r.top+=o+c,r.left-=l/2;break;case"BottomLeft":r.top+=o+c,r.left-=l-f;break;case"LeftBottom":r.left-=n+l+c,r.top-=d;break;case"LeftCenter":r.left-=n+l+c,r.top-=h/2;break;case"LeftTop":r.left-=n+l+c,r.top-=h-d;break;case"TopLeft":r.top-=h+o+c,r.left-=l-f;break;case"TopRight":r.top-=h+o+c,r.left-=f;break;default:r.top-=h+o+c,r.left-=l/2;break}return r.left+=this.offsetX,r.top+=this.offsetY,r},t.prototype.updateTipPosition=function(e){var i=Ke("."+ar+",."+mu+",."+qn,this.tooltipEle),s=[Ur,Mo,vu,Fo];R(i,s),this.setTipClass(e),x(i,this.tipClass)},t.prototype.adjustArrow=function(e,i,s,r){var n=Me("."+ar,this.tooltipEle);if(!(this.showTipPointer===!1||n===null)){this.updateTipPosition(i);var o,l;this.tooltipEle.style.display="block";var h=this.tooltipEle.clientWidth,p=this.tooltipEle.clientHeight,c=Me("."+qn,this.tooltipEle),d=n.offsetWidth,f=n.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===Ur||this.tipClass===Mo){if(this.tipClass===Ur?(l="99.9%",c.style.top="-"+(f-2)+"px"):(l=-(f-1)+"px",c.style.top="-"+(f-6)+"px"),e){var g=s!=="Center"||h>e.offsetWidth||this.mouseTrail;g&&s==="Left"||!g&&this.tipPointerPosition==="End"?o=h-d-Ri+"px":g&&s==="Right"||!g&&this.tipPointerPosition==="Start"?o=Ri+"px":g&&(this.tipPointerPosition==="End"||this.tipPointerPosition==="Start")?o=this.tipPointerPosition==="End"?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2-Ri+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2+Ri+"px":o=h/2-d/2+"px"}}else{this.tipClass===Fo?(o="99.9%",c.style.left="-"+(d-2)+"px"):(o=-(d-1)+"px",c.style.left=-d+(d-2)+"px");var g=r!=="Center"||p>e.offsetHeight||this.mouseTrail;g&&r==="Top"||!g&&this.tipPointerPosition==="End"?l=p-f-Ri+"px":g&&r==="Bottom"||!g&&this.tipPointerPosition==="Start"?l=Ri+"px":l=p/2-f/2+"px"}n.style.top=l,n.style.left=o}},t.prototype.renderContent=function(e){var i=this,s=Me("."+gu,this.tooltipEle);if(this.cssClass&&x([this.tooltipEle],this.cssClass.split(" ")),e&&!u(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),u(this.content))e&&!u(e.getAttribute("data-content"))&&(s.innerHTML=e.getAttribute("data-content"));else if(s.innerHTML="",this.content instanceof HTMLElement)s.appendChild(this.content);else if(typeof this.content=="string")if(this.isAngular?this.setProperties({content:Kt.sanitize(this.content)},!0):this.content=this.enableHtmlSanitizer?Kt.sanitize(this.content):this.content,this.enableHtmlParse){var r=qe(this.content),n=r({},this,"content",this.element.id+"content",void 0,void 0,s,this.root);n&&Ie(n,s)}else s.textContent=this.content;else{var o=qe(this.content),n=o({},this,"content",this.element.id+"content",void 0,void 0,s);n&&(this.isAngular&&this.animation.open.effect==="ZoomIn"&&setTimeout(function(){i.reposition(e)},1),Ie(n,s)),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(!this.isSticky){var e=this.tooltipEle.querySelector("."+du+"."+fu);e&&ce(e);return}var i=this.createElement("div",{className:du+" "+fu,attrs:{role:"button","aria-label":"Press escape to close the Tooltip"}});this.tooltipEle.appendChild(i),v.add(i,E.touchStartEvent,this.onStickyClose,this)},t.prototype.addDescribedBy=function(e,i){var s=(e.getAttribute("aria-describedby")||"").split(/\s+/);s.indexOf(i)<0&&s.push(i),G(e,{"aria-describedby":s.join(" ").trim(),"data-tooltip-id":i})},t.prototype.removeDescribedBy=function(e){var i=e.getAttribute("data-tooltip-id"),s=(e.getAttribute("aria-describedby")||"").split(/\s+/),r=s.indexOf(i);r!==-1&&s.splice(r,1),e.removeAttribute("data-tooltip-id");var n=s.join(" ").trim();n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(){var e=this;if(!this.isSticky){var i=function(){e.close()};this.autoCloseTimer=setTimeout(i,Pf)}},t.prototype.targetClick=function(e){var i;if(this.target?i=M(e.target,this.target):i=this.element,!u(i)){var s=e;i.getAttribute("data-tooltip-id")===null?s.type==="mousedown"&&s.button===2||this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,i)}},t.prototype.targetHover=function(e){var i;if(this.target?i=M(e.target,this.target):i=this.element,!(u(i)||i.getAttribute("data-tooltip-id")!==null&&this.closeDelay===0)){!u(this.tooltipEle)&&this.tooltipEle.getAttribute("e-animation-id")&&(It.stop(this.tooltipEle),this.clear());for(var s=[].slice.call(Ke('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)),r=0,n=s;r<n.length;r++){var o=n[r];this.restoreElement(o)}this.showTooltip(i,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&v.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,i,s){var r=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,v.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:s?s.type:null,cancel:!1,target:e,event:s||null,element:this.tooltipEle,isInteracted:!u(s)};var n=function(o){r.beforeRenderCallback(o,e,s,i)};this.trigger("beforeRender",this.tooltipEventArgs,n.bind(this))},t.prototype.beforeRenderCallback=function(e,i,s,r){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,u(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?at(this.element.getAttribute("id")):at("tooltip"),this.tooltipEle=this.createElement("div",{className:Ro+" "+Oo+" "+Wn,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}}),this.tooltipEle.style.width=ve(this.width),this.tooltipEle.style.height=ve(this.height),this.tooltipEle.style.position="absolute",this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,s,r,this)):i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(i,this.ctrlId+"_content"),this.renderContent(i),It.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,s,r,this)))},t.prototype.appendContainer=function(e){typeof this.container=="string"?this.container==="body"?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=Me(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer=this.containerElement.tagName==="BODY"),this.isBodyContainer||x([this.containerElement],yu),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,i){e&&(E.isDevice&&x([i.tooltipEle],Vf),i.width!=="auto"&&(i.tooltipEle.style.maxWidth=ve(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:gu})),this.appendContainer(i),R([i.tooltipEle],zf),i.addDescribedBy(e,i.ctrlId+"_content"),i.renderContent(e),x([i.tooltipEle],Gr),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(e),i.adjustArrow(e,i.position,i.tooltipPositionX,i.tooltipPositionY),It.stop(i.tooltipEle),i.reposition(e))},t.prototype.tooltipAfterRender=function(e,i,s,r){if(e){R([r.tooltipEle],Gr),x([r.tooltipEle],Bo),r.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:r.tooltipEle,isInteracted:!u(i)},r.needTemplateReposition()&&!r.mouseTrail&&(s.effect==="None"||s.effect==="FadeIn"||this.isReact&&typeof r.content!="string")&&(r.tooltipEle.style.display="none");var n=function(o){r.beforeOpenCallback(o,e,s,i)};r.trigger("beforeOpen",r.tooltipEventArgs,n.bind(r))}},t.prototype.beforeOpenCallback=function(e,i,s,r){var n=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var o={name:s.effect==="None"&&fr==="Enable"?"FadeIn":this.animation.open.effect,duration:s.duration,delay:s.delay,timingFunction:"easeOut"};if(s.effect==="None"&&(o=void 0),this.openDelay>0){var l=function(){n.mouseTrail&&v.add(i,"mousemove touchstart mouseenter",n.onMouseMove,n),n.popupObj&&(n.popupObj.show(o,i),n.mouseMoveEvent&&n.mouseTrail&&n.onMouseMove(n.mouseMoveEvent))};this.showTimer=setTimeout(l,this.openDelay)}else this.popupObj&&this.popupObj.show(o,i)}r&&this.wireMouseEvents(r,i)},t.prototype.needTemplateReposition=function(){var e=this;return!u(e.viewContainerRef)&&typeof e.viewContainerRef!="string"||this.isReact},t.prototype.checkCollision=function(e,i,s){var r={left:i,top:s,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},n=es(this.tooltipEle,this.checkCollideTarget(),i,s);return n.length>0&&(r.horizontal=n.indexOf("left")>=0?"Right":n.indexOf("right")>=0?"Left":this.tooltipPositionX,r.vertical=n.indexOf("top")>=0?"Bottom":n.indexOf("bottom")>=0?"Top":this.tooltipPositionY),r},t.prototype.calculateElementPosition=function(e,i){return[this.isBodyContainer?e.left+i.left:e.left-this.containerElement.getBoundingClientRect().left+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+i.top:e.top-this.containerElement.getBoundingClientRect().top+i.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,i,s){var r=this.checkCollision(e,i,s),n=r.position;if(this.tooltipPositionY!==r.vertical&&(n=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?r.vertical+this.tooltipPositionX:this.tooltipPositionX+r.vertical),this.tooltipPositionX!==r.horizontal&&(n.indexOf("Left")===0&&(r.vertical=n==="LeftTop"||n==="LeftCenter"?"Top":"Bottom",n=r.vertical+"Left"),n.indexOf("Right")===0&&(r.vertical=n==="RightTop"||n==="RightCenter"?"Top":"Bottom",n=r.vertical+"Right"),r.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:n},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)n=this.position;else{var o=r.vertical,l=r.horizontal;if(r.position!==n){var h=Tt(e,l,o,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,n,l,o);var p=this.getScalingFactor(e),c=this.calculateTooltipOffset(n,p.x,p.y);c.top-=this.getOffSetPosition("TopBottom",n,this.offsetY),c.left-=this.getOffSetPosition("RightLeft",n,this.offsetX),r.position=n;var d=this.calculateElementPosition(h,c);r.left=d[0],r.top=d[1]}else this.adjustArrow(e,n,l,o)}var f={left:r.left,top:r.top},g=this.isBodyContainer?nh(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},f):f;this.tooltipEle.style.display="block";var y=Me("."+ar,this.tooltipEle);if(this.showTipPointer&&y!=null&&(n.indexOf("Bottom")===0||n.indexOf("Top")===0)){var b=parseInt(y.style.left,10)-(g.left-r.left);b<0?b=0:b+y.offsetWidth>this.tooltipEle.clientWidth&&(b=this.tooltipEle.clientWidth-y.offsetWidth),y.style.left=b.toString()+"px"}return this.tooltipEle.style.display="",f.left=g.left,f.top=g.top,f},t.prototype.getOffSetPosition=function(e,i,s){return e.indexOf(this.position.split(/(?=[A-Z])/)[0])!==-1&&e.indexOf(i.split(/(?=[A-Z])/)[0])!==-1?2*s:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,i,s){var r=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var n=function(){r.closeDelay&&r.tooltipEle&&r.isTooltipOpen||r.tooltipHide(e,i,s)};this.hideTimer=setTimeout(n,this.closeDelay)}else this.tooltipHide(e,i,s)},t.prototype.tooltipHide=function(e,i,s){var r=this,n;i?n=this.target?s||i.target:this.element:n=Me('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:n,event:i||null,element:this.tooltipEle,isInteracted:!u(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(o){o.cancel?r.isHidden=!1:(r.mouseMoveBeforeRemove(),r.popupHide(e,n,i))})},t.prototype.popupHide=function(e,i,s){i&&s&&this.restoreElement(i),this.isHidden=!0;var r={name:e.effect==="None"&&fr==="Enable"?"FadeOut":this.animation.close.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};e.effect==="None"&&(r=void 0),this.popupObj&&this.popupObj.hide(r)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),u(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){var e=this.findTarget();e&&this.restoreElement(e),this.tooltipEle&&(R([this.tooltipEle],Bo),x([this.tooltipEle],Gr)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&ce(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var i=e.relatedTarget;if(i&&!this.mouseTrail){var s=M(i,"."+Ro+"."+Wn+"."+Oo);s?v.add(s,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),this.closeDelay===0&&(this.animation.close.effect==="None"||this.isReact&&typeof this.content!="string")&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear();this.popupObj&&!this.popupObj.element.classList.contains(Gr)&&this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),v.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(){this.close()},t.prototype.onMouseMove=function(e){var i=0,s=0;if(e.type.indexOf("touch")>-1?(e.preventDefault(),i=e.touches[0].pageX,s=e.touches[0].pageY):(i=e.pageX,s=e.pageY),!u(this.tooltipEle)){It.stop(this.tooltipEle),R([this.tooltipEle],Bo),x([this.tooltipEle],Gr),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var r=this.getScalingFactor(e.target),n=this.calculateTooltipOffset(this.position,r.x,r.y),o=i+n.left+this.offsetX,l=s+n.top+this.offsetY,h=this.checkCollision(e.target,o,l);if(this.tooltipPositionX!==h.horizontal||this.tooltipPositionY!==h.vertical){var p=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?h.vertical+h.horizontal:h.horizontal+h.vertical;h.position=p,this.adjustArrow(e.target,h.position,h.horizontal,h.vertical);var c=this.calculateTooltipOffset(h.position,r.x,r.y);h.left=i+c.left-this.offsetX,h.top=s+c.top-this.offsetY}this.tooltipEle.style.left=h.left+"px",this.tooltipEle.style.top=h.top+"px"}},t.prototype.keyDown=function(e){this.tooltipEle&&e.keyCode===27&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&M(e.target,"."+Lo)===null&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&!this.isSticky&&!M(e.target,"."+Ro+"."+Wn+"."+Oo)&&!this.isSticky&&this.close()},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=Ur,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var i=this.getTriggerList(e),s=0,r=i;s<r.length;s++){var n=r[s];if(n==="Custom")return;n==="Focus"&&this.wireFocusEvents(),n==="Click"&&(E.isIos7||E.isIos)&&v.add(this.element,"mousedown",this.targetClick,this),n==="Click"&&!(E.isIos7||E.isIos)&&v.add(this.element,E.touchStartEvent,this.targetClick,this),n==="Hover"&&(E.isDevice?(this.touchModule=new ks(this.element,{tapHoldThreshold:Nf,tapHold:this.tapHoldHandler.bind(this)}),v.add(this.element,E.touchEndEvent,this.touchEndHandler,this)):v.add(this.element,"mouseover",this.targetHover,this))}this.windowResizeBound=this.windowResize.bind(this),this.keyDownBound=this.keyDown.bind(this),this.touchEndBound=this.touchEnd.bind(this),this.scrollWheelBound=this.scrollHandler.bind(this),document.addEventListener("wheel",this.scrollWheelBound),document.addEventListener("scroll",this.scrollWheelBound),document.addEventListener("touchend",this.touchEndBound),document.addEventListener("keydown",this.keyDownBound),window.addEventListener("resize",this.windowResizeBound)},t.prototype.getTriggerList=function(e){return e?(e==="Auto"&&(e=E.isDevice?"Hover":"Hover Focus"),e.split(" ")):[]},t.prototype.wireFocusEvents=function(){if(u(this.target))v.add(this.element,"focusin",this.targetHover,this);else{var e=[].slice.call(Ke(this.target,this.element));if(this.targetsList=e,!u(this.targetsList)&&this.targetsList.length>0)for(var i=0,s=e;i<s.length;i++){var r=s[i];v.add(r,"focus",this.targetHover,this)}else v.add(this.element,"focusin",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,i){this.tooltipEle&&(this.isSticky||(e.type==="focus"&&v.add(i,"blur",this.onMouseOut,this),e.type==="focusin"&&v.add(i,"focusout",this.onMouseOut,this),e.type==="mouseover"&&v.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(v.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),v.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&this.openDelay===0&&v.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var i=this.getTriggerList(e),s=0,r=i;s<r.length;s++){var n=r[s];if(n==="Custom")return;n==="Focus"&&this.unwireFocusEvents(),n==="Click"&&v.remove(this.element,E.touchStartEvent,this.targetClick),n==="Hover"&&(E.isDevice?(this.touchModule&&this.touchModule.destroy(),v.remove(this.element,E.touchEndEvent,this.touchEndHandler)):v.remove(this.element,"mouseover",this.targetHover))}document.removeEventListener("touchend",this.touchEndBound),this.touchEndBound=null,document.removeEventListener("wheel",this.scrollWheelBound),document.removeEventListener("scroll",this.scrollWheelBound),this.scrollWheelBound=null,window.removeEventListener("resize",this.windowResizeBound),this.windowResizeBound=null,document.removeEventListener("keydown",this.keyDownBound),this.keyDownBound=null},t.prototype.unwireFocusEvents=function(){if(u(this.target))v.remove(this.element,"focusin",this.targetHover);else{var e=[].slice.call(Ke(this.target,this.element));if(!u(this.targetsList)&&this.targetsList.length>0)for(var i=0,s=e;i<s.length;i++){var r=s[i];v.remove(r,"focus",this.targetHover)}else v.remove(this.element,"focusin",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var i=this.getTriggerList(this.opensOn),s=0,r=i;s<r.length;s++){var n=r[s];n==="Focus"&&(v.remove(e,"blur",this.onMouseOut),v.remove(e,"focusout",this.onMouseOut)),n==="Hover"&&!E.isDevice&&v.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(v.remove(e,"mouseenter",this.tooltipHover),v.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&v.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){var e=Me('[data-tooltip-id= "'+this.ctrlId+'_content"]',document);return e},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,i){for(var s=this.findTarget(),r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];switch(o){case"width":this.tooltipEle&&s&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=ve(e.width),this.reposition(s));break;case"height":this.tooltipEle&&s&&(this.tooltipEle.style.height=ve(e.height),this.reposition(s));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&s){var l=Me("."+qn,this.tooltipEle);l&&(l.style.top=l.style.left=null),this.reposition(s)}break;case"tipPointerPosition":this.tooltipEle&&s&&this.reposition(s);break;case"offsetX":if(this.tooltipEle){var h=e.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var p=e.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+p).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&R([this.tooltipEle],i.cssClass.split(" ")),e.cssClass&&x([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?x([this.tooltipEle],cu):R([this.tooltipEle],cu));break;case"isSticky":this.tooltipEle&&s&&(this.renderCloseIcon(),this.reposition(s));break;case"container":u(this.containerElement)||R([this.containerElement],yu),this.container=e.container,this.tooltipEle&&s&&(this.appendContainer(this),this.reposition(s))}}},t.prototype.open=function(e,i){u(i)&&(i=this.animation.open),u(e)&&(e=this.element),e.style.display!=="none"&&this.showTooltip(e,i)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){if(this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e),!u(this.targetsList)&&!u(this.target)){var i=Ke(this.target,this.element);i.length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))}},t.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltipEle&&ce(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Mc(),R([this.element],Lo),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var e=Ke('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element),i=0,s=e;i<s.length;i++){var r=s[i];this.restoreElement(r)}this.containerElement=null,this.tipClass=null,this.tooltipPositionX=null,this.tooltipPositionY=null,this.ctrlId=null,this.tooltipEventArgs=null,this.touchModule=null,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.targetsList=null},Ue([m("auto")],t.prototype,"width",void 0),Ue([m("auto")],t.prototype,"height",void 0),Ue([m()],t.prototype,"content",void 0),Ue([m("body")],t.prototype,"container",void 0),Ue([m()],t.prototype,"target",void 0),Ue([m("TopCenter")],t.prototype,"position",void 0),Ue([m(0)],t.prototype,"offsetX",void 0),Ue([m(0)],t.prototype,"offsetY",void 0),Ue([m(!0)],t.prototype,"showTipPointer",void 0),Ue([m(!0)],t.prototype,"enableHtmlParse",void 0),Ue([m(!1)],t.prototype,"windowCollision",void 0),Ue([m("Auto")],t.prototype,"tipPointerPosition",void 0),Ue([m("Auto")],t.prototype,"opensOn",void 0),Ue([m(!1)],t.prototype,"mouseTrail",void 0),Ue([m(!1)],t.prototype,"isSticky",void 0),Ue([dt({},qf)],t.prototype,"animation",void 0),Ue([m(0)],t.prototype,"openDelay",void 0),Ue([m(0)],t.prototype,"closeDelay",void 0),Ue([m()],t.prototype,"cssClass",void 0),Ue([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ue([m("")],t.prototype,"htmlAttributes",void 0),Ue([O()],t.prototype,"beforeRender",void 0),Ue([O()],t.prototype,"beforeOpen",void 0),Ue([O()],t.prototype,"afterOpen",void 0),Ue([O()],t.prototype,"beforeClose",void 0),Ue([O()],t.prototype,"afterClose",void 0),Ue([O()],t.prototype,"beforeCollision",void 0),Ue([O()],t.prototype,"created",void 0),Ue([O()],t.prototype,"destroyed",void 0),t=Ue([pt],t),t})(Vt),wt={},jf=30,Uf=30,bu=30,Gf=30,_f=30,Kf=30,Yf=36,Xf=36,Po="e-spin-show",ma="e-spin-hide",Cu="e-spin-material",Su="e-spin-material3",wu="e-spin-tailwind3",Iu="e-spin-fabric",xu="e-spin-fluent",Eu="e-spin-fluent2",Au="e-spin-tailwind",Qf="e-spin-bootstrap",Du="e-spin-bootstrap4",ku="e-spin-bootstrap5",Tu="e-spin-high-contrast",Sl="e-spinner-pane",vh="e-spinner-inner",Ka="e-path-circle",$f="e-path-arc",Jf="e-spin-label",wl="e-spin-template",Lu=null,Zf=null;function xr(a,t){var e;if(a.target){var i,s=u(t)?pe:t,r=wg(a.target,s);if(!u(a.cssClass)){var n=a.cssClass.split(" ").filter(function(p){return p.trim()!==""});(e=r.wrap.classList).add.apply(e,n)}if(!u(a.template)||!u(Lu)){var o=u(a.template)?Lu:a.template;r.wrap.classList.add(wl),bg(r.wrap,o,Zf)}else{var l=u(a.type)?cg(r.wrap):a.type,h=u(a.width)?void 0:a.width;i=Cg(h,l),dg(l,r.wrap,i,s),u(a.label)||eg(r.inner_wrap,a.label,s)}r.wrap.classList.add(ma),r=null}}function eg(a,t,e){var i=e("div",{});return i.classList.add(Jf),i.innerHTML=t,a.appendChild(i),i}function tg(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Material",radius:t},Sn(a,i,e,Cu),wn(t,a,"Material",Cu)}function ig(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Tailwind3",radius:t},Sn(a,i,e,wu),wn(t,a,"Tailwind3",wu)}function sg(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Material3",radius:t},Sn(a,i,e,Su),wn(t,a,"Material3",Su)}function rg(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Bootstrap4",radius:t},Sn(a,i,e,Du),wn(t,a,"Bootstrap4",Du)}function ng(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Bootstrap5",radius:t},Sn(a,i,e,ku),wn(t,a,"Bootstrap5",ku)}function ag(a,t,e){var i={},s=0;wt[""+t].timeOut=0,i[""+t]=Sg(t,e,0,0);var r={uniqueID:t,container:a,globalInfo:i,timeOutVar:s};Wc(r)}function og(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Fabric",radius:t},Cn(a,i,Iu),In(t,a,Iu)}function lg(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Fluent",radius:t},Cn(a,i,xu),In(t,a,xu)}function hg(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Fluent2",radius:t},Cn(a,i,Eu),In(t,a,Eu)}function ug(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Tailwind",radius:t},Cn(a,i,Au),In(t,a,Au)}function pg(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"HighContrast",radius:t},Cn(a,i,Tu),In(t,a,Tu)}function cg(a){var t=window.getComputedStyle(a,":after").getPropertyValue("content");return t.replace(/['"]+/g,"")}function dg(a,t,e,i){var s=t.querySelector("."+vh),r=s.querySelector("svg");switch(u(r)||s.removeChild(r),a){case"Material":tg(s,e,i);break;case"Material3":sg(s,e,i);break;case"Fabric":og(s,e);break;case"Fluent":lg(s,e);break;case"Fluent2":hg(s,e);break;case"Bootstrap":fg(s,e);break;case"HighContrast":pg(s,e);break;case"Bootstrap4":rg(s,e,i);break;case"Bootstrap5":ng(s,e,i);break;case"Tailwind":case"Tailwind-dark":ug(s,e);break;case"Tailwind3":ig(s,e,i);break}}function fg(a,t,e){var i=Ti();wt[""+i]={timeOut:0,type:"Bootstrap",radius:t},gg(a,i),mg(a,t)}function gg(a,t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=64,r=32,n=2;i.setAttribute("id",t),i.setAttribute("class",Qf),i.setAttribute("viewBox","0 0 "+s+" "+s),a.insertBefore(i,a.firstChild);for(var o=0;o<=7;o++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",Ka+"_"+o),l.setAttribute("r",n+""),l.setAttribute("transform","translate("+r+","+r+")"),i.appendChild(l)}}function mg(a,t){var e=a.querySelector("svg.e-spin-bootstrap"),i=0,s=0,r=24;e.style.width=e.style.height=t+"px";for(var n=90,o=0;o<=7;o++){var l=Il(i,s,r,n),h=e.querySelector("."+Ka+"_"+o);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),n=n>=360?0:n,n=n+45}}function vg(a,t){var e=[],i=a,s=t,r=!1,n=1;o(i);function o(l){e.push(l),(l!==s||n===1)&&(l<=i&&l>1&&!r?l=parseFloat((l-.2).toFixed(2)):l===1?(l=7,l=parseFloat((l+.2).toFixed(2)),r=!0):l<8&&r?(l=parseFloat((l+.2).toFixed(2)),l===8&&(r=!1)):l<=8&&!r&&(l=parseFloat((l-.2).toFixed(2))),++n,o(l))}return e}function yg(a){for(var t=a.querySelector("svg.e-spin-bootstrap"),e=t.getAttribute("id"),i=1;i<=8;i++){var s=a.getElementsByClassName("e-path-circle_"+(i===8?0:i))[0];r(s,i,i,vg(i,i),e)}function r(n,o,l,h,p){var c=0;d(o);function d(f){wt[""+p].isAnimate&&(++c,n.setAttribute("r",f+""),c>=h.length&&(c=0),wt[p].timeOut=setTimeout(d.bind(null,h[c]),18))}}}function bg(a,t,e){u(e)||a.classList.add(e);var i=a.querySelector(".e-spinner-inner");i.innerHTML=t}function Cg(a,t){var e;switch(t){case"Material":e=jf;break;case"Material3":e=Uf;break;case"Fabric":e=bu;break;case"Tailwind":case"Tailwind-dark":case"Tailwind3":e=bu;break;case"Fluent":e=Gf;break;case"Fluent2":e=_f;break;case"Bootstrap4":e=Yf;break;case"Bootstrap5":e=Xf;break;default:e=Kf}return a=a?parseFloat(a+""):e,t==="Bootstrap"?a:a/2}function Sg(a,t,e,i){return{radius:t,count:e,previousId:i}}function Ti(){for(var a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}function Cn(a,t,e,i){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",e);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",Ka);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",$f),a.insertBefore(s,a.firstChild),s.appendChild(r),s.appendChild(n)}function Sn(a,t,e,i){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",i),s.setAttribute("id",t),r.setAttribute("class",Ka),a.insertBefore(s,a.firstChild),s.appendChild(r)}function wg(a,t){var e=t("div",{}),i=t("div",{});return e.classList.add(Sl),i.classList.add(vh),i.setAttribute("aria-disabled","true"),a.appendChild(e),e.appendChild(i),{wrap:e,inner_wrap:i}}function Wc(a){var t=1,e=149,i=1333,s=75;Ig(t,e,Ag,i,a.globalInfo[a.uniqueID].count,s,a),a.globalInfo[a.uniqueID].count=++a.globalInfo[a.uniqueID].count%4}function Ig(a,t,e,i,s,r,n){var o=++n.globalInfo[n.uniqueID].previousId,l=new Date().getTime(),h=t-a,p=xg(n.globalInfo[n.uniqueID].radius*2+""),c=jc(p),d=-90*(n.globalInfo[n.uniqueID].count||0);f(n);function f(y){var b=Math.max(0,Math.min(new Date().getTime()-l,i));g(e(b,a,h,i),y.container),o===y.globalInfo[y.uniqueID].previousId&&b<i?wt[y.uniqueID].timeOut=setTimeout(f.bind(null,y),1):Wc(y)}function g(y,b){if(!u(b.querySelector("svg.e-spin-material"))||!u(b.querySelector("svg.e-spin-material3"))||!u(b.querySelector("svg.e-spin-tailwind3"))){var C=void 0;if(!u(b.querySelector("svg.e-spin-material"))&&!u(b.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?C=b.querySelector("svg.e-spin-material"):!u(b.querySelector("svg.e-spin-material3"))&&!u(b.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))?C=b.querySelector("svg.e-spin-material3"):!u(b.querySelector("svg.e-spin-tailwind3"))&&!u(b.querySelector("svg.e-spin-tailwind3").querySelector("path.e-path-circle"))&&(C=b.querySelector("svg.e-spin-tailwind3")),!u(C)){var S=C.querySelector("path.e-path-circle");S.setAttribute("stroke-dashoffset",Uc(p,c,y,r)+""),S.setAttribute("transform","rotate("+d+" "+p/2+" "+p/2+")")}}}}function wn(a,t,e,i){var s=a*2,r=t.querySelector("svg."+i),n=r.querySelector("path.e-path-circle"),o=jc(s),l=s/2+"px";r.setAttribute("viewBox","0 0 "+s+" "+s),r.style.width=r.style.height=s+"px",r.style.transformOrigin=l+" "+l+" "+l,n.setAttribute("d",Eg(s,o)),(e==="Material"||e==="Material3"||e==="Fluent2"||e==="Tailwind3")&&(n.setAttribute("stroke-width",o+""),n.setAttribute("stroke-dasharray",(s-o)*Math.PI*.75+""),n.setAttribute("stroke-dashoffset",Uc(s,o,1,75)+""))}function xg(a){var t=parseFloat(a);return t}function Eg(a,t){var e=a/2,i=t/2;return"M"+e+","+i+"A"+(e-i)+","+(e-i)+" 0 1 1 "+i+","+e}function jc(a){return 10/100*a}function Uc(a,t,e,i){return(a-t)*Math.PI*(3*i/100-e/100)}function Ag(a,t,e,i){var s=(a/=i)*a,r=s*a;return t+e*(6*r*s+-15*s*s+10*r)}function In(a,t,e){var i=a,s=a,r=a*2,n=315,o=45,l=t.querySelector("."+e),h=l.querySelector(".e-path-circle"),p=l.querySelector(".e-path-arc"),c=r/2+"px";h.setAttribute("d",kg(i,s,a)),p.setAttribute("d",Dg(i,s,a,n,o)),l.setAttribute("viewBox","0 0 "+r+" "+r),l.style.transformOrigin=c+" "+c+" "+c,l.style.width=l.style.height=r+"px"}function Il(a,t,e,i){var s=(i-90)*Math.PI/180;return{x:a+e*Math.cos(s),y:t+e*Math.sin(s)}}function Dg(a,t,e,i,s){var r=Il(a,t,e,s),n=Il(a,t,e,i),o=["M",r.x,r.y,"A",e,e,0,0,0,n.x,n.y].join(" ");return o}function kg(a,t,e){var i=["M",a,t,"m",-e,0,"a",e,e,0,1,0,e*2,0,"a",e,e,0,1,0,-e*2,0].join(" ");return i}function Is(a){Gc(a,!1),a=null}function Gc(a,t){var e;if(a)if(a.classList.contains(Sl))e=a;else{var i=a.querySelectorAll("."+Sl);if(E.isIE){for(var s=0;s<i.length;s++)if(i[s].parentElement&&i[s].parentElement===a){e=i[s];break}}else e=Array.from(i).find(function(h){return h.parentElement===a})||null}if(a&&e){var r=e.querySelector("."+vh),n=t?!e.classList.contains(wl)&&!e.classList.contains(ma):!e.classList.contains(wl)&&!e.classList.contains(Po);if(n){var o=e.querySelector("svg");if(u(o))return;var l=o.getAttribute("id");switch(wt[""+l].isAnimate=!t,wt[""+l].type){case"Material":case"Material3":case"Tailwind3":t?clearTimeout(wt[l].timeOut):ag(r,l,wt[l].radius);break;case"Bootstrap":t?clearTimeout(wt[l].timeOut):yg(r);break}}t?Se(e,[ma],[Po]):Se(e,[Po],[ma]),a=null}}function Er(a){Gc(a,!0),a=null}var Ya=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Ne=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},jn="enter",No="escape",rt="e-focused",Un="e-menu-header",Xe="e-selected",_r="e-separator",or="uparrow",wi="downarrow",Bs="leftarrow",Ki="rightarrow",lr="home",Gn="end",_n="tab",Ho="e-caret",hr="e-menu-item",Vo="e-disabled",Kn="e-menu-hide",zo="e-icons",qo="e-rtl",ur="e-menu-popup",Tg="Template",Lg=(function(a){Ya(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Ne([m("id")],t.prototype,"itemId",void 0),Ne([m("parentId")],t.prototype,"parentId",void 0),Ne([m("text")],t.prototype,"text",void 0),Ne([m("iconCss")],t.prototype,"iconCss",void 0),Ne([m("url")],t.prototype,"url",void 0),Ne([m("separator")],t.prototype,"separator",void 0),Ne([m("items")],t.prototype,"children",void 0),t})(Je),va=(function(a){Ya(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Ne([m(null)],t.prototype,"iconCss",void 0),Ne([m("")],t.prototype,"id",void 0),Ne([m(!1)],t.prototype,"separator",void 0),Ne([Rs([],t)],t.prototype,"items",void 0),Ne([m("")],t.prototype,"text",void 0),Ne([m("")],t.prototype,"url",void 0),Ne([m()],t.prototype,"htmlAttributes",void 0),t})(Je),Rg=(function(a){Ya(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Ne([m("SlideDown")],t.prototype,"effect",void 0),Ne([m(400)],t.prototype,"duration",void 0),Ne([m("ease")],t.prototype,"easing",void 0),t})(Je),Mg=(function(a){Ya(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.navIdx=[],s.animation=new It({}),s.isTapHold=!1,s.tempItem=[],s.showSubMenuOn="Auto",s.isAnimationNone=!1,s.isKBDAction=!1,s}return t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if(this.element.tagName==="EJS-CONTEXTMENU"){e=this.createElement("ul",{id:at(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var i=H("ej2_instances",this.element);R([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,We("ej2_instances",i,this.element)}else{e=this.createElement("ul",{id:at(this.getModuleName())}),Ie([].slice.call(this.element.cloneNode(!0).children),e);var s=this.element.nextElementSibling;s?this.element.parentElement.insertBefore(e,s):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if(this.element.tagName==="EJS-MENU"){for(var r=this.element,n=H("ej2_instances",r),e=this.createElement("ul"),o=this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"}),l=0,h=r.attributes.length;l<h;l++)e.setAttribute(r.attributes[l].nodeName,r.attributes[l].nodeValue);r.parentNode.insertBefore(o,r),Z(r),r=e,o.appendChild(r),We("ej2_instances",n,r),this.clonedElement=o,this.element=r,this.element.id||(this.element.id=at(this.getModuleName()))}},t.prototype.render=function(){var e=this;this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();var i=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(function(){Li(e.createElement,i,e.element,"hscroll",e.enableRtl)})},t.prototype.enableTouchScroll=function(e){var i=0;this.touchStartFn=function(s){i=s.touches[0].clientY},this.touchMoveFn=function(s){var r=s.touches[0].clientY,n=i-r,o=e.scrollTop===0,l=e.scrollTop+e.clientHeight===e.scrollHeight;(o&&n<0||l&&n>0)&&s.preventDefault(),i=r},e.addEventListener("touchstart",this.touchStartFn,{passive:!1}),e.addEventListener("touchmove",this.touchMoveFn,{passive:!1})},t.prototype.touchOutsideHandler=function(e){var i=e.target;M(i,".e-"+this.getModuleName()+"-wrapper")||this.closeMenu()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&x([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&e.classList.add(qo),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e)),this.defaultOption=this.showItemOnClick},t.prototype.renderItems=function(){if(!this.items.length){var e=St.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),this.element.innerHTML=""}var i=this.createItems(this.items);if(Ie(Array.prototype.slice.call(i.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu){if(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling){var s=this.getWrapper();this.element.classList.contains("e-vertical")?Li(this.createElement,s,this.element,"vscroll",this.enableRtl):Li(this.createElement,s,this.element,"hscroll",this.enableRtl)}}else this.element.parentElement.setAttribute("role","dialog"),this.element.parentElement.setAttribute("aria-label","context menu")},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var i=void 0,s=Ke(this.target),r=0,n=s.length;r<n;r++)i=s[r],this.isMenu?v.add(i,"click",this.menuHeaderClickHandler,this):E.isIos?new ks(i,{tapHold:this.touchHandler.bind(this)}):v.add(i,"contextmenu",this.cmenuHandler,this);if(this.targetElement=i,!this.isMenu){v.add(this.targetElement,"scroll",this.scrollHandler,this);for(var o=0,l=bl(this.targetElement);o<l.length;o++){var h=l[o];v.add(h,"scroll",this.scrollHandler,this)}}}E.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),v.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),v.add(document,"mousedown",this.delegateMouseDownHandler,this),v.add(document,"keydown",this.domKeyHandler,this),!this.isMenu&&!this.target&&v.add(document,"scroll",this.scrollHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),v.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=ts(e,{selector:"."+hr}),!this.isMenu&&this.enableScrolling&&(this.enableTouchScroll(e),document.addEventListener("touchstart",this.touchOutsideHandler.bind(this),{passive:!0}))},t.prototype.wireKeyboardEvent=function(e){var i={downarrow:wi,uparrow:or,enter:jn,leftarrow:Bs,rightarrow:Ki,escape:No};this.isMenu&&(i.home=lr,i.end=Gn,i.tab=_n),new Gt(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:i})},t.prototype.mouseDownHandler=function(e){M(e.target,".e-"+this.getModuleName()+"-wrapper")!==this.getWrapper()&&!M(e.target,".e-"+this.getModuleName()+"-popup")&&this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyHandler=function(e){(e.keyCode===38||e.keyCode===40)&&e.target&&(e.target.classList.contains("e-contextmenu")||e.target.classList.contains("e-menu-item"))&&e.preventDefault()},t.prototype.domKeyHandler=function(e){e.keyCode===27&&(this.isMenuVisible()&&e.stopImmediatePropagation(),e.action=No,this.leftEscKeyHandler(e))},t.prototype.keyBoardHandler=function(e){var i="",s=e.target,r=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&e.keyCode===13&&s.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([rt,Xe],[M(s,".e-"+this.getModuleName()+"-wrapper")]),this.isKBDAction=!0,r)switch(e.action){case Ki:i=Ki,e.action=wi;break;case Bs:i=Bs,e.action=or;break;case wi:i=wi,e.action=Ki;break;case or:i=or,e.action="";break}else if(this.enableRtl)switch(e.action){case Bs:r=!0,i=Bs,e.action=Ki;break;case Ki:r=!0,i=Ki,e.action=Bs;break}switch(e.action){case wi:case or:case Gn:case lr:case _n:this.upDownKeyHandler(e);break;case Ki:this.rightEnterKeyHandler(e);break;case Bs:this.leftEscKeyHandler(e);break;case jn:this.hamburgerMode&&s.tagName==="SPAN"&&s.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break}this.isAnimationNone&&(this.isKBDAction=!1),r&&(e.action=i)},t.prototype.upDownKeyHandler=function(e){var i=this.getUlByNavIdx(),s=e.action===wi||e.action===lr||e.action===_n?0:i.childElementCount-1,r=s,n=this.getLIByClass(i,rt);n&&(e.action!==Gn&&e.action!==lr&&(r=this.getIdx(i,n)),n.classList.remove(rt),e.action!==Gn&&e.action!==lr&&(e.action===wi?r++:r--,r===(e.action===wi?i.childElementCount:-1)&&(r=s)));var o=i.children[r];r=this.isValidLI(o,r,e.action),i.children[r].classList.add(rt),i.children[r].focus()},t.prototype.isValidLI=function(e,i,s){var r=this.getUlByNavIdx(),n=s===wi||s===lr||s===_n?0:r.childElementCount-1;return(e.classList.contains(_r)||e.classList.contains(Vo)||e.classList.contains(Kn))&&(s===wi&&i===r.childElementCount-1||s===or&&i===0?i=n:s===wi||s===Ki||s==="tab"&&e.classList.contains(_r)?i++:i--),e=r.children[i],e&&(e.classList.contains(_r)||e.classList.contains(Vo)||e.classList.contains(Kn))&&(i=this.isValidLI(e,i,s)),i},t.prototype.getUlByNavIdx=function(e){var i=this;if(e===void 0&&(e=this.navIdx.length),this.isMenu){var s=[this.getWrapper()].concat([].slice.call(Ke("."+ur)))[e],r=[],n=Ke("."+ur);return n.forEach(function(o){(i.element.id===o.id.split("-")[2]||o.id.split("-")[2]+"-"+o.id.split("-")[3])&&r.push(o)}),s=[this.getWrapper()].concat([].slice.call(r))[e],u(s)?null:Me(".e-menu-parent",s)}else return!document.body.contains(this.element)&&e===0?null:this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var i,s=this.getUlByNavIdx(),r=this.getLIByClass(s,rt);if(r){var n=this.getIdx(s,r),o=this.navIdx.concat(n),l=this.getItem(o);if(l.items.length)this.navIdx.push(n),this.keyType="right",this.action=e.action,this.openMenu(r,l,-1,-1,e);else if(e.action===jn){this.isMenu&&this.navIdx.length===0?this.removeLIStateByClass([Xe],[this.getWrapper()]):r.classList.remove(rt),r.classList.add(Xe),i={element:r,item:l,event:e},this.trigger("select",i);var h=r.querySelector(".e-menu-url");if(l.url&&h)switch(h.getAttribute("target")){case"_blank":window.open(l.url,"_blank");break;case"_parent":window.parent.location.href=l.url;break;default:window.location.href=l.url}this.closeMenu(null,e);var p=this.getLIByClass(this.getUlByNavIdx(),Xe);p&&(p.classList.add(rt),p.focus())}}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):e.action===No&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.currentTarget=e.target,this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,i,s){var r=this;if(e===void 0&&(e=0),i===void 0&&(i=null),this.isMenuVisible()){var n=void 0,o,l=this.getWrapper(),h=void 0,p,c=this.getPopups(),d=!1,f=this.isMenu?c.length+1:l.childElementCount,g=this.isMenu&&f!==1?Me(".e-ul",c[f-2]):Ke(".e-menu-parent",l)[f-1];if(this.isMenu&&g.classList.contains("e-menu")&&(n=this.getLIByClass(g,Xe),n&&n.classList.remove(Xe),d=!0),!d){var y=i&&i.target&&this.getLI(i.target);y?this.cli=y:this.cli=g.children[0],o=this.navIdx.length?this.getItem(this.navIdx):null,p=o?o.items:this.items,h={element:g,parentItem:o,items:p,event:i,cancel:!1,isFocused:!0},this.trigger("beforeClose",h,function(b){var C,S,I="",A,T=!b.cancel;(T||r.isCMenu)&&(r.isMenu?(C=M(g,"."+ur),r.hamburgerMode&&(C.parentElement.style.minHeight="",M(g,".e-menu-item").setAttribute("aria-expanded","false")),r.unWireKeyboardEvent(C),Ui(ii(C.children[0],ys),C.children[0]),A=ii(C,as),A.hide(),I=C.id,A.destroy(),Z(C)):(r.isContextMenuClosed=!1,r.toggleAnimation(g,!1)),S={element:g,parentItem:o,items:p},r.trigger("onClose",S),r.navIdx.pop(),r.navIdx.length===0&&i&&i.type==="keyup"&&(r.showSubMenu=!1),r.isMenu||(v.remove(g,"keydown",r.keyHandler),r.keyType==="right"&&(r.keyType=""))),r.updateReactTemplate();var L,_,X,re=r.getWrapper()&&r.getUlByNavIdx();if(r.isCMenu&&(r.canOpen(i.target)&&r.openMenu(null,null,r.pageY,r.pageX,i),r.isCMenu=!1),r.isMenu&&re&&I.length){var ye=RegExp;L=new ye("(.*)-ej2menu-"+r.element.id+"-popup").exec(I)[1],_=re.querySelector('[id="'+L+'"]'),X=y&&re.querySelector('[id="'+y.id+'"]')}else re&&(_=re.querySelector(".e-menu-item.e-selected"),X=y&&re.querySelector('[id="'+y.id+'"]'));var V=y&&y.querySelectorAll(".e-menu-item");if(T&&r.hamburgerMode&&e&&!V.length)r.afterCloseMenu(i);else if(T&&!r.hamburgerMode&&_&&!X&&r.keyType!=="left"&&(r.navIdx.length||!r.isMenu&&r.navIdx.length===0)){var q=i&&i.target.classList&&(i.target.classList.contains("e-vscroll")||i.target.classList.contains("e-scroll-nav"))?M(i.target,".e-menu-wrapper"):null;q?(q=q.querySelector(".e-menu-item"),(r.showItemOnClick||q&&r.getIndex(q.id,!0).length<=r.navIdx.length)&&r.closeMenu(r.navIdx[r.navIdx.length-1],i,!0)):i&&i.target.classList&&i.target.classList.contains("e-nav-arrow")||r.closeMenu(r.navIdx[r.navIdx.length-1],i)}else if(T&&!s&&!e&&(r.hamburgerMode&&r.navIdx.length||r.navIdx.length===1&&y&&re!==y.parentElement))r.closeMenu(null,i);else if(T&&u(e)&&r.navIdx.length)r.closeMenu(null,i);else if(T&&!r.isMenu&&!e&&r.navIdx.length===0&&!r.isMenusClosed&&!r.isCmenuHover)r.isMenusClosed=!0,r.closeMenu(0,i);else if(T&&r.isMenu&&i&&i.target&&r.navIdx.length!==0&&M(i.target,".e-menu-parent.e-control"))r.closeMenu(0,i);else if(T&&!r.isMenu&&Ke(".e-menu-parent",l)[e-1]&&i.which===3)r.closeMenu(null,i);else{if(T&&(r.keyType==="right"||r.keyType==="click"))r.afterCloseMenu(i);else{var z=r.getUlByNavIdx(),U=r.getLIByClass(z,Xe);if(U&&(U.setAttribute("aria-expanded","false"),U.classList.remove(Xe),(b.isFocused&&y||r.keyType==="left")&&(U.classList.add(rt),(!i.target||!i.target.classList.contains("e-edit-template"))&&U.focus())),!T&&r.hamburgerMode&&y&&y.getAttribute("aria-expanded")==="false"&&y.getAttribute("aria-haspopup")==="true"){M(y,".e-menu-parent.e-control")?r.navIdx=[]:r.navIdx.pop(),r.navIdx.push(r.cliIdx);var ie=r.getItem(r.navIdx);y.setAttribute("aria-expanded","true"),r.openMenu(y,ie,-1,-1,i)}}r.navIdx.length<1&&(r.showSubMenuOn==="Hover"||r.showSubMenuOn==="Click")&&(r.showItemOnClick=r.defaultOption,r.showSubMenuOn="Auto")}r.removeStateWrapper()})}}},t.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&this.navIdx.length===0){var e=void 0;this.portals&&(e=this.portals.splice(0,this.items.length)),this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}},t.prototype.getMenuItemModel=function(e,i){if(u(e))return null;u(i)&&(i=0);var s=this.getFields(i);return{text:e[s.text],id:e[s.id],items:e[s.child],separator:e[s.separator],iconCss:e[s.iconCss],url:e[s.url]}},t.prototype.getPopups=function(){var e=this,i=[];return[].slice.call(document.querySelectorAll("."+ur)).forEach(function(s){!u(s.querySelector("."+hr))&&e.getIndex(s.querySelector("."+hr).id,!0).length&&i.push(s)}),i},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&cc(this.element).valueOf()},t.prototype.canOpen=function(e){var i=!0;if(this.filter){i=!1;for(var s=this.filter.split(" "),r=0,n=s.length;r<n;r++)if(M(e,"."+s[r])){i=!0;break}}return i},t.prototype.openMenu=function(e,i,s,r,n,o){var l=this;s===void 0&&(s=0),r===void 0&&(r=0),n===void 0&&(n=null),o===void 0&&(o=this.targetElement);var h=this.getWrapper();this.lItem=e;var p=this.element.id!==""?this.element.id:"menu";if(this.isMenusClosed=!1,u(s)&&(s=-1),u(r)&&(r=-1),e){if(this.uList=this.createItems(i[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&E.isDevice){h.lastChild.style.display="none";var c={text:i[this.getField("text")].toString(),iconCss:zo+" e-previous"};this.template&&(i.iconCss=(i.iconCss||"")+zo+" e-previous");var d=new va(this.items[0],"items",this.template?i:c,!0),f=this.createItems([d]).children[0];f.classList.add(Un),this.uList.insertBefore(f,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+ur,id:e.id+"-ej2menu-"+p+"-popup"}),this.popupWrapper.setAttribute("role","navigation"),this.popupWrapper.setAttribute("aria-label",i.text+"-menu-popup"),this.hamburgerMode?(s=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||this.navIdx.length!==1,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&x([this.popupWrapper],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.popupObj.hide()),!this.hamburgerMode&&!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){l.triggerBeforeOpen(e,l.uList,i,n,0,0,"menu")},this.hoverDelay)):this.triggerBeforeOpen(e,this.uList,i,n,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,h.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){l.triggerBeforeOpen(e,l.uList,i,n,s,r,"none")},this.hoverDelay)):this.triggerBeforeOpen(e,this.uList,i,n,s,r,"none"))}else if(this.uList=this.element,this.uList.style.zIndex=_a(o||this.element).toString(),u(n)){var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!1);var y=this.copyObject(g,{});y.target=y.srcElement=o,y.currentTarget=o,this.triggerBeforeOpen(e,this.uList,i,y,s,r,"none")}else this.triggerBeforeOpen(e,this.uList,i,n,s,r,"none")},t.prototype.copyObject=function(e,i){for(var s in e)i[""+s]=e[""+s];return i},t.prototype.calculateIndentSize=function(e,i){var s=getComputedStyle(i),r=parseInt(s.textIndent,10);this.navIdx.length<2&&!i.classList.contains("e-blankicon")?r*=2:r+=r/4,e.style.textIndent=r+"px";var n=e.querySelectorAll(".e-blankicon");if(n&&n.length)for(var o=e.querySelector(".e-menu-icon"),l=getComputedStyle(o),h=parseInt(l.marginRight,10)+o.offsetWidth+r,p=0;p<n.length;p++)n[p].style.textIndent=h+"px"},t.prototype.generatePopup=function(e,i,s,r){var n=this,o=new as(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:s,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:r||this.enableRtl?"none":"flip",Y:"fit"},position:r&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:i,open:function(){var l=Me(".e-menu-vscroll",o.element);l&&(l.style.height="inherit",l.style.maxHeight="");var h=Me(".e-ul",o.element);o.element.style.maxHeight="",h.focus(),n.triggerOpen(h)}});return o},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var i=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),s=this.enableHtmlSanitizer?Kt.sanitize(this.title):this.title,r=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:s}),n=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});i.appendChild(r),i.appendChild(n),e.insertBefore(i,this.element)},t.prototype.openHamburgerMenu=function(e){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")},t.prototype.closeHamburgerMenu=function(e){var i=this,s={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1};this.trigger("beforeClose",s,function(r){r.cancel||(i.closeMenu(null,e),i.element.classList.add("e-hide-menu"),i.trigger("onClose",{element:i.element,parentItem:null,items:i.items}))})},t.prototype.callFit=function(e,i,s,r,n){return nh(e,null,{X:i,Y:s},{top:r,left:n})},t.prototype.triggerBeforeOpen=function(e,i,s,r,n,o,l){var h=this,p=e?s[this.getField("children",this.navIdx.length-1)]:this.items,c={element:i,items:p,parentItem:s,event:r,cancel:!1,top:n,left:o,showSubMenuOn:"Auto"},d=l,f;this.trigger("beforeOpen",c,function(g){switch(d){case"menu":h.hamburgerMode||(g.showSubMenuOn!=="Auto"&&(h.showItemOnClick=!h.defaultOption,h.showSubMenuOn=g.showSubMenuOn),h.top=g.top,h.left=g.left),h.popupWrapper.style.display="block",h.hamburgerMode||(h.popupWrapper.style.maxHeight=h.popupWrapper.getBoundingClientRect().height+"px",h.enableScrolling&&Li(h.createElement,h.popupWrapper,h.uList,"vscroll",h.enableRtl),h.checkScrollOffset(r)),!h.hamburgerMode&&!h.left&&!h.top?(h.popupObj.refreshPosition(h.lItem,!0),h.left=parseInt(h.popupWrapper.style.left,10),h.top=parseInt(h.popupWrapper.style.top,10),h.enableRtl&&(h.left=h.isNestedOrVertical?h.left-h.popupWrapper.offsetWidth-h.lItem.parentElement.offsetWidth+2:h.left-h.popupWrapper.offsetWidth+h.lItem.offsetWidth),h.template&&(h.isReact||h.isAngular)?requestAnimationFrame(function(){h.collision(),h.popupWrapper.style.display=""}):(h.collision(),h.popupWrapper.style.display="")):(h.popupObj.collision={X:"none",Y:"none"},h.popupWrapper.style.display="");break;case"none":h.top=g.top,h.left=g.left,h.isContextMenuClosed=!0,f=g.element,h.enableScrolling&&h.isCMenu&&f&&f.parentElement&&(f.style.height=f.parentElement.style.height);break;case"hamburger":g.cancel||(h.element.classList.remove("e-hide-menu"),h.triggerOpen(h.element));break}if(d!=="hamburger")if(g.cancel)h.isMenu?(h.popupObj.destroy(),Z(h.popupWrapper)):i.className.indexOf("e-ul")>-1&&Z(i),h.navIdx.pop();else if(h.isMenu)if(h.hamburgerMode)h.popupWrapper.style.top=h.top+"px",h.popupWrapper.style.left="0px",h.toggleAnimation(h.popupWrapper);else{h.setBlankIconStyle(h.popupWrapper),h.wireKeyboardEvent(h.popupWrapper),ts(h.popupWrapper,{selector:"."+hr}),h.popupWrapper.style.left=h.left+"px",h.popupWrapper.style.top=h.top+"px";var y=h.animationSettings.effect!=="None"?{name:h.animationSettings.effect,duration:h.animationSettings.duration,timingFunction:h.animationSettings.easing}:null;h.popupObj.show(y,h.lItem),E.isDevice&&(h.popupWrapper.style.left=h.left+"px")}else h.setBlankIconStyle(h.uList),h.setPosition(h.lItem,h.uList,h.top,h.left),h.toggleAnimation(h.uList);if(h.keyType==="right"){var b=h.getUlByNavIdx();if(e.classList.remove(rt),h.isMenu&&h.navIdx.length===1&&h.removeLIStateByClass([Xe],[h.getWrapper()]),e.classList.add(Xe),h.action===jn){var C={element:e,item:s,event:r};h.trigger("select",C)}e.focus(),b=h.getUlByNavIdx();var S=h.isValidLI(b.children[0],0,h.action);b.children[S].classList.add(rt),b.children[S].focus()}})},t.prototype.collision=function(){var e;if(e=es(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(e.indexOf("right")>-1||e.indexOf("left")>-1)){this.popupObj.collision.X="none";var i=M(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?Tt(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-i+2}e=es(this.popupWrapper,null,this.left,this.top),(e.indexOf("left")>-1||e.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"},t.prototype.setBlankIconStyle=function(e){var i=[].slice.call(e.getElementsByClassName("e-blankicon"));if(i.length){var s=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)");if(s){var r=s.querySelector(".e-menu-icon");if(r){var n=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},o=getComputedStyle(r),l=parseInt(o.fontSize,10);parseInt(o.width,10)&&parseInt(o.width,10)>l&&(l=parseInt(o.width,10));var h=l+parseInt(o[n.margin],10)+parseInt(getComputedStyle(s)[n.padding],10)+"px";i.forEach(function(p){p.style[n.padding]=h})}}}},t.prototype.checkScrollOffset=function(e){var i=this.getWrapper();if(i.children[0].classList.contains("e-menu-hscroll")&&this.navIdx.length===1){var s=u(e)?this.element:M(e.target,"."+hr),r=Me(".e-hscroll-bar",i);r.scrollLeft>s.offsetLeft&&(r.scrollLeft-=r.scrollLeft-s.offsetLeft);var n=r.scrollLeft+r.offsetWidth,o=s.offsetLeft+s.offsetWidth;n<o&&(r.scrollLeft+=o-n)}},t.prototype.setPosition=function(e,i,s,r,n){n===void 0&&(n=!1);var o="px";if(this.toggleVisiblity(i),i===this.element||r>-1&&s>-1){var l=es(i,null,r,s);if(l.indexOf("right")>-1&&(r=r-i.offsetWidth),l.indexOf("bottom")>-1){var h=this.callFit(i,!1,!0,s,r);if(s=h.top-20,s<0){var p=pageYOffset+document.documentElement.clientHeight-i.getBoundingClientRect().height;p>-1&&(s=p)}}if(l=es(i,null,r,s),l.indexOf("left")>-1){var h=this.callFit(i,!0,!1,s,r);r=h.left}}else if(E.isDevice)if(!this.isMenu&&this.enableScrolling){var c=document.querySelector(".e-menu-vscroll");s=Number(c.style.top.replace("px","")),r=Number(c.style.left.replace("px",""))}else s=Number(this.element.style.top.replace(o,"")),r=Number(this.element.style.left.replace(o,""));else{var d=this.enableRtl?"left":"right",h=Tt(e,d,"top");s=h.top,r=h.left;var l=es(i,null,this.enableRtl?r-i.offsetWidth:r,s),f=l.indexOf("left")>-1||l.indexOf("right")>-1;f&&(h=Tt(e,this.enableRtl?"right":"left","top"),r=h.left),(this.enableRtl||f)&&(r=this.enableRtl&&f?r:r-i.offsetWidth),l.indexOf("bottom")>-1&&(this.isMenu||!this.enableScrolling)&&(h=this.callFit(i,!1,!0,s,r),s=h.top)}this.toggleVisiblity(i,!1),this.isCMenu&&this.enableScrolling&&i&&(i.style.height="",i.style.top="",i.style.left="",i.style.width="",i.style.position="");var g=M(this.element,".e-"+this.getModuleName()+"-wrapper");if(!this.isMenu&&this.enableScrolling&&i&&g&&g.offsetHeight>0){var y=M(i,".e-menu-vscroll");i.style.display="block",y&&Ui(ii(y,ys),y);var b=Math.ceil(this.getMenuWidth(i,i.offsetWidth,this.enableRtl)),C=Li(this.createElement,g,i,"vscroll",this.enableRtl,g.offsetHeight),S=this.callFit(C,!1,!0,s,r);s=S.top,Object.assign(C.style,{top:s+"px",left:r+"px",width:b+"px",position:"absolute",display:n?"block":"none"})}else i.style.top=s+o,i.style.left=r+o},t.prototype.getMenuWidth=function(e,i,s){var r=e.getElementsByClassName(Ho)[0];return r&&(i+=parseInt(getComputedStyle(r)[s?"marginRight":"marginLeft"],10)),i<120?120:i},t.prototype.toggleVisiblity=function(e,i){i===void 0&&(i=!0),e.style.visibility=i?"hidden":"",e.style.display=i?"block":"none"},t.prototype.createItems=function(e){var i=this,s=this.navIdx?this.navIdx.length:0,r=this.getFields(s),n=this.hasField(e,this.getField("iconCss",s)),o={showIcon:n,moduleName:"menu",fields:r,template:this.template,itemNavigable:!0,itemCreating:function(h){h.curData[h.fields[r.id]]||(h.curData[h.fields[r.id]]=at("menuitem")),u(h.curData.htmlAttributes)&&Object.defineProperty(h.curData,"htmlAttributes",{value:{},writable:!0,enumerable:!0,configurable:!0}),E.isIE?(h.curData.htmlAttributes.role||(h.curData.htmlAttributes.role="menuitem"),h.curData.htmlAttributes.tabindex||(h.curData.htmlAttributes.tabindex="-1")):Object.assign(h.curData.htmlAttributes,{role:h.curData.htmlAttributes.role||"menuitem",tabindex:h.curData.htmlAttributes.tabindex||"-1"}),i.isMenu&&!h.curData[i.getField("separator",s)]&&(h.curData.htmlAttributes["aria-label"]||(h.curData.htmlAttributes["aria-label"]=h.curData[h.fields.text]?h.curData[h.fields.text]:h.curData[h.fields.id])),h.curData[h.fields[r.iconCss]]===""&&(h.curData[h.fields[r.iconCss]]=null)},itemCreated:function(h){if(h.curData[i.getField("separator",s)]&&(h.item.classList.add(_r),h.curData.htmlAttributes.role||h.item.setAttribute("role","separator"),h.curData.htmlAttributes.ariaLabel||h.item.setAttribute("aria-label","separator")),n&&!h.curData[h.fields.iconCss]&&!h.curData[i.getField("separator",s)]&&h.item.classList.add("e-blankicon"),h.curData[h.fields.child]&&h.curData[h.fields.child].length){var p=i.createElement("span",{className:zo+" "+Ho});h.item.appendChild(p),h.item.setAttribute("aria-haspopup","true"),h.item.setAttribute("aria-expanded","false"),h.item.classList.add("e-menu-caret-icon")}i.template&&(h.item.setAttribute("id",h.curData[h.fields.id].toString()),h.item.removeAttribute("data-uid"),h.item.classList.contains("e-level-1")&&h.item.classList.remove("e-level-1"),h.item.classList.contains("e-has-child")&&h.item.classList.remove("e-has-child"),h.item.removeAttribute("aria-level"));var c={item:h.curData,element:h.item};i.trigger("beforeItemRender",c)}};this.setProperties({items:this.items},!0),this.isMenu&&(o.templateID=this.element.id+Tg);var l=St.createList(this.createElement,e,o,!this.template,this);return l.setAttribute("tabindex","0"),this.isMenu?l.setAttribute("role","menu"):l.setAttribute("role","menubar"),l},t.prototype.moverHandler=function(e){var i=e.target;this.liTrgt=i,this.isMenu||(this.isCmenuHover=!0);var s=this.getLI(i),r=s?M(s,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),n=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),l,h=!1;if(r){if(r.id!==""?l=o.exec(r.id)[1]:l=r.querySelector("ul").id,l!==this.element.id)if(this.removeLIStateByClass([rt,Xe],[this.getWrapper()]),this.navIdx.length)h=!0;else return;s&&M(s,".e-"+this.getModuleName()+"-wrapper")&&!h?(this.removeLIStateByClass([rt],this.isMenu?[r].concat(this.getPopups()):[r]),this.removeLIStateByClass([rt],this.isMenu?[n].concat(this.getPopups()):[n]),s.classList.add(rt),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!h&&this.removeLIStateByClass([rt],[r].concat(this.getPopups())),this.isMenu&&(!this.showItemOnClick&&i.parentElement!==r&&!M(i,".e-"+this.getModuleName()+"-popup")&&(!s||s&&!this.getIndex(s.id,!0).length)&&this.showSubMenuOn!=="Hover"?(this.removeLIStateByClass([rt],[r]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))):h&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)),this.isClosed||this.removeStateWrapper(),this.isClosed=!1),this.isMenu||(this.isCmenuHover=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=M(this.liTrgt,".e-menu-vscroll");this.liTrgt.tagName==="DIV"&&e&&this.removeLIStateByClass([rt,Xe],[e])}},t.prototype.removeLIStateByClass=function(e,i){for(var s,r=function(o){e.forEach(function(l){s=Me("."+l,i[o]),s&&s.classList.remove(l)})},n=0;n<i.length;n++)r(n)},t.prototype.getField=function(e,i){i===void 0&&(i=0);var s=this.fields[""+e];return typeof s=="string"?s:s[i]?s[i].toString():s[s.length-1].toString()},t.prototype.getFields=function(e){return e===void 0&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,i){for(var s=0,r=e.length;s<r;s++)if(e[s][""+i])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){var i=M(e.target,".e-menu-wrapper");i&&i.querySelector("ul.e-menu-parent").id!==this.element.id||(this.element.className.indexOf("e-hide-menu")>-1?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},t.prototype.clickHandler=function(e){this.isTapHold=this.isTapHold?!1:this.isTapHold;var i=this.getWrapper(),s=e.target,r=this.cli=this.getLI(s),n=new RegExp("-ej2menu-(.*)-popup"),o=r?M(r,".e-"+this.getModuleName()+"-wrapper"):null,l=r&&o&&(this.isMenu?this.getIndex(r.id,!0).length>0:i.firstElementChild.id===o.firstElementChild.id);if(E.isDevice&&this.isMenu&&(this.removeLIStateByClass([rt],[i].concat(this.getPopups())),this.mouseDownHandler(e)),r&&o&&this.isMenu){var h=o.id?n.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==h)return}if(l&&e.type==="click"&&!r.classList.contains(Un)){this.setLISelected(r);var p=this.getIndex(r.id,!0),c=this.getItem(p),d={element:r,item:c,event:e};this.trigger("select",d)}if(l&&(e.type==="mouseover"||E.isDevice||this.showItemOnClick)){var f=void 0;if(r.classList.contains(Un)){f=i.children[this.navIdx.length-1],this.toggleAnimation(f);var g=this.getLIByClass(f,Xe);g&&g.classList.remove(Xe);var y=this.enableScrolling&&!this.isMenu?M(r.parentElement,".e-menu-vscroll"):null;y&&Ui(ii(y,ys),y),Z(r.parentNode),this.navIdx.pop()}else if(!r.classList.contains(_r)){this.showSubMenu=!0;var b=r.parentNode;if(u(b))return;if(this.cliIdx=this.getIdx(b,r),this.isMenu||!E.isDevice){var C=this.isMenu?Array.prototype.indexOf.call([i].concat(this.getPopups()),M(b,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(i,b);if(this.navIdx[C]===this.cliIdx&&(this.showSubMenu=!1),C!==this.navIdx.length&&(e.type!=="mouseover"||this.showSubMenu)){var g=this.getLIByClass(b,Xe);g&&g.classList.remove(Xe),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&(this.setLISelected(r),this.isMenu||(this.isCmenuHover=!0)),this.closeMenu(C+1,e),this.showItemOnClick&&(this.setLISelected(r),this.isMenu||(this.isCmenuHover=!1))}}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(s.tagName==="DIV"&&M(s,".e-menu-vscroll")&&(this.navIdx.length||!this.isMenu&&this.enableScrolling&&this.navIdx.length===0)){var S=this.isMenu?M(s,"."+ur):M(s,".e-menu-vscroll"),I=this.isMenu?Array.prototype.indexOf.call(this.getPopups(),S)+1:this.getIdx(i,Me("ul.e-menu-parent",S));I<this.navIdx.length&&(this.closeMenu(I+1,e),S&&this.removeLIStateByClass([rt,Xe],[S]))}else this.isMenu&&this.hamburgerMode&&s.tagName==="SPAN"&&s.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):(s.tagName!=="UL"||(this.isMenu?s.parentElement.classList.contains("e-menu-wrapper")&&!this.getIndex(s.querySelector("."+hr).id,!0).length:s.parentElement!==i))&&(r||this.removeLIStateByClass([Xe],[i]),(!this.isAnimationNone&&!r||r&&!r.querySelector("."+Ho))&&(navigator.platform.toUpperCase().indexOf("MAC")<0||navigator.platform.toUpperCase().indexOf("MAC")>=0&&!e.ctrlKey)&&this.closeMenu(null,e))},t.prototype.afterCloseMenu=function(e){if(!u(e)){var i;if(this.showSubMenu){this.showItemOnClick&&this.navIdx.length===0?i=M(e.target,".e-menu-parent.e-control"):i=M(this.element,".e-menu-parent.e-control");var s=this.navIdx.concat(this.cliIdx),r=this.getItem(s);if(r&&r[this.getField("children",s.length-1)]&&r[this.getField("children",s.length-1)].length?((e.type==="mouseover"||E.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&i||this.hamburgerMode&&this.cli.getAttribute("aria-expanded")==="false")&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,r,null,null,e))):e.type!=="mouseover"&&this.closeMenu(null,e),!i){var n=this.getUlByNavIdx(),o=this.getLIByClass(n,Xe);o&&(o.setAttribute("aria-expanded","false"),o.classList.remove(Xe))}}this.keyType=""}},t.prototype.setLISelected=function(e){var i=this.getLIByClass(e.parentElement,Xe);i&&i.classList.remove(Xe),this.isMenu||e.classList.remove(rt),e.classList.add(Xe)},t.prototype.getLIByClass=function(e,i){if(e&&e.children){for(var s=0,r=e.children.length;s<r;s++)if(e.children[s].classList.contains(i))return e.children[s]}return null},t.prototype.getItemIndex=function(e,i){var s;typeof e=="string"?s=e:s=e.id;var r=i!==!1,n=this.getIndex(s,r);return n},t.prototype.setItem=function(e,i,s){var r;s?r=i||e.id:r=i||e.text;var n=this.getIndex(r,s),o=this.getItem(n);Object.assign(o,e)},t.prototype.getItem=function(e){e=e.slice();var i=e.pop(),s=this.getItems(e);return s[i]},t.prototype.getItems=function(e){for(var i=this.items,s=0;s<e.length;s++)i=i[e[s]][this.getField("children",s)];return i},t.prototype.setItems=function(e,i){var s=this.getItems(i);s.splice(0,s.length);for(var r=0;r<e.length;r++)s.splice(r,0,e[r])},t.prototype.getIdx=function(e,i,s){s===void 0&&(s=!0);var r=!this.isMenu&&this.enableScrolling&&Me(".e-menu-vscroll",e)?Ke(".e-menu-parent",e):Array.from(e.children),n=Array.prototype.indexOf.call(r,i);return s&&e.children[0].classList.contains(Un)&&n--,n},t.prototype.getLI=function(e){return e.tagName==="LI"&&e.classList.contains("e-menu-item")?e:M(e,"li.e-menu-item")},t.prototype.updateItemsByNavIdx=function(){for(var e=this.items,i=0,s=0;s<this.navIdx.length&&(e=e[s].items,!!e);s++){i++;var r=this.getUlByNavIdx(i);if(!r)break;this.updateItem(r,e)}},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,i){for(var s=this,r=this.getWrapper(),n=function(c){switch(c){case"cssClass":i.cssClass&&R([r],i.cssClass.split(" ")),e.cssClass&&x([r],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":o.enableRtl?r.classList.add(qo):r.classList.remove(qo);break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=e.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var d;o.element.classList.contains("e-vertical")?Li(o.createElement,r,o.element,"vscroll",o.enableRtl):Li(o.createElement,r,o.element,"hscroll",o.enableRtl),o.getPopups().forEach(function(A){d=Me(".e-ul",A),Li(s.createElement,A,d,"vscroll",s.enableRtl)})}else{var f=r.children[0];o.element.classList.contains("e-vertical")||!o.isMenu?Ui(ii(f,ys),f):Ui(ii(f,yl),f),r.style.overflow="",r.appendChild(o.element),o.getPopups().forEach(function(A){f=A.children[0],Ui(ii(f,ys),f),A.style.overflow=""})}break;case"items":{var g=void 0,y=void 0,b=void 0;if(o.isReact&&o.template&&o.clearTemplate(["template"]),Object.keys(i.items).length)for(var I=Object.keys(e.items),C=0;C<I.length;C++)y=o.getChangedItemIndex(e,[],Number(I[C])),y.length<=o.getWrapper().children.length&&(g=y.pop(),b=o.getItems(y),o.insertAfter([b[g]],b[g].text),o.removeItem(b,y,g),o.setItems(b,y)),y.length=0;else{if(o.updateItem(o.element,o.items),o.enableScrolling&&o.element.parentElement.classList.contains("e-custom-scroll")&&(o.element.classList.contains("e-vertical")?Li(o.createElement,r,o.element,"vscroll",o.enableRtl):Li(o.createElement,r,o.element,"hscroll",o.enableRtl)),o.enableScrolling&&o.element.classList.contains("e-contextmenu")&&(o.isCMenu=!0,o.setPosition(o.lItem,o.uList,o.top,o.left,!0),o.isCMenu=!1),!o.hamburgerMode)for(var C=1,S=r.childElementCount;C<S;C++)Z(r.lastElementChild);o.navIdx=[]}break}}},o=this,l=0,h=Object.keys(e);l<h.length;l++){var p=h[l];n(p)}},t.prototype.updateItem=function(e,i){{if(this.enableScrolling){var s=this.getWrapper(),r=s.children[0];this.element.classList.contains("e-vertical")?Ui(ii(r,ys),r):Ui(ii(r,yl),r)}e.innerHTML=""}var n=[].slice.call(this.createItems(i).children);n.forEach(function(o){e.appendChild(o)})},t.prototype.getChangedItemIndex=function(e,i,s){i.push(s);var r=Object.keys(e.items[s]).pop();if(r==="items"){var n=e.items[s],o=Object.keys(n.items).pop();o&&this.getChangedItemIndex(n,i,Number(o))}else r==="isParentArray"&&i.length>1&&i.pop();return i},t.prototype.removeItem=function(e,i,s){e.splice(s,1);var r=this.getWrapper().children;if(i.length<r.length)if(this.enableScrolling&&!r[i.length].classList.contains("e-menu-parent")){var n=r[i.length].querySelector(".e-menu-parent");Z(n.children[s])}else Z(r[i.length].children[s])},t.prototype.unWireEvents=function(e){e===void 0&&(e=this.target);var i=this.getWrapper();if(e){for(var s=void 0,r=void 0,n=Ke(e),o=0,l=n.length;o<l;o++)s=n[o],this.isMenu?v.remove(s,"click",this.menuHeaderClickHandler):E.isIos?(r=ii(s,ks),r&&r.destroy()):v.remove(s,"contextmenu",this.cmenuHandler);if(!this.isMenu){v.remove(this.targetElement,"scroll",this.scrollHandler);for(var h=0,p=bl(this.targetElement);h<p.length;h++){var c=p[h];v.remove(c,"scroll",this.scrollHandler)}}}E.isDevice||(v.remove(this.isMenu?document:i,"mouseover",this.delegateMoverHandler),v.remove(document,"mousedown",this.delegateMouseDownHandler),v.remove(document,"keydown",this.domKeyHandler),!this.isMenu&&!this.target&&v.remove(document,"scroll",this.scrollHandler)),v.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(i),this.rippleFn(),!this.isMenu&&this.enableScrolling&&(i.removeEventListener("touchstart",this.touchStartFn),i.removeEventListener("touchmove",this.touchMoveFn),document.removeEventListener("touchstart",this.touchOutsideHandler))},t.prototype.unWireKeyboardEvent=function(e){var i=ii(e,Gt);i&&i.destroy()},t.prototype.toggleAnimation=function(e,i){var s=this;i===void 0&&(i=!0);var r=this.getWrapper();if(r){var n=r.querySelectorAll(".e-menu-parent");n.forEach(function(p){It.stop(p)})}var o,l,h=this.enableScrolling&&!this.isMenu&&M(e,".e-menu-vscroll")?M(e,".e-menu-vscroll"):e;It.stop(h),this.animationSettings.effect==="None"||!i?(this.hamburgerMode&&e&&(e.style.top="0px"),this.isAnimationNone=this.animationSettings.effect==="None",this.end(e,i)):(h.style.maxHeight="",this.animation.animate(h,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(p){s.hamburgerMode?(l=p.element.parentElement,p.element.style.position="absolute",l&&(o=l.offsetHeight),p.element.style.maxHeight=p.element.offsetHeight+"px",l&&(l.style.maxHeight="")):(p.element.style.display="block",p.element.style.maxHeight=p.element.getBoundingClientRect().height+"px")},progress:function(p){s.hamburgerMode&&l&&(l.style.minHeight=o+p.element.offsetHeight+"px")},end:function(p){s.hamburgerMode?(p.element.style.position="",p.element.style.maxHeight="",l&&(l.style.minHeight=""),p.element.style.top="0px",p.element.children[0].focus(),s.triggerOpen(p.element.children[0])):s.end(p.element,i),s.isKBDAction=!1}}))},t.prototype.triggerOpen=function(e){var i=this.navIdx.length?this.getItem(this.navIdx):null,s={element:e,parentItem:i,items:i?i.items:this.items};this.trigger("onOpen",s),this.isMenu||v.add(e,"keydown",this.keyHandler,this)},t.prototype.end=function(e,i){if(i&&this.isContextMenuClosed){(this.isMenu||!E.isDevice||!this.isMenu&&this.isAnimationNone&&E.isDevice)&&(e.style.display="block"),e.style.maxHeight="";var s=this.enableScrolling&&!this.isMenu?M(e,".e-menu-vscroll"):null;if(s&&(s.style.display="block"),this.triggerOpen(e),e.querySelector("."+rt)&&this.isKBDAction)e.querySelector("."+rt).focus();else{var r=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1];this.currentTarget?this.currentTarget.classList.contains("e-numerictextbox")||this.currentTarget.classList.contains("e-textbox")||this.currentTarget.tagName==="INPUT"||(r&&this.isKBDAction?r.querySelector("."+Xe).focus():this.element.focus()):r&&this.isKBDAction?r.querySelector("."+Xe).focus():this.element.focus()}}else{var s=this.enableScrolling&&!this.isMenu?M(e,".e-menu-vscroll"):null;if(s&&Ui(ii(s,ys),s),e===this.element){var n=this.getLIByClass(this.element,rt);n&&n.classList.remove(rt);var o=this.getLIByClass(this.element,Xe);o&&o.classList.remove(Xe),e.style.display="none",this.isAnimationNone=!1}else Z(e)}},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return M(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,i,s,r,n,o){s===void 0&&(s=this.items),r===void 0&&(r=[]),n===void 0&&(n=!1),o===void 0&&(o=0);var l;o=n?o+1:0;for(var h=0,p=s.length;h<p;h++){l=s[h];var c=i?l[this.getField("itemId",o)]:l[this.getField("text",o)],d=l.htmlAttributes&&"id"in l.htmlAttributes?l.htmlAttributes.id:c;if(d===e){r.push(h);break}else if(l[this.getField("children",o)]&&l[this.getField("children",o)].length)if(r=this.getIndex(e,i,l[this.getField("children",o)],r,!0,o),r[r.length-1]===-1)h!==p-1&&r.pop();else{r.unshift(h);break}else h===p-1&&r.push(-1)}return!n&&r[0]===-1?[]:r},t.prototype.enableItems=function(e,i,s){i===void 0&&(i=!0);for(var r,n,o,l=Vo,h,p=0;p<e.length;p++){if(o=this.getIndex(e[p],s),this.navIdx.length){if(o.length!==1){h=!1;for(var c=0,d=o.length-1;c<d;c++)if(o[c]!==this.navIdx[c]){h=!0;break}if(h)continue}}else if(o.length!==1)continue;if(n=o.pop(),r=this.getUlByNavIdx(o.length),r&&!u(n))if(i)if(this.isMenu)r.children[n].classList.remove(l),r.children[n].removeAttribute("aria-disabled");else if(E.isDevice&&!r.classList.contains("e-contextmenu"))r.children[n+1].classList.remove(l);else if(this.enableScrolling&&!r.classList.contains("e-menu-parent")){var f=r.querySelector(".e-menu-parent");f.children[n].classList.remove(l)}else r.children[n].classList.remove(l);else if(this.isMenu)r.children[n].classList.add(l),r.children[n].setAttribute("aria-disabled","true");else if(E.isDevice&&!r.classList.contains("e-contextmenu"))r.children[n+1].classList.add(l);else if(this.enableScrolling&&!r.classList.contains("e-menu-parent")){var f=r.querySelector(".e-menu-parent");f.children[n].classList.add(l)}else r.children[n].classList.add(l)}},t.prototype.showItems=function(e,i){this.showHideItems(e,!1,i)},t.prototype.hideItems=function(e,i){this.showHideItems(e,!0,i)},t.prototype.showHideItems=function(e,i,s){for(var r,n,o,l,h=0;h<e.length;h++)if(o=this.getIndex(e[h],s),n=o.pop(),r=this.getUlByNavIdx(o.length),l=this.getItems(o),r){this.enableScrolling&&!r.classList.contains("e-menu-parent")&&(r=r.querySelector(".e-menu-parent"));var p=s?r.children[n].id:l[n].text.toString();i&&p===e[h]?r.children[n].classList.add(Kn):!i&&p===e[h]&&r.children[n].classList.remove(Kn)}},t.prototype.removeItems=function(e,i){for(var s,r,n,o=0;o<e.length;o++)r=this.getIndex(e[o],i),s=r.pop(),n=this.getItems(r),u(s)||this.removeItem(n,r,s)},t.prototype.insertAfter=function(e,i,s){this.insertItems(e,i,s)},t.prototype.insertBefore=function(e,i,s){this.insertItems(e,i,s,!1)},t.prototype.insertItems=function(e,i,s,r){r===void 0&&(r=!0);for(var n,o,l,h,p,c,d=0;d<e.length;d++){l=this.getIndex(i,s),o=l.pop(),h=this.getItems(l),p=new va(h[0],"items",e[d],!0),p.parentObj=h[0].parentObj,h.splice(r?o+1:o,0,p);var f=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(!u(o)&&l.length<f.length){o=r?o+1:o,n=this.createItems(h).children[o];var g=c=this.isMenu?Me(".e-menu-parent",f[l.length]):f[l.length];if(this.enableScrolling&&!g.classList.contains("e-menu-parent")&&(g=g.querySelector(".e-menu-parent")),g.insertBefore(n,g.children[o]),d===e.length-1&&!this.isMenu&&g.style.display==="block")if(this.enableScrolling){this.setPosition(null,g,parseFloat(c.style.top),parseFloat(c.style.left));var y=M(g,".e-vscroll");y&&(y.style.display="block")}else this.setPosition(null,g,parseFloat(g.style.top),parseFloat(g.style.left)),g.style.display="block"}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach(function(i){e.element.style.removeProperty(i)}),["role","tabindex","class","style"].forEach(function(i){i==="class"&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),(["class","style"].indexOf(i)===-1||!e.element.getAttribute(i))&&e.element.removeAttribute(i),e.isMenu&&i==="class"&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")})},t.prototype.destroy=function(){var e=this.getWrapper();if(e){if(this.unWireEvents(),this.isMenu)this.closeMenu(),this.element.innerHTML="",this.removeAttributes(),e.parentNode.insertBefore(this.element,e),this.clonedElement=null;else{if(this.clonedElement.style.display="",this.clonedElement.tagName==="EJS-CONTEXTMENU")x([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&this.clonedElement.children[0].tagName==="LI"&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==e?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),this.element.innerHTML="",Ie([].slice.call(this.clonedElement.children),this.element),Z(this.clonedElement),this.removeAttributes()}this.clonedElement=null}Z(e),a.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}this.rippleFn=null},Ne([O()],t.prototype,"beforeItemRender",void 0),Ne([O()],t.prototype,"beforeOpen",void 0),Ne([O()],t.prototype,"onOpen",void 0),Ne([O()],t.prototype,"beforeClose",void 0),Ne([O()],t.prototype,"onClose",void 0),Ne([O()],t.prototype,"select",void 0),Ne([O()],t.prototype,"created",void 0),Ne([m("")],t.prototype,"cssClass",void 0),Ne([m(0)],t.prototype,"hoverDelay",void 0),Ne([m(!1)],t.prototype,"showItemOnClick",void 0),Ne([m("")],t.prototype,"target",void 0),Ne([m("")],t.prototype,"filter",void 0),Ne([m(null)],t.prototype,"template",void 0),Ne([m(!1)],t.prototype,"enableScrolling",void 0),Ne([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ne([dt({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Lg)],t.prototype,"fields",void 0),Ne([Rs([],va)],t.prototype,"items",void 0),Ne([dt({duration:400,easing:"ease",effect:"SlideDown"},Rg)],t.prototype,"animationSettings",void 0),t=Ne([pt],t),t})(Vt),Fg=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),pr=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Ru="e-contextmenu-template",Og=(function(a){Fg(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||at("ej2-contextmenu"),a.prototype.preRender.call(this)},t.prototype.initialize=function(){this.template=this.itemTemplate?this.itemTemplate:null,this.addTemplateClass(),a.prototype.initialize.call(this),G(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=_a(this.element).toString()},t.prototype.open=function(e,i,s){a.prototype.openMenu.call(this,null,null,e,i,null,s)},t.prototype.close=function(){a.prototype.closeMenu.call(this)},t.prototype.addTemplateClass=function(){(!u(this.itemTemplate)&&typeof this.itemTemplate=="function"||typeof this.itemTemplate=="string"&&this.itemTemplate!=="")&&x([this.element],Ru)},t.prototype.onPropertyChanged=function(e,i){a.prototype.onPropertyChanged.call(this,e,i);for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"filter":this.close(),this.filter=e.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents();break;case"itemTemplate":this.itemTemplate=e.itemTemplate,R([this.element],Ru),this.addTemplateClass(),this.refresh()}}},t.prototype.getModuleName=function(){return"contextmenu"},pr([m("")],t.prototype,"target",void 0),pr([m("")],t.prototype,"filter",void 0),pr([Rs([],va)],t.prototype,"items",void 0),pr([m(null)],t.prototype,"itemTemplate",void 0),pr([m(!1)],t.prototype,"enableScrolling",void 0),t=pr([pt],t),t})(Mg),le={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"},Mu=["title","style","class"],W;(function(a){var t=!0;function e(w,k){w.element.__eventHandlers={};var j=u(k)?pe:k,Q={container:null,buttons:[],clearButton:null};if(w.floatLabelType,t=w.bindClearAction,u(w.floatLabelType)||w.floatLabelType==="Never"?(Q.container=ie(w,le.INPUTGROUP,le.INPUTCUSTOMTAG,"span",j),w.element.parentNode.insertBefore(Q.container,w.element),x([w.element],le.INPUT),Q.container.appendChild(w.element)):y(w,Q,j),n(w),!u(w.properties)&&!u(w.properties.showClearButton)&&w.properties.showClearButton&&(ee(w.properties.showClearButton,w.element,Q,!0,j),Q.clearButton.setAttribute("role","button"),Q.container.classList.contains(le.FLOATINPUT)&&x([Q.container],le.INPUTGROUP)),!u(w.buttons))for(var te=0;te<w.buttons.length;te++)Q.buttons.push(ht(w.buttons[te],Q.container,j));return!u(w.element)&&w.element.tagName==="TEXTAREA"&&x([Q.container],le.TEXTAREA),pi(Q.container,w.element),Q=S(w,Q),gt(Q.container,j),Q}a.createInput=e;function i(w){var k=T(w.element);(k.classList.contains("e-input-group")||k.classList.contains("e-outline")||k.classList.contains("e-filled"))&&k.classList.add("e-input-focus"),w.floatLabelType!=="Never"&&setTimeout(function(){a.calculateWidth(w.element,k)},80)}function s(w){var k=T(w.element);(k.classList.contains("e-input-group")||k.classList.contains("e-outline")||k.classList.contains("e-filled"))&&k.classList.remove("e-input-focus"),w.floatLabelType!=="Never"&&setTimeout(function(){a.calculateWidth(w.element,k)},80)}function r(w){l(w.floatLabelType,w.element)}function n(w){l(w.floatLabelType,w.element);var k=function(){return i(w)},j=function(){return s(w)},Q=function(){return r(w)};w.element.addEventListener("focus",k),w.element.addEventListener("blur",j),w.element.addEventListener("input",Q),w.element.__eventHandlers.inputFocusHandler={focusHandler:k},w.element.__eventHandlers.inputBlurHandler={blurHandler:j},w.element.__eventHandlers.inputHandler={inputHandler:Q}}a.bindInitialEvent=n;function o(w){if(!u(w.element)&&!u(w.element.__eventHandlers)&&!u(w.element.__eventHandlers.inputFocusHandler)&&!u(w.element.__eventHandlers.inputBlurHandler)&&!u(w.element.__eventHandlers.inputHandler)){var k=w.element.__eventHandlers.inputFocusHandler.focusHandler,j=w.element.__eventHandlers.inputBlurHandler.blurHandler,Q=w.element.__eventHandlers.inputHandler.inputHandler;w.element.removeEventListener("focus",k),w.element.removeEventListener("blur",j),w.element.removeEventListener("input",Q),delete w.element.__eventHandlers.inputFocusHandler,delete w.element.__eventHandlers.inputBlurHandler,delete w.element.__eventHandlers.inputHandler}}function l(w,k){var j=k.value,Q=k.parentElement,te=Q&&Q.parentElement;j!==""&&!u(j)?Q&&Q.classList.contains("e-input-group")?Q.classList.add("e-valid-input"):te&&te.classList.contains("e-input-group")&&te.classList.add("e-valid-input"):w!=="Always"&&(Q&&Q.classList.contains("e-input-group")?Q.classList.remove("e-valid-input"):te&&te.classList.contains("e-input-group")&&te.classList.remove("e-valid-input"))}function h(){var w=T(this).getElementsByClassName("e-float-text")[0];u(w)||(x([w],le.LABELTOP),w.classList.contains(le.LABELBOTTOM)&&R([w],le.LABELBOTTOM))}function p(){var w=T(this);if(w.getElementsByTagName("textarea")[0]?w.getElementsByTagName("textarea")[0].value==="":w.getElementsByTagName("input")[0].value===""){var k=w.getElementsByClassName("e-float-text")[0];u(k)||(k.classList.contains(le.LABELTOP)&&R([k],le.LABELTOP),x([k],le.LABELBOTTOM))}}function c(w){w.addEventListener("focus",h),w.addEventListener("blur",p)}a.wireFloatingEvents=c;function d(w){u(w)||(w.removeEventListener("focus",h),w.removeEventListener("blur",p))}function f(w){U(w.element,w.floatLabelType)}function g(w){U(w.element,w.floatLabelType)}function y(w,k,j){var Q=u(j)?pe:j;w.floatLabelType==="Auto"&&c(w.element),u(k.container)?(k.container=ie(w,le.FLOATINPUT,le.FLOATCUSTOMTAG,"div",Q),k.container.classList.add(le.INPUTGROUP),w.element.parentNode&&w.element.parentNode.insertBefore(k.container,w.element)):(u(w.customTag)||k.container.classList.add(le.FLOATCUSTOMTAG),k.container.classList.add(le.FLOATINPUT));var te=Q("span",{className:le.FLOATLINE}),ae=Q("label",{className:le.FLOATTEXT});if(!u(w.element.id)&&w.element.id!==""&&(ae.id="label_"+w.element.id.replace(/ /g,"_"),G(w.element,{"aria-labelledby":ae.id})),!u(w.element.placeholder)&&w.element.placeholder!==""&&(ae.innerText=J(w.element.placeholder),w.element.removeAttribute("placeholder")),!u(w.properties)&&!u(w.properties.placeholder)&&w.properties.placeholder!==""&&(ae.innerText=J(w.properties.placeholder)),ae.innerText||k.container.classList.add(le.NOFLOATLABEL),k.container.classList.contains("e-float-icon-left")){var Le=k.container.querySelector(".e-input-in-wrap");Le.appendChild(w.element),Le.appendChild(te),Le.appendChild(ae)}else k.container.appendChild(w.element),k.container.appendChild(te),k.container.appendChild(ae);if(A(w.element.value,ae),w.floatLabelType==="Always"&&(ae.classList.contains(le.LABELBOTTOM)&&R([ae],le.LABELBOTTOM),x([ae],le.LABELTOP)),w.floatLabelType==="Auto"){var mt=function(){return f(w)},_e=function(){return g(w)};w.element.addEventListener("input",mt),w.element.addEventListener("blur",_e),w.element.__eventHandlers.floatInputHandler={inputFloatHandler:mt},w.element.__eventHandlers.floatBlurHandler={blurFloatHandler:_e}}else b(w);u(w.element.getAttribute("id"))||ae.setAttribute("for",w.element.getAttribute("id"))}function b(w){if(!u(w.element)&&!u(w.element.__eventHandlers)&&!u(w.element.__eventHandlers.floatInputHandler)&&!u(w.element.__eventHandlers.floatBlurHandler)){var k=w.element.__eventHandlers.floatInputHandler.inputFloatHandler,j=w.element.__eventHandlers.floatBlurHandler.blurFloatHandler;w.element.removeEventListener("input",k),w.element.removeEventListener("blur",j),delete w.element.__eventHandlers.floatInputHandler,delete w.element.__eventHandlers.floatBlurHandler}}function C(w,k){w==="Always"&&k.classList.contains("e-outline")&&k.classList.add("e-valid-input")}function S(w,k){if(!u(w.properties))for(var j=0,Q=Object.keys(w.properties);j<Q.length;j++){var te=Q[j];switch(te){case"cssClass":ne(w.properties.cssClass,[k.container]),C(w.floatLabelType,k.container);break;case"enabled":De(w.properties.enabled,w.element,w.floatLabelType,k.container);break;case"enableRtl":Ee(w.properties.enableRtl,[k.container]);break;case"placeholder":xe(w.properties.placeholder,w.element);break;case"readonly":ge(w.properties.readonly,w.element);break}}return k}function I(w,k,j){u(k)||(w&&!j?R([k],le.CLEARICONHIDE):x([k],le.CLEARICONHIDE))}function A(w,k,j){if(j===void 0&&(j=null),w)x([k],le.LABELTOP),k.classList.contains(le.LABELBOTTOM)&&R([k],le.LABELBOTTOM);else{var Q=j!=null?j!==document.activeElement:!0;Q&&(k.classList.contains(le.LABELTOP)&&R([k],le.LABELTOP),x([k],le.LABELBOTTOM))}}function T(w){var k=u(w.parentNode)?w:w.parentNode;return k&&k.classList.contains("e-input-in-wrap")&&(k=k.parentNode),k}function L(w,k,j,Q){var te=u(Q)?pe:Q,ae=te("span",{className:le.CLEARICON}),Le=k.container;if(!u(j))Le.appendChild(ae);else{var mt=k.container.classList.contains(le.FLOATINPUT)?k.container.querySelector("."+le.FLOATTEXT):w;mt.insertAdjacentElement("afterend",ae)}return x([ae],le.CLEARICONHIDE),V(w,ae),ae.setAttribute("aria-label","close"),ae}function _(w,k,j){k.classList.contains(le.DISABLE)||k.readOnly||(w.preventDefault(),k!==document.activeElement&&k.focus(),k.value="",x([j],le.CLEARICONHIDE))}function X(w,k){I(w.value,k)}function re(w,k){I(w.value,k,w.readOnly)}function ye(w,k){setTimeout(function(){u(k)||(x([k],le.CLEARICONHIDE),k=!u(w)&&w.classList.contains("e-combobox")?null:k)},200)}function V(w,k,j){if(t===void 0||t){var Q=function(mt){return _(mt,w,k)};k.addEventListener("click",Q),w.__eventHandlers.clearClickHandler={clickHandlerEvent:Q}}var te=function(){return X(w,k)},ae=function(){return re(w,k)},Le=function(){return ye(w,k)};w.addEventListener("input",te),w.addEventListener("focus",ae),w.addEventListener("blur",Le),w.__eventHandlers.clearInputHandler={inputHandlerEvent:te},w.__eventHandlers.clearFocusHandler={focusHandlerEvent:ae},w.__eventHandlers.clearBlurHandler={blurHandlerEvent:Le}}a.wireClearBtnEvents=V;function q(w,k){if(!u(w)&&!u(w.__eventHandlers)){if(!u(w.__eventHandlers.clearClickHandler)){var j=w.__eventHandlers.clearClickHandler.clickHandlerEvent;(t===void 0||t)&&(u(k)||k.removeEventListener("click",j)),delete w.__eventHandlers.clearClickHandler}if(!u(w.__eventHandlers.clearInputHandler)&&!u(w.__eventHandlers.clearFocusHandler)&&!u(w.__eventHandlers.clearBlurHandler)){var Q=w.__eventHandlers.clearInputHandler.inputHandlerEvent,te=w.__eventHandlers.clearFocusHandler.focusHandlerEvent,ae=w.__eventHandlers.clearBlurHandler.blurHandlerEvent;w.removeEventListener("input",Q),w.removeEventListener("focus",te),w.removeEventListener("blur",ae),delete w.__eventHandlers.clearInputHandler,delete w.__eventHandlers.clearFocusHandler,delete w.__eventHandlers.clearBlurHandler}}}function z(w,k){k===void 0&&(k=null),o(w),w.floatLabelType==="Auto"&&b(w),w.properties.showClearButton&&q(w.element,k),u(w.buttons)||ui(!1,null,w.buttons),d(w.element),u(w.element)||(delete w.element.__eventHandlers,w.element.classList.contains(le.INPUT)&&w.element.classList.remove(le.INPUT))}a.destroy=z;function U(w,k){var j=T(w);if(j.classList.contains(le.FLOATINPUT)&&k==="Auto"){var Q=T(w).getElementsByClassName("e-float-text")[0];A(w.value,Q,w)}}function ie(w,k,j,Q,te){var ae=u(te)?pe:te,Le;return u(w.customTag)?Le=ae(Q,{className:k}):(Le=ae(w.customTag,{className:k}),Le.classList.add(j)),Le.classList.add("e-control-wrapper"),Le}function J(w){if(w==null||w==="")return"";var k=K(w);return k}function K(w){var k={"&amp;":"&","&quot;":'"',"&#39;":"'","&lt;":"<","&gt;":">","&eacute;":""};return w.replace(/&[a-zA-Z#0-9]+;/g,function(j){return k[j]||j})}function Y(w,k,j,Q){if(k.value=w,j!=="Never"&&de(k,k.parentElement),!u(j)&&j==="Auto"&&U(k,j),!u(Q)&&Q){var te=T(k);if(!u(te)){var ae=te.getElementsByClassName(le.CLEARICON)[0];u(ae)||(k.value&&!u(te)&&te.classList.contains("e-input-focus")?R([ae],le.CLEARICONHIDE):x([ae],le.CLEARICONHIDE))}}l(j,k)}a.setValue=Y;function ne(w,k,j){!u(j)&&j!==""&&R(k,j.split(" ")),!u(w)&&w!==""&&x(k,w.split(" "))}a.setCssClass=ne;function de(w,k,j){if(!(j!=="multiselect"&&!Zt(w))){var Q=j==="multiselect"?w:w.clientWidth-parseInt(getComputedStyle(w,null).getPropertyValue("padding-left"),10);!u(k)&&!u(k.getElementsByClassName("e-float-text-content")[0])&&(k.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&k.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(Q<k.getElementsByClassName("e-float-text-content")[0].clientWidth||Q===k.getElementsByClassName("e-float-text-content")[0].clientWidth)&&k.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}}a.calculateWidth=de;function Ae(w,k){typeof w=="number"?k.style.width=ve(w):typeof w=="string"&&(k.style.width=w.match(/px|%|em/)?w:ve(w)),de(k.firstChild,k)}a.setWidth=Ae;function xe(w,k){w=J(w);var j=T(k);if(j.classList.contains(le.FLOATINPUT))if(!u(w)&&w!==""){var Q=j.getElementsByClassName("e-float-text-content")[0];if(Q&&Q.children[0])Q.children[0].textContent=w;else{var te=j.getElementsByClassName(le.FLOATTEXT)[0];u(te)||(te.textContent=w)}j.classList.remove(le.NOFLOATLABEL),k.removeAttribute("placeholder")}else{j.classList.add(le.NOFLOATLABEL);var Q=j.getElementsByClassName("e-float-text-content")[0];if(Q&&Q.children[0])Q.children[0].textContent="";else{var te=j.getElementsByClassName(le.FLOATTEXT)[0];u(te)||(te.textContent="")}}else!u(w)&&w!==""?G(k,{placeholder:w}):k.removeAttribute("placeholder")}a.setPlaceholder=xe;function ge(w,k,j){w?G(k,{readonly:""}):k.removeAttribute("readonly"),u(j)||U(k,j)}a.setReadonly=ge;function Ee(w,k){w?x(k,le.RTL):R(k,le.RTL)}a.setEnableRtl=Ee;function De(w,k,j,Q){var te={disabled:"","aria-disabled":"true"},ae=!u(Q);w?(k.classList.remove(le.DISABLE),be(te,k),ae&&R([Q],le.DISABLE)):(k.classList.add(le.DISABLE),me(te,k),ae&&x([Q],le.DISABLE)),u(j)||U(k,j)}a.setEnabled=De;function ee(w,k,j,Q,te){var ae=u(te)?pe:te;w?j.clearButton=L(k,j,Q,ae):(ce(j.clearButton),j.clearButton=null)}a.setClearButton=ee;function be(w,k){for(var j=0,Q=Object.keys(w);j<Q.length;j++){var te=Q[j],ae=T(k);te==="disabled"&&k.classList.remove(le.DISABLE),te==="disabled"&&ae.classList.contains(le.INPUTGROUP)&&ae.classList.remove(le.DISABLE),te==="placeholder"&&ae.classList.contains(le.FLOATINPUT)?ae.getElementsByClassName(le.FLOATTEXT)[0].textContent="":k.removeAttribute(te)}}a.removeAttributes=be;function me(w,k){for(var j=0,Q=Object.keys(w);j<Q.length;j++){var te=Q[j],ae=T(k);te==="disabled"&&k.classList.add(le.DISABLE),te==="disabled"&&ae.classList.contains(le.INPUTGROUP)&&ae.classList.add(le.DISABLE),te==="placeholder"&&ae.classList.contains(le.FLOATINPUT)?ae.getElementsByClassName(le.FLOATTEXT)[0].textContent=w[""+te]:k.setAttribute(te,w[""+te])}}a.addAttributes=me;function Ye(w){var k=w.container;if(!u(k)&&k.classList.contains(le.FLOATINPUT)){var j=k.querySelector("textarea")?k.querySelector("textarea"):k.querySelector("input"),Q=k.querySelector("."+le.FLOATTEXT).textContent,te=k.querySelector(".e-clear-icon")!==null;Z(k.querySelector("."+le.FLOATLINE)),Z(k.querySelector("."+le.FLOATTEXT)),Se(k,[le.INPUTGROUP],[le.FLOATINPUT]),d(j),G(j,{placeholder:Q}),j.classList.add(le.INPUT),!te&&j.tagName==="INPUT"&&j.removeAttribute("required")}}a.removeFloating=Ye;function ot(w,k,j,Q){var te=u(Q)?pe:Q,ae=M(w,"."+le.INPUTGROUP),Le=ae.tagName;Le=Le!=="DIV"&&Le!=="SPAN"?Le:null;var mt={element:w,floatLabelType:k,customTag:Le,properties:{placeholder:j}};if(k!=="Never"){var _e=ae.querySelector(".e-clear-icon"),xt={container:ae};w.classList.remove(le.INPUT),y(mt,xt,te),gt(xt.container,te),de(mt.element,xt.container);var ei=ae.classList.contains("e-float-icon-left");if(u(_e))if(ei){var Br=ae.querySelector(".e-input-in-wrap");_e=Br.querySelector(".e-input-group-icon")}else _e=ae.querySelector(".e-input-group-icon");if(u(_e))ei&&(_e=ae.querySelector(".e-input-group-icon"));else{var An=ae.querySelector("."+le.FLOATLINE),Dn=ae.querySelector("."+le.FLOATTEXT),ji=ei?ae.querySelector(".e-input-in-wrap"):ae;ji.insertBefore(w,_e),ji.insertBefore(An,_e),ji.insertBefore(Dn,_e)}}else b(mt);C(k,w.parentElement)}a.addFloating=ot;function gt(w,k){if(w.classList.contains("e-outline")&&w.getElementsByClassName("e-float-text")[0]){var j=k("span",{className:le.FLOATTEXTCONTENT});j.innerHTML=w.getElementsByClassName("e-float-text")[0].innerHTML,w.getElementsByClassName("e-float-text")[0].innerHTML="",w.getElementsByClassName("e-float-text")[0].appendChild(j)}}a.createSpanElement=gt;function fe(w,k){for(var j=0;j<k.length;j++)ui(w,k[parseInt(j.toString(),10)].container)}a.setRipple=fe;function ui(w,k,j){var Q=[];Q.push(j);var te=u(j)?k.querySelectorAll(".e-input-group-icon"):Q;if(w&&te.length>0)for(var ae=0;ae<te.length;ae++)te[parseInt(ae.toString(),10)].addEventListener("mousedown",zi,!1),te[parseInt(ae.toString(),10)].addEventListener("mouseup",lt,!1);else if(te.length>0)for(var ae=0;ae<te.length;ae++)te[parseInt(ae.toString(),10)].removeEventListener("mousedown",zi,this),te[parseInt(ae.toString(),10)].removeEventListener("mouseup",lt,this)}function bi(w,k){!w.classList.contains("e-disabled")&&!w.querySelector("input").readOnly&&k.classList.add("e-input-btn-ripple")}function Zt(w){if(!w)return!1;for(var k=w;k&&k!==document.body;){var j=window.getComputedStyle(k);if(j.display==="none")return!1;k=k.parentElement}return!0}function zi(){for(var w=this,k=this.parentElement;!k.classList.contains("e-input-group");)k=k.parentElement;bi(k,w)}function lt(){var w=this;setTimeout(function(){w.classList.remove("e-input-btn-ripple")},500)}function qi(w,k){var j=k("span",{className:w});return j.classList.add("e-input-group-icon"),j}function ir(w,k,j,Q,te){var ae=typeof k=="string"?k.split(","):k;if(w.toLowerCase()==="append")for(var Le=0,mt=ae;Le<mt.length;Le++){var _e=mt[Le];ht(_e,j,te)}else for(var xt=0,ei=ae;xt<ei.length;xt++){var _e=ei[xt];ct(_e,j,Q,te)}j.getElementsByClassName("e-input-group-icon")[0]&&j.getElementsByClassName("e-float-text-overflow")[0]&&j.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")}a.addIcon=ir;function ct(w,k,j,Q){var te=u(Q)?pe:Q,ae=qi(w,te);k.classList.add("e-float-icon-left");var Le=k.querySelector(".e-input-in-wrap");if(u(Le)){Le=te("span",{className:"e-input-in-wrap"}),j.parentNode.insertBefore(Le,j);var mt=k.querySelectorAll(j.tagName+" ~ *");Le.appendChild(j);for(var _e=0;_e<mt.length;_e++){var xt=mt[parseInt(_e.toString(),10)],ei=Le.parentElement;(!xt.classList.contains("e-float-line")||!(ei&&ei.classList.contains("e-filled"))&&ei)&&Le.appendChild(xt)}}return Le.parentNode.insertBefore(ae,Le),ui(!0,k,ae),ae}a.prependSpan=ct;function ht(w,k,j){var Q=u(j)?pe:j,te=qi(w,Q),ae=k.classList.contains("e-float-icon-left")?k.querySelector(".e-input-in-wrap"):k;return ae.appendChild(te),ui(!0,k,te),te}a.appendSpan=ht;function pi(w,k){k.type==="hidden"?w.classList.add("e-hidden"):w.classList.contains("e-hidden")&&w.classList.remove("e-hidden")}a.validateInputType=pi;function Wi(w,k){if(!u(w))for(var j=0,Q=Object.keys(w);j<Q.length;j++){var te=Q[j];Mu.indexOf(te)<0&&k.setAttribute(te,w[""+te])}}a.updateHTMLAttributesToElement=Wi;function hs(w,k,j){ne(sr(w),[j],sr(k))}a.updateCssClass=hs;function sr(w){var k=w;return!u(w)&&w!==""&&(k=w.replace(/\s+/g," ").trim()),k}a.getInputValidClassList=sr;function Ms(w,k){if(!u(w))for(var j=0,Q=Object.keys(w);j<Q.length;j++){var te=Q[j];if(Mu.indexOf(te)>-1)if(te==="class"){var ae=this.getInputValidClassList(w[""+te]);ae!==""&&x([k],ae.split(" "))}else if(te==="style"){var Le=k.getAttribute(te);Le=u(Le)?w[""+te]:Le+w[""+te],k.setAttribute(te,Le)}else k.setAttribute(te,w[""+te])}}a.updateHTMLAttributesToWrapper=Ms;function En(w){return!w||/^\s*$/.test(w)}a.isBlank=En})(W||(W={}));var Bg=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Ze=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Pg="e-control-wrapper e-numeric",Wo="e-input-group-icon",jo="e-spin-up",Ng="e-spin-down",Fu="e-error",cr="increment",Kr="decrement",Hg=new RegExp("^(-)?(\\d*)$"),Vg=".",zg="e-numerictextbox",qg="e-control",Ou="e-input-focus",Wg="e-numeric-hidden",Bu=["title","style","class"],Pu=0,_c=(function(a){Bg(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.preventChange=!1,s.isDynamicChange=!1,s.numericOptions=e,s}return t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=H("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),R([this.cloneElement],[qg,zg,"e-lib"]),this.angularTagName=null,this.formEle=M(this.element,"form"),this.element.tagName==="EJS-NUMERICTEXTBOX"){this.angularTagName=this.element.tagName;var i=this.createElement("input"),s=0;for(s;s<this.element.attributes.length;s++){var r=this.element.attributes[s].nodeName;r!=="id"&&r!=="class"?(i.setAttribute(this.element.attributes[s].nodeName,this.element.attributes[s].nodeValue),i.innerHTML=this.element.innerHTML):r==="class"&&i.setAttribute(r,this.element.className.split(" ").filter(function(o){return o.indexOf("ng-")!==0}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,We("ej2_instances",e,this.element)}G(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var n={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new zt("numerictextbox",n,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",at("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),this.placeholder===null&&this.updatePlaceholder()},t.prototype.render=function(){this.element.tagName.toLowerCase()==="input"&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(this.value===null||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),this.value!==null&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!this.element.hasAttribute("aria-labelledby")&&!this.element.hasAttribute("placeholder")&&!this.element.hasAttribute("aria-label")&&this.element.setAttribute("aria-label","numerictextbox"),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var i=e?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"],s=0,r=i;s<r.length;s++){var n=r[s];if(!u(this.element.getAttribute(n)))switch(n){case"disabled":if(u(this.numericOptions)||this.numericOptions.enabled===void 0||e){var o=!(this.element.getAttribute(n)==="disabled"||this.element.getAttribute(n)===""||this.element.getAttribute(n)==="true");this.setProperties({enabled:o},!e)}break;case"readonly":if(u(this.numericOptions)||this.numericOptions.readonly===void 0||e){var l=this.element.getAttribute(n)==="readonly"||this.element.getAttribute(n)===""||this.element.getAttribute(n)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(u(this.numericOptions)||this.numericOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(u(this.numericOptions)||this.numericOptions.value===void 0||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(We(n,h,{}),!e)}break;case"min":if(u(this.numericOptions)||this.numericOptions.min===void 0||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));p!==null&&!isNaN(p)&&this.setProperties(We(n,p,{}),!e)}break;case"max":if(u(this.numericOptions)||this.numericOptions.max===void 0||e){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));c!==null&&!isNaN(c)&&this.setProperties(We(n,c,{}),!e)}break;case"step":if(u(this.numericOptions)||this.numericOptions.step===void 0||e){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));d!==null&&!isNaN(d)&&this.setProperties(We(n,d,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:{var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(f!==null&&!isNaN(f)||n==="value")&&this.setProperties(We(n,f,{}),!0)}break}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new ft(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,H("currency",this)!==null&&(We("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(e=this.getNumericValidClassList(this.cssClass));var i=W.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class",Pg+" "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&G(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text","data-validateHidden":"true","aria-label":"hidden",class:Wg}}),this.inputName=this.inputName!==null?this.inputName:this.element.id,this.element.removeAttribute("name"),this.isAngular&&this.angularTagName==="EJS-NUMERICTEXTBOX"&&this.cloneElement.id.length>0?G(this.hiddenInput,{name:this.cloneElement.id}):G(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),this.inputStyle!==null&&G(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var i={};if(e)i=this.htmlAttributes;else for(var s=0;s<this.element.attributes.length;s++)i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name);for(var r=0,n=Object.keys(i);r<n.length;r++){var o=n[r];o.indexOf("data")===0&&this.hiddenInput.setAttribute(o,i[""+o])}},t.prototype.updateHTMLAttrToElement=function(){if(!u(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];Bu.indexOf(s)<0&&this.element.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateCssClass=function(e,i){W.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(i))},t.prototype.getNumericValidClassList=function(e){var i=e;return!u(e)&&e!==""&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.updateHTMLAttrToWrapper=function(){if(!u(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if(Bu.indexOf(s)>-1)if(s==="class"){var r=this.getNumericValidClassList(this.htmlAttributes[""+s]);r!==""&&x([this.container],r.split(" "))}else if(s==="style"){var n=this.container.getAttribute(s);n=u(n)?this.htmlAttributes[""+s]:n+this.htmlAttributes[""+s],this.container.setAttribute(s,n)}else this.container.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.setElementWidth=function(e){u(e)||(typeof e=="number"?this.container.style.width=ve(e):typeof e=="string"&&(this.container.style.width=e.match(/px|%|em/)?e:ve(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=W.appendSpan(Wo+" "+Ng,this.container,this.createElement),G(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=W.appendSpan(Wo+" "+jo,this.container,this.createElement),G(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){typeof this.min=="number"&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),typeof this.max=="number"&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),this.decimals!==null&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&G(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&G(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,i){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(i)},t.prototype.validateStep=function(){this.decimals!==null&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,i){this.isInteract=!0;var s=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(s,this.step,e)),this.raiseChangeEvent(i)},t.prototype.checkErrorClass=function(){this.isValidState?R([this.container],Fu):x([this.container],Fu),G(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&v.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="";var i=M(this.element,"form");if(i){var s=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),s.dispatchEvent(r)}},t.prototype.resetFormHandler=function(){this.element.tagName==="EJS-NUMERICTEXTBOX"?this.updateValue(null):this.updateValue(this.inputEleValue)},t.prototype.setSpinButton=function(){u(this.spinDown)||G(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),u(this.spinUp)||G(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){v.add(this.element,"focus",this.focusHandler,this),v.add(this.element,"blur",this.focusOutHandler,this),v.add(this.element,"keydown",this.keyDownHandler,this),v.add(this.element,"keyup",this.keyUpHandler,this),v.add(this.element,"input",this.inputHandler,this),v.add(this.element,"keypress",this.keyPressHandler,this),v.add(this.element,"change",this.changeHandler,this),v.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&v.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){v.add(this.spinUp,E.touchStartEvent,this.mouseDownOnSpinner,this),v.add(this.spinDown,E.touchStartEvent,this.mouseDownOnSpinner,this),v.add(this.spinUp,E.touchEndEvent,this.mouseUpOnSpinner,this),v.add(this.spinDown,E.touchEndEvent,this.mouseUpOnSpinner,this),v.add(this.spinUp,E.touchMoveEvent,this.touchMoveOnSpinner,this),v.add(this.spinDown,E.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){v.remove(this.element,"focus",this.focusHandler),v.remove(this.element,"blur",this.focusOutHandler),v.remove(this.element,"keyup",this.keyUpHandler),v.remove(this.element,"input",this.inputHandler),v.remove(this.element,"keydown",this.keyDownHandler),v.remove(this.element,"keypress",this.keyPressHandler),v.remove(this.element,"change",this.changeHandler),v.remove(this.element,"paste",this.pasteHandler),this.formEle&&v.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){v.remove(this.spinUp,E.touchStartEvent,this.mouseDownOnSpinner),v.remove(this.spinDown,E.touchStartEvent,this.mouseDownOnSpinner),v.remove(this.spinUp,E.touchEndEvent,this.mouseUpOnSpinner),v.remove(this.spinDown,E.touchEndEvent,this.mouseUpOnSpinner),v.remove(this.spinUp,E.touchMoveEvent,this.touchMoveOnSpinner),v.remove(this.spinDown,E.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,e)},t.prototype.raiseChangeEvent=function(e){if(this.inputValue=u(this.inputValue)||isNaN(this.inputValue)?null:this.inputValue,this.prevValue!==this.value||this.prevValue!==this.inputValue){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),this.changeEventArgs.event===void 0&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),Oi(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},t.prototype.pasteHandler=function(){var e=this;if(!(!this.enabled||this.readonly)){var i=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(i)})}},t.prototype.preventHandler=function(){var e=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var s=e.element.selectionStart,r=e.element.selectionStart-1,n=0,o=e.element.value.split(""),l=Nr(e.locale),h=H("decimal",l),p=h.charCodeAt(0);e.element.value[r]===" "&&e.element.selectionStart>0&&!i?(u(e.prevVal)?e.element.value=e.element.value.trim():r!==0?e.element.value=e.prevVal:r===0&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(r,r)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.value[e.element.selectionStart-1].charCodeAt(0)!==45?(o.indexOf(e.element.value[e.element.selectionStart-1])!==o.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===p||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==p)&&(e.element.value=e.element.value.substring(0,r)+e.element.value.substring(s,e.element.value.length),e.element.setSelectionRange(r,r),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&e.element.value[e.element.selectionStart-2].charCodeAt(0)!==45&&(o.indexOf(e.element.value[e.element.selectionStart-2])!==o.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===p||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==p)&&(e.element.setSelectionRange(r,r),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),e.cursorPosChanged===!0&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),e.element.value.trim()===""&&e.element.setSelectionRange(n,n),e.element.selectionStart>0&&(e.element.value[e.element.selectionStart-1].charCodeAt(0)===45&&e.element.selectionStart>1&&(u(e.prevVal)||(e.element.value=e.prevVal),e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&e.decimals===0&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,r)+e.element.value.substring(s,e.element.value.length))),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(){if(!(!this.enabled||this.readonly)){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!e&&E.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);i=i===null||isNaN(i)?null:i,this.hiddenInput.value=i||i===0?i.toString():null;var s=M(this.element,"form");if(s){var r=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),r.dispatchEvent(n)}}},t.prototype.inputHandler=function(e){var i=this;if(!(!this.enabled||this.readonly)){var s=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),r=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if((r||s)&&E.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==H("decimal",Nr(this.locale))&&this.element.value!==H("minusSign",Nr(this.locale))&&this.numericRegex().test(this.element.value)){var n=this.instance.getNumberParser({format:"n"})(this.element.value);n=isNaN(n)?null:n,i.localChange({value:n}),this.preventChange=!0}if(this.isVue){var o=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),h=new RegExp("[^0-9]+$");(h.test(this.element.value)||(this.elementPrevValue.indexOf(".")!==-1||this.elementPrevValue.indexOf("-")!==-1)&&this.element.value[this.element.value.length-1]==="0")&&(o=this.value);var p={event:e,value:o===null||isNaN(o)?null:o,previousValue:l===null||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",p)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(cr,e);break;case 40:e.preventDefault(),this.action(Kr,e);break}},t.prototype.performAction=function(e,i,s){(e===null||isNaN(e))&&(e=0);var r=s===cr?e+i:e-i;return r=this.correctRounding(e,i,r),this.strictMode?this.trimValue(r):r},t.prototype.correctRounding=function(e,i,s){var r=new RegExp("[,.](.*)"),n=r.test(e.toString()),o=r.test(i.toString());if(n||o){var l=n?r.exec(e.toString())[0].length:0,h=o?r.exec(i.toString())[0].length:0,p=Math.max(l,h);return e=this.roundValue(s,p)}return s},t.prototype.roundValue=function(e,i){i=i||0;var s=Math.pow(10,i);return e*=s,e=Math.round(e)/s},t.prototype.updateValue=function(e,i){i&&(this.isInteract=!0),e!==null&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.inputValue=e,this.isVue&&this.element&&this.element.hasAttribute("modelvalue")&&this.isDynamicChange||this.changeValue(e===null||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(i)},t.prototype.updateCurrency=function(e,i){We(e,i,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(!(e||e===0))e=null,this.setProperties({value:e},!0);else{var i=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,i)},!0)}this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||this.value===0){var e=this.formatNumber(),i=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);/[eE]/.test(e)&&(i=this.formatScientificNotation(i)),this.setElementValue(i),G(this.element,{"aria-valuenow":e}),u(this.hiddenInput)||(this.hiddenInput.value=this.value.toString(),this.value!==null&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator)))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,i){W.setValue(e,i||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||this.value===0)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var i,s=new RegExp("[eE][-+]?([0-9]+)"),r=e.toString();if(s.test(r))if(/[eE]/.test(r))r=e.toFixed(20).replace(/0+$/,""),r.charAt(r.length-1)==="."&&(r=r.slice(0,r.length-1));else{var n=s.exec(r);u(n)||(r=e.toFixed(Math.min(parseInt(n[1],10),20)))}var o=r.split(".")[1];return i=!o||!o.length?0:o.length,this.decimals!==null&&(i=i<this.decimals?i:this.decimals),i},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.storedValueString=this.value.toString(),this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,i){var s=e,r=i||0,n=s.toString().split("e");s=Math.round(+(n[0]+"e"+(n[1]?Number(n[1])+r:r)));var o=s.toString().split("e");return s=+(o[0]+"e"+(o[1]?Number(o[1])-r:-r)),Number(s.toFixed(r))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!E.isDevice&&E.info.version==="11.0"&&e.keyCode===13){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,e),!0}if(e.which===0||e.metaKey||e.ctrlKey||e.keyCode===8||e.keyCode===13)return!0;var s=String.fromCharCode(e.which),r=H("decimal",Nr(this.locale)),n=e.code==="NumpadDecimal"&&s!==r;n&&(s=r);var o=this.element.value;if(o=o.substring(0,this.element.selectionStart)+s+o.substring(this.element.selectionEnd),this.numericRegex().test(o)){if(n){var l=this.element.selectionStart+1;this.element.value=o,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}else return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var e=Nr(this.locale),i=H("decimal",e),s="*";return i===Vg&&(i="\\"+i),this.decimals===0&&this.validateDecimalOnType?Hg:(this.decimals&&this.validateDecimalOnType&&(s="{0,"+this.decimals+"}"),new RegExp("^\\s*(-)?(((\\d+("+i+"\\d"+s+")?)|("+i+"\\d"+s+")))?$"))},t.prototype.mouseWheel=function(e){e.preventDefault();var i,s=e;s.wheelDelta?i=s.wheelDelta/120:s.detail&&(i=-s.detail/3),i>0?this.action(cr,e):i<0&&this.action(Kr,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var i=this;if(clearTimeout(Pu),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),!(!this.enabled||this.readonly)){if(this.isFocused=!0,this.prevValue=this.value,this.value||this.value===0){var s=this.formatNumber();if(/[eE]/.test(this.value.toString())&&(s=this.formatScientificNotation(s)),this.setElementValue(s),!this.isPrevFocused)if(!E.isDevice&&E.info.version==="11.0")this.element.setSelectionRange(0,s.length);else{var r=E.isDevice&&E.isIos?600:0;Pu=setTimeout(function(){i.element.setSelectionRange(0,s.length)},r)}}E.isDevice||v.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var i=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),!(!this.enabled||this.readonly)){if(this.isPrevFocused){if(e.preventDefault(),E.isDevice){var s=this.element.value;this.element.focus(),this.isPrevFocused=!1;var r=this.element;setTimeout(function(){i.setElementValue(s,r)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var n=this.instance.getNumberParser({format:"n"})(this.element.value);/[eE]/.test(this.element.value)&&(n=parseFloat(this.formatScientificNotation(this.element.value))),this.updateValue(n),E.isDevice||v.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}var o=M(this.element,"form");if(o){var l=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),l.dispatchEvent(h)}}},t.prototype.mouseDownOnSpinner=function(e){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!!this.getElementData(e)){this.getElementData(e);var s=e.currentTarget,r=s.classList.contains(jo)?cr:Kr;v.add(s,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(r,e)},150),v.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var i;if(e.type==="touchmove"){var s=e.touches;i=s.length&&document.elementFromPoint(s[0].pageX,s[0].pageY)}else i=document.elementFromPoint(e.clientX,e.clientY);i.classList.contains(Wo)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),E.isDevice||(this.isPrevFocused=!1)),E.isDevice||e.preventDefault(),!!this.getElementData(e)){var i=e.currentTarget,s=i.classList.contains(jo)?cr:Kr;v.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(s,e),this.isCalled=!1,v.remove(document,"mouseup",this.mouseUpClick);var r=M(this.element,"form");if(r){var n=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),n.dispatchEvent(o)}}},t.prototype.getElementData=function(e){return e.which&&e.which===3||e.button&&e.button===2||!this.enabled||this.readonly?!1:(clearInterval(this.timeOut),!0)},t.prototype.floatLabelTypeUpdate=function(){W.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),W.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&v.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&v.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.formatScientificNotation=function(e){e=this.storedValueString?this.storedValueString:e;var i=e.toLowerCase().split("e"),s=i[0],r=i[1],n=parseInt(r,10),o=this.format.match(/n(\d+)/i),l=o?parseInt(o[1],10):10,h=s.replace(".",""),p;if(n<0){var c=Math.abs(Number(n))-1,d="0".repeat(Math.min(c,l));p="0."+d+h}else{var f=s.split("."),g=f[0],y=f[1],b=y===void 0?"":y,C=n-b.length;if(C>=0)p=g+b+"0".repeat(C);else{var S=b.slice(0,n)+"."+b.slice(n);p=g+S}}var I=p.split("."),A=I[0],T=I[1],L=T===void 0?"":T;if(this.isFocused)return L.slice(0,l),A+"."+L;var _=L.padEnd(l,"0").slice(0,l);return A+"."+_},t.prototype.increment=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,cr)),this.raiseChangeEvent()},t.prototype.decrement=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Kr)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),Z(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),Z(this.spinUp),Z(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),Z(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,W.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),a.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),x([this.container],[Ou]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),R([this.container],[Ou]))},t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"width":this.setElementWidth(e.width),W.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"enabled":W.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":W.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":W.setReadonly(e.readonly,this.element),this.readonly?G(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),W.validateInputType(this.container,this.element);break;case"placeholder":W.setPlaceholder(e.placeholder,this.element),W.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":We(n,H(n,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),W.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{var o=H(n,e);this.setProperties({currencyCode:o},!0),this.updateCurrency(n,o)}break;case"currencyCode":{var l=H(n,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l)}break;case"format":We(n,H(n,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){W.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(Z(this.spinUp),Z(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},Ze([m("")],t.prototype,"cssClass",void 0),Ze([m(null)],t.prototype,"value",void 0),Ze([m(-Number.MAX_VALUE)],t.prototype,"min",void 0),Ze([m(Number.MAX_VALUE)],t.prototype,"max",void 0),Ze([m(1)],t.prototype,"step",void 0),Ze([m(null)],t.prototype,"width",void 0),Ze([m(null)],t.prototype,"placeholder",void 0),Ze([m({})],t.prototype,"htmlAttributes",void 0),Ze([m(!0)],t.prototype,"showSpinButton",void 0),Ze([m(!1)],t.prototype,"readonly",void 0),Ze([m(!0)],t.prototype,"enabled",void 0),Ze([m(!1)],t.prototype,"showClearButton",void 0),Ze([m(!1)],t.prototype,"enablePersistence",void 0),Ze([m("n2")],t.prototype,"format",void 0),Ze([m(null)],t.prototype,"decimals",void 0),Ze([m(null)],t.prototype,"currency",void 0),Ze([m(null)],t.prototype,"currencyCode",void 0),Ze([m(!0)],t.prototype,"strictMode",void 0),Ze([m(!1)],t.prototype,"validateDecimalOnType",void 0),Ze([m("Never")],t.prototype,"floatLabelType",void 0),Ze([O()],t.prototype,"created",void 0),Ze([O()],t.prototype,"destroyed",void 0),Ze([O()],t.prototype,"change",void 0),Ze([O()],t.prototype,"focus",void 0),Ze([O()],t.prototype,"blur",void 0),t=Ze([pt],t),t})(Vt),Kc=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),uS=(function(a){Kc(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.moduleName="column",t.complexTemplate={"filter.itemTemplate":"filter.itemTemplate"},t})(pc),pS=(function(a){Kc(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.propertyName="columns",t.moduleName="columns",t})(pc),xn=(function(){function a(t){this.intl=new ft,u(t)||(this.intl.culture=t)}return a.prototype.getFormatFunction=function(t){return!u(t)&&(t.type==="dateTime"||t.type==="datetime"||t.type==="date"||t.type==="time")?this.intl.getDateFormat(t):this.intl.getNumberFormat(t)},a.prototype.getParserFunction=function(t){return t.type?this.intl.getDateParser(t):this.intl.getNumberParser(t)},a.prototype.fromView=function(t,e,i){return(i==="date"||i==="datetime"||i==="number")&&!u(e)&&!u(t)?e(t):t},a.prototype.toView=function(t,e){var i=t;return!u(e)&&!u(t)&&(i=e(t)),i},a.prototype.setCulture=function(t){u(t)||Hd(t)},a})(),Yc=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),ya=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Dt=(function(){function a(t,e){var i=this;this.disableHtmlEncode=!0,this.enableRowSpan=!0,this.enableColumnSpan=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},this.templateOptions={enableAriaLabel:!0},Oi(this,t),this.parent=e,this.type==="none"?this.type=null:this.type&&(this.type=typeof this.type=="string"?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),u(this.uid)&&(this.uid=xs("grid-column"));var s=new xn;if(t.format&&(t.format.skeleton||t.format.format&&typeof t.format.format=="string")&&(this.setFormatter(s.getFormatFunction($({},t.format))),this.setParser(s.getParserFunction(t.format))),this.toJSON=function(){for(var n={},o=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(i),h=0;h<l.length;h++)if(l[parseInt(h.toString(),10)]==="columns"){n[l[parseInt(h.toString(),10)]]=[];for(var p=0;p<i[l[parseInt(h.toString(),10)]].length;p++)n[l[parseInt(h.toString(),10)]].push(i[l[parseInt(h.toString(),10)]][parseInt(p.toString(),10)].toJSON())}else o.indexOf(l[parseInt(h.toString(),10)])<0&&(n[l[parseInt(h.toString(),10)]]=i[l[parseInt(h.toString(),10)]]);return n},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.enableColumnSpan=!1,this.enableRowSpan=!1,this.columns&&(this.allowResizing=this.columns.some(function(n){return n.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=st(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=st(this.headerTemplate)),!u(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=st(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=st(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=st(this.filterTemplate)),this.isForeignColumn()&&(u(this.editType)||this.editType==="dropdownedit"||this.editType==="defaultedit")&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=$({dataSource:this.dataSource,query:new se,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var r=this.sortComparer;this.sortComparer=function(n,o,l,h){if(typeof r=="string"&&(r=ns(r,window)),i.sortDirection==="Descending"){var p=n;n=o,o=p;var c=l;l=h,h=c}return r(n,o,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(n,o){return n=ns(i.foreignKeyValue,Js(i,{},n)[0]),o=ns(i.foreignKeyValue,Js(i,{},o)[0]),i.sortDirection==="Descending"?P.fnDescending(n,o):P.fnAscending(n,o)})}return a.prototype.getSortDirection=function(){return this.sortDirection},a.prototype.setSortDirection=function(t){this.sortDirection=t},a.prototype.getFreezeTableName=function(){return this.freezeTable},a.prototype.setProperties=function(t){for(var e=Object.keys(t),i=function(n){if(e[parseInt(n.toString(),10)]==="columns")for(var o=t[e[parseInt(n.toString(),10)]],l=function(p){s.columns.find(function(c){return c.field===o[parseInt(p.toString(),10)].field}).setProperties(o[parseInt(p.toString(),10)])},h=0;h<o.length;h++)l(h);else s[e[parseInt(n.toString(),10)]]=t[e[parseInt(n.toString(),10)]];s.parent&&s.parent.isReact&&(e[parseInt(n.toString(),10)]==="template"?(s.templateFn=st(t[e[parseInt(n.toString(),10)]]),s.parent.refreshReactColumnTemplateByUid(s.uid,!0)):e[parseInt(n.toString(),10)]==="headerTemplate"?(s.headerTemplateFn=st(t[e[parseInt(n.toString(),10)]]),s.parent.refreshReactHeaderTemplateByUid(s.uid)):e[parseInt(n.toString(),10)]==="editTemplate"?s.editTemplateFn=st(t[e[parseInt(n.toString(),10)]]):e[parseInt(n.toString(),10)]==="filterTemplate"?s.filterTemplateFn=st(t[e[parseInt(n.toString(),10)]]):e[parseInt(n.toString(),10)]==="commandsTemplate"&&(s.templateFn=st(t[e[parseInt(n.toString(),10)]])))},s=this,r=0;r<e.length;r++)i(r)},a.prototype.isForeignColumn=function(){return!!(this.dataSource&&this.foreignKeyValue)},a.prototype.getFormatter=function(){return this.formatFn},a.prototype.setFormatter=function(t){this.formatFn=t},a.prototype.getParser=function(){return this.parserFn},a.prototype.setParser=function(t){this.parserFn=t},a.prototype.getColumnTemplate=function(){return this.templateFn},a.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},a.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},a.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},a})();(function(){function a(){}return ya([m()],a.prototype,"title",void 0),ya([m()],a.prototype,"type",void 0),ya([m()],a.prototype,"buttonOption",void 0),a})();var jg=(function(a){Yc(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return ya([m(null)],t.prototype,"columns",void 0),t})(Dt);(function(a){Yc(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t})(jg);var xl="load",Ba="rowDataBound",El="queryCellInfo",Al="headerCellInfo",Rt="actionBegin",Fe="actionComplete",Ug="actionFailure",As="dataBound",Uo="rowSelecting",Go="rowSelected",_o="rowDeselecting",Ko="rowDeselected",Yr="cellSelecting",Yn="cellSelected",Nu="cellDeselecting",Hu="cellDeselected",Yo="columnSelecting",Xo="columnSelected",Gg="columnDeselecting",_g="columnDeselected",Kg="columnDragStart",Yg="columnDrag",Xg="columnDrop",Vu="beforePrint",zu="printComplete",Qg="detailDataBound",$g="batchAdd",Xc="batchCancel",Jg="batchDelete",Zg="recordDoubleClick",em="recordClick",Dl="beforeDataBound",qu="beforeOpenAdaptiveDialog",Wu="resizeStop",tm="checkBoxChange",im="beforeCopy",sm="beforePaste",rm="beforeAutoFill",Qo="filterchoicerequest",Qc="filterAfterOpen",$c="filterBeforeOpen",nm="filterSearchBegin",yh="initial-load",Xa="initial-end",Ar="data-ready",nt="content-ready",bt="ui-update",Hi="on-empty",Wt="inbound-model-changed",os="model-changed",Jc="colgroup-refresh",mi="header-refreshed",am="paging-complete",om="sorting-complete",ju="filtering-complete",Uu="searching-complete",lm="grouping-complete",Gu="group-aggregates",kl="refresh-footer-rendered",hm="refresh-aggregate-cell",um="rowselected",pm="cellselected",Tl="destroy-autofill-elements",Ll="beforecellfocused",Rl="cellfocused",hi="key-pressed",ls="click",ut="destroy",bh="column-visible-changed",_u="scroll",Zc="column-width-changed",Pa="column-position-changed",Ku="rows-added",Ml="rows-removed",cm="column-drag-stop",dm="header-drop",Fl="datasource-modified",fm="refresh-complete",gm="dblclick",mm="toolbar-refresh",vm="bulk-save",pn="auto-col",Ol="tooltip-destroy",Bl="update-data",Bi="prevent-batch",ym="crud-Action",Yu="add-delete-Action",bm="double-tap",an="freezerender",Xu="filterOpen",Ch="filterDialogCreated",Qt="filter-menu-close",Cm="initForeignKeyColumn",Qu="getForeignKeyData",ba="generateQuery",ed="showEmptyGrid",td="foreignKeyData",Dr="dataStateChange",$u="dataSourceChanged",Sm="rtl-updated",id="beforeFragAppend",Ju="textWrapRefresh",Zu="recordAdded",Na="cancel-Begin",wm="editNextValCell",ep="hierarchyprint",Im="expandchildgrid",xm="printGrid-Init",Em="row-position-changed",sd="partial-refresh",Am="beforeCustomFilterOpen",Dm="customFilterOpen",km="select-virtual-Row",Pl="columns-prepared",Nl="cbox-filter-begin",kr="cbox-filter-complete",cn="filter-Prevent",Tm="before-filter-cmenu-open",Lm="filter-cbox-value",dn="restore-Focus",rd="detail-indentcell-info",Rm="virtaul-cell-focus",Mm="virtual-scroll-edit",Fm="edit-reset",Om="get-virtual-data",Bm="refresh-infinite-mode-blocks",Pm="reset-infinite-blocks",Nm="infinite-scroll-handler",Hm="infinite-page-query",Vm="infinite-show-hide",zm="append-infinite-content",qm="remove-infinite-rows",Wm="set-infinite-cache",tp="infinite-edit-handler",Hl="close-filter-dialog",jm="get-filterbar-operator",Um="reset-columns",Gm="group-cache",_m="lazy-load-scroll-handler",ip="group-collapse",Km="beforeCheckboxRenderer",$o="refreshResizeHandlers",Ym="set-freeze-selection",Vl="before-refresh-on-data-change",Xm="immutable-batch-cancel",Qm="check-scroll-reset",$m="prevent-frozen-scroll-refresh",Jm="refresh-infinite-current-view-data",Qa="filter-dialog-close",zl="refresh-cutsom-filter-ok-button",nd="refresh-cutsom-filter-clear-button",ql="render-responsive-cmenu",ad="filter-cmenu-select",od="custom-filter-close",Ha="set-fullscreen-dialog",ld="refresh-Expand-and-Collapse",Zm="row-mode-change",Ca="enter-key-handler",ev="set-virtual-page-query",sp="pager-refresh",tv="close-edit",iv="reset-virtual-focus",sv="before-checkbox-renderer-query",rv="destroy-child-grid",nv="sticky-scroll-complete",rp="refresh-infinite-persist-selection",Wl="after-filter-column-menu-close",av="beforeCheckboxfilterRenderer",ov="commandColumnDestroy",lv="cancelcnfrmDlg",Va="refresh-Frozen-Position",hv="refresh-Resize-Position",jl="refresh-Split-Frozen-Column",Xs="render-Responsive-Change-Action",Jo="render-Responsive-Column-Chooser-Div",br="show-Add-New-Row-Focus",uv="last-rowcell-border-updated",hd="destroy-edit-form",pv="detach-detail-template",he;(function(a){a[a.Data=0]="Data",a[a.Header=1]="Header",a[a.Summary=2]="Summary",a[a.GroupSummary=3]="GroupSummary",a[a.CaptionSummary=4]="CaptionSummary",a[a.Filter=5]="Filter",a[a.Indent=6]="Indent",a[a.GroupCaption=7]="GroupCaption",a[a.GroupCaptionEmpty=8]="GroupCaptionEmpty",a[a.Expand=9]="Expand",a[a.HeaderIndent=10]="HeaderIndent",a[a.StackedHeader=11]="StackedHeader",a[a.DetailHeader=12]="DetailHeader",a[a.DetailExpand=13]="DetailExpand",a[a.CommandColumn=14]="CommandColumn",a[a.DetailFooterIntent=15]="DetailFooterIntent",a[a.RowDragIcon=16]="RowDragIcon",a[a.RowDragHIcon=17]="RowDragHIcon"})(he||(he={}));var oi;(function(a){a[a.Header=0]="Header",a[a.Content=1]="Content",a[a.Summary=2]="Summary"})(oi||(oi={}));var np;(function(a){a[a.Add=0]="Add",a[a.Edit=1]="Edit",a[a.Update=2]="Update",a[a.Delete=3]="Delete",a[a.Cancel=4]="Cancel",a[a.Print=5]="Print",a[a.Search=6]="Search",a[a.ColumnChooser=7]="ColumnChooser",a[a.PdfExport=8]="PdfExport",a[a.ExcelExport=9]="ExcelExport",a[a.CsvExport=10]="CsvExport",a[a.WordExport=11]="WordExport"})(np||(np={}));var Ce;(function(a){a[a.isEdit=0]="isEdit",a[a.isAdd=1]="isAdd",a[a.isSort=2]="isSort",a[a.isFilter=3]="isFilter",a[a.isColMenu=4]="isColMenu",a[a.isColumnChooser=5]="isColumnChooser"})(Ce||(Ce={}));var ap;(function(a){a[a.isInitial=0]="isInitial",a[a.isSearch=1]="isSearch"})(ap||(ap={}));var cv=(function(){function a(t,e){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=t,this.serviceLocator=e,this.initDataManager(),!(this.parent.isDestroyed||this.getModuleName()==="foreignKey")&&(this.parent.on(Ku,this.addRows,this),this.parent.on(Em,this.reorderRows,this),this.parent.on(Ml,this.removeRows,this),this.parent.on(Fl,this.initDataManager,this),this.parent.on(ut,this.destroy,this),this.parent.on(Bl,this.crudActions,this),this.parent.on(Yu,this.getData,this),this.parent.on(pn,this.refreshFilteredCols,this),this.parent.on(Pl,this.refreshFilteredCols,this))}return a.prototype.reorderRows=function(t){this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords().splice(t.toIndex,0,this.parent.getCurrentViewRecords().splice(t.fromIndex,1)[0]):this.dataManager.dataSource.json.splice(t.toIndex,0,this.dataManager.dataSource.json.splice(t.fromIndex,1)[0])},a.prototype.getModuleName=function(){return"data"},a.prototype.initDataManager=function(){var t=this.parent;this.dataManager=t.dataSource instanceof N?t.dataSource:u(t.dataSource)?new N:new N(t.dataSource),t.isAngular&&!(t.query instanceof se)?t.setProperties({query:new se},!0):(this.isQueryInvokedFromData=!0,t.query instanceof se||(t.query=new se))},a.prototype.generateQuery=function(t,e){var i=this.parent,s=u(i.getQuery())?new se:i.getQuery().clone();if(this.parent.columnQueryMode==="ExcludeHidden")s.select(this.parent.getColumns().filter(function(l){return!(l.isPrimaryKey!==!0&&l.visible===!1||l.field===void 0)}).map(function(l){return l.field}));else if(this.parent.columnQueryMode==="Schema"){for(var r=[],n=this.parent.columns,o=0;o<n.length;o++)r.push(n[parseInt(o.toString(),10)].field);s.select(r)}return this.filterQuery(s),this.searchQuery(s),this.aggregateQuery(s),this.sortQuery(s),Pi(this.parent)?this.virtualGroupPageQuery(s):this.pageQuery(s,t),(u(e)||!e)&&this.groupQuery(s),s},a.prototype.aggregateQuery=function(t){for(var e=this.parent.aggregates,i=0;i<e.length;i++)for(var s=e[parseInt(i.toString(),10)],r=0;r<s.columns.length;r++)for(var n=s.columns[parseInt(r.toString(),10)],o=n.type instanceof Array?n.type:[n.type],l=0;l<o.length;l++)t.aggregate(o[parseInt(l.toString(),10)].toLowerCase(),n.field);return t},a.prototype.virtualGroupPageQuery=function(t){var e="fn";if(t.queries.length)for(var i=0;i<t.queries.length;i++)t.queries[parseInt(i.toString(),10)][""+e]==="onPage"&&t.queries.splice(i,1);return t},a.prototype.pageQuery=function(t,e){var i=this.parent,s="fn",r={query:t,skipPage:!1};if(i.notify(ev,r),r.skipPage)return t;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&e!==!0){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),t.queries.length)for(var n=0;n<t.queries.length;n++)t.queries[parseInt(n.toString(),10)][""+s]==="onPage"&&t.queries.splice(n,1);!u(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify(Hm,t):t.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!i.isManualRefresh&&!this.dataManager.dataSource.offline&&!(this.dataManager.adaptor instanceof yc)?null:i.pageSettings.pageSize)}return t},a.prototype.groupQuery=function(t){var e=this.parent;if(e.allowGrouping&&e.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&t.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=e.groupSettings.columns,s=0,r=i.length;s<r;s++){var n=this.getColumnByField(i[parseInt(s.toString(),10)]);n||this.parent.log("initial_action",{moduleName:"group",columnName:i[parseInt(s.toString(),10)]});var o=n.enableGroupByFormat,l=n.format;o?t.group(i[parseInt(s.toString(),10)],this.formatGroupColumn.bind(this),l):t.group(i[parseInt(s.toString(),10)],null)}}return t},a.prototype.sortQuery=function(t){var e=this.parent;if((e.allowSorting||e.allowGrouping)&&e.sortSettings.columns.length){for(var i=e.sortSettings.columns,s=[],r=i.length-1;r>-1;r--){var n=this.getColumnByField(i[parseInt(r.toString(),10)].field);if(n)n.setSortDirection(i[parseInt(r.toString(),10)].direction);else return this.parent.log("initial_action",{moduleName:"sort",columnName:i[parseInt(r.toString(),10)].field}),t;var o=i[parseInt(r.toString(),10)].direction;n.sortComparer&&(this.parent.log("grid_sort_comparer"),o=this.isRemote()?i[parseInt(r.toString(),10)].direction:n.sortComparer.bind(n)),e.groupSettings.columns.indexOf(i[parseInt(r.toString(),10)].field)===-1?n.isForeignColumn()||n.sortComparer?t.sortByForeignKey(n.field,o,void 0,i[parseInt(r.toString(),10)].direction.toLowerCase()):t.sortBy(n.field,o):s.push({direction:o,field:n.field})}for(var r=0,l=s.length;r<l;r++)if(typeof s[parseInt(r.toString(),10)].direction=="string")t.sortBy(s[parseInt(r.toString(),10)].field,s[parseInt(r.toString(),10)].direction);else{var n=this.getColumnByField(s[parseInt(r.toString(),10)].field);t.sortByForeignKey(s[parseInt(r.toString(),10)].field,s[parseInt(r.toString(),10)].direction,void 0,n.getSortDirection().toLowerCase())}}return t},a.prototype.searchQuery=function(t,e,i){var s=this.parent.searchSettings,r=!u(s.fields)&&s.fields.length?s.fields:this.getSearchColumnFieldNames(),n=[],o=!1;if(!u(this.parent.searchSettings.key)&&this.parent.searchSettings.key.length){o=this.parent.getForeignKeyColumns().some(function(d){return r.indexOf(d.field)>-1});var l=i?e.dataSource.adaptor:this.dataManager.adaptor;if(o||l.getModuleName&&l.getModuleName()==="ODataV4Adaptor"){r=i?[e.foreignKeyValue]:r;for(var h=0;h<r.length;h++){var p=i?e:this.getColumnByField(r[parseInt(h.toString(),10)]);p.isForeignColumn()&&!i?n=this.fGeneratePredicate(p,n):n.push(new we(r[parseInt(h.toString(),10)],s.operator,s.key,s.ignoreCase,s.ignoreAccent))}var c=we.or(n);c.key=s.key,t.where(c)}else t.search(s.key,r,s.operator,s.ignoreCase,s.ignoreAccent)}return t},a.prototype.filterQuery=function(t,e,i){var s=this.parent,r=[],n=this.parent.getForeignKeyColumns(),o;if(s.allowFiltering&&s.filterSettings.columns.length){for(var l=e||s.filterSettings.columns,h={},p=0,c=s.getColumns();p<c.length;p++){var d=c[p];h[d.field]=d.filter.type?d.filter.type:s.filterSettings.type}for(var f=[],g=[],y=0,b=l;y<b.length;y++){var d=b[y],C=d.isForeignKey?s.getColumnByUid(d.uid):s.getColumnByField(d.field);u(d.type)&&C&&(C.type==="date"||C.type==="datetime"||C.type==="dateonly")&&(d.type=d.isForeignKey?s.getColumnByUid(d.uid).type:s.getColumnByField(d.field).type),d.isForeignKey?f.push(d):g.push(d)}if(g.length){for(var S=0,I=g.length;S<I;S++)g[parseInt(S.toString(),10)].uid=g[parseInt(S.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(g[parseInt(S.toString(),10)].field,g[parseInt(S.toString(),10)].isForeignKey).uid;for(var A=Rr.getPredicate(g),T=0,L=Object.keys(A);T<L.length;T++){var _=L[T];r.push(A[""+_])}}if(f.length)for(var X=0,re=f;X<re.length;X++){var d=re[X];d.uid=d.uid||this.parent.grabColumnByFieldFromAllCols(d.field,d.isForeignKey).uid;var ye=this.parent.grabColumnByUidFromAllCols(d.uid);if(ye||this.parent.log("initial_action",{moduleName:"filter",columnName:d.field}),ye.isForeignColumn()&&mn(d.field,n)&&!i)ye.columnData.length||(o=!0),r=this.fGeneratePredicate(ye,r);else for(var A=Rr.getPredicate(l),V=0,q=Object.keys(A);V<q.length;V++){var _=q[V];r.push(A[""+_])}}r.length&&!o?t.where(we.and(r)):this.parent.notify(ed,{})}return t},a.prototype.fGeneratePredicate=function(t,e){var i={};return t&&(this.parent.notify(ba,{predicate:i,column:t}),i.predicate.predicates.length&&e.push(i.predicate)),e},a.prototype.getData=function(t,e){var i=this;t===void 0&&(t={requestType:""});var s=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource){var r=this.eventPromise(t,e,s);return r.promise}else{var n=void 0;switch(t.requestType){case"delete":e=e||this.generateQuery();var o=Object.keys(t.data).length;if(o===1)n=this.dataManager.remove(s,t.data[0],e.fromTable,e);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=t.data,n=this.dataManager.saveChanges(l,s,e.fromTable,e.requiresCount())}break;case"save":e=e||this.generateQuery(),t.index=u(t.index)?0:t.index,n=this.dataManager.insert(t.data,e.fromTable,e,t.index);break}var h="promise";return t[""+h]=n,n&&!Array.isArray(n)&&!n.hasOwnProperty("deletedRecords")?n.then(function(){return i.insert(e,t)}):this.insert(e,t)}},a.prototype.insert=function(t,e){return e.requestType==="save"&&(e.query=t,this.parent.notify(Zu,e)),this.executeQuery(t)},a.prototype.executeQuery=function(t){var e=this;if(this.dataManager.ready){var i=new Ut,s=this.dataManager.ready;return s.then(function(){e.dataManager.executeQuery(t).then(function(r){i.resolve(r)})}).catch(function(r){i.reject(r)}),i.promise}else return this.dataManager.executeQuery(t)},a.prototype.formatGroupColumn=function(t,e){var i=this.serviceLocator,s=this.getColumnByField(e),r=t;s.type||(s.type=r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof t),u(s.getFormatter())&&Xl(i,s);var n=xn.prototype.toView(t,s.getFormatter());return n},a.prototype.crudActions=function(t){var e=this.generateQuery(),i=null,s="promise",r=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(t,e,r),t.requestType){case"save":i=this.dataManager.update(r,t.data,e.fromTable,e,t.previousData);break}t[""+s]=i||t[""+s],this.parent.notify(ym,t)},a.prototype.saveChanges=function(t,e,i,s){if(s===void 0&&(s=this.generateQuery()),s.requiresCount(),"result"in this.parent.dataSource){var r=new Ut,n={requestType:"batchsave",changes:t,key:e,query:s,endEdit:r.resolve};return this.setState({isPending:!0,resolver:r.resolve}),this.parent.trigger($u,n),r.promise}else{var o=this.dataManager.saveChanges(t,e,s.fromTable,s,i);return o}},a.prototype.getKey=function(t){if(t&&t.length)return t[0]},a.prototype.isRemote=function(){return this.dataManager.dataSource.offline!==!0&&this.dataManager.dataSource.url!==void 0&&this.dataManager.dataSource.url!==""},a.prototype.addRows=function(t){for(var e=t.records.length;e>0;e--)this.parent.dataSource instanceof N&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(t.toIndex,0,t.records[e-1]):!this.parent.getDataModule().isRemote()&&!u(this.parent.dataSource)&&!this.parent.dataSource.result&&this.parent.dataSource.splice(t.toIndex,0,t.records[e-1])},a.prototype.removeRows=function(t){var e=this.dataManager.dataSource.json;this.parent.dataSource instanceof N&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=e.filter(function(i){return t.records.indexOf(i)===-1}):!this.parent.getDataModule().isRemote()&&!u(this.parent.dataSource)&&!this.parent.dataSource.result&&(this.parent.dataSource=e.filter(function(i){return t.records.indexOf(i)===-1}))},a.prototype.getColumnByField=function(t){var e;return this.parent.columnModel.some(function(i){return e=i,i.field===t})&&e},a.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Ku,this.addRows),this.parent.off(Ml,this.removeRows),this.parent.off(Fl,this.initDataManager),this.parent.off(ut,this.destroy),this.parent.off(Bl,this.crudActions),this.parent.off(Yu,this.getData),this.parent.off(pn,this.refreshFilteredCols),this.parent.off(Pl,this.refreshFilteredCols))},a.prototype.getState=function(){return this.dataState},a.prototype.setState=function(t){return this.dataState=t},a.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},a.prototype.setForeignKeyDataState=function(t){this.foreignKeyDataState=t},a.prototype.getStateEventArgument=function(t){var e=new vi,i=new N({url:"",adaptor:new vi}),s=e.processQuery(i,t),r=JSON.parse(s.data);return $(r,s.pvtData)},a.prototype.eventPromise=function(t,e,i){var s=this,r=t,n=this.getStateEventArgument(e),o=new Ut,l=new Ut;if((t.requestType!==void 0||this.parent.groupSettings.disablePageWiseAggregates&&e.queries.some(function(c){return c.fn==="onGroup"}))&&this.dataState.isDataChanged!==!1)if(n.action=t,t.requestType==="save"||t.requestType==="delete"||t.requestType==="batchsave"){var h=t;h.key=i;var p="promise";h[""+p]=l.promise,h.state=n,this.setState({isPending:!0,resolver:l.resolve}),r.endEdit=l.resolve,r.cancelEdit=l.reject,this.parent.trigger($u,h),l.promise.then(function(){s.setState({isPending:!0,resolver:o.resolve,group:n.group,aggregates:n.aggregates}),h.requestType==="save"&&s.parent.notify(Zu,h),s.parent.trigger(Dr,n)}).catch(function(){})}else this.setState({isPending:!0,resolver:o.resolve,group:n.group,aggregates:n.aggregates}),this.parent.trigger(Dr,n);else this.setState({}),o.resolve(this.parent.dataSource);return o},a.prototype.getSearchColumnFieldNames=function(){for(var t=[],e=this.parent.getColumns(),i=0,s=e;i<s.length;i++){var r=s[i];r.allowSearching&&!u(r.field)&&t.push(r.field)}return t},a.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&My(this.parent,this.parent.filterSettings.columns)},a})(),tr=(function(){function a(t,e){Oi(this,t),this.parent=e}return a.prototype.clone=function(){var t=new a({});return Oi(t,this),t.cells=this.cells.map(function(e){return e.clone()}),t},a.prototype.setRowValue=function(t){if(this.parent){var e=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(e,t)}},a.prototype.setCellValue=function(t,e){if(this.parent){var i=this.data[""+t].toString()!==e.toString();if(i){var s=this.parent.getPrimaryKeyFieldNames()[0],r=this.data[""+s];this.parent.setCellValue(r,t,e),this.makechanges(s,this.data)}else return}},a.prototype.makechanges=function(t,e){if(this.parent){var i=this.parent,s=i.getDataModule().dataManager;s.update(t,e)}},a})(),Tr=(function(){function a(t){this.isSpanned=!1,this.isRowSpanned=!1,Oi(this,t)}return a.prototype.clone=function(){var t=new a({});return Oi(t,this),t},a})(),Ul=(function(){function a(t,e){this.serviceLocator=t,this.parent=e}return a.prototype.render=function(t,e,i,s){var r=this.serviceLocator.getService("cellRendererFactory"),n=r.getCellRenderer(e.cells[parseInt(i.toString(),10)].cellType||he.Data),o=e.cells[parseInt(i.toString(),10)].cellSpan?e.cells[parseInt(i.toString(),10)].cellSpan:t.colSpan?t.colSpan+i<=e.cells.length?t.colSpan:e.cells.length-i:1,l=t.rowSpan,h=0,p;if(e.index>0){var c=this.parent.getRowsObject().filter(function(C){return C.isDataRow}),d=this.parent.groupSettings.columns.length>0&&!c[e.index-1].isDataRow?c[e.index].cells:c[e.index-1].cells,f=e.cells[parseInt(i.toString(),10)],g="uid";p=d.filter(function(C){return C.column.uid===f.column[""+g]})[0]}for(var y=p&&p.colSpanRange>1&&p.rowSpanRange>1?p.colSpanRange:o,b=i+1;b<i+y&&b<e.cells.length;b++)e.cells[parseInt(b.toString(),10)].visible===!1?h++:e.cells[parseInt(b.toString(),10)].isSpanned=!0;if(h>0){for(var b=i+o;b<i+o+h&&b<e.cells.length;b++)e.cells[parseInt(b.toString(),10)].isSpanned=!0;i+o+h>=e.cells.length&&(o-=i+o+h-e.cells.length)}return e.cells[parseInt(i.toString(),10)].cellSpan&&(e.data[t.column.field]=e.cells[parseInt(i.toString(),10)].spanText,s=n.render(e.cells[parseInt(i.toString(),10)],e.data,{index:u(e.index)?"":e.index.toString()})),o>1&&G(s,{colSpan:o.toString(),"aria-colSpan":o.toString()}),l>1&&(G(s,{rowspan:l.toString(),"aria-rowspan":l.toString()}),e.cells[parseInt(i.toString(),10)].isRowSpanned=!0,e.cells[parseInt(i.toString(),10)].rowSpanRange=Number(l),o>1&&(e.cells[parseInt(i.toString(),10)].colSpanRange=Number(o))),e.index>0&&p.rowSpanRange>1&&(e.cells[parseInt(i.toString(),10)].isSpanned=!0,e.cells[parseInt(i.toString(),10)].rowSpanRange=Number(p.rowSpanRange-1),e.cells[parseInt(i.toString(),10)].colSpanRange=p.rowSpanRange>0?p.colSpanRange:1),this.parent.enableColumnVirtualization&&!e.cells[parseInt(i.toString(),10)].cellSpan&&!this.containsKey(t.column.field,t.data[t.column.field])&&this.backupMergeCells(t.column.field,t.data[t.column.field],t.colSpan),s},a.prototype.backupMergeCells=function(t,e,i){this.setMergeCells(this.generteKey(t,e),i)},a.prototype.generteKey=function(t,e){return t+"__"+e.toString()},a.prototype.splitKey=function(t){return t.split("__")},a.prototype.containsKey=function(t,e){return this.getMergeCells().hasOwnProperty(this.generteKey(t,e))},a.prototype.getMergeCells=function(){return this.parent.mergeCells},a.prototype.setMergeCells=function(t,e){this.parent.mergeCells[""+t]=e},a.prototype.updateVirtualCells=function(t){for(var e=this.getMergeCells(),i=0,s=Object.keys(e);i<s.length;i++){var r=s[i],n=e[""+r],o=this.splitKey(r),l=this.getIndexFromAllColumns(o[0]),h=this.parent.getColumnIndexesInView(),p=n-(h[0]-l);if(l<h[0]&&p>1)for(var c=0,d=t;c<d.length;c++){var f=d[c];if(f.data[o[0]].toString()===o[1].toString()){f.cells[0].cellSpan=p,f.cells[0].spanText=o[1];break}}}return t},a.prototype.getIndexFromAllColumns=function(t){var e=Qs(this.parent.getVisibleColumns(),function(i,s){if(i.field===t)return s})[0];return e},a})(),He="e-rowcell",Xt="e-gridheader",ki="e-gridcontent",Sa="e-gridfooter",Ft="e-headercontent",Xn="e-movablecontent",Gl="e-movableheader",Nt="e-content",rs="e-table",jt="e-row",Cr="e-gridchkbox",on="e-editedrow",Sr="e-addedrow",dv="changedRecords",za="addedRecords",ud="deletedRecords",Ii="Left-Right",fv="frozen-right",yt="aria-colindex",it="aria-rowindex",ze="tbody",li="colgroup",Lt="open",Qn="change",gr="focus",op="created",lp="initialFrozenColumnIndex",Lr=(function(){function a(t,e,i){this.isSpan=!1,this.cellType=e,this.serviceLocator=t,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return a.prototype.render=function(t,e,i,s,r){return this.refreshRow(t,e,i,s,r)},a.prototype.refresh=function(t,e,i,s,r){var n=this;i&&(t.data=Eh({},t.changes),this.refreshMergeCells(t));var o=this.parent.element.querySelector("[data-uid="+t.uid+"]"),l=this.refreshRow(t,e,s,r,null,i),h=[].slice.call(l.cells),p=[].slice.call(o.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&p.length)for(var c=function(A){if(A.template)return setTimeout(function(){n.parent.refreshReactColumnTemplateByUid(A.uid,!0)},0),"break"},d=0,f=e;d<f.length;d++){var g=f[d],y=c(g);if(y==="break")break}var b=[].slice.call(l.attributes);b.map(function(A){o.setAttribute(A.name,A.value)}),o.innerHTML="";for(var C=0,S=h;C<S.length;C++){var I=S[C];o.appendChild(I)}},a.prototype.refreshRow=function(t,e,i,s,r,n){var o=u(r)?this.element.cloneNode():r,l={data:t.data},h={data:t.data},p=this.parent.getColumns().filter(function(ee){return ee.type==="checkbox"&&ee.field})[0],c=!1,d=this.parent.isFrozenGrid(),f=!0;p&&(c=ns(p.field,l.data));var g=this.parent.getSelectedRowIndexes();t.isDataRow&&(t.isSelected=g.indexOf(t.index)>-1||c);var y=this.parent.currentViewData;t.isDataRow&&this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(t.isSelected=!0,g.indexOf(t.index)===-1&&g.push(t.index)),this.buildAttributeFromRow(o,t),G(o,$({},i,{})),Fi(o,t.attributes);for(var b=this.serviceLocator.getService("cellRendererFactory"),C=function(ee,be){var me=t.cells[parseInt(ee.toString(),10)];me.isSelected=t.isSelected,me.isColumnSelected=me.column.isSelected;var Ye=b.getCellRenderer(t.cells[parseInt(ee.toString(),10)].cellType||he.Data),ot={"data-index":u(t.index)?"":t.index.toString()};t.isExpand&&t.cells[parseInt(ee.toString(),10)].cellType===he.DetailExpand&&(ot.class=S.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var gt=!S.parent.enableRtl&&f&&(S.parent.gridLines==="Vertical"||S.parent.gridLines==="Both"),fe=Ye.render(t.cells[parseInt(ee.toString(),10)],t.data,ot,t.isExpand,n);if(t.cells[parseInt(ee.toString(),10)].cellType!==he.Filter){if(t.cells[parseInt(ee.toString(),10)].cellType===he.Data||t.cells[parseInt(ee.toString(),10)].cellType===he.CommandColumn){me.visible&&gt&&(S.parent.groupSettings&&S.parent.groupSettings.columns.length?fe.classList.add("e-grid-group-first-cell"):S.parent.allowRowDragAndDrop||S.parent.childGrid||S.parent.detailTemplate||fe.classList.add("e-first-visible-cell"),f=!1);var ui=S.parent.parentDetails&&S.parent.parentDetails.parentInstObj&&S.parent.parentDetails.parentInstObj.isReact,bi=S.parent.printGridParent&&S.parent.printGridParent.isReact;if((S.parent.isReact&&S.parent.requireTemplateRef||ui&&S.parent.parentDetails.parentInstObj.requireTemplateRef||bi&&S.parent.printGridParent.requireTemplateRef)&&me.isTemplate){var Zt=S;Zt.parent.renderTemplates(function(){if(typeof me.column.template!="string"){var Pr=fe.getAttribute("aria-label");fe.setAttribute("aria-label",fe.innerText+Pr)}Zt.parent.trigger(El,$(h,{cell:fe,column:me.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[parseInt(ee.toString(),10)].foreignKeyData,requestType:Zt.parent.requestTypeAction}))})}else S.parent.trigger(El,$(h,{cell:fe,column:me.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[parseInt(ee.toString(),10)].foreignKeyData,requestType:S.parent.requestTypeAction}));var zi=S.parent.enableVirtualization||S.parent.enableColumnVirtualization||S.parent.enableInfiniteScrolling||S.parent.allowGrouping&&S.parent.groupSettings.columns.length&&S.parent.groupSettings.enableLazyLoading;if(!zi){var lt="field",qi=["date","datetime","dateonly"];if(t.isDataRow&&S.parent.enableColumnSpan&&me.column.enableColumnSpan&&!me.isSpanned&&me.visible&&!me.isTemplate&&t.data[me.column[""+lt]]!==""&&!me.isForeignKey){var ir=1,ct=Ye.getValue(me.column[""+lt],t.data,me.column);qi.indexOf(me.column.type)!==-1&&!u(ct)&&ct instanceof Date&&(ct=ct.getTime());for(var ht=ee;ht<t.cells.length-1;ht++){var pi=t.cells[parseInt(ht.toString(),10)+1],Wi=Ye.getValue(pi.column[""+lt],t.data,pi.column);if(qi.indexOf(pi.column.type)!==-1&&!u(Wi)&&Wi instanceof Date&&(Wi=Wi.getTime()),ct===Wi&&pi.visible&&pi.column.enableColumnSpan&&!pi.isForeignKey)ir++;else break}h.colSpan=ir}if(t.isDataRow&&S.parent.enableRowSpan&&me.column.enableRowSpan&&!me.isSpanned&&!me.isTemplate&&me.visible&&t.data[me.column[""+lt]]!==""&&!me.isForeignKey){var hs=S.parent.groupSettings.columns.length?t.groupDataIndex:t.index;t.isDataRow&&S.parent.groupSettings.columns.length&&!u(t.parentUid)&&(y=S.parent.getRowObjectFromUID(t.parentUid).data.items);var sr=1,ct=Ye.getValue(me.column[""+lt],t.data,me.column);qi.indexOf(me.column.type)!==-1&&!u(ct)&&ct instanceof Date&&(ct=ct.getTime());for(var ht=hs+1;ht<y.length;ht++){var Ms=Ye.getValue(me.column[""+lt],y[parseInt(ht.toString(),10)],me.column);if(qi.indexOf(me.column.type)!==-1&&!u(Ms)&&Ms instanceof Date&&(Ms=Ms.getTime()),ct===Ms)sr++;else break}h.rowSpan=sr}}var En=!1;if(t.index>0&&(S.isSpan||S.parent.isSpan&&n)){var w=S.parent.getRowsObject().filter(function(Pr){return Pr.isDataRow}),k=S.parent.groupSettings.columns.length>0&&!w[t.index-1].isDataRow?w[t.index].cells:w[t.index-1].cells,j="uid",Q=k.filter(function(Pr){return Pr.column.uid===t.cells[parseInt(ee.toString(),10)].column[""+j]})[0];En=Q.isRowSpanned?Q.isRowSpanned:Q.rowSpanRange>1}if(h.rowSpan>1||h.colSpan>1){if(S.resetrowSpanvalue(S.parent.frozenRows>t.index?S.parent.frozenRows:y.length,h,t.index),h.column.visible===!1)h.colSpan=1;else if(d){var te=S.parent.getColumns(),ae=S.parent.getFrozenRightColumnsCount(),Le=S.parent.getFrozenLeftCount(),mt=te.length-ae,_e=h.column.index;if(Le>_e&&Le<_e+h.colSpan){var xt=_e+h.colSpan-Le;h.colSpan=h.colSpan-xt}else if(mt<=_e&&te.length<_e+h.colSpan){var xt=_e+h.colSpan-te.length;h.colSpan=h.colSpan-xt}else if(h.column.freeze==="Fixed"){for(var xt=1,ei=_e,ht=ei+1;ht<ei+h.colSpan&&te[parseInt(ht.toString(),10)].freeze==="Fixed";ht++)xt++;h.colSpan=xt}else if(mt>_e&&mt<_e+h.colSpan){var xt=_e+h.colSpan-mt;h.colSpan=h.colSpan-xt}}}if(h.colSpan>1||t.cells[parseInt(ee.toString(),10)].cellSpan>1||h.rowSpan>1||En){S.parent.isSpan=!0,S.isSpan=!0;var Br=new Ul(S.serviceLocator,S.parent);fe=Br.render(h,t,ee,fe),d&&Hy(S.parent,h.column,fe,h.colSpan)}}if((me.cellType===he.Header||me.cellType===he.StackedHeader)&&gt&&(me.visible||me.cellType===he.StackedHeader)){if(S.parent.groupSettings&&S.parent.groupSettings.columns.length){var An=S.parent.getVisibleColumns(),lt="field",Dn="type";(me.column[""+Dn]&&me.column[""+Dn]==="checkbox"||me.cellType===he.Header&&me.column[""+lt]&&An.length&&An[0].field===me.column[""+lt]||me.cellType===he.StackedHeader)&&fe.classList.add("e-grid-group-first-cell")}else S.parent.allowRowDragAndDrop||S.parent.childGrid||S.parent.detailTemplate||fe.classList.add("e-first-visible-cell");f=!1}if(me.cellType===he.Header&&(t.cells[parseInt(ee.toString(),10)].colSpan>1||t.cells[parseInt(ee.toString(),10)].rowSpan>1)){var Br=new Ul(S.serviceLocator,S.parent);fe=Br.render(t.cells[parseInt(ee.toString(),10)],t,ee,fe)}if(S.isSpan){var w=S.parent.getRowsObject(),ji=S.parent.enableRtl;if(w[t.index-1]&&w[t.index-1].isDataRow){var k=w[t.index-1].cells,Q=k[ee-1],kn=k[parseInt(ee.toString(),10)],rr=k[ee+1],Za=k[parseInt(ee.toString(),10)].column.freeze;Q&&(Q.isRowSpanned||Q.rowSpanRange>1)&&Q.visible&&(!ji&&(!kn.isRowSpanned||Q.rowSpanRange>kn.rowSpanRange)&&fe.classList.add("e-rowcell-firstchild"),d&&(Q.column.freeze==="Fixed"&&Za==="Fixed"?fe.classList.add(ji?"e-removefreezerightborder":"e-removefreezeleftborder"):!ji&&ee===1&&Za==="Left"&&fe.classList.add("e-addfreezefirstchildborder"))),rr&&(rr.isRowSpanned||rr.rowSpanRange>1)&&rr.visible&&(ji&&(!kn.isRowSpanned||rr.rowSpanRange>kn.rowSpanRange)&&fe.classList.add("e-rowcell-lastchild"),d&&rr.column.freeze==="Fixed"&&Za==="Fixed"&&h.colSpan<2&&fe.classList.add(ji?"e-removefreezeleftborder":"e-removefreezerightborder"))}}h.rowSpan>1&&y.length-t.index===h.rowSpan&&fe.classList.add("e-row-span-lastrowcell"),t.cells[parseInt(ee.toString(),10)].isSpanned||o.appendChild(fe)}else me.visible&&gt&&(S.parent.groupSettings&&S.parent.groupSettings.columns.length?fe.classList.add("e-grid-group-first-cell"):S.parent.allowRowDragAndDrop||S.parent.childGrid||S.parent.detailTemplate||fe.classList.add("e-first-visible-cell"),f=!1)},S=this,I=0,A=t.cells.length;I<A;I++)C(I);var T=0;if(this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(o.classList.contains("e-groupcaptionrow")){var L=[].slice.call(o.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));if(L.length&&R(L,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),o.querySelector(".e-summarycell"))Fy(o,this.parent);else{for(var _=0;_<o.childNodes.length;_++){var X=o.childNodes[parseInt(_.toString(),10)];if(X.classList.add("e-leftfreeze"),Bt(X,_*30,this.parent.enableRtl,"Left"),X.classList.contains("e-groupcaption")){var re=parseInt(X.getAttribute("colspan"),10),ye=Ed(this.parent,_);X.setAttribute("colspan",ye.toString()),T=re-ye}}if(T){var X=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:T.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}});o.appendChild(X)}}}if((o.querySelectorAll(".e-leftfreeze").length||o.classList.contains("e-columnheader"))&&(o.querySelectorAll(".e-indentcell").length||o.querySelectorAll(".e-grouptopleftcell").length))for(var X=o.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),I=0;I<X.length;I++)X[parseInt(I.toString(),10)].classList.add("e-leftfreeze"),Bt(X[parseInt(I.toString(),10)],I*30,this.parent.enableRtl,"Left")}var V={row:o,rowHeight:this.parent.rowHeight};if(t.isDataRow){var q=$(l,V);q.isSelectable=!0;var z=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,U=q.row.querySelectorAll(".e-templatecell");if((this.parent.isReact&&this.parent.requireTemplateRef||z&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&U.length){var ie=this;ie.parent.renderTemplates(function(){ie.parent.trigger(Ba,q),q.isSelectable||(t.isSelectable=q.isSelectable,ie.disableRowSelection(ie,t,V,q))})}else this.parent.trigger(Ba,q);t.isSelectable=q.isSelectable;var J=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var K=this.parent.getPrimaryKeyFieldNames()[0],Y=t.data?t.data[""+K]:null,ne=q.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;ne.some(function(ee){return ee[""+K]===Y})||ne.push(t.data)}if(q.isSelectable||this.disableRowSelection(this,t,V,q),this.parent.childGrid||J||this.parent.detailTemplate){var X=o.querySelectorAll(".e-rowcell:not(.e-hide)")[0];X&&X.classList.add("e-detailrowvisible")}}this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?o.style.height=l.rowHeight+"px":this.parent.rowHeight&&(o.querySelector(".e-headercell")||o.querySelector(".e-groupcaption"))&&(o.style.height=this.parent.rowHeight+"px"),t.cssClass&&o.classList.add(t.cssClass),t.lazyLoadCssClass&&o.classList.add(t.lazyLoadCssClass),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both")&&o.classList.add("e-verticalwrap");var de=this.parent.enableColumnVirtualization;if(!de&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(var I=0;I<this.parent.aggregates.length;I++){var Ae="properties",xe="columns";if(this.parent.aggregates[parseInt(I.toString(),10)][""+Ae][""+xe][0].footerTemplate){var ge=[].slice.call(o.getElementsByClassName("e-summarycell"));if(ge.length){var Ee=ge[ge.length-1];x([Ee],["e-lastsummarycell"]);var De=ge[0];x([De],["e-firstsummarycell"])}}}return o},a.prototype.resetrowSpanvalue=function(t,e,i){if(t>i&&t<i+e.rowSpan){var s=i+e.rowSpan-t;e.rowSpan=e.rowSpan-s}},a.prototype.disableRowSelection=function(t,e,i,s){var r=this.parent.getSelectedRowIndexes();this.parent.selectionModule.isPartialSelection=!0,e.isSelected=!1;var n=r.indexOf(e.index);n>-1&&r.splice(n,1);for(var o=i.row.querySelectorAll(".e-rowcell.e-gridchkbox"),l=s.row.querySelector(".e-rowdragdrop"),h=t.parent.groupSettings.columns.length+(l||t.parent.isDetail()?1:0),p=0;p<o.length;p++)o[parseInt(p.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),o[parseInt(p.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(e.cells.length)for(var p=h;p<e.cells.length;p++){var c=s.row.querySelector('.e-rowcell[aria-colindex="'+(e.cells[parseInt(p.toString(),10)].index+1)+'"]');c&&R([c],["e-selectionbackground","e-active"])}l&&R([l],["e-selectionbackground","e-active"])},a.prototype.refreshMergeCells=function(t){for(var e=0,i=t.cells;e<i.length;e++){var s=i[e];s.isSpanned=!1}return t},a.prototype.buildAttributeFromRow=function(t,e){var i={},s={dataUID:"data-uid",ariaSelected:"aria-selected"},r=[];e.isDataRow&&r.push(jt),e.isAltRow&&r.push("e-altrow"),e.isCaptionRow&&r.push("e-groupcaptionrow"),e.isAggregateRow&&e.parentUid&&r.push("e-groupfooterrow"),u(e.index)||(i[it]=e.index+1),e.rowSpan&&(i.rowSpan=e.rowSpan),e.uid&&(i[s.dataUID]=e.uid),e.isSelected&&(i[s.ariaSelected]=!0),e.visible===!1&&r.push("e-hide"),i.class=r,Fi(t,i)},a})(),$a=(function(){function a(t){this.parent=t}return a.prototype.generateRows=function(t,e){var i=[],s=this.parent.enableVirtualization&&e?e.startIndex:0;s=this.parent.enableInfiniteScrolling&&e?this.getInfiniteIndex(e):s,this.parent.enableImmutableMode&&e&&e.startIndex&&(s=e.startIndex);for(var r=0,n=Object.keys(t).length;r<n;r++,s++)i[parseInt(r.toString(),10)]=this.generateRow(t[parseInt(r.toString(),10)],s);return i},a.prototype.ensureColumns=function(){var t=[];if(this.parent.detailTemplate||this.parent.childGrid){var e={};this.parent.notify(rd,e),t.push(this.generateCell(e,null,he.DetailExpand))}return this.parent.isRowDragable()&&t.push(this.generateCell({},null,he.RowDragIcon)),t},a.prototype.generateRow=function(t,e,i,s,r,n,o,l){var h={};h.foreignKeyData={},h.uid=xs("grid-row"),h.data=t,h.index=e,h.indent=s,h.tIndex=n,h.isDataRow=!0,h.parentGid=r,h.parentUid=o,this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(h.groupDataIndex=l),this.parent.isPrinting&&(this.parent.hierarchyPrintMode==="All"?h.isExpand=!0:this.parent.hierarchyPrintMode==="Expanded"&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(e.toString(),10)]&&(h.isExpand=this.parent.expandedRows[parseInt(e.toString(),10)].isExpand)),h.cssClass=i,h.isAltRow=this.parent.enableAltRow?e%2!==0:!1,h.isAltRow=this.parent.enableAltRow?e%2!==0:!1,h.isSelected=this.parent.getSelectedRowIndexes().indexOf(e)>-1,this.refreshForeignKeyRow(h);var p=this.ensureColumns(),c=new tr(h,this.parent);return c.cells=this.parent.getFrozenMode()==="Right"?this.generateCells(h).concat(p):p.concat(this.generateCells(h)),c},a.prototype.refreshForeignKeyRow=function(t){for(var e=this.parent.getForeignKeyColumns(),i=0;i<e.length;i++)We(e[parseInt(i.toString(),10)].field,Js(e[parseInt(i.toString(),10)],t.data),t.foreignKeyData)},a.prototype.generateCells=function(t){for(var e=this.parent.getColumns(),i=[],s=0;s<e.length;s++)i.push(this.generateCell(e[parseInt(s.toString(),10)],t.uid,u(e[parseInt(s.toString(),10)].commands)?void 0:he.CommandColumn,null,s,t.foreignKeyData));return i},a.prototype.generateCell=function(t,e,i,s,r,n){var o={visible:t.visible,isDataCell:!u(t.field||t.template),isTemplate:!u(t.template),rowID:e,column:t,cellType:u(i)?he.Data:i,colSpan:s,commands:t.commands,isForeignKey:t.isForeignColumn&&t.isForeignColumn(),foreignKeyData:t.isForeignColumn&&t.isForeignColumn()&&H(t.field,n)};return(o.isDataCell||o.column.type==="checkbox"||o.commands)&&(o.index=r),new Tr(o)},a.prototype.refreshRows=function(t){for(var e=0;e<t.length;e++)this.refreshForeignKeyRow(t[parseInt(e.toString(),10)]),t[parseInt(e.toString(),10)].cells=this.generateCells(t[parseInt(e.toString(),10)]);return t},a.prototype.getInfiniteIndex=function(t){return t.requestType==="infiniteScroll"||t.requestType==="delete"||t.action==="add"?u(t.startIndex)?t.index:t.startIndex:0},a})(),pd=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),cd=(function(){function a(t){this.parent=t}return a.prototype.getData=function(){for(var t=this,e=[],i=this.parent.aggregates.slice(),s=0;s<i.length;s++){var r=i[parseInt(s.toString(),10)].columns.filter(function(n){return!(n.footerTemplate||n.groupFooterTemplate||n.groupCaptionTemplate)||t.columnSelector(n)});r.length&&e.push({columns:r})}return e},a.prototype.columnSelector=function(t){return t.footerTemplate!==void 0},a.prototype.getColumns=function(t){var e=[];if((this.parent.detailTemplate||!u(this.parent.childGrid))&&e.push(new Dt({})),this.parent.allowGrouping)for(var i=0;i<this.parent.groupSettings.columns.length;i++)e.push(new Dt({}));return this.parent.isRowDragable()&&!t&&e.push(new Dt({})),e.push.apply(e,this.parent.getColumns()),e},a.prototype.generateRows=function(t,e,i,s,r){if(t.length===0&&(e===void 0||!(e.count||e.loadSummaryOnEmpty)))return[];for(var n=this.buildSummaryData(t,e),o=[],l=this.getData(),h=0;h<l.length;h++)o.push(this.getGeneratedRow(l[parseInt(h.toString(),10)],n[parseInt(h.toString(),10)],e?e.level:void 0,i,s,e?e.parentUid:void 0,r));return o},a.prototype.getGeneratedRow=function(t,e,i,s,r,n,o){var l=[],h=this.getIndentByLevel(),p=!u(this.parent.childGrid),c=this.parent.getIndentCount();this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?h.push("e-indentcelltop"):this.parent.isRowDragable()&&!s&&(h=["e-indentcelltop"]);for(var d=o||this.getColumns(s),f=0;f<d.length;f++)l.push(this.getGeneratedCell(d[parseInt(f.toString(),10)],t,f>=c?this.getCellType():f===0&&(this.parent.childGrid||this.parent.detailTemplate)?he.DetailFooterIntent:he.Indent,h[parseInt(f.toString(),10)],p));var g=new tr({data:e,attributes:{class:"e-summaryrow"}});return g.cells=l,g.uid=xs("grid-row"),g.parentUid=n,g.isAggregateRow=!0,g.visible=l.some(function(y){return y.isDataCell&&y.visible}),g},a.prototype.getGeneratedCell=function(t,e,i,s,r){var n=e.columns.filter(function(p){return p.columnName===t.field})[0],o={"data-mappinguid":t.uid,"data-index":t.index};if(t.textAlign){var l={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};l[t.textAlign.toLowerCase()]&&(o.class=l[t.textAlign.toLowerCase()])}s&&(o.class=s),u(s)&&r&&(o.class="e-detailindentcelltop");var h={visible:t.visible,isDataCell:!u(n),isTemplate:n&&!u(n.footerTemplate||n.groupFooterTemplate||n.groupCaptionTemplate),column:n||{},attributes:o,cellType:i};return h.column.headerText=t.headerText,new Tr(h)},a.prototype.buildSummaryData=function(t,e){for(var i=[],s=this.getData(),r={},n=0;n<s.length;n++){r={};for(var o=s[parseInt(n.toString(),10)].columns,l=0;l<o.length;l++)r=this.setTemplate(o[parseInt(l.toString(),10)],e&&e.aggregates?e:t,r);i.push(r)}return i},a.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},a.prototype.setTemplate=function(t,e,i){var s=t.type,r={},n=t.getFormatter()||(function(){return function(f){return f}})(),o=e;s instanceof Array||(s=[t.type]);for(var l=0;l<s.length;l++){var h=t.field+" - "+s[parseInt(l.toString(),10)].toLowerCase(),p=t.columnName,c=!!(this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&o.items),d=(s[parseInt(l.toString(),10)]!=="Custom"||c)&&o.aggregates&&h in o.aggregates?o.aggregates[""+h]:Ey(s[parseInt(l.toString(),10)],o.aggregates?o:e,t,this.parent);i[""+p]=i[""+p]||{},i[""+p][""+h]=d,i[""+p][s[parseInt(l.toString(),10)]]=u(d)?" ":n(d),o.field&&(i[""+p].field=o.field,i[""+p].key=o.key)}return r.format=t.getFormatter(),t.setTemplate(r),i},a.prototype.getCellType=function(){return he.Summary},a})(),gv=(function(a){pd(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.columnSelector=function(e){return e.groupFooterTemplate!==void 0},t.prototype.getIndentByLevel=function(e){return e===void 0&&(e=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&(e-=1),this.parent.groupSettings.columns.map(function(i,s){return s<=e-1?"":"e-indentcelltop"})},t.prototype.getCellType=function(){return he.GroupSummary},t})(cd),mv=(function(a){pd(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.columnSelector=function(e){return e.groupCaptionTemplate!==void 0},t.prototype.getData=function(){var e={columns:[]};return[a.prototype.getData.call(this).reduce(function(i,s){return i.columns=i.columns.concat(s.columns),i},e)]},t.prototype.isEmpty=function(){return(this.getData()[0].columns||[]).length===0},t.prototype.getCellType=function(){return he.CaptionSummary},t})(cd),vv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),yv=(function(a){vv(t,a);function t(e){var i=a.call(this,e)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=e,i.summaryModelGen=new gv(e),i.captionModelGen=new mv(e),i}return t.prototype.generateRows=function(e,i){if(this.parent.groupSettings.columns.length===0)return a.prototype.generateRows.call(this,e,i);this.isInfiniteScroll=i.requestType==="infiniteScroll",this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var s=0,r=e.length;s<r;s++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[parseInt(s.toString(),10)],e.level,s,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},t.prototype.getGroupedRecords=function(e,i,s,r,n,o,l){var h,p=s;if(u(i.items))if(u(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,e,r,this.rows.length,l));else for(var c=0,d=i.length;c<d;c++)this.getGroupedRecords(e,i[parseInt(c.toString(),10)],i.level,r,e,this.rows.length,l);else{var f=void 0,g=this.generateCaptionRow(i,e,r,n,o,l);if(this.isInfiniteScroll&&(f=this.getPreCaption(e,g.data.key)),f?g.uid=f.uid:this.rows=this.rows.concat(g),i.items&&i.items.length&&this.getGroupedRecords(e+1,i.items,i.items.level,r,e+1,this.rows.length,g.uid),this.parent.aggregates.length&&this.isRenderAggregate(g)){var y=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(i,{level:p,parentUid:g.uid}));for(var b=y-1;b>=0;b--)if(this.rows[parseInt(b.toString(),10)].isCaptionRow)this.rows[parseInt(b.toString(),10)].aggregatesCount=this.rows.length-y;else if(!this.rows[parseInt(b.toString(),10)].isCaptionRow&&!this.rows[parseInt(b.toString(),10)].isDataRow)break}f&&this.setInfiniteRowVisibility(f)}},t.prototype.isRenderAggregate=function(e){return this.parent.enableInfiniteScrolling?this.renderInfiniteAgg?(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!1:!this.parent.enableInfiniteScrolling},t.prototype.getPreCaption=function(e,i){var s=this.parent.getRowsObject().concat(this.rows),r;this.infiniteChildCount=0;for(var n=s.length;n--;){if(s[parseInt(n.toString(),10)].isCaptionRow&&s[parseInt(n.toString(),10)].indent===e){var o=s[parseInt(n.toString(),10)].data.key;(o&&o.toString()===i.toString()&&o instanceof Date||o===i)&&(r=s[parseInt(n.toString(),10)])}if(s[parseInt(n.toString(),10)].indent===e||s[parseInt(n.toString(),10)].indent<e)break;s[parseInt(n.toString(),10)].indent===e+1&&this.infiniteChildCount++}return r},t.prototype.getCaptionRowCells=function(e,i,s){var r=[],n=[],o=this.parent.getColumnByField(e),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter(function(I){return I.field===e})[0]);var h=this.parent.groupSettings.columns.length,p=this.parent;if(!this.parent.enableColumnVirtualization||l.indexOf(i)!==-1){for(var c=0;c<i;c++)r.push(this.generateIndentCell());r.push(this.generateCell({},null,he.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(p.detailTemplate||p.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var d=this.captionModelGen.generateRows(s)[0];$(s,d.data);var f=0;d.cells.some(function(I,A){return f=A,I.visible&&I.isDataCell}),n=d.cells.slice(f).filter(function(I){return I.visible}),d.visible&&n[0].column.field===this.parent.getVisibleColumns()[0].field&&(n=n.slice(1)),this.parent.getVisibleColumns().length===1&&(n=[]),i=i-n.length}for(var g=this.parent.enableColumnVirtualization?this.parent.getColumns():[o],y=!0,b=0;b<g.length;b++){var C=y&&l.indexOf(i)!==-1;C&&(y=!1);var S=!this.parent.enableColumnVirtualization||C?he.GroupCaption:he.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&S===he.GroupCaption?i+h:i,p.isRowDragable()&&i++,r.push(this.generateCell(o,null,S,i))}return r.push.apply(r,n),r},t.prototype.generateCaptionRow=function(e,i,s,r,n,o){var l={},h="records",p=this.parent.getColumnByField(e.field);l.data=$({},e),p&&(l.data.field=e.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=s,l.childGid=r,l.tIndex=n,l.isCaptionRow=!0,l.parentUid=o,l.gSummary=u(e.items[""+h])?e.items.length:e.items[""+h].length,l.uid=xs("grid-row");var c=new tr(l);return c.indent=i,this.getForeignKeyData(c),c.cells=this.getCaptionRowCells(e.field,i,c.data),c},t.prototype.getForeignKeyData=function(e){var i=e.data,s=this.parent.getColumnByField(i.field);if(s&&s.isForeignColumn&&s.isForeignColumn()){var r=u(i.key)?"":s.valueAccessor(s.foreignKeyValue,Js(s,{},i.key)[0],s);We("foreignKey",r,e.data)}},t.prototype.generateDataRows=function(e,i,s,r,n){for(var o=[],l=this.parent.getColumnIndexesInView(),h=0,p=e.length;h<p;h++,r++){o[parseInt(h.toString(),10)]=this.generateRow(e[parseInt(h.toString(),10)],this.index,h?void 0:"e-firstchildrow",i,s,r,n,h);for(var c=0;c<i;c++)this.parent.enableColumnVirtualization&&l.indexOf(i)===-1||o[parseInt(h.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return o},t.prototype.generateIndentCell=function(){return this.generateCell({},null,he.Indent)},t.prototype.refreshRows=function(e){for(var i=this.parent.getColumnIndexesInView(),s=0;s<e.length;s++)if(e[parseInt(s.toString(),10)].isDataRow){e[parseInt(s.toString(),10)].cells=this.generateCells(e[parseInt(s.toString(),10)]);for(var r=0;r<e[parseInt(s.toString(),10)].indent;r++)this.parent.enableColumnVirtualization&&i.indexOf(e[parseInt(s.toString(),10)].indent)===-1||e[parseInt(s.toString(),10)].cells.unshift(this.generateIndentCell())}else{var n=this.generateCaptionRow(e[parseInt(s.toString(),10)].data,e[parseInt(s.toString(),10)].indent);e[parseInt(s.toString(),10)].cells=n.cells}return e},t.prototype.setInfiniteRowVisibility=function(e){if(!e.isExpand||e.visible===!1)for(var i=0,s=this.rows;i<s.length;i++){var r=s[i];r.parentUid===e.uid&&(r.visible=!1,r.isCaptionRow&&this.setInfiniteRowVisibility(r))}},t.prototype.ensureRowVisibility=function(){for(var e=0;e<this.rows.length;e++){var i=this.rows[parseInt(e.toString(),10)];if(i.isCaptionRow)for(var s=e+1;s<this.rows.length;s++){var r=this.rows[parseInt(s.toString(),10)];i.uid===r.parentUid&&(this.rows[parseInt(s.toString(),10)].visible=i.isExpand)}}},t})($a),bv=(function(){function a(t,e){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.drop=function(s){i.parent.notify(Xg,{target:s.target,droppedElement:s.droppedElement}),ce(s.droppedElement)},this.infiniteCache={},this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.tempFreezeRows=[],this.rafCallback=function(s){var r=s;return function(){if(i.ariaService.setBusy(i.getPanel().querySelector("."+Nt),!1),!i.parent.isDestroyed){var n=i.rows.slice(0);if(i.parent.enableInfiniteScrolling){if(i.parent.groupSettings.enableLazyLoading)for(var o=0;o<i.visibleRows.length;o++)i.setRowsInLazyGroup(i.visibleRows[parseInt(o.toString(),10)],o);n=i.parent.getRowsObject();var l=r.prevPage;if(i.parent.infiniteScrollSettings.enableCache&&l){var h=i.parent.infiniteScrollSettings.maxBlocks;n=[];for(var p=parseInt(i.rowElements[0].getAttribute("aria-rowindex"),10),c=Math.ceil(p/i.parent.pageSettings.pageSize),o=0,d=c;o<h;o++,d++)i.infiniteCache[parseInt(d.toString(),10)]&&(n=n.concat(i.infiniteCache[parseInt(d.toString(),10)]))}}if(i.parent.notify(nt,{rows:n,args:r}),i.parent.editSettings.showAddNewRow&&i.parent.addNewRowFocus&&(i.parent.notify(br,{}),i.parent.addNewRowFocus=!1),i.parent.autoFit&&i.parent.preventAdjustColumns(),i.parent.isInitialLoad||i.parent.focusModule.setFirstFocusableTabIndex(),i.isLoaded){i.parent.isManualRefresh=!1,i.parent.enableInfiniteScrolling&&i.parent.groupSettings.enableLazyLoading&&s.requestType==="sorting"&&(i.parent.infiniteScrollModule.groupCaptionAction=void 0);var f=i.parent.parentDetails&&i.parent.parentDetails.parentInstObj&&i.parent.parentDetails.parentInstObj.isReact;if((i.parent.isReact||f)&&i.parent.element.querySelectorAll(".e-templatecell").length){var g=i;g.parent.renderTemplates(function(){g.parent.trigger(As,{},function(){g.parent.allowTextWrap&&g.parent.notify(an,{case:"textwrap"})})})}else i.parent.trigger(As,{},function(){i.parent.allowTextWrap&&i.parent.notify(an,{case:"textwrap"})});i.parent.allowTextWrap&&i.parent.height==="auto"&&(i.parent.getContentTable().scrollHeight>i.parent.getContent().clientHeight?i.parent.scrollModule.setPadding():i.parent.scrollModule.removePadding())}if(r){var y=(r.requestType||"").toLowerCase()+"-complete";i.parent.notify(y,r),s.requestType==="batchsave"&&(s.cancel=!1,i.parent.trigger(Fe,s))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=t,this.serviceLocator=e,this.widthService=e.getService("widthService"),this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(bh,this.setVisible,this),this.parent.on(Jc,this.colGroupRefresh,this),this.parent.on(bt,this.enableAfterRender,this),this.parent.on(Bm,this.refreshContentRows,this),this.parent.on(Ll,this.beforeCellFocused,this),this.parent.on(ut,this.droppableDestroy,this))}return a.prototype.beforeCellFocused=function(t){t.byKey&&(t.keyArgs.action==="upArrow"||t.keyArgs.action==="downArrow")?this.pressedKey=t.keyArgs.action:this.pressedKey=void 0},a.prototype.renderPanel=function(){var t=this.parent,e=this.parent.element.querySelector("."+ki);if(e){this.ariaService.setOptions(this.parent.element.querySelector("."+Nt),{busy:!1}),this.setPanel(e);return}e=this.parent.createElement("div",{className:ki});var i=this.parent.createElement("div",{className:Nt});this.ariaService.setOptions(i,{busy:!1}),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(e),i.classList.add("e-virtual-content")),e.appendChild(i),this.setPanel(e),t.element.appendChild(e)},a.prototype.renderHorizontalScrollbar=function(t){var e=this.parent.createElement("div",{className:"e-movablescrollbar"}),i=this.parent.createElement("div",{className:"e-movablechild"}),s=ai().toString();this.setScrollbarHeight(i,s),this.setScrollbarHeight(e,s),e.appendChild(i),t.appendChild(e)},a.prototype.setScrollbarHeight=function(t,e){t.style.minHeight=e+"px",t.style.maxHeight=e+"px"},a.prototype.renderTable=function(){var t=this.getPanel(),e=t.querySelector(".e-virtualtable"),i=t.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!u(e)&&!u(i)&&(ce(e),ce(i)),t.appendChild(this.createContentTable("_content_table")),this.setTable(t.querySelector("."+rs)),this.parent.selectionSettings.type==="Multiple"&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},a.prototype.createContentTable=function(t){var e=this.getPanel().firstElementChild;this.getTable()&&ce(this.getTable());var i=e.querySelector("."+rs)?e.querySelector("."+rs):this.parent.createElement("table",{className:rs,attrs:{role:"presentation",id:this.parent.element.id+t}});return i.style.cssText="border-collapse: separate; border-spacing: .25px;",this.setColGroup(this.parent.getHeaderTable().querySelector(li).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(ze,{attrs:{role:"rowgroup"}})),e.appendChild(i),e},a.prototype.refreshContentRows=function(t){var e=this;t===void 0&&(t={});var i=this.parent;if(i.currentViewData.length!==0){i.editSettings&&i.editModule&&i.editSettings.mode==="Batch"&&i.editModule.formObj&&i.editSettings.showConfirmDialog===!1&&i.editModule.destroyForm();var s=this.currentMovableRows||i.currentViewData,r=i.isReact&&!u(i.rowTemplate),n=this.parent.printGridParent&&this.parent.printGridParent.isReact,o=r||n?i.createElement(ze,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=$([],s));var l=r?i.createElement(ze,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),h,p;(i.isReact||n)&&i.rowTemplate&&(h=o,p=l);var c=i.getColumns(),d,f,g,y=new Lr(this.serviceLocator,null,this.parent),b=this.parent.enableInfiniteScrolling&&t.requestType==="infiniteScroll",C=this.isInfiniteColumnvirtualization()&&t.requestType!=="virtualscroll",S=!!(i.enableInfiniteScrolling&&(i.childGrid||i.detailTemplate)),I=S&&(t.action==="add"&&t.requestType==="save"||t.requestType==="delete");I&&(t.startIndex=0,i.notify(pv,{})),b&&(i.childGrid||i.detailTemplate)&&!i.infiniteScrollSettings.enableCache||(S&&(this.parent.infiniteScrollModule.infiniteDetailDestroy=!0),i.notify(rv,b&&(i.childGrid||i.detailTemplate)&&i.infiniteScrollSettings.enableCache?t:{})),this.rowElements=[],this.rows=[],this.tempFreezeRows=[];var A,T=!!(this.parent.frozenRows&&this.parent.groupSettings.columns.length);Pi(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete","refresh-aggregate-on-save"].some(function(fe){return t.requestType===fe})&&this.emptyVcRows();var L;L=this.checkCache(L,t),!this.isAddRows&&!this.useGroupCache&&(L=this.generator.generateRows(s,t)),this.setGroupCache(L,t),this.parent.notify(Wm,{isInfiniteScroll:b,modelData:L,args:t});var _=this.parent.registeredTemplate;if(!(t.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&_&&_.template&&!t.isFrozen){for(var X=[],re=0;re<_.template.length;re++)for(var ye=0;ye<_.template[parseInt(re.toString(),10)].rootNodes.length;ye++)u(_.template[parseInt(re.toString(),10)].rootNodes[parseInt(ye.toString(),10)].parentNode)&&X.push(_.template[parseInt(re.toString(),10)]);this.parent.destroyTemplate(["template"],X)}if((this.parent.isReact||this.parent.isVue)&&!(t.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&!t.isFrozen){var V=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"];t.requestType==="infiniteScroll"&&this.parent.infiniteScrollSettings.enableCache&&(V=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),Zs(this.parent,V)}if(this.parent.enableColumnVirtualization){var q=new Ul(this.serviceLocator,this.parent);q.updateVirtualCells(L)}this.tbody=this.getTable().querySelector(ze);var z=0,U=!0;if(Pi(i)&&i.vcRows.length){var ie="top",J=u(t.virtualInfo.offsets)?u(t.scrollTop)?0:t.scrollTop[""+ie]:t.virtualInfo.offsets.top;if(J!==0){for(var K=i.vGroupOffsets,Y=i.pageSettings.pageSize/2,ne=Object.keys(K).map(function(fe){return K[""+fe]}),de=0;de<ne.length;de++)if(J<ne[parseInt(de.toString(),10)])if(!u(t.virtualInfo)&&t.virtualInfo.direction==="up"){z=de>0?(de-1)*Y:de*Y;break}else{z=de*Y,(this.parent.contentModule.isEndBlock(de)||this.parent.contentModule.isEndBlock(de+1))&&(t.virtualInfo.blockIndexes=[de,de+1]);break}Math.round(J+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!t.rowObject&&(U=!1)}}var Ae=i.frozenRows&&this.parent.enableVirtualization&&t.requestType==="reorder";if(i.frozenRows&&t.requestType==="virtualscroll"&&t.virtualInfo.sentinelInfo.axis==="X"||Ae){var xe=t.virtualInfo.blockIndexes,ge=t.virtualInfo.page;t.virtualInfo.blockIndexes=[1,2],Ae&&(t.virtualInfo.page=1);var Ee=Ae?this.initialPageRecords:s,De=this.vgenerator.generateRows(Ee,t);De.splice(this.parent.frozenRows);for(var re=0;re<this.parent.frozenRows;re++)d=y.render(De[parseInt(re.toString(),10)],c),Ua(d),l.appendChild(d);t.virtualInfo.blockIndexes=xe,t.virtualInfo.page=ge,Ae&&t.virtualInfo.page===1&&L.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(l,L,y,t,s,c),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]),(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&t.requestType==="delete"||I)&&(this.visibleRows=[]);for(var ee=function(fe,ui){if(be.rows.push(L[parseInt(fe.toString(),10)]),be.parent.groupSettings.enableLazyLoading&&!be.useGroupCache&&be.parent.groupSettings.columns.length&&((be.parent.enableVirtualization?be.parent.lazyLoadRender:be.parent.contentModule).refRowsObj[be.parent.pageSettings.currentPage].push(L[parseInt(fe.toString(),10)]),be.setRowsInLazyGroup(L[parseInt(fe.toString(),10)],fe),u(L[parseInt(fe.toString(),10)].indent)))return"continue";if(be.setInfiniteVisibleRows(t,L[parseInt(fe.toString(),10)]),Pi(i)&&t.virtualInfo&&t.virtualInfo.blockIndexes&&be.rowElements.length>=t.virtualInfo.blockIndexes.length*be.parent.contentModule.getBlockSize()&&U)return be.parent.currentViewData.records=be.rows.map(function(hs){return hs.data}),"break";if(i.rowTemplate){var zi=i.element.id+"rowTemplate",lt=void 0;if(i.isReact||n){var qi=i.frozenRows&&fe<i.frozenRows,ir=$({index:fe},s[parseInt(fe.toString(),10)]);if(i.getRowTemplate()(ir,i,"rowTemplate",zi,null,null,qi?l:o),i.requireTemplateRef){var ct=be;return ct.parent.renderTemplates(function(){i.frozenRows&&fe<i.frozenRows?d=p.childNodes[parseInt(fe.toString(),10)]:g=h.childNodes[parseInt(fe.toString(),10)];var hs={data:L[parseInt(fe.toString(),10)].data,row:g||d};ct.parent.trigger(Ba,hs),(L[parseInt(fe.toString(),10)].isDataRow||ct.parent.enableVirtualization&&ct.parent.groupSettings.enableLazyLoading)&&ct.rowElements.push(hs.row),ct.ariaService.setOptions(ct.parent.element,{colcount:i.getColumns().length.toString()}),fe===L.length-1&&(h=null,p=null)}),"continue"}}else lt=i.getRowTemplate()($({index:fe},s[parseInt(fe.toString(),10)]),i,"rowTemplate",zi,void 0,void 0,void 0,be.parent.root);if(!i.isReact&&lt[0].tagName==="TBODY"){for(var ht=0;ht<lt.length;ht++){var pi=lt[parseInt(ht.toString(),10)].nodeName.toLowerCase()==="tr";(pi||lt[parseInt(ht.toString(),10)].querySelectorAll&&lt[parseInt(ht.toString(),10)].querySelectorAll("tr").length)&&(d=pi?lt[parseInt(ht.toString(),10)]:lt[parseInt(ht.toString(),10)].querySelector("tr"))}i.frozenRows&&fe<i.frozenRows?l.appendChild(d):o.appendChild(d)}else i.frozenRows&&fe<i.frozenRows?d=i.isReact?l.lastElementChild:Ht(l,lt):(i.isReact||(d=Ht(o,lt)),g=i.isReact?o.lastElementChild:d.lastElementChild);var Wi={data:L[parseInt(fe.toString(),10)].data,row:g||d};be.parent.trigger(Ba,Wi)}else{d=y.render(L[parseInt(fe.toString(),10)],c),Ua(d);var bi=be.ensureFrozenHeaderRender(t);i.frozenRows&&(fe<i.frozenRows||T)&&!b&&t.requestType!=="virtualscroll"&&bi&&be.ensureVirtualFrozenHeaderRender(t)?l.appendChild(d):o.appendChild(d);var Zt=parseInt(d.getAttribute("aria-rowindex"),10)-1;Zt+1===i.frozenRows&&(T=!1),L[parseInt(fe.toString(),10)].isExpand&&i.notify(Im,d.cells[i.groupSettings.columns.length])}(L[parseInt(fe.toString(),10)].isDataRow||be.parent.enableVirtualization&&be.parent.groupSettings.enableLazyLoading)&&(!u(i.rowTemplate)&&(i.isAngular||i.isVue3||i.isVue)?be.rowElements.push(g||d):be.rowElements.push(d)),be.ariaService.setOptions(be.parent.element,{colcount:i.getColumns().length.toString()})},be=this,re=z,me=L.length;re<me;re++){var Ye=ee(re);if(Ye==="break")break}var ot=i.parentDetails&&i.parentDetails.parentInstObj&&i.parentDetails.parentInstObj.isReact;if((i.isReact||ot)&&!i.requireTemplateRef&&i.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(ld,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),i.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),i.frozenRows&&t.requestType!=="virtualscroll"&&!b&&this.ensureVirtualFrozenHeaderRender(t)||t.requestType==="virtualscroll"&&t.virtualInfo.sentinelInfo&&t.virtualInfo.sentinelInfo.axis==="X"){if(f=i.getHeaderTable().querySelector(ze),r){var gt=f.parentElement;ce(f),gt.appendChild(l)}else f.innerHTML="",f.appendChild(l);i.isInitialLoad||i.scrollModule.setHeight()}t.rows=this.rows.slice(0),Cd(function(){if(e.parent.notify(id,t),!e.parent.enableVirtualization&&(!e.parent.enableColumnVirtualization||C)&&!b&&(i.isReact||(e.tbody.innerHTML=""),u(e.tbody.parentElement)?ce(i.getContentTable().querySelector(ze)):ce(e.tbody),e.tbody=e.parent.createElement(ze,{attrs:{role:"rowgroup"}})),i.rowTemplate&&Vd(i.element.id+"rowTemplate"),!u(e.parent.infiniteScrollModule)&&(e.parent.enableInfiniteScrolling&&!e.isInfiniteColumnvirtualization()||C)){if(e.isAddRows=!1,e.parent.notify(qm,{args:t}),e.parent.notify(zm,{tbody:e.tbody,frag:o,args:t,rows:e.rows,rowElements:e.rowElements,visibleRows:e.visibleRows,tableName:A}),e.isInfiniteColumnvirtualization()&&e.parent.isFrozenGrid()){var fe=e.parent.getContent().querySelector(".e-virtualtable"),ui=$l(fe);e.parent.contentModule.resetStickyLeftPos(ui.width),e.widthService.refreshFrozenScrollbar()}}else e.useGroupCache=!1,e.appendContent(e.tbody,o,t);if(e.parent.editSettings.showAddNewRow&&(e.parent.enableVirtualization||e.parent.enableInfiniteScrolling)){var bi=e.parent.element.querySelector(".e-addrow-removed");bi&&ce(bi)}var Zt=!e.parent.element.querySelector("."+Sr);e.parent.editSettings.showAddNewRow&&e.parent.editSettings.mode==="Normal"&&(Zt&&((e.parent.enableVirtualization||e.parent.enableInfiniteScrolling)&&(e.parent.isAddNewRow=!0),e.parent.isEdit=!1,e.parent.addRecord()),(Zt||(e.parent.enableVirtualization||e.parent.enableInfiniteScrolling)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(zi){return t.requestType===zi}))&&e.parent.notify(br,{})),e.parent.getVisibleFrozenRightCount()&&e.parent.getContent()&&Ah(e.parent)>0&&e.parent.element.classList.add("e-right-shadow"),o=null},this.rafCallback($({},t)))}},a.prototype.isInfiniteColumnvirtualization=function(){return this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling},a.prototype.enableCacheOnInfiniteColumnVirtual=function(){return this.isInfiniteColumnvirtualization()&&this.parent.infiniteScrollSettings.enableCache},a.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},a.prototype.appendContent=function(t,e,i,s){var r=this.parent.isReact&&!u(this.parent.rowTemplate);if(r?this.getTable().appendChild(e):(t.appendChild(e),this.getTable().appendChild(t)),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both"))for(var n=t.querySelectorAll("td"),o=0;o<n.length;o++){var l=parseFloat(document.defaultView.getComputedStyle(n[parseInt(o.toString(),10)],"::before").getPropertyValue("height")),h=n[parseInt(o.toString(),10)].offsetHeight;l>h&&(n[parseInt(o.toString(),10)].style.height=l+"px",n[parseInt(o.toString(),10)].style.boxSizing="content-box")}this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},a.prototype.setRowsInLazyGroup=function(t,e){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(t,e)},a.prototype.setGroupCache=function(t,e){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(Gm,{args:e,data:t})},a.prototype.ensureFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&(t.requestType==="reorder"||t.requestType==="refresh")||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&this.parent.infiniteScrollModule.requestType==="delete"&&this.parent.pageSettings.currentPage!==1)},a.prototype.ensureVirtualFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&t.requestType==="delete")},a.prototype.checkCache=function(t,e){if(this.parent.infiniteScrollSettings.enableCache&&e.requestType==="infiniteScroll"){if(this.isAddRows=!u(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows){var i=this.infiniteCache[this.parent.pageSettings.currentPage];t=this.parent.pageSettings.currentPage===1?i.slice(this.parent.frozenRows):i}return t}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(e.requestType==="paging"||e.requestType==="columnstate"||e.requestType==="reorder"||e.requestType==="virtualscroll")&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows(e.requestType==="reorder")):null},a.prototype.setInfiniteVisibleRows=function(t,e){this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!(this.isInfiniteColumnvirtualization()&&t.requestType==="virtualscroll")&&this.visibleRows.push(e)},a.prototype.getCurrentBlockInfiniteRecords=function(){var t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var e=this.parent.getRows(),i=parseInt(e[this.parent.frozenRows].getAttribute(it),10)-1,s=Math.ceil((i+1)/this.parent.pageSettings.pageSize);i=parseInt(e[e.length-1].getAttribute(it),10)-1;for(var r=Math.ceil((i+(e.length?1:0))/this.parent.pageSettings.pageSize),n=s;n<=r;n++)t=t.length?t.concat(this.infiniteCache[parseInt(n.toString(),10)]):this.infiniteCache[parseInt(n.toString(),10)];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}return t},a.prototype.getReorderedRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},a.prototype.virtualFrozenHdrRefresh=function(t,e,i,s,r,n){if(this.parent.frozenRows&&this.parent.enableVirtualization&&(s.requestType==="reorder"||s.requestType==="refresh")){for(var o=void 0,l=this.getReorderedRows(s),h=0;h<l.length;h++)o=i.render(l[parseInt(h.toString(),10)],n),t.appendChild(o);s.virtualInfo.page===1&&e.splice(0,this.parent.frozenRows)}},a.prototype.getInfiniteRows=function(){var t=[];if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var e=Object.keys(this.infiniteCache),i=0;i<e.length;i++)t=t.concat(this.infiniteCache[e[parseInt(i.toString(),10)]]);else t=this.visibleRows;return t},a.prototype.getInfiniteMovableRows=function(){var t=this.getCurrentBlockInfiniteRecords(),e=this.parent.enableInfiniteScrolling?t.length?t:this.visibleRows:[];return e},a.prototype.getPanel=function(){return this.contentPanel},a.prototype.setPanel=function(t){this.contentPanel=t},a.prototype.getTable=function(){return this.contentTable},a.prototype.setTable=function(t){this.contentTable=t},a.prototype.getRows=function(){var t=this.getInfiniteRows();return t.length?t:this.rows},a.prototype.getRowElements=function(){return this.rowElements},a.prototype.setRowElements=function(t){this.rowElements=t},a.prototype.getColGroup=function(){return this.colgroup},a.prototype.setColGroup=function(t){return u(t)||(t.id="content-"+t.id),this.colgroup=t},a.prototype.setVisible=function(t){var e=this.parent,i=this.getRows(),s;i.some(function(b){return b.isDataRow&&(s=b),b.isDataRow});var r=!0;!e.groupSettings.columns.length&&s&&(r=!1);for(var n=e.getDataRows(),o={},l=this.infiniteRowVisibility(),h=l||this.rows.filter(function(b){return!b.isDetailRow}),p=0,c=t.length;p<c;p++){var d=t[parseInt(p.toString(),10)],f=this.parent.getNormalizedColumnIndex(d.uid),g=this.parent.getColumnIndexByUid(d.uid),y=d.visible===!0?"":"none";f!==-1&&s&&f<s.cells.length&&At(this.getColGroup().childNodes[parseInt(f.toString(),10)],{display:y}),r||this.setDisplayNone(n,g,y,h),!this.parent.invokedFromMedia&&d.hideAtMedia&&this.parent.updateMediaColumns(d),this.parent.invokedFromMedia=!1}r?this.refreshContentRows({requestType:"refresh"}):(this.parent.notify(sd,{rows:h,args:o}),this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.notify(br,{}))},a.prototype.setDisplayNone=function(t,e,i,s){Wy(t,e,i,s,this.parent,this.parent.isRowDragable()),this.parent.notify(Vm,{visible:i,index:e,isFreeze:this.isInfiniteFreeze})},a.prototype.infiniteRowVisibility=function(t){var e;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=t,this.parent.infiniteScrollSettings.enableCache?e=this.getCurrentBlockInfiniteRecords():e=t?this.visibleFrozenRows:this.visibleRows),e},a.prototype.colGroupRefresh=function(){if(this.getColGroup()){var t=this.getHeaderColGroup();this.getTable().replaceChild(t,this.getColGroup()),this.setColGroup(t)}},a.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+Xt).querySelector(li+":not(.e-masked-colgroup)").cloneNode(!0)},a.prototype.initializeContentDrop=function(){var t=this.parent;this.droppable=new fc(t.element,{accept:".e-dragclone",drop:this.drop})},a.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},a.prototype.canSkip=function(t,e,i){return u(e)||u(t.visible)||e.cells[parseInt(i.toString(),10)].visible===t.visible},a.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new yv(this.parent):new $a(this.parent)},a.prototype.renderEmpty=function(t){this.getTable().appendChild(t),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(ze).innerHTML="")},a.prototype.setSelection=function(t,e,i){this.parent.notify(Ym,{uid:t,set:e,clearAll:i});for(var s=this.getRows().filter(function(l){return i||t===l.uid}),r=0;r<s.length;r++){s[parseInt(r.toString(),10)].isSelected=e;for(var n=s[parseInt(r.toString(),10)].cells,o=0;o<n.length;o++)n[parseInt(o.toString(),10)].isSelected=e}},a.prototype.getRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),u(t)?void 0:this.parent.getDataRows()[parseInt(t.toString(),10)]},a.prototype.getInfiniteRowIndex=function(t){if(this.parent.infiniteScrollSettings.enableCache&&!u(t)){var e=this.parent.frozenRows,i=e>t?0:e,s=parseInt(this.parent.getRows()[parseInt(i.toString(),10)].getAttribute(it),10)-1;t=e>t?t:t-s+e}return t},a.prototype.getVirtualRowIndex=function(t){return t},a.prototype.enableAfterRender=function(t){t.module==="group"&&t.enable&&(this.generator=this.getModelGenerator())},a.prototype.setRowObjects=function(t){this.rows=t},a.prototype.immutableModeRendering=function(t){var e=this;t===void 0&&(t={});var i=this.parent;i.hideSpinner();var s=i.getPrimaryKeyFieldNames()[0],r={},n={},o=[],l={},h=i.getRowsObject().slice(),p=this.getBatchEditedRecords(s,h),c={},d=Object.keys(p).length!==0;if(i.getContent().querySelector(".e-emptyrow")||t.requestType==="reorder"||this.parent.groupSettings.columns.length)this.refreshContentRows(t);else{if(i.currentViewData.length===0)return;var f={},g=i.createElement(ze,{attrs:{role:"rowgroup"}}),y=i.currentViewData,b=[].slice.call(this.getTable().querySelector(ze).children);if(this.prevCurrentView.length){var C=this.prevCurrentView.length,S=y.length;if(C===S)for(var I=0;I<S;I++){if(this.parent.editSettings.mode==="Batch"&&b[parseInt(I.toString(),10)].classList.contains("e-insertedrow")){b.splice(I,1),--I;continue}n[y[parseInt(I.toString(),10)][""+s]]=r[this.prevCurrentView[parseInt(I.toString(),10)][""+s]]=I,c[parseInt(I.toString(),10)]=y[parseInt(I.toString(),10)][""+s],f[h[parseInt(I.toString(),10)].uid]=b[parseInt(I.toString(),10)],l[parseInt(I.toString(),10)]=this.prevCurrentView[parseInt(I.toString(),10)][""+s]}else{for(var I=0;I<S;I++)n[y[parseInt(I.toString(),10)][""+s]]=I,c[parseInt(I.toString(),10)]=y[parseInt(I.toString(),10)][""+s];for(var I=0;I<C;I++){if(this.parent.editSettings.mode==="Batch"&&b[parseInt(I.toString(),10)].classList.contains("e-insertedrow")){b.splice(I,1),--I;continue}f[h[parseInt(I.toString(),10)].uid]=b[parseInt(I.toString(),10)],r[this.prevCurrentView[parseInt(I.toString(),10)][""+s]]=I,l[parseInt(I.toString(),10)]=this.prevCurrentView[parseInt(I.toString(),10)][""+s]}}}for(var I=0;I<y.length;I++){var A=r[y[parseInt(I.toString(),10)][""+s]];if(u(A)){var _=new Lr(this.serviceLocator,null,i),X={startIndex:I},re=this.generator.generateRows([y[parseInt(I.toString(),10)]],X);o.push(re[0]);var L=_.render(re[0],i.getColumns());g.appendChild(L),this.refreshImmutableContent(I,L,o[parseInt(I.toString(),10)])}else{var T=!1;this.parent.enableDeepCompare&&(T=this.objectEqualityChecker(this.prevCurrentView[parseInt(A.toString(),10)],y[parseInt(I.toString(),10)]));var L=f[h[parseInt(A.toString(),10)].uid];if(o.push(h[parseInt(A.toString(),10)]),this.rowElements[parseInt(A.toString(),10)]&&this.rowElements[parseInt(A.toString(),10)].getAttribute("data-uid")===o[parseInt(I.toString(),10)].uid&&(d&&u(p[c[parseInt(I.toString(),10)]])||!d&&(T||this.prevCurrentView[parseInt(A.toString(),10)]===y[parseInt(I.toString(),10)]))){A!==I&&this.refreshImmutableContent(I,L,o[parseInt(I.toString(),10)]),g.appendChild(L);continue}(d&&!u(p[c[parseInt(I.toString(),10)]])||!this.parent.enableDeepCompare&&y[parseInt(I.toString(),10)]!==this.prevCurrentView[parseInt(A.toString(),10)]||this.parent.enableDeepCompare&&!T)&&h[parseInt(A.toString(),10)].setRowValue(y[parseInt(I.toString(),10)]),g.appendChild(L),this.refreshImmutableContent(I,L,o[parseInt(I.toString(),10)])}}if(this.rows=o,this.rowElements=[].slice.call(g.children),ce(this.getTable().querySelector(ze)),this.getTable().appendChild(g),this.parent.trigger(As,{},function(){e.parent.allowTextWrap&&e.parent.notify(an,{case:"textwrap"})}),t){var ye=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(ye,t)}}},a.prototype.objectEqualityChecker=function(t,e){for(var i=Object.keys(t),s=!0,r=0;r<i.length;r++)if(t[i[parseInt(r.toString(),10)]]!==e[i[parseInt(r.toString(),10)]]){var n=t[i[parseInt(r.toString(),10)]]instanceof Date&&e[i[parseInt(r.toString(),10)]]instanceof Date;if(!n||t[i[parseInt(r.toString(),10)]].getTime()!==e[i[parseInt(r.toString(),10)]].getTime()){s=!1;break}}return s},a.prototype.getBatchEditedRecords=function(t,e){var i={},s=this.parent.getBatchChanges(),r=[],n=[];Object.keys(s).length&&(r=s.changedRecords,n=s.addedRecords);var o={cancel:!1};this.parent.notify(Xm,{rows:e,args:o}),n.length&&(this.parent.editSettings.newRowPosition==="Bottom"?e.splice(e.length-1,n.length):o.cancel||e.splice(0,n.length));for(var l=0;l<r.length;l++)i[r[parseInt(l.toString(),10)][""+t]]=l;return i},a.prototype.refreshImmutableContent=function(t,e,i){i.isAltRow=this.parent.enableAltRow?t%2!==0:!1,i.isAltRow?e.classList.add("e-altrow"):e.classList.remove("e-altrow"),i.index=t,i.edit=void 0,i.isDirty=!1,e.setAttribute(it,(t+1).toString()),this.updateCellIndex(e,t)},a.prototype.updateCellIndex=function(t,e){for(var i=0;i<t.cells.length;i++)t.cells[parseInt(i.toString(),10)].setAttribute("data-index",e.toString())},a})(),Cv=(function(){function a(t,e){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(s){var r=i.parent,n=i.draggable.currentStateTarget,o=F(n,"e-headercell");if(!(r.allowReordering||r.allowGrouping)||!u(o)&&o.getElementsByClassName("e-checkselectall").length>0)return!1;var l=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=n.classList.contains("e-headercell")?n:o;if(!h||!r.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var p=h.offsetHeight,c=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv"),d;if(c){if(h.querySelector(".e-stackedheadercelldiv")?d=r.getStackedHeaderColumnByHeaderText(c.innerText.trim(),r.columns):d=r.getColumnByUid(c.getAttribute("data-mappinguid")),i.column=d,i.column.lockColumn)return!1;l.setAttribute("data-mappinguid",i.column.uid)}if(d&&!u(d.headerTemplate)){if(u(d.headerTemplate))l.innerHTML=d.headerTemplate;else{var f=r.getColumnIndexByField(d.field),g=d.getHeaderTemplate()($({index:f},d),r,"headerTemplate",null,null,null,null,r.root),y=r.isReact&&typeof d.headerTemplate!="string",b=r.parentDetails&&r.parentDetails.parentInstObj&&r.parentDetails.parentInstObj.isReact;(y||b)&&r.renderTemplates(),Ht(l,g)}!u(l.firstChild)&&l.firstChild.nodeType===1&&(l.firstChild.style.pointerEvents="none")}else l.innerHTML=c?d.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(p-6).toString()+"px",r.element.appendChild(l),l},this.dragStart=function(s){var r=i.parent;r.element.querySelector(".e-gridpopup").style.display="none",r.notify(Kg,{target:i.draggable.currentStateTarget,column:i.column,event:s.event})},this.drag=function(s){var r=i.parent,n=s.target;if(n){var o=M(n,".e-grid"),l=i.parent.element.querySelector(".e-cloneproperties");if((!o||o.getAttribute("id")!==r.element.getAttribute("id"))&&(Se(l,["e-notallowedcur"],["e-defaultcur"]),r.allowReordering&&(r.element.querySelector(".e-reorderuparrow").style.display="none",r.element.querySelector(".e-reorderdownarrow").style.display="none"),!r.groupSettings.allowReordering))return;r.notify(Yg,{target:s.target,column:i.column,event:s.event})}},this.dragStop=function(s){var r=i.parent,n;r.element.querySelector(".e-gridpopup").style.display="none",(!F(s.target,"e-headercell")&&!F(s.target,"e-groupdroparea")||!r.allowReordering&&F(s.target,"e-headercell")||!s.helper.getAttribute("data-mappinguid")&&F(s.target,"e-groupdroparea"))&&(ce(s.helper),n=!0),r.notify(cm,{target:s.target,event:s.event,column:i.column,cancel:n})},this.drop=function(s){var r=i.parent,n=s.droppedElement.getAttribute("data-mappinguid"),o=M(s.target,".e-grid");ce(s.droppedElement),!(o&&o.getAttribute("id")!==r.element.getAttribute("id")||!(r.allowReordering||r.allowGrouping))&&r.notify(dm,{target:s.target,uid:n,droppedElement:s.droppedElement})},this.parent=t,this.serviceLocator=e,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(this.parent.enableColumnVirtualization||this.parent.on(bh,this.setVisible,this),this.parent.on(Pa,this.colPosRefresh,this),this.parent.on(Xa,this.renderCustomToolbar,this),this.parent.rowRenderingMode==="Vertical"&&this.parent.on(bt,this.updateCustomResponsiveToolbar,this))}return a.prototype.renderPanel=function(){var t=this.parent.element.querySelector("."+Xt),e=t!=null;t=e?t:this.parent.createElement("div",{className:"e-gridheader"});var i=e?t.querySelector("."+Ft):this.parent.createElement("div",{className:Ft});this.toggleStackClass(t),t.appendChild(i),this.setPanel(t),e||this.parent.element.appendChild(t)},a.prototype.renderTable=function(){var t=this.getPanel();t.appendChild(this.createHeaderTable()),this.setTable(t.querySelector("."+rs)),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(mi,{rows:this.rows})},a.prototype.getPanel=function(){return this.headerPanel},a.prototype.setPanel=function(t){this.headerPanel=t},a.prototype.getTable=function(){return this.headerTable},a.prototype.setTable=function(t){this.headerTable=t},a.prototype.getColGroup=function(){return this.colgroup},a.prototype.setColGroup=function(t){return this.colgroup=t},a.prototype.getRows=function(){var t=this.getTable();return t.tHead.rows},a.prototype.createHeaderTable=function(){var t=this.createTable(),e=this.getPanel().querySelector("."+Ft);return e.appendChild(t),e},a.prototype.createHeader=function(t,e){var i=this.parent;this.getTable()&&ce(this.getTable());var s=this.parent.createElement("table",{className:rs,attrs:{role:"presentation"}});s.style.cssText="border-collapse: separate; border-spacing: .25px;";var r=this.createHeaderContent(e),n=r.thead,o=this.parent.createElement(ze,{className:this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var l=this.parent.createElement(li),h=this.parent.createElement("tr",{attrs:{role:"row"},className:(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"e-hide":""}),p,c=this.rows=r.rows,d=0,f=c.length;d<f;d++)for(var g=0,y=c[parseInt(d.toString(),10)].cells.length;g<y;g++)p=this.parent.createElement("td"),h.appendChild(p);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&s.classList.add("e-sortfilter"),this.updateColGroup(l),o.appendChild(h),s.appendChild(this.caption),s.appendChild(this.setColGroup(l)),s.appendChild(n),s.appendChild(o),s},a.prototype.createTable=function(t){return t===void 0&&(t=null),this.createHeader(t)},a.prototype.createHeaderContent=function(t){var e=this.parent,i=e.getColumns(),s=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),r=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),n=new Lr(this.serviceLocator,he.Header,e);n.element=r;var o=[],l;this.colDepth=Ry(e.columns);for(var h=0,p=this.colDepth;h<p;h++)o[parseInt(h.toString(),10)]=this.generateRow(h),o[parseInt(h.toString(),10)].cells=[];if(o=this.ensureColumns(o),o=this.getHeaderCells(o,t),e.isRowDragable()&&this.parent.getFrozenMode()==="Right")for(var h=0,p=o.length;h<p;h++)o[parseInt(h.toString(),10)].cells.push(this.generateCell({},he.RowDragHIcon));var c=i.filter(function(f){return f.headerTemplate});c.length&&(this.parent.isReact||this.parent.isVue)&&Zs(this.parent,["headerTemplate"]);for(var h=0,p=this.colDepth;h<p;h++)l=n.render(o[parseInt(h.toString(),10)],i),this.parent.rowHeight&&l.querySelector(".e-headercell")&&(l.style.height=this.parent.rowHeight+"px"),Ua(l),s.appendChild(l);var d={thead:s,rows:o};return d},a.prototype.updateColGroup=function(t){var e=this.parent.getColumns(),i,s=this.parent.getColumnIndexesInView();if(t.id=this.parent.element.id+li,this.parent.allowGrouping)for(var r=0,n=this.parent.groupSettings.columns.length;r<n;r++)this.parent.enableColumnVirtualization&&s.indexOf(r)===-1||(i=this.parent.createElement("col",{className:"e-group-intent"}),t.appendChild(i));(this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),t.appendChild(i)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i));for(var r=0,n=e.length;r<n;r++)i=this.parent.createElement("col"),e[parseInt(r.toString(),10)].visible===!1&&At(i,{display:"none"}),t.appendChild(i);return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i)),t},a.prototype.ensureColumns=function(t){for(var e=this.parent,i=this.parent.getColumnIndexesInView(),s=0,r=t.length;s<r;s++){var n=s===0?this.colDepth:0;if(e.allowGrouping){for(var o=0,l=e.groupSettings.columns.length;o<l;o++)if(!(this.parent.enableColumnVirtualization&&i.indexOf(o)===-1)){var h=this.generateCell({},he.HeaderIndent);this.colDepth>1&&(h.rowSpan=n),t[parseInt(s.toString(),10)].cells.push(h)}}if(e.detailTemplate||e.childGrid){var p={};this.parent.notify(rd,p);var h=this.generateCell(p,he.DetailHeader);this.colDepth>1&&(h.rowSpan=n),t[parseInt(s.toString(),10)].cells.push(h)}if(e.isRowDragable()&&this.parent.getFrozenMode()!=="Right"){var h=this.generateCell({},he.RowDragHIcon);this.colDepth>1&&(h.rowSpan=n),t[parseInt(s.toString(),10)].cells.push(h)}}return t},a.prototype.getHeaderCells=function(t,e){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),s=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var r=0;r<(u(s)?0:s.length);r++)this.lockColsRendered=!1,t=this.appendCells(s[parseInt(r.toString(),10)],t,0,r===0,!1,r===s.length-1,i,e,!1);for(var r=0,n=u(s)?0:s.length;r<n;r++)this.notfrzIdx=0,this.lockColsRendered=!0,t=this.appendCells(s[parseInt(r.toString(),10)],t,0,r===0,!1,r===n-1,i,e,!1);return t},a.prototype.appendCells=function(t,e,i,s,r,n,o,l,h){var p=n?h?"e-laststackcell":"e-lastcell":"",c=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered;if(!t.columns)c&&e[parseInt(i.toString(),10)].cells.push(this.generateCell(t,he.Header,this.colDepth-i,(s?"":r?"e-firstcell":"")+p,i,this.parent.getColumnIndexByUid(t.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;else{this.isFirstCol=!1;var d=this.getCellCnt(t,0);if(d){var f=this.getStackedLockColsCount(t,0),g=this.parent.lockcolPositionCount===0||!this.lockColsRendered&&f!==0||this.lockColsRendered&&d-f!==0;g&&e[parseInt(i.toString(),10)].cells.push(new Tr({cellType:he.StackedHeader,column:t,colSpan:this.getColSpan(d,f),className:s?"":r?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var y=0;y<t.columns.length;y++)e=this.appendCells(t.columns[parseInt(y.toString(),10)],e,i+1,s,y===0,y===t.columns.length-1&&n,o,l,!1);if(this.lockColsRendered)for(var y=0,b=t.columns.length;y<b;y++){s=s&&y===0;var C=this.isFirstCol=t.columns[parseInt(y.toString(),10)].visible&&!s,S=y===b-1&&n;e=this.appendCells(t.columns[parseInt(y.toString(),10)],e,i+1,s,C&&!S,S,o,l,!0)}}return e},a.prototype.getStackedLockColsCount=function(t,e){if(t.columns)for(var i=0;i<t.columns.length;i++)e=this.getStackedLockColsCount(t.columns[parseInt(i.toString(),10)],e);else t.lockColumn&&e++;return e},a.prototype.getColSpan=function(t,e){return t=this.lockColsRendered?t-e:e,t},a.prototype.generateRow=function(t){return new tr({})},a.prototype.generateCell=function(t,e,i,s,r,n){var o={visible:t.visible,isDataCell:!1,isTemplate:!u(t.headerTemplate),rowID:"",column:t,cellType:e,rowSpan:i,className:s,index:r,colIndex:n};return(!o.rowSpan||o.rowSpan<2)&&delete o.rowSpan,new Tr(o)},a.prototype.setVisible=function(t){for(var e=this.parent,i,s,r=0,n=t.length;r<n;r++){var o=t[parseInt(r.toString(),10)];s=e.getNormalizedColumnIndex(o.uid),i=o.visible?"":"none",At(this.getColGroup().children[parseInt(s.toString(),10)],{display:i}),e.editSettings.showAddNewRow&&e.element.querySelector(".e-addedrow")&&At(e.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(s.toString(),10)],{display:i})}this.refreshUI(),this.parent.editSettings.showAddNewRow&&(this.parent.isAddNewRow=!0)},a.prototype.colPosRefresh=function(){this.refreshUI()},a.prototype.refreshUI=function(){var t=this.getPanel();this.toggleStackClass(t);var e=this.getTable(),i=void 0;if(e){this.droppableDestroy(),this.parent.reorderModule&&(this.parent.reorderModule.element=null,this.parent.reorderModule.destElement=null),ce(e),this.parent.editSettings.showAddNewRow&&!this.parent.isAddNewRow&&e.querySelector(".e-addedrow")&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(e.querySelector(".e-addedrow").classList.add("e-addrow-removed"),this.parent.isAddNewRow=!0),e.removeChild(e.childNodes[1]),e.removeChild(e.childNodes[1]);var s=this.parent.createElement(li),r=this.createHeaderContent(i);this.rows=r.rows,e.insertBefore(r.thead,e.childNodes[1]),this.updateColGroup(s),e.insertBefore(this.setColGroup(s),e.childNodes[1]),this.appendContent(e),this.parent.notify(Jc,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),this.initializeHeaderDrag(),this.initializeHeaderDrop();for(var n=[].slice.call(t.querySelectorAll("tr.e-columnheader")),o=0,l=n;o<l.length;o++){var h=l[o],p=[].slice.call(h.getElementsByClassName("e-grouptopleftcell"));p.length&&p[p.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(mi,{rows:this.rows}),this.parent.enableColumnVirtualization&&F(e,Gl)&&this.parent.notify(mi,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&this.parent.textWrapSettings.wrapMode==="Header"&&si(n,!0)}var c=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");u(c)||(c.tabIndex=0)},a.prototype.toggleStackClass=function(t){var e=this.parent.columns,i=u(e)?!1:e.some(function(s){return!u(s.columns)});i?t.classList.add("e-stackedheader"):t.classList.remove("e-stackedheader")},a.prototype.appendContent=function(t){this.getPanel().querySelector("."+Ft).appendChild(t)},a.prototype.getCellCnt=function(t,e){if(t.columns)for(var i=0,s=t.columns.length;i<s;i++)e=this.getCellCnt(t.columns[parseInt(i.toString(),10)],e);else t.visible&&e++;return e},a.prototype.initializeHeaderDrag=function(){var t=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new dc(t.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(ut,this.droppableDestroy,this))},a.prototype.initializeHeaderDrop=function(){var t=this.parent;this.droppable=new fc(t.getHeaderContent(),{accept:".e-dragclone",drop:this.drop}),this.parent.on(ut,this.droppableDestroy,this)},a.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy(),this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},a.prototype.renderCustomToolbar=function(){var t=this,e=this.parent;if(e.rowRenderingMode==="Vertical"&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&e.filterSettings.type!=="FilterBar")){for(var i=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),s=e.createElement("div",{className:"e-toolbar-items"}),r=e.createElement("div",{className:"e-toolbar-left"}),n=this.parent.allowFiltering&&this.parent.allowSorting?2:1,o=0;o<n;o++){var l=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=n===1?this.parent.allowSorting?"sort":"filter":o===1?"sort":"filter",p=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),c=e.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});p.appendChild(c);var d=new Ys({cssClass:this.parent.cssClass?this.parent.cssClass:""});d.appendTo(p),p.onclick=function(f){f.target.classList.contains("e-ressort-btn")||f.target.classList.contains("e-ressort-icon")||f.target.querySelector(".e-ressort-icon")?t.parent.showResponsiveCustomSort():t.parent.showResponsiveCustomFilter()},l.appendChild(p),r.appendChild(l)}s.appendChild(r),i.appendChild(s),e.element.insertBefore(i,this.parent.element.querySelector("."+Xt))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")},a.prototype.updateCustomResponsiveToolbar=function(t){var e=this.parent.element.querySelector(".e-responsive-toolbar");t.module==="toolbar"&&(e?ce(e):this.renderCustomToolbar())},a})(),$t=(function(){function a(t,e){this.localizer=e.getService("localization"),this.formatter=e.getService("valueFormatter"),this.parent=t,this.element=this.parent.createElement("TD",{className:He,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}return a.prototype.getGui=function(){return""},a.prototype.format=function(t,e,i){if(!u(t.format)){if(t.type==="number"&&isNaN(parseInt(e,10))&&(e=null),t.type==="dateonly"&&typeof e=="string"&&e){var s=e.split(/[^0-9.]/);e=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10))}e=this.formatter.toView(e,t.getFormatter())}return u(e)?"":e.toString()},a.prototype.evaluate=function(t,e,i,s,r,n){var o,l;if(e.column.template){var h=this.parent.isReact&&typeof e.column.template!="string"&&!(e.column.template.prototype&&e.column.template.prototype.CSPTemplate),p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,c=this.parent.printGridParent&&this.parent.printGridParent.isReact,d=["data-index"],f=Eh({},i,(o={},o[td]=r,o.column=e.column,o)),g=this.parent.element.id+e.column.uid,y="isStringTemplate";if(h||p||c){var b={index:s[d[0]]};e.column.getColumnTemplate()($(b,f),this.parent,"columnTemplate",g,this.parent[""+y],null,t)}else l=e.column.getColumnTemplate()($({index:s[d[0]]},f),this.parent,"template",g,this.parent[""+y],void 0,void 0,this.parent.root);return!h&&!p&&!c&&Ht(t,l),this.parent.notify("template-result",{template:l}),l=null,e.column.templateOptions.enableAriaLabel&&t.setAttribute("aria-label",t.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+e.column.headerText),!1}return!0},a.prototype.invokeFormatter=function(t,e,i){if(!u(t.formatter))if(wy(t.formatter,"getValue")){var s=t.formatter;e=new s().getValue(t,i)}else typeof t.formatter=="function"?e=t.formatter(t,i):e=t.formatter.getValue(t,i);return e},a.prototype.render=function(t,e,i,s,r){return this.refreshCell(t,e,i,r)},a.prototype.refreshTD=function(t,e,i,s){var r=this.parent.editSettings.mode==="Batch"&&t.classList.contains("e-editedbatchcell");if(this.parent.isReact){var n=t.cellIndex,o=t.parentElement;ce(t);var l=this.refreshCell(e,i,s,r);this.cloneAttributes(l,t),o.cells.length!==n-1?o.insertBefore(l,o.cells[parseInt(n.toString(),10)]):o.appendChild(l)}else{var h=this.refreshCell(e,i,s,r);t.innerHTML="";var p=h.getAttribute("aria-label");p&&t.setAttribute("aria-label",p);for(var c=[].slice.call(h.childNodes),d=0,f=c;d<f.length;d++){var g=f[d];t.appendChild(g)}}},a.prototype.cloneAttributes=function(t,e){for(var i=e.attributes,s=i.length,r;s--;)r=i[parseInt(s.toString(),10)],t.setAttribute(r.name,r.value)},a.prototype.refreshCell=function(t,e,i,s){var r,n=this.element.cloneNode(),o=t.column,l;t.isForeignKey&&(l=t.foreignKeyData[0]||(r={},r[o.foreignKeyValue]=o.format?null:"",r));var h=this.getGui(),p=t.isForeignKey?this.getValue(o.foreignKeyValue,l,o):this.getValue(o.field,e,o);if((o.type==="date"||o.type==="datetime")&&!u(p)&&(p=new Date(p)),o.type==="dateonly"&&!u(p)&&typeof p=="string"){var c=p.split(/[^0-9.]/);p=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))}if(p=this.format(o,p,e),h=p.toString(),o.type==="boolean"&&!o.displayAsCheckBox){var d=p!=="true"&&p!=="false"?null:p==="true"?"True":"False";h=d?this.localizer.getConstant(d):h}var f=this.invokeFormatter(o,p,e);if(h=u(o.formatter)?h:u(f)?"":f.toString(),this.evaluate(n,t,e,i,l,s)&&o.type!=="checkbox")this.appendHtml(n,this.parent.sanitize(h),o.getDomSetter?o.getDomSetter():"innerHTML");else if(o.type==="checkbox"){n.classList.add(Cr),this.parent.selectionSettings.persistSelection?p=p==="true":p=!1;var g=wr(this.parent.createElement,!1,{checked:p,label:" "});this.parent.cssClass&&x([g],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+t.rowID,g.insertBefore(this.rowChkBox.cloneNode(),g.firstChild),n.appendChild(g)}if(this.parent.checkAllRows==="Check"&&this.parent.enableVirtualization&&(t.isSelected=!0),this.setAttributes(n,t,i),o.type==="boolean"&&o.displayAsCheckBox){var y=isNaN(parseInt(p.toString(),10))?p==="true":parseInt(p.toString(),10)>0,g=wr(this.parent.createElement,!1,{checked:y,label:" "});n.innerHTML="",n.classList.add("e-gridchkbox-cell"),g.classList.add("e-checkbox-disabled"),this.parent.cssClass&&x([g],[this.parent.cssClass]),n.appendChild(g)}if(n.classList.contains("e-summarycell")&&!e.key){var b=n.getAttribute("data-mappinguid");o=this.parent.getColumnByUid(b),n.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+t.column.headerText)}return this.parent.isFrozenGrid()&&(!e||e&&!e.key)&&kh(this.parent,o,n),n},a.prototype.appendHtml=function(t,e,i){return i===void 0&&(i="innerHTML"),t[""+i]=e,t},a.prototype.setAttributes=function(t,e,i){var s=e.column;if(this.buildAttributeFromCell(t,e,s.type==="checkbox"),Fi(t,i),Fi(t,e.attributes),s.customAttributes&&Fi(t,s.customAttributes),this.parent.rowRenderingMode==="Vertical"&&Fi(t,{"data-cell":s.headerText}),s.textAlign){var r={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};r[s.textAlign.toLowerCase()]&&t.classList.add(r[s.textAlign.toLowerCase()])}s.clipMode==="Clip"||!s.clipMode&&this.parent.clipMode==="Clip"?t.classList.add("e-gridclip"):(s.clipMode==="EllipsisWithTooltip"||!s.clipMode&&this.parent.clipMode==="EllipsisWithTooltip"&&!(this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Content"||this.parent.textWrapSettings.wrapMode==="Both")))&&s.type!=="checkbox"&&t.classList.add("e-ellipsistooltip")},a.prototype.buildAttributeFromCell=function(t,e,i){var s={},r=[];e.colSpan&&(s.colSpan=e.colSpan),e.rowSpan&&(s.rowSpan=e.rowSpan),e.isTemplate&&r.push("e-templatecell"),e.isSelected&&(r.push.apply(r,["e-selectionbackground","e-active"]),i&&t.querySelector(".e-frame").classList.add("e-check")),e.isColumnSelected&&r.push.apply(r,["e-columnselection"]),e.cellType===he.Header?s[yt]=e.colIndex+1:u(e.index)||(s[yt]=e.index+1),e.visible||r.push("e-hide"),s.class=r,Fi(t,s)},a.prototype.getValue=function(t,e,i){return i.valueAccessor(t,e,i)},a})(),Sh=(function(){function a(){}return a.prototype.setOptions=function(t,e){for(var i=Object.keys(e),s=0;s<i.length;s++)Ps(t,Ns[i[parseInt(s.toString(),10)]],e[i[parseInt(s.toString(),10)]])},a.prototype.setExpand=function(t,e){Ps(t,Ns.expand,e)},a.prototype.setSort=function(t,e){Ps(t,Ns.sort,e,typeof e=="boolean")},a.prototype.setBusy=function(t,e){Ps(t,Ns.busy,e),Ps(t,Ns.invalid,null,!0)},a.prototype.setGrabbed=function(t,e,i){Ps(t,Ns.grabbed,e,i)},a.prototype.setDropTarget=function(t,e){Ps(t,Ns.dropeffect,"copy",!e)},a})();function Ps(a,t,e,i){if(i&&a){a.removeAttribute(t);return}a&&a.setAttribute(t,e)}var Ns={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},Sv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),dd=(function(a){Sv(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),e.ariaService=new Sh,e.hTxtEle=e.parent.createElement("span",{className:"e-headertext"}),e.sortEle=e.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),e.gui=e.parent.createElement("div"),e.chkAllBox=e.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":e.localizer.getConstant("SelectAllCheckbox")}}),e}return t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(e,i,s){var r=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,r,n)},t.prototype.refresh=function(e,i){this.clean(i);var s=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,i,s)},t.prototype.clean=function(e){e.innerHTML=""},t.prototype.prepareHeader=function(e,i,s){var r=e.column,n={},o="",l=this.getGui(),h;if(G(l,{"data-mappinguid":r.uid,class:"e-headercelldiv"}),u(r.headerValueAccessor)||(h=this.getValue(r.headerText,r)),this.parent.rowHeight&&this.parent.allowSorting&&r.allowSorting&&!u(r.field)&&i.classList.add("e-sort-icon"),r.type!=="checkbox"){var p=r.headerText;u(h)||(p=h);var c=this.hTxtEle.cloneNode();c[r.getDomSetter()]=this.parent.sanitize(p),l.appendChild(c)}else{r.editType="booleanedit";var d=wr(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+r.uid,d.insertBefore(this.chkAllBox.cloneNode(),d.firstChild),this.parent.cssClass&&x([d],[this.parent.cssClass]),l.appendChild(d),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,e),this.appendHtml(i,l),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&this.parent.filterSettings.type!=="FilterBar"&&r.allowFiltering&&!u(r.field)&&!(this.parent.showColumnMenu&&r.showColumnMenu)){G(s,{"data-mappinguid":"e-flmenu-"+r.uid}),o=o.length?o+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon");var f=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length){for(var g=this.parent.getForeignKeyColumns(),y=0;y<this.parent.columns.length;y++)for(var b=0;b<this.parent.filterSettings.columns.length;b++)if(this.parent.filterSettings.columns[parseInt(b.toString(),10)].field===r.field||g.length&&r.foreignKeyValue===this.parent.filterSettings.columns[parseInt(b.toString(),10)].field){s.classList.add("e-filtered"),f.push(r.field);break}}i.appendChild(s.cloneNode())}e.className&&i.classList.add(e.className),r.customAttributes&&Fi(i,r.customAttributes),this.parent.allowSorting&&r.allowSorting&&(n.sort="none",o=o.length?o+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&r.allowGrouping||this.parent.allowReordering&&r.allowReordering)&&(n.grabbed=!1,o=o.length?o+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&r.type!=="checkbox"&&!r.template&&(o=o.length?o+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(r,i);var C,S=this.parent,I=S.getColumnIndexByField(r.field);if(!u(r.headerTemplate)){var A=S.element.id+r.uid+"headerTemplate",T="isStringTemplate",L=r,_=this.parent.isReact&&typeof r.headerTemplate!="string"&&!(r.headerTemplate.prototype&&r.headerTemplate.prototype.CSPTemplate),X=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,re=this.parent.printGridParent&&this.parent.printGridParent.isReact;if(_||X||re){var ye={index:I};i.firstElementChild.innerHTML="",r.getHeaderTemplate()($(ye,L),S,"headerTemplate",A,this.parent[""+T],null,i.firstElementChild),this.parent.renderTemplates()}else C=r.getHeaderTemplate()($({index:I},L),S,"headerTemplate",A,this.parent[""+T],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",Ht(i.firstElementChild,C)}if(this.ariaService.setOptions(i,n),!u(r.headerTextAlign)||!u(r.textAlign)){var V=r.headerTextAlign||r.textAlign;V.toLowerCase()==="right"||V.toLowerCase()==="left"?i.classList.add(V.toLowerCase()==="right"?"e-rightalign":"e-leftalign"):V.toLowerCase()==="center"?i.classList.add("e-centeralign"):V.toLowerCase()==="justify"&&i.classList.add("e-justifyalign")}if(r.clipMode==="Clip"||!r.clipMode&&this.parent.clipMode==="Clip"?i.classList.add("e-gridclip"):(r.clipMode==="EllipsisWithTooltip"||!r.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&!(S.allowTextWrap&&(S.textWrapSettings.wrapMode==="Header"||S.textWrapSettings.wrapMode==="Both"))&&r.type!=="checkbox"&&i.classList.add("e-ellipsistooltip"),o){var q=this.parent.createElement("span",{id:"headerTitle-"+r.uid,innerHTML:o});q.style.display="none",i.appendChild(q),i.setAttribute("aria-describedby",q.id)}i.setAttribute("aria-rowspan",(u(e.rowSpan)?1:e.rowSpan).toString()),i.setAttribute("aria-colspan","1");var z=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if((this.parent.isReact&&this.parent.requireTemplateRef||z&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!u(r.headerTemplate)){var U=this;U.parent.renderTemplates(function(){U.parent.trigger(Al,{cell:e,node:i})})}else this.parent.trigger(Al,{cell:e,node:i});return this.parent.isFrozenGrid()&&kh(this.parent,r,i),i},t.prototype.getValue=function(e,i){return i.headerValueAccessor(e,i)},t.prototype.extendPrepareHeader=function(e,i){if(this.parent.showColumnMenu&&e.showColumnMenu&&!u(e.field)){var s=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),r=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==r.length){for(var n=0;n<this.parent.columns.length;n++)for(var o=0;o<this.parent.filterSettings.columns.length;o++)if(this.parent.filterSettings.columns[parseInt(o.toString(),10)].field===e.field){s.classList.add("e-filtered"),r.push(e.field);break}}i.classList.add("e-fltr-icon"),i.appendChild(s)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(l)}return i},t.prototype.appendHtml=function(e,i){return e.appendChild(i),e},t})($t),wv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),hp=(function(a){wv(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),e}return t.prototype.render=function(e,i,s){var r=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"data-mappinguid":e.column.uid}}),o=e.column;if(r.appendChild(n),u(o.headerTemplate)?this.appendHtml(n,this.parent.sanitize(o.headerText),o.getDomSetter()):Ht(n,o.getHeaderTemplate()(o,this.parent,"headerTemplate",null,null,null,null,this.parent.root)),e.column.toolTip&&r.setAttribute("title",e.column.toolTip),o.clipMode==="Clip"||!o.clipMode&&this.parent.clipMode==="Clip"?r.classList.add("e-gridclip"):(o.clipMode==="EllipsisWithTooltip"||!o.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&r.classList.add("e-ellipsistooltip"),!u(e.column.textAlign)){var l={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};l[e.column.textAlign.toLowerCase()]&&r.classList.add(l[e.column.textAlign.toLowerCase()])}if(e.column.customAttributes&&Fi(r,e.column.customAttributes),r.setAttribute("colspan",e.colSpan.toString()),r.setAttribute("aria-colspan",e.colSpan.toString()),r.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var h=this.parent.createElement("div");h.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",r.appendChild(h)}if(e.className&&r.classList.add(e.className),this.parent.trigger(Al,{cell:e,node:r}),Aa(o)==="Left")if(r.classList.add("e-leftfreeze"),o.border==="Left"&&r.classList.add("e-freezeleftborder"),o.index===0)Bt(r,this.parent.getIndentCount()*30,this.parent.enableRtl,"Left");else{for(var p=this.parent.getColumns(),c=this.parent.getIndentCount()*30,d=0;d<p.length&&!(o.index<p[parseInt(d.toString(),10)].index);d++)p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()));Bt(r,c,this.parent.enableRtl,"Left")}else if(Aa(o)==="Right"){r.classList.add("e-rightfreeze");for(var p=this.parent.getColumns(),c=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0,d=p.length-1;d>=0&&!(pp(o,p[parseInt(d.toString(),10)].uid)||o.index>p[parseInt(d.toString(),10)].index);d--)p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()));Bt(r,c,this.parent.enableRtl,"Right"),o.border==="Right"&&r.classList.add("e-freezerightborder")}else if(Aa(o)==="Fixed"){r.classList.add("e-fixedfreeze");var p=this.parent.getColumns(),c=0;this.parent.getVisibleFrozenLeftCount()?c=this.parent.getIndentCount()*30:this.parent.getFrozenMode()==="Right"&&(c=this.parent.groupSettings.columns.length*30);for(var d=0;d<p.length;d++)o.index>p[parseInt(d.toString(),10)].index&&(p[parseInt(d.toString(),10)].freeze==="Left"||p[parseInt(d.toString(),10)].isFrozen||p[parseInt(d.toString(),10)].freeze==="Fixed")&&p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()));Bt(r,c-1,this.parent.enableRtl,"Left"),c=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0;for(var d=p.length-1;d>=0;d--)if(o.index<p[parseInt(d.toString(),10)].index){if(pp(o,p[parseInt(d.toString(),10)].uid)||o.index>p[parseInt(d.toString(),10)].index)break;(p[parseInt(d.toString(),10)].freeze==="Right"||p[parseInt(d.toString(),10)].freeze==="Fixed")&&p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()))}Bt(r,c-1,this.parent.enableRtl,"Right")}else r.classList.add("e-unfreeze");return r},t})($t),Iv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),_l=(function(a){Iv(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-indentcell"}),e}return t.prototype.render=function(e,i){var s=this.element.cloneNode();return Fi(s,e.attributes),s},t})($t),fd=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),xv=(function(a){fd(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.cellUid=0,e.element=e.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:e.parent.element.id+"captioncell",tabindex:"-1"}}),e}return t.prototype.render=function(e,i){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var s=this.element.cloneNode(),r=this.parent,n=e.column,o=n.getDomSetter?n.getDomSetter():"innerHTML",l,h,p;i.headerText=e.column.headerText,e.isForeignKey&&(h=this.format(e.column,e.column.valueAccessor("foreignKey",i,e.column)));for(var c=e.isForeignKey?h:e.column.enableGroupByFormat?i.key:this.format(e.column,e.column.valueAccessor("key",i,e.column)),d=0;d<r.aggregates.length;d++)for(var f=function(_){if(r.getVisibleColumns()[0].field===r.aggregates[parseInt(d.toString(),10)].columns[parseInt(_.toString(),10)].field&&r.aggregates[parseInt(d.toString(),10)].columns[parseInt(_.toString(),10)].groupCaptionTemplate){var X=r.aggregates[parseInt(d.toString(),10)].columns[parseInt(_.toString(),10)].groupCaptionTemplate;if(typeof X=="string"&&X.includes("$"))p=r.aggregates[parseInt(d.toString(),10)].columns[parseInt(_.toString(),10)].groupCaptionTemplate.split("$")[0]+i[r.getVisibleColumns()[0].field][r.aggregates[parseInt(d.toString(),10)].columns[parseInt(_.toString(),10)].type]+r.aggregates[parseInt(d.toString(),10)].columns[parseInt(_.toString(),10)].groupCaptionTemplate.split("}")[1];else{var re=r.aggregates[parseInt(d.toString(),10)].columns[parseInt(_.toString(),10)],ye=re.getTemplate(he.CaptionSummary),V="";if(!u(ye)){var q=ye.fn(i[re.columnName],g.parent,ye.property,V),z=g.parent.printGridParent&&g.parent.printGridParent.isReact;(g.parent.isReact||z)&&typeof re.groupCaptionTemplate!="string"?g.parent.renderTemplates(function(){q&&q.length&&(u(r.groupSettings.captionTemplate)?s.innerText+=" "+q[0].textContent:s.appendChild(q[0]))}):q&&q.length&&(u(r.groupSettings.captionTemplate)?p=q[0].textContent:p=q)}}return"break"}},g=this,y=0;y<r.aggregates[parseInt(d.toString(),10)].columns.length;y++){var b=f(y);if(b==="break")break}if(u(r.groupSettings.captionTemplate))r.groupSettings.enableLazyLoading?s[""+o]=this.parent.sanitize(e.column.headerText)+": "+this.parent.sanitize(c)+(p?"   "+p:""):s[""+o]=this.parent.sanitize(e.column.headerText)+": "+this.parent.sanitize(c)+" - "+i.count+" "+(i.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(p?"   "+p:"");else{var C=this.parent.isReact&&typeof r.groupSettings.captionTemplate!="string"&&!(r.groupSettings.captionTemplate.prototype&&r.groupSettings.captionTemplate.prototype.CSPTemplate),S=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,I=this.parent.printGridParent&&this.parent.printGridParent.isReact;if(C||S||I){var A=r.element.id+"captionTemplate",T="groupKey",L="key";i[""+T]=i[""+L],st(r.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",A,null,null,s),this.parent.renderTemplates()}else this.parent.isVue||r.parentDetails&&r.parentDetails.parentInstObj&&r.parentDetails.parentInstObj.isVue?l=st(r.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",null,null,null,null,r.root):l=st(r.groupSettings.captionTemplate)(i);!C&&!S&&!I&&(Ht(s,l),p&&p.length&&p[0].textContent&&s.appendChild(p[0]))}return s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-label",s.innerHTML+this.localizer.getConstant("GroupCaption")),s.setAttribute("title",s.textContent),s},t})($t),Ev=(function(a){fd(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-groupcaption"}),e}return t.prototype.render=function(e,i){var s=this.element.cloneNode();return s.innerHTML="&nbsp;",s.setAttribute("colspan",e.colSpan.toString()),s},t})($t),Av=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Dv=(function(a){Av(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(e,i,s,r){var n=this.element.cloneNode();return n.setAttribute("data-mappingname",i.field),n.setAttribute("data-mappingvalue",i.key),n.setAttribute("aria-expanded",r?"true":"false"),n.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?(e.cellType=he.Indent,n.className=r?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(n.className=r?"e-recordplusexpand":"e-recordpluscollapse",n.appendChild(this.parent.createElement("a",{className:r?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:r?this.localizer.getConstant("Expanded"):this.localizer.getConstant("Collapsed")}}))),n},t})(_l),kv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Tv=(function(a){kv(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-grouptopleftcell"}),e}return t.prototype.render=function(e,i){var s=this.element.cloneNode();return s.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),e&&(e.rowSpan&&s.setAttribute("rowspan",e.rowSpan.toString()),e.rowSpan===0&&(s.style.display="none")),s},t})($t),Lv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Rv=(function(a){Lv(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-detailheadercell"}),e}return t.prototype.render=function(e,i){var s=this.element.cloneNode();return s.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),e&&(e.rowSpan&&s.setAttribute("rowspan",e.rowSpan.toString()),e.rowSpan===0&&(s.style.display="none")),s},t})($t),Mv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Fv=(function(a){Mv(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),e}return t.prototype.render=function(e,i,s){var r=this.element.cloneNode();return s&&!u(s.class)?(r.className="",r.className=s.class,r.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):r.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),e.isSelected&&r.classList.add("e-selectionbackground","e-active"),r},t})($t),Ov=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Bv=(function(a){Ov(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),e}return t.prototype.render=function(e,i){var s=this.element.cloneNode();if(s.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),e.isSelected&&(s.classList.add("e-selectionbackground"),s.classList.add("e-active")),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){s.classList.add("e-leftfreeze");var r=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;Bt(s,r,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return s},t})($t),Pv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Nv=(function(a){Pv(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-rowdragheader"}),e}return t.prototype.render=function(e,i){var s=this.element.cloneNode();if(s.appendChild(pe("div",{className:"e-emptycell"})),e&&(e.rowSpan&&s.setAttribute("rowspan",e.rowSpan.toString()),e.rowSpan===0&&(s.style.display="none")),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){s.classList.add("e-leftfreeze");var r=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;Bt(s,r,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return s},t})($t),Hv=(function(){function a(t,e){this.emptyGrid=!1,this.counter=0,this.parent=t,this.locator=e,this.data=new cv(t,e),this.l10n=e.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return a.prototype.render=function(){var t=this.parent;this.headerRenderer=this.renderer.getRenderer(oi.Header),this.contentRenderer=this.renderer.getRenderer(oi.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),t.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),this.parent.height!=="auto"&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},a.prototype.refresh=function(t){var e=this;t===void 0&&(t={requestType:"refresh"});var i=this.parent;i.notify(t.requestType+"-begin",t),i.trigger(Rt,t,function(s){if(s===void 0&&(s={requestType:"refresh"}),s.cancel){if(i.notify(Na,s),s.action==="clearFilter"&&e.parent.filterSettings.type==="Menu"){e.parent.filterSettings.columns[e.parent.filterModule.filterObjIndex]=e.parent.filterModule.prevFilterObject;var r=e.parent.showColumnMenu&&e.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",n=e.parent.element.querySelector('[data-mappinguid="'+e.parent.filterModule.column.uid+'"]').parentElement,o=n.querySelector(r);u(e.parent.filterModule.prevFilterObject)||o.classList.add("e-filtered")}if(s.action==="clear-filter"&&(e.parent.filterSettings.type==="CheckBox"||e.parent.filterSettings.type==="Excel")&&(e.parent.filterSettings.columns=e.parent.filterModule.checkboxPrevFilterObject),s.requestType==="grouping"){var l=i.groupSettings.columns.indexOf(s.columnName);if(l!==-1){i.setProperties({groupSettings:{Columns:i.groupSettings.columns.splice(l,1)}},!0),i.setProperties({sortSettings:{Columns:i.sortSettings.columns.splice(l,1)}},!0);var h=i.getColumnByField(s.columnName),p=i.getColumnHeaderByField(h.field);h.visible=!u(p)&&!p.classList.contains("e-hide")}}return}e.parent.notify(hd,s),s.requestType==="virtualscroll"&&(e.parent.getDataModule().isRemote()||"result"in e.parent.dataSource)&&s.virtualInfo&&s.virtualInfo.direction==="down"&&(e.parent.contentModule.prevInfo=s.virtualInfo),e.parent.groupModule&&s.preventFocusOnGroup&&(e.parent.groupModule.preventFocusOnGroup=s.preventFocusOnGroup);var c=["filter","clearFilter","clear-filter","add"],d=["searching","sorting","grouping","ungrouping","delete"];if(i.allowSelection&&(c.indexOf(s.action)!==-1||d.indexOf(s.requestType)!==-1)&&(i.selectionModule.rmtHdrChkbxClicked=!1,i.selectionModule.isPartialSelection&&(i.selectionModule.isHdrSelectAllClicked=!1)),i.allowPaging&&i.pageSettings.pageSizes&&i.pagerModule.pagerObj.isAllPage&&s.action==="add"&&s.requestType==="save"&&i.pagerModule.pagerObj.checkAll&&i.setProperties({pageSettings:{pageSize:i.pageSettings.pageSize+1}},!0),s.requestType==="delete"&&i.allowPaging){var f=s.data.length,g=i.pageSettings.totalRecordsCount-f,y=i.getCurrentViewRecords().length;(!(y-f)&&g&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===g||g&&g<=f)&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:g,currentPage:Math.ceil(g/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=g)}s.requestType==="reorder"&&e.parent.dataSource&&"result"in e.parent.dataSource||(s.requestType==="paging"||s.requestType==="columnstate"||s.requestType==="reorder")&&e.parent.groupSettings.enableLazyLoading&&e.parent.groupSettings.columns.length&&(e.parent.enableVirtualization?e.parent.lazyLoadRender:e.parent.contentModule).getGroupCache()[e.parent.pageSettings.currentPage]?e.contentRenderer.refreshContentRows(s):e.refreshDataManager(s)})},a.prototype.resetTemplates=function(){var t=this.parent,e=t.getColumns();if(t.detailTemplate){var i=t.element.id+"detailTemplate";Fh[""+i]=[],Ci(i)}t.groupSettings.captionTemplate&&Ci(t.element.id+"captionTemplate"),t.rowTemplate&&Ci(t.element.id+"rowTemplate"),t.toolbarTemplate&&Ci(t.element.id+"toolbarTemplate"),t.pageSettings.template&&Ci(t.element.id+"_template");for(var s=0;s<e.length;s++)e[parseInt(s.toString(),10)].template&&(Fh[t.element.id+e[parseInt(s.toString(),10)].uid]=[],Ci(t.element.id+e[parseInt(s.toString(),10)].uid)),e[parseInt(s.toString(),10)].headerTemplate&&Ci(t.element.id+e[parseInt(s.toString(),10)].uid+"headerTemplate"),e[parseInt(s.toString(),10)].filterTemplate&&Ci(t.element.id+e[parseInt(s.toString(),10)].uid+"filterTemplate");for(var r="guid",n=0;n<t.aggregates.length;n++)for(var o=0;o<t.aggregates[parseInt(n.toString(),10)].columns.length;o++){if(t.aggregates[parseInt(n.toString(),10)].columns[parseInt(o.toString(),10)].footerTemplate){var l=t.element.id+t.aggregates[parseInt(n.toString(),10)].columns[parseInt(o.toString(),10)][""+r]+"footerTemplate";Ci(l)}if(t.aggregates[parseInt(n.toString(),10)].columns[parseInt(o.toString(),10)].groupFooterTemplate){var l=t.element.id+t.aggregates[parseInt(n.toString(),10)].columns[parseInt(o.toString(),10)][""+r]+"groupFooterTemplate";Ci(l)}if(t.aggregates[parseInt(n.toString(),10)].columns[parseInt(o.toString(),10)].groupCaptionTemplate){var l=t.element.id+t.aggregates[parseInt(n.toString(),10)].columns[parseInt(o.toString(),10)][""+r]+"groupCaptionTemplate";Ci(l)}}},a.prototype.refreshComplete=function(t){this.parent.trigger(Fe,t)},a.prototype.refreshDataManager=function(t){var e=this;t===void 0&&(t={});var i=this.parent,s=i.loadingIndicator.indicatorType==="Shimmer"&&t.requestType!=="virtualscroll"&&t.requestType!=="infiniteScroll"||(t.requestType==="virtualscroll"||t.requestType==="infiniteScroll")&&i.enableVirtualMaskRow;t.requestType!=="virtualscroll"&&!t.isCaptionCollapse&&!s&&this.parent.showSpinner(),s&&i.showMaskRow(t.requestType==="virtualscroll"?t.virtualInfo.sentinelInfo.axis:t.requestType==="infiniteScroll"?t.direction:void 0),this.parent.notify(Pm,t),this.emptyGrid=!1;var r,n=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+Nt),!0),n){var o=new Ut;r=this.getFData(o,t)}r?r=r.then(function(c){var d=e.data.generateQuery().requiresCount();if(e.emptyGrid){var f=new Ut;return f.resolve({result:[],count:0}),f.promise}return e.data.getData(t,d)}):(i.allowPaging&&!i.getDataModule().dataManager.dataSource.offline&&i.pageSettings&&i.pageSettings.pageSizes&&i.pagerModule&&i.pagerModule.pagerObj&&i.pagerModule.pagerObj.isAllPage&&(i.pagerModule.pagerObj.isAllPage=void 0),r=this.data.getData(t,this.data.generateQuery().requiresCount()));var l=this.parent.getForeignKeyColumns(),h=l.length;if(this.parent.columnQueryMode==="ExcludeHidden"&&h&&(h=l.filter(function(c){return c.visible!==!1}).length),h&&(!n||this.parent.searchSettings.key.length)){var p=new Ut;r=r.then(function(c){return e.parent.notify(Qu,{dataManager:r,result:c,promise:p,action:t}),p.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(r=r.then(function(c){return e.validateGroupRecords(c)})),r.then(function(c){return e.dataManagerSuccess(c,t)}).catch(function(c){return e.dataManagerFailure(c,t)})},a.prototype.getFData=function(t,e){return this.parent.notify(Qu,{isComplex:!0,promise:t,action:e}),t.promise},a.prototype.isNeedForeignAction=function(){var t=this.parent;return!!(t.allowFiltering&&t.filterSettings.columns.length||!u(t.searchSettings.key)&&t.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},a.prototype.foreignKey=function(t){var e=this;return t.some(function(i){var s=!1;return s=e.parent.filterSettings.columns.some(function(r){return i.uid===r.uid}),!!(s||e.parent.searchSettings.key.length)})},a.prototype.sendBulkRequest=function(t){var e=this;t.requestType="batchsave";var i=this.parent;if(i.allowPaging&&i.pageSettings.pageSizes&&i.pagerModule.pagerObj.isAllPage&&i.pagerModule.pagerObj.checkAll){var s=t.changes.addedRecords.length;s&&i.setProperties({pageSettings:{pageSize:i.pageSettings.pageSize+s}},!0)}i.allowPaging&&(t.changes.addedRecords.length||t.changes.deletedRecords.length||t.changes.changedRecords.length)&&i.pageSettings&&i.pageSettings.pageSizes&&i.pagerModule&&i.pagerModule.pagerObj&&!i.getDataModule().dataManager.dataSource.offline&&i.pagerModule.pagerObj.isAllPage&&(i.pagerModule.pagerObj.isAllPage=void 0);var r=this.data.saveChanges(t.changes,this.parent.getPrimaryKeyFieldNames()[0],t.original),n=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline){this.refreshDataManager({requestType:"batchsave"});return}else r.then(function(o){e.data.getData(t,n).then(function(l){return e.dmSuccess(l,t)}).catch(function(l){return e.dmFailure(l,t)})}).catch(function(o){return e.dmFailure(o,t)})},a.prototype.dmSuccess=function(t,e){this.dataManagerSuccess(t,e)},a.prototype.dmFailure=function(t,e){this.dataManagerFailure(t,e)},a.prototype.renderEmptyRow=function(){this.emptyRow(!0)},a.prototype.emptyRow=function(t){var e=this.parent,i=this.contentRenderer.getTable().querySelector(ze);u(i)||ce(i),i=this.parent.createElement(ze,{attrs:{role:"rowgroup"}});var s=e.allowRowDragAndDrop&&u(e.rowDropSettings.targetID)?1:0;(e.detailTemplate||e.childGrid)&&++s;var r=e.editSettings.showAddNewRow&&e.editSettings.newRowPosition==="Bottom"?"e-emptyrow e-show-added-row":"e-emptyrow",n=this.parent.createElement("tr",{className:r,attrs:{role:"row"}}),o;if(e.emptyRecordTemplate){var l=e.element.id+"emptyRecordTemplate";o=this.parent.createElement("td",{attrs:{colspan:(e.getVisibleColumns().length+s+e.groupSettings.columns.length).toString()}}),e.isVue||e.parentDetails&&e.parentDetails.parentInstObj&&e.parentDetails.parentInstObj.isVue?o.appendChild(e.getEmptyRecordTemplate()(e.dataSource,e,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[1]):o.appendChild(e.getEmptyRecordTemplate()(e.dataSource,e,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[0]),e.isReact&&this.parent.renderTemplates()}else o=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(e.getVisibleColumns().length+s+(u(e.groupSettings.columns)?0:e.groupSettings.columns.length)).toString()}});e.isFrozenGrid()&&(o.classList.add("e-leftfreeze"),o.style.left="0px"),e.frozenRows&&e.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty"),n.appendChild(o),i.appendChild(n),this.contentRenderer.renderEmpty(i),t&&(this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.trigger(As,{}),this.parent.notify(Hi,{rows:[new tr({isDataRow:!0,cells:[new Tr({isDataCell:!0,visible:!0})]})]}),e.editSettings.showAddNewRow&&(e.addRecord(),this.parent.notify(br,{})))},a.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},a.prototype.updateColumnType=function(t){for(var e=this.parent.enableColumnVirtualization?this.parent.columns:this.parent.getColumns(),i,s="customFormat",r="equalTo",n=t&&t.items?t.items[0]:t,o=this.locator.getService("valueFormatter"),l=0,h=e.length;l<h;l++){i=ns(e[parseInt(l.toString(),10)].field||"",n),u(e[parseInt(l.toString(),10)][""+s])||(e[parseInt(l.toString(),10)].format=e[parseInt(l.toString(),10)][""+s]),!u(e[parseInt(l.toString(),10)].validationRules)&&!u(e[parseInt(l.toString(),10)].validationRules[""+r])&&(e[parseInt(l.toString(),10)].validationRules[""+r][0]=this.parent.element.id+e[parseInt(l.toString(),10)].validationRules[""+r][0]),e[parseInt(l.toString(),10)].isForeignColumn()&&e[parseInt(l.toString(),10)].columnData&&(i=ns(e[parseInt(l.toString(),10)].foreignKeyValue||"",e[parseInt(l.toString(),10)].columnData[0])),u(i)?e[parseInt(l.toString(),10)].type=e[parseInt(l.toString(),10)].type||null:(this.isColTypeDef=!0,e[parseInt(l.toString(),10)].type||(e[parseInt(l.toString(),10)].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var p=new xn;e[parseInt(l.toString(),10)].format&&(e[parseInt(l.toString(),10)].format.skeleton||e[parseInt(l.toString(),10)].format.format&&typeof e[parseInt(l.toString(),10)].format.format=="string")&&(e[parseInt(l.toString(),10)].setFormatter(p.getFormatFunction($({},e[parseInt(l.toString(),10)].format))),e[parseInt(l.toString(),10)].setParser(p.getParserFunction(e[parseInt(l.toString(),10)].format))),typeof e[parseInt(l.toString(),10)].format=="string"?Xl(this.locator,e[parseInt(l.toString(),10)]):!e[parseInt(l.toString(),10)].format&&e[parseInt(l.toString(),10)].type==="number"&&e[parseInt(l.toString(),10)].setParser(o.getParserFunction({format:"n2"})),e[parseInt(l.toString(),10)].type==="dateonly"&&!e[parseInt(l.toString(),10)].format&&(e[parseInt(l.toString(),10)].format="yMd",Xl(this.locator,e[parseInt(l.toString(),10)]))}},a.prototype.dataManagerSuccess=function(t,e){var i=this,s=this.parent;this.contentRenderer=this.renderer.getRenderer(oi.Content),this.headerRenderer=this.renderer.getRenderer(oi.Header),t.actionArgs=e;var r=!!(s.childGrid||s.detailTemplate),n=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!s.groupSettings.enableLazyLoading&&(e.requestType==="delete"&&!r||e.requestType==="save"&&this.parent.infiniteScrollModule.requestType==="add"&&!(s.sortSettings.columns.length||s.filterSettings.columns.length||this.parent.groupSettings.columns.length||s.searchSettings.key||r));s.trigger(Dl,t,function(o){if(!o.cancel){o.result=u(o.result)?[]:o.result;var l=Object.keys(o.result).length;if(!i.parent.isDestroyed){if(!s.getColumns().length&&!l&&!(s.columns.length&&s.columns[0]instanceof Dt)){s.hideSpinner();return}if(i.parent.isReact&&!u(e)&&!(e.requestType==="infiniteScroll"&&!i.parent.infiniteScrollSettings.enableCache)&&!e.isFrozen){var h=["columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"];e.requestType==="infiniteScroll"&&i.parent.infiniteScrollSettings.enableCache&&(h=["columnTemplate","commandsTemplate"]),Zs(i.parent,h,function(){i.extendDataManagerSuccess(t,e,l,o,n)})}else i.extendDataManagerSuccess(t,e,l,o,n)}}})},a.prototype.extendDataManagerSuccess=function(t,e,i,s,r){var n=this.parent;if(this.isInfiniteEnd(e)&&!i){this.parent.notify(tp,{e,result:t.result,count:t.count,agg:t.aggregates});return}if(this.parent.isEdit=!1,this.parent.notify(Fm,{}),this.parent.notify(Ol,{}),e&&!((e.requestType==="infiniteScroll"||e.requestType==="delete"||e.action==="add")&&n.enableInfiniteScrolling)&&this.parent.notify(ov,{type:"refreshCommandColumn"}),this.contentRenderer.prevCurrentView=!u(this.parent.currentViewData)&&this.parent.currentViewData.slice(),n.currentViewData=s.result,n.notify(Jm,{args:e,data:s.result}),s.count&&!n.allowPaging&&(n.enableVirtualization||n.enableInfiniteScrolling)&&(n.totalDataRecordsCount=s.count),!i&&s.count&&n.allowPaging&&e&&e.requestType!=="delete"){this.parent.groupSettings.enableLazyLoading&&(e.requestType==="grouping"||e.requestType==="ungrouping")&&this.parent.notify(lm,e),n.prevPageMoving=!0,n.pageSettings.totalRecordsCount=s.count,e.requestType!=="paging"&&(n.pageSettings.currentPage=Math.ceil(s.count/n.pageSettings.pageSize)),n.dataBind();return}if((!n.getColumns().length&&i||!this.isLayoutRendered)&&!Pi(n)&&(n.removeMaskRow(),this.updatesOnInitialRender(s)),!this.isColTypeDef&&n.getCurrentViewRecords()&&(this.data.dataManager.dataSource.offline&&n.dataSource&&n.dataSource.length?this.updateColumnType(n.dataSource[0]):this.updateColumnType(n.getCurrentViewRecords()[0])),!this.parent.isInitialLoad&&this.parent.groupSettings.disablePageWiseAggregates&&!this.parent.groupSettings.columns.length&&(s.result=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData),(this.parent.isReact||this.parent.isVue)&&!u(e)&&e.requestType!=="infiniteScroll"&&!e.isFrozen&&Zs(this.parent,["footerTemplate"]),this.parent.isAngular&&this.parent.allowGrouping&&this.parent.groupSettings.captionTemplate&&!(!u(e)&&e.requestType==="infiniteScroll")&&this.parent.destroyTemplate(["groupSettings_captionTemplate"]),this.parent.notify(Ar,$({count:s.count,result:s.result,aggregates:s.aggregates,loadSummaryOnEmpty:!1},e)),(n.groupSettings.columns.length||e&&e.requestType==="ungrouping")&&e&&e.requestType!=="filtering"&&this.headerRenderer.refreshUI(),i){if(Pi(n)){var o="content";e.scrollTop={top:this.contentRenderer[""+o].scrollTop}}r?this.parent.notify(tp,{e,result:t.result,count:t.count,agg:t.aggregates}):this.parent.enableImmutableMode?this.contentRenderer.immutableModeRendering(e):this.contentRenderer.refreshContentRows(e)}else{if(e&&e.isCaptionCollapse)return;if(!n.getColumns().length){n.element.innerHTML="",alert(this.l10n.getConstant("EmptyDataSourceError"));return}if(this.contentRenderer.setRowElements([]),this.contentRenderer.setRowObjects([]),this.ariaService.setBusy(this.parent.getContent().querySelector("."+Nt),!1),n.removeMaskRow(),this.renderEmptyRow(),n.enableColumnVirtualization&&!i&&this.parent.notify(nt,{rows:n.getRowsObject(),args:{}}),e){var l=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(l,e),e.requestType==="batchsave"&&(e.cancel=!1,e.rows=[],e.isFrozen=!e.isFrozen,this.parent.trigger(Fe,e))}this.parent.autoFit&&this.parent.preventAdjustColumns(),this.parent.hideSpinner()}this.parent.notify(mm,{}),this.setRowCount(this.parent.getCurrentViewRecords().length),"query"in t&&(this.parent.getDataModule().isQueryInvokedFromData=!1)},a.prototype.dataManagerFailure=function(t,e){u(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+Nt),{busy:!1,invalid:!0}),this.setRowCount(1)),this.parent.trigger(Ug,t&&t.error?t:{error:t}),this.parent.hideSpinner(),this.parent.removeMaskRow(),!(e.requestType==="save"||e.requestType==="delete"||e.name==="bulk-save")&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:t}))},a.prototype.setRowCount=function(t){this.ariaService.setOptions(this.parent.element,{rowcount:t?t.toString():"1"})},a.prototype.isInfiniteEnd=function(t){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&t.requestType==="delete"},a.prototype.updatesOnInitialRender=function(t){this.isLayoutRendered=!0;var e=!1;this.parent.columns.length<1&&(this.buildColumns(t.result[0]),e=!0),Wa(this.parent.columns,null,this.parent),e&&this.parent.notify(jl,{}),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(pn,{})},a.prototype.iterateComplexColumns=function(t,e,i){for(var s=Object.keys(t),r=0;r<s.length;r++){var n=typeof t[s[parseInt(r.toString(),10)]]=="object"&&t[s[parseInt(r.toString(),10)]]&&!(t[s[parseInt(r.toString(),10)]]instanceof Date)?Object.keys(t[s[parseInt(r.toString(),10)]]):[];n.length?this.iterateComplexColumns(t[s[parseInt(r.toString(),10)]],e+(s[parseInt(r.toString(),10)]+"."),i):(i[this.counter]=e+s[parseInt(r.toString(),10)],this.counter++)}},a.prototype.buildColumns=function(t){var e=[],i={};this.iterateComplexColumns(t,"",i);for(var s=Object.keys(i).filter(function(o){return i[""+o]!=="BlazId"}).map(function(o){return i[""+o]}),r=0,n=s.length;r<n;r++)e[parseInt(r.toString(),10)]={field:s[parseInt(r.toString(),10)]},this.parent.enableColumnVirtualization&&(e[parseInt(r.toString(),10)].width=u(e[parseInt(r.toString(),10)].width)?200:e[parseInt(r.toString(),10)].width);this.parent.setProperties({columns:e},!0)},a.prototype.instantiateRenderer=function(){this.renderer.addRenderer(oi.Header,new Cv(this.parent,this.locator)),this.renderer.addRenderer(oi.Content,new bv(this.parent,this.locator));var t=this.locator.getService("cellRendererFactory");t.addCellRenderer(he.Header,new dd(this.parent,this.locator)),t.addCellRenderer(he.Data,new $t(this.parent,this.locator)),t.addCellRenderer(he.StackedHeader,new hp(this.parent,this.locator)),t.addCellRenderer(he.Indent,new _l(this.parent,this.locator)),t.addCellRenderer(he.GroupCaption,new xv(this.parent,this.locator)),t.addCellRenderer(he.GroupCaptionEmpty,new Ev(this.parent,this.locator)),t.addCellRenderer(he.Expand,new Dv(this.parent,this.locator)),t.addCellRenderer(he.HeaderIndent,new Tv(this.parent,this.locator)),t.addCellRenderer(he.StackedHeader,new hp(this.parent,this.locator)),t.addCellRenderer(he.DetailHeader,new Rv(this.parent,this.locator)),t.addCellRenderer(he.RowDragHIcon,new Nv(this.parent,this.locator)),t.addCellRenderer(he.DetailExpand,new Fv(this.parent,this.locator)),t.addCellRenderer(he.DetailFooterIntent,new _l(this.parent,this.locator)),t.addCellRenderer(he.RowDragIcon,new Bv(this.parent,this.locator))},a.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(this.parent.on(yh,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(os,this.refresh,this),this.parent.on(fm,this.refreshComplete,this),this.parent.on(vm,this.sendBulkRequest,this),this.parent.on(ed,function(){t.emptyGrid=!0},this),this.parent.on(pn,this.dynamicColumnChange,this))},a.prototype.validateGroupRecords=function(t){var e=this,i=t.result.length-1;if(i<0)return Promise.resolve(t);var s=t.result[0],r=t.result[parseInt(i.toString(),10)],n=[],o=function(b){for(var C=[s,r],S=0;S<C.length;S++)n.push(new we("field","==",C[parseInt(S.toString(),10)].field).and(e.getPredicate("key","equal",C[parseInt(S.toString(),10)].key)));b.where(we.or(n))},l=new se;o(l);var h=new N(t.result),p=h.executeLocal(l),c=this.data.generateQuery(!0),d=[];if(this.data.isRemote()){for(var f=[s,r],g=0;g<f.length;g++)d.push(this.getPredicate(f[parseInt(g.toString(),10)].field,"equal",f[parseInt(g.toString(),10)].key));c.where(we.or(d))}else o(c);var y=new Ut;return this.data.getData({},c).then(function(b){e.updateGroupInfo(p,b.result),y.resolve(t)}).catch(function(b){return y.reject(b)}),y.promise},a.prototype.getPredicate=function(t,e,i){return i instanceof Date?Ks({field:t,operator:e,value:i}):new we(t,e,i)},a.prototype.updateGroupInfo=function(t,e){for(var i=new N(e),s=t,r=0;r<s.length;r++){var n=i.executeLocal(new se().where(new we("field","==",s[parseInt(r.toString(),10)].field).and(this.getPredicate("key","equal",s[parseInt(r.toString(),10)].key))))[0];if(!u(n)){s[parseInt(r.toString(),10)].count=n.count;var o=s[parseInt(r.toString(),10)].items,l=n.items;o.GroupGuid&&(s[parseInt(r.toString(),10)].items=this.updateGroupInfo(s[parseInt(r.toString(),10)].items,n.items));for(var h=this.parent.aggregates,p=0;p<h.length;p++)for(var c=h[parseInt(p.toString(),10)],d=0;d<c.columns.length;d++)for(var f=c.columns[parseInt(d.toString(),10)],g=f.type instanceof Array?f.type:[f.type],y=0;y<g.length;y++){var b=f.field+" - "+g[parseInt(y.toString(),10)].toLowerCase(),C=o.level?l.records:n.items,S=this.parent;if(g[parseInt(y.toString(),10)]==="Custom"){var I=o.level?l:n,A=f.customAggregate;typeof A=="string"&&(A=H(A,window)),s[parseInt(r.toString(),10)].aggregates[""+b]=A?A.call(S,I,c.columns[parseInt(d.toString(),10)]):""}else s[parseInt(r.toString(),10)].aggregates[""+b]=P.aggregates[g[parseInt(y.toString(),10)].toLowerCase()](C,c.columns[parseInt(d.toString(),10)].field)}}}return t},a})(),Vv=(function(){function a(){this.cellRenderMap={}}return a.prototype.addCellRenderer=function(t,e){t=typeof t=="string"?t:ws(he,t),u(this.cellRenderMap[""+t])&&(this.cellRenderMap[""+t]=e)},a.prototype.getCellRenderer=function(t){if(t=typeof t=="string"?t:ws(he,t),u(this.cellRenderMap[""+t]))throw"The cellRenderer "+t+" is not found";return this.cellRenderMap[""+t]},a})(),zv=(function(){function a(t,e){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return a.prototype.addEventListener=function(){this.evtHandlers=[{event:Qa,handler:this.closeCustomDialog},{event:zl,handler:this.refreshCustomFilterOkBtn},{event:ql,handler:this.renderResponsiveContextMenu},{event:ad,handler:this.renderCustomFilterDiv},{event:od,handler:this.customExFilterClose},{event:nd,handler:this.refreshCustomFilterClearBtn}],yi(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(Fe,this.onActionCompleteFn)},a.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},a.prototype.renderCustomFilterDiv=function(){if(!u(this.customResponsiveDlg)){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),e=t.querySelector(".e-dlg-custom-header"),i=t.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",e.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var s=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),s.appendChild(this.customExcelFilterParent)}},a.prototype.renderResponsiveContextMenu=function(t){if(this.action===Ce.isFilter&&!u(this.customResponsiveDlg)){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),s=i.querySelector(".e-dlg-closeicon-btn"),r=i.querySelector(".e-dlg-custom-header");if(t.isOpen){e.firstChild.style.display="none",e.appendChild(t.target),s.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",r.innerHTML=t.header;var n=this.parent.createElement("button"),o=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});n.appendChild(o),this.backBtn=new Ys({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(n),r.parentElement.insertBefore(n,r)}else this.backBtn&&!this.isCustomDlgRender&&(e.firstChild.style.display="",ce(this.backBtn.element),s.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),r.innerHTML=this.getHeaderTitle({action:Ce.isFilter},t.col))}},a.prototype.refreshCustomFilterClearBtn=function(t){this.filterClearBtn&&(this.isFiltered=t.isFiltered,this.filterClearBtn.element.style.display=t.isFiltered?"":"none")},a.prototype.refreshCustomFilterOkBtn=function(t){this.saveBtn&&(this.saveBtn.disabled=t.disabled),this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=t.disabled)},a.prototype.columnMenuResponsiveContent=function(t,e,i){var s=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+t.toLowerCase()+"div"+(i?" e-disabled":"")}),r=this.parent.createElement("span",{className:"e-icons e-res"+t.toLowerCase()+"-icon e-btn-icon"}),n=this.parent.createElement("span",{innerHTML:e,className:"e-rescolumn-menu e-res-header-text"});s.appendChild(r),s.appendChild(n),this.customColumnDiv.appendChild(s)},a.prototype.renderResponsiveContent=function(t,e){var i=this,s=this.parent,r=this.action===Ce.isColumnChooser;if(t||r)return this.filterParent=this.parent.createElement("div",{className:(r?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(r?"columchooser":t.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=s.createElement("div",{className:"columndiv columnmenudiv"}),this.customColumnDiv.style.width="100%",this.parent.showColumnMenu&&this.parent.rowRenderingMode==="Horizontal"&&this.action===Ce.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",s.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",s.localeObj.getConstant("AutoFit")),e.allowGrouping&&s.allowGrouping&&(this.columnMenuResponsiveContent("Group",s.localeObj.getConstant("Group"),s.groupSettings.columns.indexOf(e.field)>=0),this.columnMenuResponsiveContent("UnGroup",s.localeObj.getConstant("Ungroup"),s.groupSettings.columns.indexOf(e.field)<0)),e.allowSorting&&s.allowSorting){for(var n="None",o=this.parent.sortSettings.columns,l=0;l<o.length;l++)if(o[parseInt(l.toString(),10)].field===e.field){n=o[parseInt(l.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",s.localeObj.getConstant("SortAscending"),n==="Ascending"),this.columnMenuResponsiveContent("descending",s.localeObj.getConstant("SortDescending"),n==="Descending")}s.showColumnChooser&&this.columnMenuResponsiveContent("Column",s.localeObj.getConstant("Columnchooser")),e.allowFiltering&&s.allowFiltering&&this.columnMenuResponsiveContent("Filter",s.localeObj.getConstant("FilterMenu"))}else{var h=s.getColumns(),p=s.createElement("div",{className:"e-ressortbutton-parent"}),c=[],d=this.action===Ce.isSort,f=this.action===Ce.isFilter;if(f)for(var l=0;l<s.filterSettings.columns.length;l++)c.push(s.filterSettings.columns[parseInt(l.toString(),10)].field);for(var l=0;l<h.length;l++)if(!(!h[parseInt(l.toString(),10)].visible||!h[parseInt(l.toString(),10)].allowSorting&&d||!h[parseInt(l.toString(),10)].allowFiltering&&f)){var g=s.createElement("div",{className:"e-responsivecoldiv"});g.setAttribute("data-mappingname",h[parseInt(l.toString(),10)].field),g.setAttribute("data-mappinguid",h[parseInt(l.toString(),10)].uid);var y=s.createElement("span",{innerHTML:h[parseInt(l.toString(),10)].headerText,className:"e-res-header-text"});if(g.appendChild(y),this.customColumnDiv.appendChild(g),d){var b=this.getSortedFieldsAndDirections("field"),C=b.indexOf(h[parseInt(l.toString(),10)].field),S=s.createElement("button",{id:s.element.id+h[parseInt(l.toString(),10)].field+"sortbutton"}),I=p.cloneNode();I.appendChild(S),g.appendChild(I);var A=new Ys({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"});A.appendTo(S);var T=void 0;u(this.parent.sortSettings.columns[parseInt(C.toString(),10)])||(T=this.parent.sortSettings.columns[parseInt(C.toString(),10)].direction==="Ascending"?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText")),S.innerHTML=C>-1?T:this.parent.localeObj.getConstant("NoneText"),S.onclick=function(re){i.sortButtonClickHandler(re.target)}}if(f&&c.indexOf(h[parseInt(l.toString(),10)].field)>-1){var L=s.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),_=s.createElement("span",{className:"e-icons e-res-icon e-filterset"});_.setAttribute("data-coltype",h[parseInt(l.toString(),10)].type),L.appendChild(_),g.appendChild(L)}}}return v.add(this.customColumnDiv,E.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},a.prototype.getSortedFieldsAndDirections=function(t){for(var e=[],i=0;i<this.parent.sortSettings.columns.length;i++)e.push(this.parent.sortSettings.columns[parseInt(i.toString(),10)][""+t]);return e},a.prototype.sortButtonClickHandler=function(t){if(t){var e=F(t,"e-responsivecoldiv"),i=e.getAttribute("data-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(t));var s=t.textContent,r=s===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):s===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),n=r===this.parent.localeObj.getConstant("AscendingText")?"Ascending":r===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";t.innerHTML=r,this.setSortedCols(i,n)}},a.prototype.resetSortButtons=function(t){for(var e=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<e.length;i++)e[parseInt(i.toString(),10)]!==t&&(e[parseInt(i.toString(),10)].innerHTML=this.parent.localeObj.getConstant("NoneText"))},a.prototype.setSortedCols=function(t,e){var i=this.getCurrentSortedFields(),s=i.indexOf(t);this.parent.allowMultiSorting&&s>-1&&(this.sortedCols.splice(s,1),this.sortPredicate.splice(s,1)),this.isSortApplied=!0,e!=="None"&&(this.sortedCols.push(t),this.sortPredicate.push({field:t,direction:e}))},a.prototype.getCurrentSortedFields=function(){for(var t=[],e=0;e<this.sortedCols.length;e++)t.push(this.sortedCols[parseInt(e.toString(),10)]);return t},a.prototype.customFilterColumnClickHandler=function(t){var e=this.parent,i=t.target;if(F(i,"columnmenudiv")&&this.action===Ce.isColMenu&&!F(i,"e-disabled")){var s=this.menuCol?this.menuCol:this.filteredCol;F(i,"e-responsiveautofitalldiv")?(e.autoFitColumns([]),this.closeCustomFilter()):F(i,"e-responsiveautofitdiv")?(e.autoFitColumns(s.field),this.closeCustomFilter()):F(i,"e-responsivegroupdiv")?(e.groupColumn(s.field),this.closeCustomFilter()):F(i,"e-responsiveungroupdiv")?(e.ungroupColumn(s.field),this.closeCustomFilter()):F(i,"e-responsiveascendingdiv")?(e.sortColumn(s.field,"Ascending"),this.closeCustomFilter()):F(i,"e-responsivedescendingdiv")?(e.sortColumn(s.field,"Descending"),this.closeCustomFilter()):F(i,"e-responsivecolumndiv")?(e.notify(Xs,{action:5}),e.showResponsiveCustomColumnChooser()):F(i,"e-responsivefilterdiv")&&(e.notify(Xs,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,e.filterModule&&e.filterModule.responsiveDialogRenderer.showResponsiveDialog(s)),t.preventDefault()}if(this.action===Ce.isFilter&&e.filterSettings.type!=="FilterBar"){if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){var r=i.getAttribute("data-mappingname");if(r||(r=i.parentElement.getAttribute("data-mappingname")),r){var n=e.getColumnByField(r);this.isRowResponsive=!0,this.showResponsiveDialog(n)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){var o=F(i,"e-responsivecoldiv");if(o){var r=o.getAttribute("data-mappingname"),n=e.getColumnByField(r);(n.filter.type==="Menu"||!n.filter.type&&e.filterSettings.type==="Menu")&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(n),this.removeCustomDlgFilterEle(i)}}}},a.prototype.showResponsiveDialog=function(t,e){if(this.isCustomDialog&&this.action===Ce.isFilter&&!this.isRowResponsive||e&&this.action===Ce.isColMenu)this.menuCol=e,this.renderCustomFilterDialog(null,e);else{if(this.filteredCol=t,this.renderResponsiveDialog(t),this.parent.enableAdaptiveUI&&t&&(this.parent.filterModule.setFilterModel(t),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(t,void 0))),this.action===Ce.isColumnChooser&&this.parent.notify(Jo,{action:"open"}),this.action===Ce.isSort){var i={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(qu,i),i.cancel)return}if(this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element),this.parent.enableAdaptiveUI&&this.parent.filterSettings&&(this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel")&&this.parent.filterSettings.enableInfiniteScrolling&&this.parent.filterSettings.loadingIndicator==="Shimmer"){var s=this.parent.filterSettings.type==="CheckBox"?this.parent.filterModule.filterModule.checkBoxBase:this.parent.filterModule.filterModule.excelFilterBase;s.showMask()}}},a.prototype.setTopToChildDialog=function(t){var e=t.querySelector(".e-dialog");if(e){var i=t.querySelector(".e-dlg-header-content").getBoundingClientRect().height;e.style.top=i+"px"}},a.prototype.renderCustomFilterDialog=function(t,e){var i=this.parent,s=this.action===Ce.isColMenu;if(!(this.action===Ce.isFilter&&i.filterSettings.type==="FilterBar")){var r=s?"e-customcolumnmenudiv ":"",n=this.parent.createElement("div",{id:i.element.id+(s?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?r+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:r+"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(n),this.customFilterDlg=this.getDialogOptions(t,!0,null,e);var o={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(qu,o),!o.cancel&&(this.customFilterDlg.appendTo(n),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},a.prototype.getDialogOptions=function(t,e,i,s){var r=new bn({isModal:!0,showCloseIcon:!(i==="columnchooser"&&this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization),closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(t,s),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),n="isStringTemplate";if(r[""+n]=!0,e){r.header=this.renderResponsiveHeader(t,void 0,!0);var o=this.action===Ce.isColMenu?"e-customcolumnmenu ":"";r.cssClass=o+"e-customfilter"}else r.header=this.renderResponsiveHeader(t),r.cssClass=this.parent.rowRenderingMode==="Vertical"&&this.action===Ce.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i;return r},a.prototype.renderResponsiveDialog=function(t){var e=this.parent;if(!(this.action===Ce.isFilter&&e.filterSettings.type==="FilterBar")){var i=this.action===Ce.isFilter?"filter":"sort";i=this.action===Ce.isColumnChooser?"columnchooser":i;var s=this.parent.createElement("div",{id:e.element.id+"responsive"+i,className:this.parent.cssClass?"e-res"+i+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(s),this.customResponsiveDlg=this.getDialogOptions(t,!1,i),this.customResponsiveDlg.appendTo(s)}},a.prototype.dialogCreated=function(){qy(this.parent)},a.prototype.dialogOpen=function(){if(this.action===Ce.isSort&&this.parent.allowMultiSorting)for(var t=0;t<this.parent.sortSettings.columns.length;t++){this.sortedCols.push(this.parent.sortSettings.columns[parseInt(t.toString(),10)].field);var e=this.parent.sortSettings.columns[parseInt(t.toString(),10)].field,i=this.parent.sortSettings.columns[parseInt(t.toString(),10)].direction;this.sortPredicate.push({field:e,direction:i})}},a.prototype.beforeDialogClose=function(t){if(this.isDialogClose=t.element&&!t.element.querySelector(".e-xl-customfilterdiv")&&t.element.classList.contains("e-resfilterdiv"),this.action===Ce.isFilter){if(t.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):t.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu){this.parent.notify(Xs,{action:4});var e=document.querySelector(".e-resfilter");e&&ce(e)}}else if(this.action===Ce.isSort)this.closeCustomDialog();else if(this.action===Ce.isColMenu){this.closeCustomFilter();var e=document.querySelector(".e-rescolummenu");e&&ce(e)}else if(this.action===Ce.isColumnChooser){this.parent.notify(Jo,{action:"clear"});var e=document.querySelector(".e-rescolumnchooser");e&&ce(e),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu&&this.parent.notify(Xs,{action:4}),this.isCustomDialog=!1,this.isDialogClose=!1}this.parent.off(Ca,this.keyHandler)},a.prototype.sortColumn=function(){if(!this.isSortApplied){this.closeCustomDialog();return}this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var t=0;t<this.sortPredicate.length;t++)this.parent.sortColumn(this.sortPredicate[parseInt(t.toString(),10)].field,this.sortPredicate[parseInt(t.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()},a.prototype.getHeaderTitle=function(t,e){var i=this.parent,s;return this.action===Ce.isEdit?s=i.localeObj.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.action===Ce.isAdd?s=i.localeObj.getConstant("AddFormTitle"):this.action===Ce.isFilter?s=e?e.headerText||e.field:i.localeObj.getConstant("FilterTitle"):this.action===Ce.isSort?s=i.localeObj.getConstant("Sort"):this.action===Ce.isColMenu?s=i.localeObj.getConstant("ColumnMenu"):this.action===Ce.isColumnChooser&&(s=i.localeObj.getConstant("ChooseColumns")),s},a.prototype.getDialogName=function(t){var e;return t===Ce.isAdd||t===Ce.isEdit?e="dialogEdit_wrapper_title":t===Ce.isFilter?e="responsive_filter_dialog_wrapper":t===Ce.isColumnChooser&&(e="responsive_column_chooser_dialog_wrapper"),e},a.prototype.getButtonText=function(t){var e;return t===Ce.isAdd||t===Ce.isEdit?e="Save":(t===Ce.isFilter||this.action===Ce.isSort||t===Ce.isColumnChooser||this.action===Ce.isColumnChooser)&&(e="OKButton"),e},a.prototype.renderResponsiveHeader=function(t,e,i){var s=this,r=this.parent;r.on(Ca,this.keyHandler,this);var n=r.element.id+this.getDialogName(this.action);if(this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization&&this.getHeaderTitle(e,t)===r.localeObj.getConstant("ChooseColumns")){var o=this.parent.columnChooserModule.renderHeader();return o}var l=r.createElement("div",{className:"e-res-custom-element"}),h=r.createElement("div",{className:"e-dlg-custom-header",id:n});h.innerHTML=this.getHeaderTitle(e,t),l.appendChild(h);var p=r.createElement("button");i||(this.saveBtn=new Ys({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),p.innerHTML=r.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(p),p.onclick=function(b){s.dialogHdrBtnClickHandler()});var c=this.action===Ce.isSort,d=this.action===Ce.isFilter;if(d||c){var f=c?"sort":"filter",g=r.createElement("button");if(this.filterClearBtn=new Ys({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+f+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+f+"-clear-btn"}),d){var y=r.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});g.appendChild(y)}else g.innerHTML=r.localeObj.getConstant("Clear");l.appendChild(g),this.filterClearBtn.appendTo(g),g.onclick=function(b){F(b.target,"e-customfilter")?(s.parent.filterModule.clearFiltering(),s.removeCustomDlgFilterEle()):d?s.filterClear():(s.resetSortButtons(),s.sortedCols=[],s.sortPredicate=[],s.isSortApplied=!0)},l.appendChild(g)}return i||l.appendChild(p),l},a.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},a.prototype.removeCustomFilterElement=function(){var t=document.getElementById(this.parent.element.id+"customcolumnmenu");if(t){ce(t);var e=document.querySelector(".e-customfilter");e&&ce(e)}var i=document.querySelector(".e-rescolumnchooser");i&&ce(i)},a.prototype.hideResponsiveColumnChooser=function(){var t=document.querySelector(".e-rescolumnchooser");t&&(ce(t),this.isCustomDialog=!1,this.isDialogClose=!1)},a.prototype.dialogHdrBtnClickHandler=function(){this.action===Ce.isEdit||this.action===Ce.isAdd?this.parent.endEdit():this.action===Ce.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===Ce.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===Ce.isColumnChooser&&(this.parent.notify(Jo,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},a.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var t=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");ce(t);return}this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},a.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var t=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&t&&(this.customResponsiveDlg.destroy(),ce(t)),this.closeCustomFilter(),this.action===Ce.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},a.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var t=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&t&&(this.customFilterDlg.destroy(),ce(t))}this.isCustomDialog=!1,this.isDialogClose=!1},a.prototype.removeCustomDlgFilterEle=function(t){if(t)t.parentElement.classList.contains("e-filtersetdiv")?ce(t.parentElement):ce(t);else for(var e=this.customColumnDiv.children,i=0;i<e.length;i++)t=e[parseInt(i.toString(),10)].querySelector(".e-filtersetdiv"),t&&(ce(t),i--)},a.prototype.keyHandler=function(t){t.keyCode===13&&(this.action===Ce.isFilter&&t.target.classList.contains("e-searchinput")||this.action===Ce.isEdit||this.action===Ce.isAdd)&&this.dialogHdrBtnClickHandler()},a.prototype.editComplate=function(t){(t.requestType==="save"||t.requestType==="cancel")&&this.parent.off(Ca,this.keyHandler)},a.prototype.removeEventListener=function(){this.customColumnDiv&&v.remove(this.customColumnDiv,E.isDevice?"touchend":"click",this.customFilterColumnClickHandler),yi(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(Fe,this.onActionCompleteFn)},a})(),qv=(function(){function a(){this.services={}}return a.prototype.register=function(t,e){u(this.services[""+t])&&(this.services[""+t]=e)},a.prototype.getService=function(t){if(u(this.services[""+t]))throw"The service "+t+" is not registered";return this.services[""+t]},a.prototype.registerAdaptiveService=function(t,e,i){e?(t.responsiveDialogRenderer=new zv(t.parent,t.serviceLocator),t.responsiveDialogRenderer.action=i):t.responsiveDialogRenderer&&(t.responsiveDialogRenderer.removeEventListener(),t.responsiveDialogRenderer=void 0)},a})(),Wv=(function(){function a(){this.rendererMap={}}return a.prototype.addRenderer=function(t,e){var i=ws(oi,t);u(this.rendererMap[""+i])&&(this.rendererMap[""+i]=e)},a.prototype.getRenderer=function(t){var e=ws(oi,t);if(u(this.rendererMap[""+e]))throw"The renderer "+e+" is not found";return this.rendererMap[""+e]},a})(),wh=(function(){function a(t){this.parent=t}return a.prototype.setWidthToColumns=function(){var t=0,e=this.parent.getColumnIndexesInView(),i=!0,s=0;if(this.parent.allowGrouping)for(var r=this.parent.groupSettings.columns.length;t<r;t++){if(this.parent.enableColumnVirtualization&&e.indexOf(t)===-1){i=!1;continue}this.setColumnWidth(new Dt({width:"30px"}),t)}(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new Dt({width:"30px"}),t),t++),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(this.setColumnWidth(new Dt({width:"30px"}),t),t++);for(var n=this.parent.getColumns(),o=0;o<n.length;o++)this.setColumnWidth(n[parseInt(o.toString(),10)],i&&this.parent.enableColumnVirtualization?void 0:o+t);if(this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&this.setColumnWidth(new Dt({width:"30px"}),this.parent.groupSettings.columns.length+n.length),s=this.getTableWidth(this.parent.getColumns()),s!=="auto"){this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(s);var l=n.filter(function(c){return!u(c.maxWidth)}),h=this.parent.getHeaderTable(),p=this.parent.getContentTable();this.parent.allowResizing&&this.parent.element.getBoundingClientRect().width>s&&l.length===n.length&&h&&p&&x([h,p],["e-tableborder"])}},a.prototype.setMinwidthBycalculation=function(t){var e=this,i=0,s=this.parent.getColumns().filter(function(c){return e.parent.allowResizing?(u(c.width)||c.width==="auto")&&u(c.maxWidth):u(c.width)||c.width==="auto"});if(s.length){!u(this.parent.width)&&this.parent.width!=="auto"&&typeof this.parent.width=="string"&&this.parent.width.indexOf("%")===-1?i=parseInt(this.parent.width,10)-t:i=this.parent.element.getBoundingClientRect().width-t;for(var r=0,n=0,o=s;n<o.length;n++){var l=o[n];r+=u(l.minWidth)?0:typeof l.minWidth=="string"?parseInt(l.minWidth,10):l.minWidth}for(var h=0;h<s.length;h++){t===0&&this.parent.allowResizing&&this.isWidthUndefined()&&h!==s.length-1&&this.setUndefinedColumnWidth(s);var p=this.parent.getColumnIndexByField(s[parseInt(h.toString(),10)].field)+this.parent.getIndentCount();t!==0&&i<r?this.setWidth(s[parseInt(h.toString(),10)].minWidth,p):t!==0&&i>r&&this.setWidth("",p,!0)}}},a.prototype.setUndefinedColumnWidth=function(t){for(var e=0;e<t.length;e++)e!==t.length-1&&(t[parseInt(e.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(t[parseInt(e.toString(),10)].field)))},a.prototype.setColumnWidth=function(t,e,i){if(!(this.parent.getColumns().length<1)){var s=u(e)?this.parent.getNormalizedColumnIndex(t.uid):e,r=this.getWidth(t),n=this.getTableWidth(this.parent.getColumns());if(r!==null){if(this.setWidth(r,s),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&n!=="auto"&&this.setMinwidthBycalculation(n),this.parent.allowResizing&&(i==="resize"||this.parent.getFrozenColumns())){var o=this.parent.getContentTable();this.setWidthToTable(this.parent.getFrozenColumns()&&o.style.width.indexOf("px")===-1&&n<o.clientWidth)}this.parent.notify(Zc,{index:s,width:r,column:t,module:i})}}},a.prototype.setWidth=function(t,e,i){if(this.parent.groupSettings.columns.length>e&&Jl(this.parent)&&!(this.parent.resizeModule&&this.parent.resizeModule.resizeProcess)){var s=this.parent.element.offsetWidth;t=(30/s*100).toFixed(1)+"%"}var r=this.parent.getHeaderTable(),n=this.parent.getContentTable(),o=ve(t),l=r.querySelector(li).children[parseInt(e.toString(),10)];l&&!i?l.style.width=o:l&&i&&(l.style.width="");var h=n.querySelector(li).children[parseInt(e.toString(),10)];if(h&&!i?h.style.width=o:h&&i&&(h.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var p=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),c=[],d=0;d<p.length;d++)if(F(p[parseInt(d.toString(),10)],"e-grid").id===this.parent.element.id)for(var f=0;f<p[parseInt(d.toString(),10)].querySelector("colgroup").children.length;f++)c.push(p[parseInt(d.toString(),10)].querySelector("colgroup").children[parseInt(f.toString(),10)]);p.length&&c.length&&c[parseInt(e.toString(),10)]&&(c[parseInt(e.toString(),10)].style.width=o)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},a.prototype.refreshFrozenScrollbar=function(){var t={cancel:!1};if(this.parent.notify($m,t),!t.cancel){var e=ai(),i=this.parent.element.querySelector(".e-movablescrollbar"),s=this.parent.getContent().firstElementChild.getBoundingClientRect().width;if(this.parent.enableColumnVirtualization){var r=this.parent.getContent().querySelector(".e-virtualtrack");r&&(s=r.scrollWidth)}this.parent.height!=="auto"&&(s=s+e),i.firstElementChild.style.width=s+"px"}},a.prototype.getSiblingsHeight=function(t){var e=this.getHeightFromDirection(t,"previous"),i=this.getHeightFromDirection(t,"next");return e+i},a.prototype.getHeightFromDirection=function(t,e){for(var i=t[e+"ElementSibling"],s=0,r=[Xt,Sa,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];i;)r.some(function(n){return i.classList.contains(n)})&&(s+=i.offsetHeight),i=i[e+"ElementSibling"];return s},a.prototype.isWidthUndefined=function(){var t=this.parent.getColumns().filter(function(e){return u(e.width)&&u(e.minWidth)}).length;return this.parent.getColumns().length===t},a.prototype.getWidth=function(t){if(this.parent.allowResizing&&u(t.width)&&(u(t.minWidth)&&u(t.maxWidth)&&!this.isWidthUndefined()?t.width=200:t.maxWidth&&(t.width=t.maxWidth)),!t.width)return null;var e=parseInt(t.width.toString(),10);return t.minWidth&&e<parseInt(t.minWidth.toString(),10)?t.minWidth:t.maxWidth&&e>parseInt(t.maxWidth.toString(),10)?t.maxWidth:t.width},a.prototype.getTableWidth=function(t,e){for(var i=0,s=!1,r=0,n=t;r<n.length;r++){var o=n[r];if(o.visible!==!1){var l=this.getWidth(o);(o.width==="auto"||!o.width)&&(this.parent.allowResizing&&!e?o.maxWidth||(s=!0):l=0),l!==null&&(i+=parseInt(l.toString(),10))}}return i=s?"auto":i,i},a.prototype.setWidthToTable=function(t){var e=ve(this.getTableWidth(this.parent.getColumns()));(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new Dt({width:"30px"})),e=this.isAutoResize()||e==="auto"||t?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e;var i=this.parent.element.querySelector(".e-table.e-inline-edit");i&&(i.style.width=e)},a.prototype.isAutoResize=function(){return this.parent.allowResizing&&this.parent.resizeSettings.mode==="Auto"},a})(),jv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Uv=(function(){function a(t){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.virtualSelectionInfo={},this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.firstHeaderCellClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.groupedFrozenRow=0,this.parent=t,this.rowModelGen=new $a(this.parent),this.addEventListener()}return a.prototype.focusCheck=function(t){var e=t.target;this.focusByClick=!0,this.firstHeaderCellClick=!0,this.skipFocus=e.classList.contains("e-grid")},a.prototype.onFocus=function(t){if(!(this.parent.isDestroyed||E.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&t&&t.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&this.parent.frozenRows===0),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&(this.parent.editSettings.mode!=="Batch"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[za].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new tr({isDataRow:!0})]}),this.getContent().selector,!1);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator(),this.active);this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&!(t&&t.target===this.parent.element)&&(this.focus(t),this.skipFocus=!1)}},a.prototype.passiveFocus=function(t){if(!this.parent.isDestroyed){var e=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(t.target===e&&t.relatedTarget&&!F(t.relatedTarget,"e-grid")&&!this.firstHeaderCellClick){var i=[0,0];this.active.matrix.matrix[i[0]][i[1]]===0&&(i=Ei(this.active.matrix.matrix,i,!0)),this.active.matrix.current=i,this.currentInfo.element=t.target,this.currentInfo.elementToFocus=t.target,this.currentInfo.element.querySelector(".e-checkselectall")?(this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),t)):x([this.currentInfo.element],["e-focused","e-focus"])}this.firstHeaderCellClick=!1,t.target&&t.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,x([this.currentInfo.element],["e-focused","e-focus"]))}},a.prototype.onBlur=function(t){this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");var e=!!(F(t.target,"e-gantt")&&t.target.classList.contains("e-rowcell")&&!u(t.target.nextElementSibling)&&t.target.nextElementSibling.classList.contains("e-rowcell"));(this.parent.isEdit||t&&(!t.relatedTarget||M(t.relatedTarget,".e-grid")||M(t.relatedTarget,".e-grid-popup"))&&!(this.parent.element.classList.contains("e-childgrid")&&!this.parent.element.matches(":focus-within")))&&!(!e&&u(t.relatedTarget)&&parseInt(t.target.getAttribute("aria-colindex"),10)-1===0&&parseInt(t.target.getAttribute("data-index"),10)===0)&&!(!e&&u(t.relatedTarget)&&!M(document.activeElement,".e-grid")&&!u(t.sourceCapabilities))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},a.prototype.setFirstFocusableTabIndex=function(){var t=this.parent;if(t.element.tabIndex=-1,t.allowGrouping&&t.groupSettings.showDropArea){var e=t.groupModule,i=e.getFocusableGroupedItems();i.length>0?(e.element.tabIndex=-1,i[0].tabIndex=0):e.element.tabIndex=0;return}if(t.toolbar||t.toolbarTemplate){var s=t.toolbarModule.element,r=this.parent.toolbarModule.getFocusableToolbarItems();if(r.length>0&&r[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")){s.tabIndex=-1,r[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0;return}else if(t.toolbarTemplate){s.tabIndex=0;return}}if(t.getColumns().length){var n=t.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(n.tabIndex=0,this.setActive(!1),!u(this.active)&&(u(this.active.target)||!this.active.target.classList.contains("e-columnmenu"))){var o=[0,0];this.active.matrix.matrix[o[0]][o[1]]===0&&(o=Ei(this.active.matrix.matrix,o,!0)),this.active.matrix.current=o}return}},a.prototype.setLastContentCellTabIndex=function(){var t=this.parent.getContentTable();if(t.rows[t.rows.length-1]){var e=t.rows[t.rows.length-1].lastElementChild;e.tabIndex=0}},a.prototype.onClick=function(t,e,i){if(!(F(t.target,"e-filterbarcell")&&(F(t.target,"e-multiselect")||t.target.classList.contains("e-input-group-icon")))){var s=!u(M(t.target,"."+ki)),r=!u(M(t.target,"."+Xt));if(s=s&&r?!s:s,!(!s&&u(M(t.target,"."+Xt))||t.target.classList.contains(Nt)||t.target.classList.contains(Ft)||!u(M(t.target,".e-unboundcell"))&&!e)){this.setActive(s);var n={cancel:!1,byKey:!1,byClick:!u(t.target),clickArgs:t};if(this.parent.notify(Ll,n),!(n.cancel||M(t.target,".e-inline-edit")&&!this.parent.editSettings.showAddNewRow&&this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))&&(this.setActive(s),this.getContent())){var o=this.getContent().onClick(t,e);if(o===!1)return;this.focus(),this.currentInfo.element.classList.contains("e-rowcell")&&t.type&&t.type==="click"&&!i&&x([this.currentInfo.element],["e-focused","e-focus"]),i&&t&&t.target&&x([t.target],["e-focused","e-focus"])}}}},a.prototype.handleFilterNavigation=function(t,e,i){t.target===document.querySelector(e)&&t.key==="Tab"&&t.shiftKey?(t.preventDefault(),document.querySelector(i).focus()):t.target===document.querySelector(i)&&t.key==="Tab"&&!t.shiftKey&&document.activeElement===document.querySelector(i)&&(t.preventDefault(),document.querySelector(e).focus())},a.prototype.onKeyPress=function(t){if(this.content&&this.content.target&&(this.content.target=null),this.parent.allowPaging){var e=this.parent.pagerModule.pagerObj.element,i=this.parent.pagerModule.pagerObj.getFocusablePagerElements(e,[]);if(this.parent.childGrid&&!F(t.target,"e-gridpager")&&this.allowToPaging(t)&&i.length&&(i[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if(t.action==="shiftTab"&&i.length&&i[0]===t.target){this.setActive(!0);var s=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[s[0]][s[1]]===0&&(s=Ei(this.active.matrix.matrix,s,!1)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(s)?s:this.findBatchEditCell(s,!1):s,t.preventDefault(),this.focus(t);return}if(t.action==="tab"&&this.parent.element.classList.contains("e-childgrid")&&(!this.parent.pageSettings.pageSizes&&i.length&&i[i.length-1]===t.target||this.parent.pagerModule.pagerObj.getDropDownPage()===t.target)){var r=F(this.parent.element,"e-detailcell");R([this.parent.element],["e-focus"]),R([r],["e-focused"]),r.tabIndex=-1}else{this.parent.pagerModule.pagerObj.changePagerFocus(t);return}}if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&(t.keyCode===38||t.shiftKey&&t.keyCode===9)){t.preventDefault(),this.focus(t);return}else if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&t.keyCode===9){t.preventDefault(),this.parent.pagerModule.pagerObj.setPagerFocus();return}if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var n=this.getContent().matrix.rows,o=this.getContent().matrix.columns;this.getContent().matrix.current=[n,o]}}if(this.parent.filterSettings.type==="Excel"&&this.handleFilterNavigation(t,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="CheckBox"){var l=this.parent.getColumnByUid(this.focusedColumnUid),h=l&&l.filter&&l.filter.hideSearchbox?".e-chk-hidden":".e-searchinput.e-input";this.handleFilterNavigation(t,h,".e-checkboxfilter .e-footer-content button:nth-child(2)")}if(this.parent.filterSettings.type==="Menu"&&this.handleFilterNavigation(t,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),this.parent.showColumnChooser&&this.handleFilterNavigation(t,".e-ccdlg .e-ccsearch.e-cc.e-input",".e-ccdlg .e-footer-content button:nth-child(2)"),!this.skipOn(t)){if(t.target&&F(t.target,"e-gridcontent")){var p=[].slice.call(this.parent.getContentTable().rows),c=p[p.length-1].lastElementChild;t.target===c&&(this.setActive(!0),this.setLastContentCellActive())}if(t.action==="shiftTab"&&t.target&&(t.target===this.parent.element||F(t.target,"e-toolbar")||F(t.target,"e-groupdroparea"))){if(t.target===this.parent.element){this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t);return}if(F(t.target,"e-groupdroparea")){this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus());return}if(F(t.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var d=this.parent.groupModule,f=d.getFocusableGroupedItems();t.preventDefault(),f.length>0?f[f.length-1].focus():d.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus());return}}var g=!1;if(t.action==="tab"&&t.target&&(t.target===this.parent.element||F(t.target,"e-toolbar")||F(t.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(t.target===this.parent.element||t.target.classList.contains("e-groupdroparea"))){var d=this.parent.groupModule,f=d.getFocusableGroupedItems();if(f.length>0){t.preventDefault(),f[0].focus();return}if(!t.target.classList.contains("e-groupdroparea")){t.preventDefault(),d.element.focus();return}}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(t.target===this.parent.element||F(t.target,"e-groupdroparea")||t.target.classList.contains("e-toolbar"))){var y=this.parent.toolbarModule.element,b=this.parent.toolbarModule.getFocusableToolbarItems();if(b.length>0){t.preventDefault(),b[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();return}if(!t.target.classList.contains("e-toolbar")&&this.parent.toolbarTemplate){t.preventDefault(),y.focus();return}}(t.target===this.parent.element||F(t.target,"e-toolbar")||F(t.target,"e-groupdroparea"))&&(g=!0)}g&&(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=t.action;var C={cancel:!1,byKey:!0,byClick:!1,keyArgs:t};if(this.parent.notify(Ll,C),!C.cancel){var S=this.getContent().matrix.current,I=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0;this.currentInfo.outline=!0;var A=this.getContent().jump(t.action,S);this.swap=A,A.swap&&!(this.parent.editSettings.mode==="Batch"&&(t.action==="tab"||t.action==="shiftTab"))&&(this.setActive(!A.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(S,A,this.active,t.action),this.prevIndexes={}),this.setActiveByKey(t.action,this.getContent());var T=this.content.lastIdxCell?!1:this.getContent().onKeyPress(t);if(t.target&&F(t.target,"e-gridheader")){if(!u(this.active)&&t.action==="tab"&&S.toString()===this.active.matrix.current.toString()){var L=Ei(this.active.matrix.matrix,this.active.matrix.current,!0),s=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[s[0]][s[1]]===0&&(s=Ei(this.active.matrix.matrix,s,!1));var _=H(L[0]+".cells."+L[1],this.active.matrix.getRowsFromIndex(L[0],this.active));if(_&&_.getBoundingClientRect().width===0&&this.active.matrix.matrix.length-1===L[0]&&(s=this.active.matrix.nextVisibleCellFocus(L[0],L[1],t.action,this.active.keyActions[t.action],this.active,this.active.matrix.current[1])),this.active.matrix.current.toString()===s.toString()&&this.content.matrix.matrix.length){T=!0,this.setActive(!0);var X=[0,0];this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden","true"),this.active.matrix.matrix[X[0]][X[1]]===0&&(X=Ei(this.active.matrix.matrix,[0,0],!0));var re=H(X[0]+".cells."+X[1],this.active.matrix.getRowsFromIndex(X[0],this.active));if(re&&re.getBoundingClientRect().width===0&&(X=this.active.matrix.nextVisibleCellFocus(X[0],X[1],t.action,this.active.keyActions[t.action],this.active,this.active.matrix.current[1])),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(X)?X:this.findBatchEditCell(X,!0):X,this.parent.enableVirtualization&&!this.parent.enableColumnVirtualization&&this.parent.contentModule.prevInfo.blockIndexes[0]!==1){t.preventDefault(),this.removeFocus();var ye=this.parent.contentModule;ye.firstCellFocus=!0,ye.content.scrollTop=0;return}}else this.active.matrix.current.toString()!==L.toString()&&(this.active.matrix.current=L)}if(!u(this.active)&&t.action==="shiftTab"&&S.toString()===this.active.matrix.current.toString()){var V=Ei(this.active.matrix.matrix,this.active.matrix.current,!1),q=H(V[0]+".cells."+V[1],this.active.matrix.getRowsFromIndex(V[0],this.active));if(q&&q.getBoundingClientRect().width===0&&V[0]===0&&(V=this.active.matrix.nextVisibleCellFocus(V[0],V[1],t.action,this.active.keyActions[t.action],this.active,this.active.matrix.current[1])),V.toString()===this.active.matrix.current.toString()){this.focusOutFromHeader(t);return}if(this.active.matrix.current.toString()!==V.toString()&&!T){T=!0;var z=H(V[0]+".cells."+V[1],this.active.matrix.getRowsFromIndex(V[0],this.active));z&&z.getBoundingClientRect().width===0&&V[0]===0&&(V=this.active.matrix.nextVisibleCellFocus(V[0],V[1],t.action,this.active.keyActions[t.action],this.active,this.active.matrix.current[1])),this.active.matrix.current=V}}}if(t.target&&F(t.target,"e-gridcontent")&&(this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden"),this.parent.editSettings.mode==="Batch"&&(t.action==="tab"||t.action==="shiftTab")&&(this.active.matrix.current=this.findBatchEditCell(I,t.action==="tab"),t.action==="tab"&&I.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),t.action==="shiftTab"&&S.toString()===this.active.matrix.current.toString())){if(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length){this.focusOutFromHeader(t);return}var X=[0,0];this.active.matrix.matrix[X[0]][X[1]]===0&&(X=Ei(this.active.matrix.matrix,[0,0],!0));var re=H(X[0]+".cells."+X[1],this.active.matrix.getRowsFromIndex(X[0],this.active));re&&re.getBoundingClientRect().width===0&&(X=this.active.matrix.nextVisibleCellFocus(X[0],X[1],t.action,this.active.keyActions[t.action],this.active,this.active.matrix.current[1])),!T&&(X.toString()===this.active.matrix.current.toString()||this.parent.editSettings.mode==="Batch"&&I.toString()===this.active.matrix.current.toString())&&(T=!0,this.setActive(!1),this.setLastContentCellActive())}if(T===!1){if(this.clearIndicator(),t.action==="shiftTab"&&S.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(t)&&S.toString()!==[0,0].toString()){if(t.preventDefault(),t.keyCode===40){this.parent.pagerModule.pagerObj.setPagerContainerFocus();return}else if(t.keyCode===9){this.parent.pagerModule.pagerObj.setPagerFocus();return}}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t);return}if(this.header.action=t.action,this.header.currentTarget=null,this.header.focusType="key",t.target&&F(t.target,"e-fltrtemp")&&(t.action==="tab"||t.action==="shiftTab")){var U=t.target,ie=[].slice.call(M(U,"th").querySelectorAll(".e-fltrtemp-focus"));if(ie.length){var J=ie.indexOf(U),K=t.action==="tab"&&J<ie.length-1||t.action==="shiftTab"&&J>0;K&&(this.setActive(!1),this.active.matrix.current=S,this.active.currentTarget=U)}}g&&F(this.active.getTable(),"e-gridheader")&&t.target&&t.target.id===this.parent.element.id+"_searchbar"&&(this.parent.searchModule.headerFocus=!0),t.preventDefault(),this.focus(t)}}},a.prototype.isValidBatchEditCell=function(t){var e=this.active.getTable().rows[t[0]].cells[t[1]],i=M(e,"tr"),s=parseInt(e.getAttribute("aria-colindex"),10)-1,r=this.parent.getColumns()[parseInt(s.toString(),10)];return!!(this.active.matrix.matrix[t[0]][t[1]]===1&&(!i.classList.contains("e-row")||(i.classList.contains("e-insertedrow")||!r.isPrimaryKey)&&r.allowEditing))},a.prototype.findBatchEditCell=function(t,e,i){for(var s=t,r=t,n=!1;!n;){var o=r;r=Ei(this.active.matrix.matrix,r,e);var l=H(r[0]+".cells."+r[1],this.active.getTable().rows);if(l&&l.getBoundingClientRect().width===0&&(r=this.active.matrix.nextVisibleCellFocus(r[0],r[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1])),o.toString()===r.toString()||i&&o[0]!==r[0]){n=!0;continue}this.isValidBatchEditCell(r)&&(s=r,n=!0)}return s},a.prototype.setLastContentCellActive=function(){var t=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[t[0]][t[1]]===0&&(t=Ei(this.active.matrix.matrix,t,!1));var e=H(t[0]+".cells."+t[1],this.active.matrix.getRowsFromIndex(t[0],this.active));e&&e.getBoundingClientRect().width===0&&(t=this.active.matrix.nextVisibleCellFocus(t[0],t[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1])),this.active.matrix.current=t},a.prototype.focusOutFromChildGrid=function(t){var e=F(this.parent.element,"e-table"),i=F(e,"e-grid").ej2_instances[0],s=F(this.parent.element,"e-detailcell"),r=F(this.parent.element,"e-detailrow").getAttribute("data-uid"),n=[].slice.call(i.getContentTable().rows),o=n.map(function(d){return d.getAttribute("data-uid")}).indexOf(r);if(!(t.action==="tab"&&o>=n.length-1)){R([this.parent.element],["e-focus"]),R([s],["e-focused"]),s.tabIndex=-1,t.preventDefault();var l;if(i.focusModule.removeFocus(),t.action==="shiftTab"){for(var h=n[o-1],p=h.cells,c=p.length-1;c>=0;c--)if(l=p[parseInt(c.toString(),10)],!l.classList.contains("e-hide")){i.focusModule.active.matrix.current=[o-1,c];break}}else l=n[o+1].cells[0],i.focusModule.active.matrix.current=[o+1,0];i.focusModule.currentInfo.element=l,i.focusModule.currentInfo.elementToFocus=l,x([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},a.prototype.focusOutFromHeader=function(t){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var e=this.parent.toolbarModule.element,i=this.parent.toolbarModule.getFocusableToolbarItems();if(i.length>0){t.preventDefault(),i[i.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();return}else if(this.parent.toolbarTemplate){t.preventDefault(),e.focus();return}}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var s=this.parent.groupModule,r=s.getFocusableGroupedItems();t.preventDefault(),r.length>0?r[r.length-1].focus():s.element.focus();return}this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus())},a.prototype.allowToPaging=function(t){return!(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&t.keyCode!==40)},a.prototype.skipOn=function(t){var e=t.target;if(!e)return!1;if(!this.parent.isEdit&&e&&e.closest(".e-unboundcell")&&this.currentInfo.skipAction&&(t.action==="shiftTab"&&this.commandColumnFocusElement(e.closest(".e-unboundcell"),!1)===e||t.action==="tab"&&this.commandColumnFocusElement(e.closest(".e-unboundcell"),!0)===e))return this.currentInfo.skipAction=!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(t.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(F(t.target,"e-groupheadercell")&&!(t.target===i[0]&&t.action==="shiftTab"||t.target===i[i.length-1]&&t.action==="tab"))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var s=this.parent.toolbarModule.element,r=s.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(F(t.target,"e-toolbar-item")&&!(r.length>0&&(F(t.target,"e-toolbar-item")===r[0]&&t.action==="shiftTab"||F(t.target,"e-toolbar-item")===r[r.length-1]&&t.action==="tab")))return!0}var n=M(e,"th")&&!M(e,"th").tabIndex;if(t.target.classList.contains("e-filterbaroperator")&&(t.keyCode===13||t.keyCode===27)){var o=M(t.target,".e-filterbarcell");o.querySelector("input").focus()}var l=this.parent.editSettings.showAddNewRow&&M(document.activeElement,".e-addedrow")!==null;(n&&M(document.activeElement,".e-filterbarcell")!==null||l)&&this.removeFocus();var h=M(document.activeElement,".e-filterbarcell")!==null;if(this.parent.enableHeaderFocus&&h){var p=this.active.matrix,c=p.current;h=p.matrix[c[0]].lastIndexOf(1)!==c[1]}if(this.parent.isEdit&&(t.action==="tab"||t.action==="shiftTab")&&this.parent.editSettings.mode==="Normal"&&!this.parent.editSettings.showAddNewRow&&!u(F(e,"e-addedrow"))){var d=this.parent.editModule.formObj.element.querySelectorAll('input:not([type="hidden"],.e-numeric-hidden,.e-disabled), select:not([aria-hidden="true"]), button:not(.e-hide), textarea:not(.e-hide,.e-disabled,[disabled])'),o=e.classList.contains("e-ddl")?e.querySelector("input"):e,f=t.action==="tab"&&o===d[d.length-1],g=t.action==="shiftTab"&&o===d[0];if(f||g){t.preventDefault();var y=d[f?0:d.length-1];y=y.parentElement.classList.contains("e-ddl")?y.parentElement:y,y.focus()}}return t.action==="delete"||this.parent.editSettings.mode!=="Batch"&&(this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&(!u(this.parent.element.querySelector(".e-editedrow"))||!u(F(e,"e-addedrow"))&&!u(M(t.target,"input"))&&!u(document.querySelector(".e-popup-open"))||!u(F(e,"e-addedrow"))&&e&&!e.querySelector(".e-cancel-icon")&&!u(F(e,"e-unboundcell"))))||["insert","f2"].indexOf(t.action)>-1)||h&&this.parent.enableHeaderFocus||(h||l)&&t.action!=="tab"&&t.action!=="shiftTab"||M(document.activeElement,"#"+this.parent.element.id+"_searchbar")!==null&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(t.action)>-1||M(e,"."+ki)===null&&M(e,"."+Xt)===null&&!(t.target===this.parent.element||F(t.target,"e-toolbar")||F(t.target,"e-groupdroparea"))||t.action==="space"&&!e.classList.contains(Cr)&&M(e,"."+Cr)===null&&M(e,".e-headerchkcelldiv")===null||M(e,".e-filter-popup")!==null},a.prototype.focusVirtualElement=function(t){var e=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(Om,i);var s=this.actions.some(function(n){return n===e.activeKey}),r=this.parent.contentModule?this.parent.contentModule.selectedRowIndex>-1:!1;i.isAdd||Object.keys(i.virtualData).length||s||i.isCancel||r?(this.parent.notify(iv,{isCancel:!1}),i.isCancel=!1,(this.parent.enableVirtualization&&!this.parent.selectVirtualRowOnAdd&&(!t||t&&t.action!=="ctrlHome"&&t.action!=="ctrlEnd")||!this.parent.enableVirtualization)&&(this.parent.contentModule.selectedRowIndex=-1),this.parent.selectVirtualRowOnAdd=!1,s&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",t)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},a.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},a.prototype.getContent=function(){return this.active||this.content},a.prototype.setActive=function(t){this.active=t?this.content:this.header},a.prototype.setFocusedElement=function(t,e){var i=this;this.currentInfo.elementToFocus=t,setTimeout(function(){if(!u(i.currentInfo.elementToFocus)){var s=u(i.parent.element.querySelector(".e-flmenu"))?document.querySelector(".e-grid-popup .e-flmenu"):i.parent.element.querySelector(".e-flmenu");(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&u(s)?i.focusVirtualElement(e):(u(s)||F(document.activeElement,"e-flmenu-valuediv")!==s.querySelector(".e-flmenu-valuediv"))&&i.currentInfo.elementToFocus.focus()}},0)},a.prototype.focus=function(t){this.parent.notify(Rm,t),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),t)},a.prototype.removeFocus=function(t){if(this.currentInfo.element){if(this.parent.isReact&&!this.parent.isEdit&&this.currentInfo.element.classList.contains("e-rowcell")&&!this.currentInfo.element.parentElement&&!(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length)&&this.parent.getRowByIndex(this.prevIndexes.rowIndex)){var e=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex);this.currentInfo.element=e||this.currentInfo.element}R([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1}},a.prototype.addOutline=function(){var t=this.getContent().getFocusInfo();t.element&&(x([t.element],["e-focused"]),x([t.elementToFocus],["e-focus"]))},a.prototype.focusHeader=function(){this.setActive(!1),this.resetFocus()},a.prototype.focusContent=function(){this.setActive(!0),this.resetFocus()},a.prototype.resetFocus=function(){var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.focus()},a.prototype.addFocus=function(t,e){if(this.currentInfo=t,this.currentInfo.outline=t.outline&&(!u(e)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!!t.element){var i=t.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&x([t.element],["e-focused"]),x([t.elementToFocus],["e-focus"]),t.element.tabIndex=0,i||this.setFocusedElement(t.elementToFocus,e),this.parent.notify(Rl,{element:t.elementToFocus,parent:t.element,indexes:this.getContent().matrix.current,byKey:!u(e),byClick:u(e),keyArgs:e,isJump:this.swap.swap,container:this.getContent().getInfo(e),outline:!u(e),swapInfo:this.swap});var s=this.getContent().matrix.current,r=s[0],n=s[1];this.prevIndexes={rowIndex:r,cellIndex:n},this.focusedColumnUid=this.parent.getColumnByIndex(n).uid,this.focusByClick=!1}}},a.prototype.refreshMatrix=function(t){var e=this;return function(i){t&&!e.content&&(e.content=new gd(e.parent)),!t&&!e.header&&(e.header=new _v(e.parent));var s=t?e.content:e.header,r=e.parent.frozenRows,n=0;if(r&&e.parent.editSettings.mode==="Batch"&&(n=e.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+e.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),!u(e.parent.groupSettings.columns)&&e.parent.groupSettings.columns.length&&r&&t){r=0;for(var o=0;o<i.rows.length&&(r++,i.rows[parseInt(o.toString(),10)].index+1!==e.parent.frozenRows);o++);e.groupedFrozenRow=r}var l=t?i.rows.slice(r+n):i.rows,h=t?i.rows.slice(0,r+n):i.rows;e.parent.isCollapseStateEnabled()&&t&&(l=l.filter(function(V){return V.visible!==!1}));var p=!u(e.parent.rowTemplate);if(r&&(e.parent.editSettings.mode==="Batch"&&t&&(i.name==="batchDelete"||i.name==="batchAdd"||i.name==="batchCancel"||i.args&&i.args.requestType==="batchsave")||i.args&&(i.args.requestType==="delete"||i.args.requestType==="save"))){var c=e.header.matrix.matrix,d=e.parent.headerModule.rows.length;c.splice(d,c.length-d)}var f=s.matrix.generate(h,s.selector,p);s.matrix.generate(l,s.selector,p);var g=e.parent.enableVirtualization||e.parent.enableInfiniteScrolling;if(e.parent.editSettings.showAddNewRow&&t&&e.header&&e.header.matrix&&(!g||g&&e.parent.isAddNewRow)){var y=e.header.matrix.matrix,b=e.parent.allowFiltering&&e.parent.filterSettings.type==="FilterBar"?2:1;s.matrix.rows=e.parent.frozenRows&&e.parent.editSettings.newRowPosition==="Top"?s.matrix.rows:++s.matrix.rows,e.parent.editSettings.newRowPosition==="Top"?(e.parent.frozenRows||g?f:s.matrix.matrix).unshift(e.refreshAddNewRowMatrix(y[y.length-b])):s.matrix.matrix.push(e.refreshAddNewRowMatrix(y[y.length-b])),e.parent.isAddNewRow=!1}if((!(e.parent.isFrozenGrid()&&i.args&&(i.args.requestType==="sorting"||i.args.requestType==="batchsave"||i.args.requestType==="paging"))||r&&e.parent.editSettings.mode==="Batch"&&t&&(i.name==="batchDelete"||i.name==="batchAdd"||i.name==="batchCancel"||i.args.requestType==="batchsave"))&&s.generateRows(h,{matrix:f,handlerInstance:e.header}),!E.isDevice&&i&&i.args&&(!e.focusByClick&&i.args.requestType==="paging"&&!e.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(e.skipFocus=!1,e.parent.element.focus()),i.args.requestType==="grouping"&&(e.skipFocus=!0)),i&&i.args&&i.args.requestType==="virtualscroll"){if(e.currentInfo.uid){var C,S=i.rows.some(function(V,q){return C=q,V.uid===e.currentInfo.uid});if(S){e.content.matrix.current[0]=C,e.content.matrix.current[1]=e.parent.getColumnIndexByUid(e.focusedColumnUid)||0;var I=e.parent.getVisibleFrozenLeftCount(),A=e.parent.getVisibleFrozenRightCount();e.parent.enableColumnVirtualization&&!(I&&A)&&e.parent.isFrozenGrid()&&i.args.virtualInfo.direction==="right"&&(e.content.matrix.current[1]=e.content.matrix.current[1]-(I+(A?A+1:0)));var T=!!(e.parent.allowGrouping&&e.parent.groupSettings.columns.length);T&&(e.content.matrix.current[1]=e.prevIndexes.cellIndex,e.virtualSelectionInfo.isPending&&(e.content.matrix.current[0]=e.virtualSelectionInfo.direction==="downArrow"?e.content.matrix.current[0]+1:e.content.matrix.current[0]-1));var L=e.getContent().getFocusInfo().elementToFocus;if(L){var _=L.getBoundingClientRect(),X=e.parent.element.getBoundingClientRect(),re=0,ye=0;e.parent.enableColumnVirtualization&&!(I&&A)&&e.parent.isFrozenGrid()&&i.args.virtualInfo.direction==="right"&&(I?re=e.parent.leftrightColumnWidth("left"):ye=e.parent.leftrightColumnWidth("right")),(_.top>=0&&_.left>=0&&_.right-re-ye<=Math.min(X.right,window.innerWidth||document.documentElement.clientWidth)+ye&&_.bottom<=Math.min(X.bottom,window.innerHeight||document.documentElement.clientHeight)||T)&&(e.isVirtualScroll=!0,e.focus(T&&e.virtualSelectionInfo.isPending?e.virtualSelectionInfo.event:void 0))}}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var L=e.parent.element.querySelector("#"+i.args.focusElement.id);L&&L.focus()}e.virtualSelectionInfo={}}i&&i.args&&i.args.requestType==="infiniteScroll"&&(e.isInfiniteScroll=!0)}},a.prototype.refreshAddNewRowMatrix=function(t){for(var e=this.parent.getColumns(),i=this.parent.getIndentCount(),s=i;s<t.length-1;s++)e[s-i]&&e[s-i].visible&&e[s-i].allowEditing?t[parseInt(s.toString(),10)]=1:t[parseInt(s.toString(),10)]=0;return t},a.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(v.add(this.parent.element,"mousedown",this.focusCheck,this),v.add(this.parent.element,"touchstart",this.focusCheck,this),v.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(e){return t.passiveFocus(e)},!0),v.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:hi,handler:this.onKeyPress},{event:ls,handler:this.onClick},{event:nt,handler:this.refMatrix},{event:sd,handler:this.refMatrix},{event:ld,handler:this.refMatrix},{event:br,handler:this.showAddNewRowFocus},{event:mi,handler:this.refreshMatrix()},{event:tv,handler:this.restoreFocus},{event:dn,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"custom-filter-close",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:$g,handler:this.refMatrix},{event:Xc,handler:this.refMatrix},{event:Jg,handler:this.refMatrix},{event:Qg,handler:this.refMatrix},{event:Hi,handler:this.refMatrix},{event:Rl,handler:this.internalCellFocus}],yi(this.parent,this.evtHandlers,!0,this))},a.prototype.showAddNewRowFocus=function(){if(this.parent.editSettings.showAddNewRow){var t=this.parent.editSettings.newRowPosition==="Top"?0:this.content.matrix.matrix.length-1,e=this.parent.getIndentCount();if(this.parent.editSettings.newRowPosition==="Top"&&(this.parent.frozenRows||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var i=this.header.matrix.matrix.length-(this.groupedFrozenRow?this.groupedFrozenRow:this.parent.frozenRows);e=this.findNextCellFocus(this.header.matrix.matrix[i-1],e),this.header.matrix.current=[i-1,e],this.active=this.header}else e=this.findNextCellFocus(this.content.matrix.matrix[parseInt(t.toString(),10)],e),this.content.matrix.current=[t,e],this.active=this.content;var s=this.parent.element.querySelector(".e-addedrow");s&&s.querySelectorAll("tr")&&s.querySelector("tr").cells[parseInt(e.toString(),10)].querySelector("input")&&s.querySelector("tr").cells[parseInt(e.toString(),10)].querySelector("input").select()}},a.prototype.findNextCellFocus=function(t,e){for(var i=e;i<t.length;i++)if(t[parseInt(i.toString(),10)]===1)return i;return e},a.prototype.filterfocus=function(){this.parent.filterSettings.type!=="FilterBar"&&(this.removeFocus(),this.restoreFocus())},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(v.remove(this.parent.element,"mousedown",this.focusCheck),v.remove(this.parent.element,"touchstart",this.focusCheck),v.remove(this.parent.element,"focus",this.onFocus),v.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),yi(this.parent,this.evtHandlers,!1))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.restoreFocus=function(t){if(!(t&&t.requestType==="sorting"&&u(t.target))){var e=this.parent.groupModule;if(this.parent.allowGrouping&&e&&(e.groupSortFocus||e.groupTextFocus)){e.groupSortFocus=!1,e.groupTextFocus=!1;return}this.firstHeaderCellClick=!0,this.addFocus(this.getContent().getFocusInfo());var i=["add","save","delete","cancel","batchsave","batchDelete","batchCancel"],s=this.getContent().getFocusInfo();t&&i.indexOf(t.requestType)>-1&&s&&s.elementToFocus&&s.elementToFocus.matches(".e-rowcell.e-focus")&&x([s.elementToFocus],["e-focused","e-focus"])}},a.prototype.restoreFocusWithAction=function(t){if(!this.parent.enableInfiniteScrolling&&!(this.parent.groupModule&&this.parent.groupModule.preventFocusOnGroup)){var e=this.getContent().matrix,i=e.current;switch(t.requestType){case"grouping":case"ungrouping":i[1]=i.length&&!this.parent.groupSettings.showGroupedColumn&&!u(e.matrix[i[0]])?e.matrix[i[0]].indexOf(1):t.requestType==="grouping"?i[1]+1:i[1]-1;break}this.getContent().matrix.current=i,this.prevIndexes={rowIndex:i[0],cellIndex:i[1]};var s=this.parent.groupModule;if(this.parent.allowGrouping&&s&&s.groupCancelFocus){var r=s.getFocusableGroupedItems();r.length?r[0].parentElement.getAttribute("data-mappingname")===t.columnName?r[3].focus():r[0].focus():s.element.focus(),s.groupCancelFocus=!1;return}this.addFocus(this.getContent().getFocusInfo())}},a.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||R([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},a.prototype.getPrevIndexes=function(){var t=this.forget;return this.forget=!1,t||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},a.prototype.forgetPrevious=function(){this.forget=!0},a.prototype.setActiveByKey=function(t,e){if(this.parent.frozenRows!==0){var i,s={home:function(){return{toHeader:!i.isContent,toFrozen:!0}},end:function(){return{toHeader:!i.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(t in s){i=e.getInfo();var r=s[""+t]();this.setActive(!r.toHeader),this.getContent().matrix.current=e.matrix.current}}},a.prototype.internalCellFocus=function(t){if(t.byKey&&t.container.isContent&&(t.keyArgs.action==="enter"&&t.parent.classList.contains("e-detailcell")||(t.keyArgs.action==="tab"||t.keyArgs.action==="shiftTab")&&t.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var e;t.parent&&t.parent.closest(".e-unboundcell")&&t.keyArgs.action==="shiftTab"?e=this.commandColumnFocusElement(t.parent,!0):e=this.getContent().getFocusable(this.getFocusedElement()),this.setFocusedElement(e),this.currentInfo.skipAction=!0}},a.prototype.commandColumnFocusElement=function(t,e){var i=t.querySelectorAll("button:not(.e-hide)");return e?i[i.length-1]:i[0]},a})(),Gv=(function(){function a(){this.matrix=[],this.current=[]}return a.prototype.set=function(t,e,i){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.columns)),this.matrix[parseInt(t.toString(),10)]=this.matrix[parseInt(t.toString(),10)]||[],this.matrix[parseInt(t.toString(),10)][parseInt(e.toString(),10)]=i?1:0},a.prototype.get=function(t,e,i,s,r,n){var o=e;if(t+i[0]<0)return[t,e];t=Math.max(0,Math.min(t+i[0],this.rows));var l=!0;if(u(this.matrix[parseInt(t.toString(),10)]))return null;if(e=Math.max(0,Math.min(e+i[1],this.matrix[parseInt(t.toString(),10)].length-1)),o+i[1]>this.matrix[parseInt(t.toString(),10)].length-1&&r(t,e,s))return[t,o];var h=this.first(this.matrix[parseInt(t.toString(),10)],e,i,!0,s);e=h===null?o:h;var p=H(t+"."+e,this.matrix);t===this.rows&&(s==="downArrow"||s==="enter")&&(i[0]=-1);var c;if(n){var d=this.getRowsFromIndex(t,n);c=H(t+".cells."+e,d)}if(c&&c.getBoundingClientRect().width===0){var f=this.nextVisibleCellFocus(t,e,s,i,n,o);t=f[0],e=f[1]}if(h===null){for(var g=0;g<this.rows;g++)if(this.matrix[parseInt(g.toString(),10)].some(function(y){return y===1})){l=!1;break}if(l)return t=this.current.length?this.current[0]:0,[t,e]}return this.inValid(p)||!r(t,e,s)?this.get(t,o,i,s,r):[t,e]},a.prototype.getRowsFromIndex=function(t,e){return e.getTable().rows[parseInt(t.toString(),10)].classList.contains("e-addedrow")?e.getTable().rows[parseInt(t.toString(),10)].querySelector("table").rows:e.getTable().rows},a.prototype.nextVisibleCellFocus=function(t,e,i,s,r,n){var o=this.getRowsFromIndex(t,r),l=H(t+".cells."+e,o),h=r.matrix.matrix,p=h.length-1,c=i==="tab",d=i==="shiftTab",f=i==="enter"||i==="shiftEnter"||i==="downArrow"||i==="upArrow";if(f)return[t,e];for(;l&&l.getBoundingClientRect().width===0;){if(c&&t===p&&e===h[parseInt(t.toString(),10)].lastIndexOf(1)||d&&t===0&&e===h[parseInt(t.toString(),10)].indexOf(1))return e=n,[t,e];c?e===h[parseInt(t.toString(),10)].lastIndexOf(1)?(t++,e=h[parseInt(t.toString(),10)].indexOf(1),e=this.first(this.matrix[parseInt(t.toString(),10)],e,s,!0,i),o=this.getRowsFromIndex(t,r)):(e++,e=this.first(this.matrix[parseInt(t.toString(),10)],e,s,!0,i)):d?e===h[parseInt(t.toString(),10)].indexOf(1)?(t--,e=h[parseInt(t.toString(),10)].lastIndexOf(1),e=this.first(this.matrix[parseInt(t.toString(),10)],e,s,!0,i),o=this.getRowsFromIndex(t,r)):(e--,e=this.first(this.matrix[parseInt(t.toString(),10)],e,s,!0,i)):i==="rightArrow"||i==="shiftRight"?e===h[parseInt(t.toString(),10)].lastIndexOf(1)?e=n:(e++,e=this.first(this.matrix[parseInt(t.toString(),10)],e,s,!0,i)):i==="leftArrow"||i==="shiftLeft"?e===h[parseInt(t.toString(),10)].indexOf(1)?e=n:(e--,e=this.first(this.matrix[parseInt(t.toString(),10)],e,s,!0,i)):i===null&&(e++,e=this.first(this.matrix[parseInt(t.toString(),10)],e,s,!0,i)),l=H(t+".cells."+e,o)}return[t,e]},a.prototype.first=function(t,e,i,s,r){return(e<0||e===t.length)&&this.inValid(t[parseInt(e.toString(),10)])&&r!=="upArrow"&&r!=="downArrow"||!t.some(function(n){return n===1})?null:this.inValid(t[parseInt(e.toString(),10)])?this.first(t,["upArrow","downArrow","shiftUp","shiftDown","enter","shiftEnter"].indexOf(r)!==-1?s?0:++e:e+i[1],i,!1,r):e},a.prototype.select=function(t,e){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.matrix[parseInt(t.toString(),10)].length-1)),this.current=[t,e]},a.prototype.generate=function(t,e,i){this.rows=t.length-1,this.matrix=[];for(var s=0;s<t.length;s++){var r=t[parseInt(s.toString(),10)].cells.filter(function(l){return l.isSpanned!==!0});this.columns=Math.max(r.length-1,this.columns|0);for(var n=0,o=0;o<r.length;o++)r[parseInt(o.toString(),10)].column&&r[parseInt(o.toString(),10)].column.columns?n=this.columnsCount(r[parseInt(o.toString(),10)].column.columns,n):n++,this.set(s,o,t[parseInt(s.toString(),10)].visible===!1?!1:e(t[parseInt(s.toString(),10)],r[parseInt(o.toString(),10)],i));this.columns=Math.max(n-1,this.columns|0)}return this.matrix},a.prototype.columnsCount=function(t,e){for(var i=t,s=e,r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns?s=this.columnsCount(i[parseInt(r.toString(),10)].columns,s):s++;return s},a.prototype.inValid=function(t){return t===0||t===void 0},a})(),gd=(function(){function a(t){var e=this;this.matrix=new Gv,this.lastIdxCell=!1,this.parent=t,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(i){var s={home:[e.matrix.current[0],-1,0,1],end:[e.matrix.current[0],e.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[e.matrix.rows,e.matrix.columns+1,0,-1]};return s[""+i]||null}}return a.prototype.getTable=function(){return this.parent.getContentTable()},a.prototype.onKeyPress=function(t){var e=/(Mac)/i.test(navigator.platform);if(e&&t.metaKey){if(t.action==="home")t.action="ctrlHome";else if(t.action==="end")t.action="ctrlEnd";else if(["downArrow","upArrow","leftArrow","rightArrow"].indexOf(t.action)!==-1)return}var i=this.keyActions[t.action],s=this.getCurrentFromAction(t.action,i,t.action in this.keyActions,t);if(s){if((["tab","shiftTab"].indexOf(t.action)>-1&&this.matrix.current||[]).toString()===s.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&t.keyCode===40||t.keyCode===40)){if(s.toString()===[this.matrix.rows,this.matrix.columns].toString()||s.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===s.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&s.toString()===[0,1].toString())return!1;s=this.editNextRow(s[0],s[1],t.action)}this.matrix.select(s[0],s[1])}},a.prototype.editNextRow=function(t,e,i){var s=this.parent,r=s.editSettings.allowNextRowEdit&&(s.isEdit||s.isLastCellPrimaryKey),n=s.getColumnIndexByField(s.getVisibleColumns()[0].field),o=this.getTable().rows[parseInt(t.toString(),10)],l=s.editSettings.showAddNewRow&&o.classList.contains("e-addedrow")?o.querySelectorAll("td:not(.e-editcell)")[parseInt(e.toString(),10)]:o.cells[parseInt(e.toString(),10)];if(i==="tab"&&r){t++;var h=this.getTable().rows[parseInt(t.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(t.toString(),10)].getElementsByClassName("e-detailrowcollapse").length;e=n+h}return i==="shiftTab"&&r&&(t--,e=s.getColumnIndexByField(s.getVisibleColumns()[s.getVisibleColumns().length-1].field)),!l.classList.contains(He)&&!l.classList.contains("e-headercell")&&!l.classList.contains("e-groupcaption")&&!l.classList.contains("e-filterbarcell")?this.editNextRow(t,e,i):[t,e]},a.prototype.getCurrentFromAction=function(t,e,i,s){if(e===void 0&&(e=[0,0]),!i&&!this.indexesByKey(t)||this.matrix.current.length===0)return null;if(!this.shouldFocusChange(s))return this.matrix.current;var r=this.indexesByKey(t)||this.matrix.current.concat(e),n=r[0],o=r[1],l=r[2],h=r[3];if(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&t==="enter")for(var p=n;p<this.matrix.matrix.length;p++){var c=this.getTable().rows[p+1];if(c&&c.cells[parseInt(o.toString(),10)]&&c.cells[parseInt(o.toString(),10)].classList.contains("e-rowcell"))return[p+1,o];if(p===this.matrix.matrix.length-1)return[n,o]}if(t==="ctrlEnd"||t==="end"){var d=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];t==="end"&&(d=[n,this.matrix.matrix[parseInt(n.toString(),10)].length-1]),this.matrix.matrix[d[0]][d[1]]===0&&(d=Ei(this.matrix.matrix,d,!1)),n=d[0],o=d[1]+1}var f=this.matrix.get(n,o,[l,h],t,this.validator(),this);return f},a.prototype.checkRowCellFocus=function(t){return t.classList.contains(He)?t.classList.contains("e-focused"):!0},a.prototype.onClick=function(t,e){var i=t.target;if(this.target=i,i=i.classList.contains(He)?i:M(i,"td"),i=i||M(t.target,"td.e-detailrowcollapse")||M(t.target,"td.e-detailrowexpand"),i=M(t.target,"td.e-detailcell")&&u(M(M(t.target,".e-grid"),"td.e-detailcell"))?null:i,i=i&&M(i,"table").classList.contains(rs)?i:null,!i)return!1;var s=i.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&F(i,"e-addedrow")&&(s=F(i,"e-addedrow").rowIndex);var r=[s,i.cellIndex],n=r[0],o=r[1],l=this.matrix.current,h=l[0],p=l[1],c=H(n+"."+o,this.matrix.matrix);if(this.matrix.inValid(c)||!e&&h===n&&p===o&&this.checkRowCellFocus(i)||!F(t.target,He)&&!F(t.target,"e-groupcaption")&&!F(t.target,"e-recordpluscollapse")&&!F(t.target,"e-recordplusexpand")&&!F(t.target,"e-detailrowcollapse")&&!F(t.target,"e-detailrowexpand")&&!F(t.target,"e-templatecell"))return!1;this.matrix.select(n,o)},a.prototype.getFocusInfo=function(){var t={},e=this.matrix.current,i=e[0],s=i===void 0?0:i,r=e[1],n=r===void 0?0:r;this.matrix.current=[s,n];var o=this.getTable().rows[parseInt(s.toString(),10)];return t.element=u(o)?null:this.parent.editSettings.showAddNewRow&&o.classList.contains("e-addedrow")?o.querySelectorAll("td:not(.e-editcell)")[parseInt(n.toString(),10)]:o.cells[parseInt(n.toString(),10)],t.element&&(t.elementToFocus=(!t.element.classList.contains("e-unboundcell")||this.parent.editSettings.showAddNewRow&&t.element.classList.contains("e-unboundcell")&&F(t.element,"e-addedrow"))&&!t.element.classList.contains("e-detailcell")?this.getFocusable(t.element):t.element,t.elementToFocus=t.element.classList.contains("e-detailcell")&&t.element.querySelector(".e-childgrid")?t.element.querySelector(".e-childgrid"):t.elementToFocus,this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&t.elementToFocus.tagName.toLowerCase()==="input"&&t.elementToFocus.classList.contains("e-dropdownlist")&&(t.elementToFocus=t.elementToFocus.parentElement),t.outline=!0,t.uid=t.element.parentElement.getAttribute("data-uid")),t},a.prototype.getFocusable=function(t){var e='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!u(M(t,".e-templatecell"));if(this.parent.isEdit){var s=this.parent.editSettings.showAddNewRow&&F(t,"e-addedrow")?", button:not(.e-hide)":"";e='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea'+s}var r=[].slice.call(t.querySelectorAll(e));if(t.classList.contains("e-fltrtemp")){var n=[].slice.call(t.querySelectorAll(".e-fltrtemp-focus"));if(this.focusType==="click"&&this.target&&this.target.classList.contains("e-fltrtemp-focus"))return this.target;if(this.focusType==="key"&&n.length&&(this.action==="tab"||this.action==="shiftTab")){var o=n.indexOf(this.currentTarget);return o===-1?n[this.action==="tab"?0:n.length-1]:n[this.action==="tab"?o+1:o-1]}}return r.length?i&&r.length>1&&!(this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&this.target)?this.target?this.target:t:r[0]:t},a.prototype.selector=function(t,e,i){var s=[he.Expand,he.GroupCaption,he.CaptionSummary,he.GroupSummary];return(t.isDataRow&&e.visible&&(e.isDataCell||e.isTemplate)||t.isDataRow&&e.cellType===he.DetailExpand&&u(e.visible)||!t.isDataRow&&s.indexOf(e.cellType)>-1&&!((e.cellType===he.GroupSummary||e.cellType===he.CaptionSummary)&&!(e.isDataCell&&e.visible))||e.column&&e.visible&&e.column.type==="checkbox"||e.cellType===he.CommandColumn||t.isDataRow&&i)&&!(t.edit==="delete"&&t.isDirty)},a.prototype.nextRowFocusValidate=function(t){for(var e=t,i=t,s=this.matrix.rows;i<=s;i++)if(this.matrix.matrix[parseInt(t.toString(),10)].indexOf(1)===-1)t=t+1;else return t;return this.lastIdxCell=!0,e},a.prototype.previousRowFocusValidate=function(t){for(var e=t,i=t,s=0;i>=s;i--)if(this.matrix.matrix[parseInt(t.toString(),10)].indexOf(1)===-1){if(t=t-1,t<0)return this.lastIdxCell=!0,e}else return t;return e},a.prototype.jump=function(t,e){this.lastIdxCell=!1;var i=this.parent.frozenRows!==0&&t==="shiftEnter",s=(t==="upArrow"||i)&&e[0]===0;this.matrix.matrix[e[0]]&&t==="tab"&&this.matrix.matrix.length&&e[1]===this.matrix.matrix[e[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==e[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),t==="shiftTab"&&e[0]!==0&&this.matrix.matrix[e[0]].indexOf(1)===e[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[e[0]].length);var r=!1,n=F(document.activeElement,"e-addedrow")&&this.parent.editSettings.showAddNewRow?F(document.activeElement,"e-addedrow"):document.activeElement.parentElement;if((this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!u(n)&&n.classList.contains(jt)){var o=parseInt(n.getAttribute(it),10)-1;r=o>0}var l={swap:r?!1:(t==="upArrow"||i)&&e[0]===0,toHeader:s};return l},a.prototype.getNextCurrent=function(t,e,i,s){t===void 0&&(t=[]);var r=[];return(s==="rightArrow"||s==="tab")&&(r[0]=t[0],r[1]=-1),(s==="downArrow"||s==="enter")&&(r[0]=-1,r[1]=t[1]),r},a.prototype.generateRows=function(t,e){var i,s=e.matrix,r=e.handlerInstance,n=r.matrix.matrix.length,o=this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"?n+1:n;r.matrix.matrix=r.matrix.matrix.slice(0,o),r.matrix.rows=o,(i=r.matrix.matrix).push.apply(i,s),r.matrix.rows+=s.length},a.prototype.getInfo=function(t){var e=this.getFocusInfo(),i=this.matrix.current,s=i[0],r=i[1],n=e.element.classList.contains(He),o=n||t&&t.action!=="enter"&&(e.element.classList.contains("e-detailrowcollapse")||e.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(e.element.parentElement.getAttribute(it),10)-1,s),Math.min(parseInt(e.element.getAttribute(yt),10)-1,r)],h=l[0],p=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&n&&(h=this.parent.getDataRows().indexOf(e.element.parentElement)),this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&(h=s,p=r),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&t&&t.action==="downArrow"&&h++,{isContent:!0,isDataCell:n,indexes:[h,p],isSelectable:o}},a.prototype.validator=function(){var t=this.getTable();return function(e,i,s){if(!u(t.rows[parseInt(e.toString(),10)])){var r=void 0;i=t.querySelector(".e-emptyrow")?0:i,t.rows[parseInt(e.toString(),10)].cells[0].classList.contains("e-editcell")?r=t.rows[parseInt(e.toString(),10)].cells[0].querySelectorAll("td")[parseInt(i.toString(),10)]:r=t.rows[parseInt(e.toString(),10)].cells[parseInt(i.toString(),10)];var n=r.getBoundingClientRect().width!==0;if(s==="enter"||s==="shiftEnter")return n&&r.classList.contains(He);if((s==="shiftUp"||s==="shiftDown")&&r.classList.contains(He))return n;if(s!=="shiftUp"&&s!=="shiftDown")return n}return!1}},a.prototype.shouldFocusChange=function(t){var e=this.matrix.current,i=e[0],s=i===void 0?-1:i,r=e[1],n=r===void 0?-1:r;if(s<0||n<0)return!0;var o=H(s+".cells."+n,this.getTable().rows);return o&&(t.action==="enter"||t.action==="shiftEnter")?o.classList.contains(He)&&!o.classList.contains("e-unboundcell")||o.classList.contains("e-editedbatchcell")&&!o.classList.contains("e-detailcell"):!0},a.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},a})(),_v=(function(a){jv(t,a);function t(e){return a.call(this,e)||this}return t.prototype.getTable=function(){return this.parent.getHeaderTable()},t.prototype.onClick=function(e){this.focusType="click";var i=e.target;if(this.target=i,i=i.classList.contains("e-headercell")?i:M(i,"th"),!i&&(this.parent.frozenRows!==0||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&(i=e.target.classList.contains(He)?e.target:M(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(i){var s=i.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&F(i,"e-addedrow")&&(s=F(i,"e-addedrow").rowIndex);var r=[s,i.cellIndex],n=r[0],o=r[1],l=H(n+"."+o,this.matrix.matrix);if(this.matrix.inValid(l))return!1;this.matrix.select(s,i.cellIndex)}},t.prototype.getFocusInfo=function(){var e={},i=this.matrix.current,s=i[0],r=s===void 0?0:s,n=i[1],o=n===void 0?0:n,l=this.getTable().rows[parseInt(r.toString(),10)];return e.element=u(l)?null:this.parent.editSettings.showAddNewRow&&l.classList.contains("e-addedrow")?l.querySelectorAll("td:not(.e-editcell)")[parseInt(o.toString(),10)]:l.cells[parseInt(o.toString(),10)],u(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e},t.prototype.selector=function(e,i){return i.visible&&(i.column.field!==void 0||i.isTemplate||!u(i.column.template)||!u(i.column.commands)||i.column.type==="checkbox")||i.cellType===he.StackedHeader},t.prototype.jump=function(e,i){var s=this.parent.frozenRows!==0&&e==="enter",r,n;return this.parent.enableHeaderFocus&&e==="tab"&&(n=this.matrix.matrix.length-1===i[0],r=i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),r&&(n?this.matrix.current[0]=0:this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1)),{swap:(e==="downArrow"||s)&&i[0]===this.matrix.matrix.length-1||e==="tab"&&n&&r}},t.prototype.getNextCurrent=function(e,i,s,r){e===void 0&&(e=[]);var n=[];return(r==="rightArrow"||r==="shiftRight"&&this.getGridSeletion()||r==="tab")&&(n[0]=e[0],n[1]=-1),(r==="upArrow"||r==="shiftEnter")&&(n[0]=this.matrix.matrix.length,n[1]=e[1]),n},t.prototype.generateRows=function(e){var i=this.matrix.matrix.length;if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"){this.matrix.rows=++this.matrix.rows;for(var s=e[0].cells,r=0,n=0;n<s.length;n++)s[parseInt(n.toString(),10)].column&&s[parseInt(n.toString(),10)].column.columns?r=this.checkFilterColumn(s[parseInt(n.toString(),10)].column.columns,i,r):(this.matrix.set(i,r,s[parseInt(n.toString(),10)].visible&&s[parseInt(n.toString(),10)].column.allowFiltering!==!1),r++)}},t.prototype.checkFilterColumn=function(e,i,s){for(var r=e,n=s,o=0;o<r.length;o++)r[parseInt(o.toString(),10)].columns?n=this.checkFilterColumn(r[parseInt(o.toString(),10)].columns,i,n):(this.matrix.set(i,n,r[parseInt(o.toString(),10)].visible&&r[parseInt(o.toString(),10)].allowFiltering!==!1),n++);return n},t.prototype.getInfo=function(e){return $(a.prototype.getInfo.call(this,e),{isContent:!1,isHeader:!0})},t.prototype.validator=function(){return function(){return!0}},t.prototype.shouldFocusChange=function(e){var i=this.matrix.current,s=i[0],r=i[1];if(s<0||r<0)return!0;var n=H(s+".cells."+r,this.getTable().rows);return n&&(e.action==="enter"||e.action==="altDownArrow")?!n.classList.contains("e-headercell"):!0},t.prototype.getHeaderType=function(){return"HeaderFocus"},t})(gd),Kv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Hs=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Yv=(function(a){Kv(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Hs([m(12)],t.prototype,"pageSize",void 0),Hs([m(8)],t.prototype,"pageCount",void 0),Hs([m(1)],t.prototype,"currentPage",void 0),Hs([m()],t.prototype,"totalRecordsCount",void 0),Hs([m(!1)],t.prototype,"enableQueryString",void 0),Hs([m(!1)],t.prototype,"pageSizes",void 0),Hs([m(null)],t.prototype,"template",void 0),t})(Je),Xv=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Vs=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Qv=(function(a){Xv(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Vs([m("startsWith")],t.prototype,"operator",void 0),Vs([m(!1)],t.prototype,"ignoreAccent",void 0),Vs([m(null)],t.prototype,"headerTemplate",void 0),Vs([m(null)],t.prototype,"template",void 0),Vs([m(null)],t.prototype,"footerTemplate",void 0),Vs([m(!0)],t.prototype,"enableSearching",void 0),Vs([m(null)],t.prototype,"renderCustomColumnChooser",void 0),t})(Je),$v=(function(){function a(t,e,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.virtualSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.isRowDeselect=!1,this.autoFillRLselection=!0,this.isFocusLastCell=!1,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=t,this.selectionSettings=e,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return a.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},a.prototype.onActionBegin=function(t,e){this.parent.trigger(e,this.fDataUpdate(t))},a.prototype.fDataUpdate=function(t){if(!this.isMultiSelection&&(!u(t.cellIndex)||!u(t.rowIndex))){var e=this.getRowObj(u(t.rowIndex)?u(t.cellIndex)?this.currentIndex:t.cellIndex.rowIndex:t.rowIndex);t.foreignKeyData=e.foreignKeyData}return t},a.prototype.onActionComplete=function(t,e){this.parent.trigger(e,this.fDataUpdate(t)),this.isMultiSelection=!1},a.prototype.getModuleName=function(){return"selection"},a.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+Xt)&&!t.querySelector("."+ki)||(this.hidePopUp(),this.clearSelection(),this.destroyAutoFillElements(),this.removeEventListener(),this.unWireEvents(),v.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),v.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},a.prototype.isEditing=function(){return(this.parent.editSettings.mode==="Normal"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.editSettings.showAddNewRow&&!this.parent.isPersistSelection},a.prototype.getCurrentBatchRecordChanges=function(){var t=this.parent;if(t.editSettings.mode==="Batch"&&t.editModule){var e=wa(this.parent.getCurrentViewRecords());e=t.editSettings.newRowPosition==="Bottom"?e.concat(this.parent.editModule.getBatchChanges()[za]):this.parent.editModule.getBatchChanges()[za].concat(e);for(var i=this.parent.editModule.getBatchChanges()[ud],s=this.parent.getPrimaryKeyFieldNames()[0],r=0;r<i.length;r++)for(var n=0;n<e.length;n++)if(i[parseInt(r.toString(),10)][""+s]===e[parseInt(n.toString(),10)][""+s]){e.splice(n,1);break}return e}else if(this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection){var o=t.getCurrentViewRecords().filter(function(l){return l.key===void 0});return o}else return t.getCurrentViewRecords()},a.prototype.selectRow=function(t,e){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection){this.addRowsToSelection([t]);return}var i=this.parent,s=i.getRowByIndex(t),r=s&&i.getRowObjectFromUID(s.getAttribute("data-uid"));if(!(this.isPartialSelection&&r&&r.isDataRow&&!r.isSelectable)){var n,o=!1;if(i.enableVirtualization&&t>-1){var l={selectedIndex:t,isAvailable:!0};if(this.parent.notify(km,l),s&&i.getRowObjectFromUID(s.getAttribute("data-uid")))n=i.getRowObjectFromUID(s.getAttribute("data-uid")).data;else{if(l.isAvailable&&!i.selectionSettings.persistSelection){var h=this.parent.getSelectedRecords();h.length>0&&this.clearRowSelection()}return}}else n=this.getRowObj(t).data;if(!(!this.isRowType()||!s||this.isEditing())){var p=s.hasAttribute("aria-selected");if(this.activeTarget(),!e||!this.selectedRowIndexes.length)e=!1;else{var c=this.selectionSettings.checkboxMode==="ResetOnRowClick",d=!this.parent.isCheckBoxSelection&&this.selectionSettings.type==="Multiple";!c&&!d||this.selectedRowIndexes.length===1&&(c||d)?e=this.isKeyAction&&this.parent.isCheckBoxSelection?!1:this.selectedRowIndexes.indexOf(t)!==-1:e=!1}this.isKeyAction=!1;var f,g="cancel";if(!e)f={data:n,rowIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:s,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(Uo,this.fDataUpdate(f),this.rowSelectingCallBack(f,e,t,n,o,p,g));else{if(this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&this.selectionSettings.persistSelection){if(this.rowDeselect(_o,[r.index],[r.data],[s],[r.foreignKeyData],this.actualTarget),this.isCancelDeSelect)return;this.parent.isCheckBoxSelection||(this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1)),this.rowDeselect(Ko,[r.index],[r.data],[s],[r.foreignKeyData],this.actualTarget,void 0,void 0,void 0)}this.rowSelectingCallBack(f,e,t,n,o,p,g)(f)}}}},a.prototype.rowSelectingCallBack=function(t,e,i,s,r,n,o){var l=this;return function(h){if(!u(h)&&h[""+o]===!0){l.disableInteracted();return}l.index=i,l.toggle=e,l.data=s,l.removed=r,n&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"?(l.clearSelectedRow(i),l.selectRowCallBack()):!n&&l.selectionSettings.persistSelection&&l.parent.isCheckBoxSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"&&l.selectRowCallBack(),l.selectionSettings.checkboxMode==="ResetOnRowClick"&&(l.isCheckboxReset=!0,l.clearSelection()),(!l.selectionSettings.persistSelection||l.selectionSettings.checkboxMode==="ResetOnRowClick"||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())}},a.prototype.selectRowCallBack=function(){var t=this.parent,e,i=this.index,s=this.toggle,r=this.data,n=this.removed,o=t.getRowByIndex(i);!s&&!n&&(this.selectedRowIndexes.indexOf(i)<=-1&&this.updateRowSelection(o,i),this.selectRowIndex(i)),s||(e={data:r,rowIndex:i,row:o,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},this.onActionComplete(e,Go)),this.isInteracted=!1,this.updateRowProps(i)},a.prototype.selectRowsByRange=function(t,e){this.selectRows(this.getCollectionFromIndexes(t,e)),this.selectRowIndex(e)},a.prototype.selectedDataUpdate=function(t,e,i,s,r){for(var n=0,o=s.length;n<o;n++){var l=this.parent.getDataRows()[s[parseInt(n.toString(),10)]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(s[parseInt(n.toString(),10)]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(t.push(h.data),i.push(l),e.push(h.foreignKeyData)):this.isPartialSelection&&r&&r.splice(r.indexOf(s[parseInt(n.toString(),10)]),1)}},a.prototype.selectRows=function(t){var e=this,i=this.parent,s=t.slice(),r=this.isSingleSel()?t[t.length-1]:t[0];this.isMultiSelection=!0;var n=[],o=[],l="cancel",h=[];if(!(!this.isRowType()||this.isEditing())){this.selectedDataUpdate(h,o,n,t,s),this.activeTarget();var p={cancel:!1,rowIndexes:s,row:n,rowIndex:r,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:h,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:o};this.parent.trigger(Uo,this.fDataUpdate(p),function(c){if(!u(c)&&c[""+l]===!0){e.disableInteracted();return}e.selectionSettings.persistSelection&&i.allowRowDragAndDrop&&e.isDragged||e.clearRow(),e.selectRowIndex(s.slice(-1)[0]);var d=function(A,T){e.updateRowSelection(i.getRowByIndex(A),A,T),e.updateRowProps(r)};if(e.isSingleSel())d(r);else for(var f=0,g=s;f<g.length;f++){var y=g[f];d(y,!!i.enableVirtualization)}if(e.checkVirtualCheckBox()&&!e.parent.isPersistSelection)if(s.length===e.totalRecordsCount)e.virtualSelectedData=e.virtualCheckBoxData().slice(),e.selectedRowIndexes=Object.keys(e.virtualSelectedData).map(function(A){return parseInt(A,10)}),e.setCheckAllState();else{var b=s.filter(function(A){return e.selectedRowIndexes.indexOf(A)===-1});if(b.length>0){for(var C=e.virtualCheckBoxData().slice(),S=0;S<b.length;S++){var I=C[b[S]];u(I)||(e.virtualSelectedData.push(I),e.selectedRowIndexes.push(b[S]))}e.setCheckAllState()}}c={rowIndexes:s,row:n,rowIndex:r,target:e.actualTarget,prevRow:i.getRows()[e.prevRowIndex],previousRowIndex:e.prevRowIndex,data:e.getSelectedRecords(),isInteracted:e.isInteracted,isHeaderCheckboxClicked:e.isHeaderCheckboxClicked,foreignKeyData:o},e.isRowSelected&&e.onActionComplete(c,Go),e.isInteracted=!1})}},a.prototype.addRowsToSelection=function(t){var e=this.parent,i="cancel",s=this.target;this.isMultiSelection=!0;var r=[],n=[],o=[],l=e.getSelectedRowIndexes().concat(t),h=this.isSingleSel()?e.getRowByIndex(t[t.length-1]):e.getRowByIndex(t[0]);if(!((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)){var p,c=this.parent.getColumns().filter(function(C){return C.type==="checkbox"});this.isMultiCtrlRequest&&!c.length&&this.selectedDataUpdate(o,n,r,l);for(var d=0,f=t;d<f.length;d++){var g=f[d],y=this.getRowObj(g),b=this.selectedRowIndexes.indexOf(g)>-1;if(!(this.isPartialSelection&&y&&y.isDataRow&&!y.isSelectable)){if(this.selectRowIndex(g),b&&(c.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(_o,[g],[y.data],[h],[y.foreignKeyData],s),this.isCancelDeSelect)return;this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.splice(this.virtualSelectedData.indexOf(y.data),1),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(g),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(Ko,[g],[y.data],[h],[y.foreignKeyData],s,void 0,void 0,void 0),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),p={cancel:!1,data:o.length?o:y.data,rowIndex:g,row:r.length?r:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:n.length?n:y.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.parent.trigger(Uo,this.fDataUpdate(p)),!u(p)&&p[""+i]===!0){this.disableInteracted();return}this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,g)}if(b||(p={data:o.length?o:y.data,rowIndex:g,row:r.length?r:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:n.length?n:y.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.onActionComplete(p,Go)),this.isInteracted=!1,this.updateRowProps(g),this.isSingleSel())break}}}},a.prototype.getCollectionFromIndexes=function(t,e){for(var i=[],s=t<=e?{i:t,max:e}:{i:e,max:t},r=s.i,n=s.max;r<=n;r++)i.push(r);return t>e&&i.reverse(),i},a.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},a.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&this.parent.checkAllRows!=="Check"||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},a.prototype.clearSelectedRow=function(t){if(this.toggle){var e=this.parent.getRowByIndex(t);this.disableUI||(e.removeAttribute("aria-selected"),this.addRemoveClassesForRow(e,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(e,!1),this.updateCheckBoxes(e),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(t),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(t)),1)}},a.prototype.updateRowProps=function(t){this.prevRowIndex=t,this.isRowSelected=this.selectedRowIndexes.length&&!0},a.prototype.getPkValue=function(t,e){return t&&Mi(t)?ns(t,e):e[""+t]},a.prototype.updatePersistCollection=function(t,e){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!u(t)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var s=this.getRowObj(t),r=s.data?this.getPkValue(this.primaryKey,s.data):null;if(r===null)return;s.isSelected=e,e&&!this.isPartialSelection||this.isPartialSelection&&s.isSelectable&&s.isSelected?(this.selectedRowState[""+r]=e,delete this.unSelectedRowState[""+r],this.persistSelectedData.some(function(n){return i.getPkValue(i.primaryKey,n)===r})||this.persistSelectedData.push(s.data)):this.updatePersistDelete(r)}},a.prototype.updatePersistDelete=function(t,e){var i=this;delete this.selectedRowState[""+t],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+t]=!0);var s,r=this.persistSelectedData.some(function(n,o){return s=o,i.getPkValue(i.primaryKey,n)===t});r&&(this.persistSelectedData.splice(s,1),e&&this.parent.partialSelectedRecords.splice(s,1))},a.prototype.updateCheckBoxes=function(t,e,i){if(!u(t)){var s=t.querySelector(".e-checkselect");u(s)||(xa(s.nextElementSibling,e),$s(s,e),(u(this.checkedTarget)||!u(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},a.prototype.updateRowSelection=function(t,e,i){if(t&&(this.selectedRowIndexes.indexOf(e)===-1&&(this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.push(this.parent.getRowObjectFromUID(t.getAttribute("data-uid")).data),this.selectedRowIndexes.push(e),this.selectedRecords.push(t)),t.setAttribute("aria-selected","true"),this.updatePersistCollection(t,!0),this.updateCheckBoxes(t,!0),this.addRemoveClassesForRow(t,!0,null,"e-selectionbackground","e-active"),!this.preventFocus||this.parent.isFocusFirstCell||this.isFocusLastCell)){var s=this.focus.getPrevIndexes().cellIndex?t.cells[this.focus.getPrevIndexes().cellIndex]:t.querySelector(".e-selectionbackground:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop)");if(this.parent.contextMenuModule&&this.mouseButton===2&&(s=this.parent.contextMenuModule.cell),this.parent.isFocusFirstCell||this.isFocusLastCell){this.parent.isFocusFirstCell=!1;var r=this.isFocusLastCell?"last-child":"first-child";s=t.querySelector(".e-selectionbackground.e-rowcell:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop, .e-gridchkbox):"+r),this.isFocusLastCell=!1}if(!s||i)return;this.focus.onClick({target:s},!0,!(this.parent.contextMenuModule&&this.mouseButton===2))}},a.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=wa(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!u(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var t=this.parent.element.querySelector(".e-gridpopup").querySelector("span");if(t.classList.contains("e-rowselect")&&t.classList.remove("e-spanclicked"),this.parent.isPersistSelection){this.persistSelectedData=[],this.selectedRowState={},this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[];for(var e=this.parent.getRowsObject(),i=0;i<e.length;i++)e[i].isDataRow&&(e[i].isSelectable?this.parent.partialSelectedRecords.push(e[i].data):this.parent.disableSelectedRecords.push(e[i].data))}this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.selectionSettings.checkboxMode==="ResetOnRowClick"&&this.target&&F(this.target,"e-rowcell")||(this.isInteracted=!1),this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},a.prototype.clearRowSelection=function(){var t=this;if(this.isRowSelected){var e=this.parent.getDataRows(),i=[],s=[],r=[],n=[],o=this.target;this.isRowDeselect=!0;for(var l=0,h=this.selectedRowIndexes.length;l<h;l++){var p=void 0;this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache?p=this.parent.getRowByIndex(this.selectedRowIndexes[parseInt(l.toString(),10)]):p=this.parent.editSettings.mode==="Batch"?this.parent.getRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]];var c=this.getRowObj(p);c&&(i.push(c.data),s.push(p),r.push(this.selectedRowIndexes[parseInt(l.toString(),10)]),n.push(c.foreignKeyData))}this.selectionSettings.persistSelection&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(_o,r,i,s,n,o,null,function(){if(t.isCancelDeSelect&&(t.isRowClicked||t.checkSelectAllClicked||t.isInteracted&&!t.parent.isPersistSelection)){if(t.parent.isPersistSelection)if(t.getCheckAllStatus(t.parent.element.querySelector(".e-checkselectall"))==="Intermediate"||t.parent.isPersistSelection)for(var d=0;d<t.selectedRecords.length;d++)t.updatePersistCollection(t.selectedRecords[parseInt(d.toString(),10)],!0);else t.parent.checkAllRows="Check",t.updatePersistSelectedData(!0);t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1));return}for(var f=[].slice.call(e.filter(function(y){return y.hasAttribute("aria-selected")})),g=0;g<f.length;g++)t.disableUI||(f[parseInt(g.toString(),10)].removeAttribute("aria-selected"),t.addRemoveClassesForRow(f[parseInt(g.toString(),10)],!1,!0,"e-selectionbackground","e-active")),t.isPrevRowSelection||t.updatePersistCollection(f[parseInt(g.toString(),10)],!1),t.updateCheckBoxes(f[parseInt(g.toString(),10)]);(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling&&t.parent.infiniteScrollSettings.enableCache)&&t.selectedRecords.length&&!f.length&&!t.parent.selectionSettings.persistSelection&&!t.disableUI&&!t.parent.isCheckBoxSelection&&t.addRemoveClassesForRow(null,!1,!0),t.virtualSelectedData=[],t.selectedRowIndexes=[],t.selectedRecords=[],t.isRowSelected=!1,t.selectRowIndex(-1),t.isPrevRowSelection=!1,t.rowDeselect(Ko,r,i,s,n,o,null,void 0,null),t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))},null),this.isRowDeselect=!1}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},a.prototype.rowDeselect=function(t,e,i,s,r,n,o,l,h){var p=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||!this.isRowDeselect||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&this.focus.activeKey==="space")||!this.selectionSettings.persistSelection){var c="cancel",d=e.length===1&&this.deSelectedData.length===1,f={rowIndex:e[0],data:this.selectionSettings.persistSelection&&this.parent.checkAllRows==="Uncheck"&&!d&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"?this.deSelectedData:i,foreignKeyData:r,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};t==="rowDeselected"&&delete f.cancel;var g="row",y="target",b="rowIndex",C="rowIndexes",S="data",I="foreignKeyData";f[""+g]=s,f[""+y]=this.actualTarget;var A=this.actualTarget&&!u(M(this.actualTarget,"thead"));A||e.length>1?(f[""+b]=e[0],f[""+C]=e):e.length===1&&(f[""+S]=f[""+S][0],f[""+g]=f[""+g][0],f[""+I]=f[""+I][0],this.isAddRowsToSelection&&(f[""+C]=e)),this.parent.trigger(t,f,function(T){p.isCancelDeSelect=T[""+c],(!p.isCancelDeSelect||!p.isRowClicked&&!p.isInteracted&&!p.checkSelectAllClicked)&&(p.updatePersistCollection(s[0],!1),p.updateCheckBoxes(s[0],void 0,e[0])),l!==void 0&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&l!==void 0&&l()},a.prototype.getRowObj=function(t){return t===void 0&&(t=this.currentIndex),u(t)?{}:(typeof t=="number"&&(t=this.parent.getRowByIndex(t)),t?this.parent.getRowObjectFromUID(t.getAttribute("data-uid"))||{}:{})},a.prototype.selectCell=function(t,e){if(!(!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache))){var i=this.parent,s,r=i.getCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex));this.currentIndex=t.rowIndex;var n=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(!this.isCellType()||!r||this.isEditing())){var o=r.classList.contains("e-cellselectionbackground");if(e=e&&!Pt(this.prevCIdxs)&&t.rowIndex===this.prevCIdxs.rowIndex&&t.cellIndex===this.prevCIdxs.cellIndex&&o,e)this.successCallBack(s,e,t,r,n)(s);else{s={data:n,cellIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1};var l="currentCell";s[""+l]=r;var h="previousRowCellIndex";s[""+h]=this.prevECIdxs,this.parent.trigger(Yr,this.fDataUpdate(s),this.successCallBack(s,e,t,r,n)),this.cellselected=!0}}}},a.prototype.successCallBack=function(t,e,i,s,r){var n=this;return function(o){var l="cancel",h="currentCell";if(!(!u(o)&&o[""+l]===!0)&&(e||(o[""+h]=o[""+h]?o[""+h]:s),n.clearCell(),e||n.updateCellSelection(s,i.rowIndex,i.cellIndex),!e)){var p={data:r,cellIndex:i,currentCell:s,selectedRowCellIndex:n.selectedRowCellIndexes,previousRowCell:n.prevECIdxs?n.getCellIndex(n.prevECIdxs.rowIndex,n.prevECIdxs.cellIndex):void 0},c="previousRowCellIndex";p[""+c]=n.prevECIdxs,n.updateCellProps(i,i),n.onActionComplete(p,Yn)}}},a.prototype.getCellIndex=function(t,e){return this.parent.getCellFromIndex(t,e)},a.prototype.selectCellsByRange=function(t,e){var i=this;if(this.isCellType()){var s=this.parent,r=this.parent.isSpan?cp(this.parent,t.rowIndex,t.cellIndex):s.getCellFromIndex(t.rowIndex,t.cellIndex),n,o,l=t,h=e=e||t,p;this.currentIndex=t.rowIndex;var c="cancel",d=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var f={data:d,cellIndex:t,currentCell:r,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},g="previousRowCellIndex";f[""+g]=this.prevECIdxs,this.parent.trigger(Yr,this.fDataUpdate(f),function(y){if(!(!u(y)&&y[""+c]===!0)){if(i.clearCell(),t.rowIndex>e.rowIndex){var b=t;t=e,e=b}for(var C=t.rowIndex;C<=e.rowIndex;C++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(n=C===t.rowIndex?t.cellIndex:0,o=C===e.rowIndex?e.cellIndex:i.getLastColIndex(C)):(n=t.cellIndex,o=e.cellIndex),p=[];for(var S=n<o?n:o,I=n>o?n:o;S<=I;S++)r=i.parent.isSpan?cp(s,C,S):s.getCellFromIndex(C,S),r&&(p.push(S),i.updateCellSelection(r),i.addAttribute(r));i.selectedRowCellIndexes.push({rowIndex:C,cellIndexes:p})}var A={data:d,cellIndex:h,currentCell:s.getCellFromIndex(h.rowIndex,h.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0},T="previousRowCellIndex";A[""+T]=i.prevECIdxs,i.isDragged||(i.onActionComplete(A,Yn),i.cellselected=!0),i.updateCellProps(l,h)}})}}},a.prototype.selectCells=function(t){if(this.isCellType()){var e=this.parent,i=e.getCellFromIndex(t[0].rowIndex,t[0].cellIndexes[0]);this.currentIndex=t[0].rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var r={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},n="previousRowCellIndex";r[""+n]=this.prevECIdxs,this.onActionBegin(r,Yr);for(var o=0,l=t.length;o<l;o++)for(var h=0,p=t[parseInt(o.toString(),10)].cellIndexes.length;h<p;h++)i=e.getCellFromIndex(t[parseInt(o.toString(),10)].rowIndex,t[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]),i&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:t[parseInt(o.toString(),10)].rowIndex,cellIndex:t[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]}));this.updateCellProps({rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]},{rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]});var c={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},d="previousRowCellIndex";c[""+d]=this.prevECIdxs,this.onActionComplete(c,Yn)}}},a.prototype.addCellsToSelection=function(t){if(!(!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache))){var e=this.parent,i,s;this.currentIndex=t[0].rowIndex;var r="cancel",n=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){this.hideAutoFill();var o;o=e.getRowsObject()[t[0].rowIndex],e.groupSettings.columns.length>0&&(o=e.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var l=[],h=0,p=t;h<p.length;h++){for(var c=p[h],d=0,f=this.selectedRowCellIndexes.length;d<f;d++)if(this.selectedRowCellIndexes[parseInt(d.toString(),10)].rowIndex===c.rowIndex){s=d;break}i=e.getCellFromIndex(c.rowIndex,this.getColIndex(c.rowIndex,c.cellIndex));var g=c.cellIndex;e.groupSettings.columns.length>0?l.push(o.cells[g+e.groupSettings.columns.length].foreignKeyData):l.push(o.cells[parseInt(g.toString(),10)].foreignKeyData);var y={cancel:!1,data:n,cellIndex:t[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?e.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},b="previousRowCellIndex";y[""+b]=this.prevECIdxs;var C=s>-1;if(C){var S=this.selectedRowCellIndexes[parseInt(s.toString(),10)].cellIndexes;S.indexOf(c.cellIndex)>-1||this.selectionSettings.mode==="Both"&&i.classList.contains("e-gridchkbox")&&!i.getAttribute("aria-selected")?(this.cellDeselect(Nu,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],n,[i],l),S.splice(S.indexOf(c.cellIndex),1),S.length===0&&this.selectedRowCellIndexes.splice(s,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(Hu,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],n,[i],l)):(C=!1,this.onActionBegin(y,Yr),this.addRowCellIndex({rowIndex:c.rowIndex,cellIndex:c.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(y,Yr),!u(y)&&y[""+r]===!0)return;this.updateCellSelection(i,c.rowIndex,c.cellIndex)}if(!C){var I={data:n,cellIndex:t[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};I[""+b]=this.prevECIdxs,this.onActionComplete(I,Yn),this.cellselected=!0}this.updateCellProps(c,c)}}}},a.prototype.getColIndex=function(t,e){var i=this.parent.getColumnByIndex(e),s=Dd(this.parent,i,t);if(s)for(var r=0;r<s.length;r++){var n=parseInt(s[parseInt(r.toString(),10)].getAttribute(yt),10)-1;if(n===e)return r}return-1},a.prototype.getLastColIndex=function(t){var e=this.parent.getDataRows()[parseInt(t.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(e[e.length-1].getAttribute(yt),10)-1},a.prototype.clearCell=function(){this.clearCellSelection()},a.prototype.cellDeselect=function(t,e,i,s,r){var n="cancel";if(s&&s.length>0)for(var o=0,l=s;o<l.length;o++){var h=l[o];h&&h.classList.contains(Cr)&&this.updateCheckBoxes(M(h,"tr"))}var p={cells:s,data:i,cellIndexes:e,foreignKeyData:r,cancel:!1};this.parent.trigger(t,p),this.isPreventCellSelect=p[""+n]},a.prototype.updateCellSelection=function(t,e,i){u(e)||this.addRowCellIndex({rowIndex:e,cellIndex:i}),t.classList.add("e-cellselectionbackground"),t.classList.contains(Cr)&&this.updateCheckBoxes(M(t,"tr"),!0),this.addAttribute(t)},a.prototype.addAttribute=function(t){this.target=t,u(t)||(t.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:t},!0,!0))},a.prototype.updateCellProps=function(t,e){this.prevCIdxs=t,this.prevECIdxs=e,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},a.prototype.addRowCellIndex=function(t){for(var e,i,s=0,r=this.selectedRowCellIndexes.length;s<r;s++)if(this.selectedRowCellIndexes[parseInt(s.toString(),10)].rowIndex===t.rowIndex){e=!0,i=s;break}e?this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.indexOf(t.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.push(t.cellIndex):this.selectedRowCellIndexes.push({rowIndex:t.rowIndex,cellIndexes:[t.cellIndex]})},a.prototype.clearCellSelection=function(){if(this.isCellSelected){var t=this.parent,e=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,s=[],r=[],n=[],o=this.getCurrentBatchRecordChanges();this.hideAutoFill();for(var l=0,h=i.length;l<h;l++){s.push(o[i[parseInt(l.toString(),10)].rowIndex]);for(var p=this.getRowObj(i[parseInt(l.toString(),10)].rowIndex),c=0,d=i[parseInt(l.toString(),10)].cellIndexes.length;c<d;c++)p.cells&&n.push(p.cells[i[parseInt(l.toString(),10)].cellIndexes[parseInt(c.toString(),10)]].foreignKeyData),r.push(t.getCellFromIndex(i[parseInt(l.toString(),10)].rowIndex,i[parseInt(l.toString(),10)].cellIndexes[parseInt(c.toString(),10)]))}if(this.cellDeselect(Nu,i,s,r,n),this.isPreventCellSelect===!0)return;for(var l=0,h=e.length;l<h;l++)e[parseInt(l.toString(),10)].classList.remove("e-cellselectionbackground"),e[parseInt(l.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(Hu,i,s,r,n)}},a.prototype.getSelectedCellsElement=function(){for(var t=this.parent,e=t.getDataRows(),i=[],s=0,r=e.length;s<r;s++)i=i.concat([].slice.call(e[parseInt(s.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return i},a.prototype.mouseMoveHandler=function(t){t.preventDefault(),this.stopTimer();var e=this.parent.element.getBoundingClientRect(),i=this.x,s=this.y,r=Yl(t),n=r.x-e.left,o=r.y-e.top,l,h=M(t.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=M(document.elementFromPoint(this.parent.element.offsetLeft+2,t.clientY),"tr")),i>n&&(l=n,n=i,i=l),s>o&&(l=o,o=s,s=l),this.element.style.left=i+"px",this.element.style.top=s+"px",this.element.style.width=n-i+"px",this.element.style.height=o-s+"px"),h&&!t.ctrlKey&&!t.shiftKey){var p=parseInt(h.getAttribute(it),10)-1;if(!this.isCellDrag)this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,p),this.isRowDragSelected=!0;else{var c=F(t.target,He);c&&(this.startAFCell=this.startCell,this.endAFCell=F(t.target,He),p>-1&&this.selectLikeExcel(t,p,parseInt(c.getAttribute(yt),10)-1))}}!t.ctrlKey&&!t.shiftKey&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.isCellDrag&&this.updateScrollPosition(t,r,this.parent.getContent())},a.prototype.updateScrollPosition=function(t,e,i){var s=this,r=i.getBoundingClientRect();r.left>=e.x-20-(this.parent.enableRtl&&this.parent.height!=="auto"?ai():0)?this.timer1=window.setInterval(function(){s.setScrollPosition(i.firstElementChild,s.parent.enableRtl?"right":"left",t)},200):r.left+i.clientWidth-20-(!this.parent.enableRtl&&this.parent.height!=="auto"?ai():0)<e.x&&(this.timer1=window.setInterval(function(){s.setScrollPosition(i.firstElementChild,s.parent.enableRtl?"left":"right",t)},200)),r.top>=e.y-this.parent.getRowHeight()*.5?this.timer2=window.setInterval(function(){s.setScrollPosition(i.firstElementChild,"up",t)},200):r.top+i.clientHeight-this.parent.getRowHeight()*.5-(i.firstElementChild.scrollWidth>i.firstElementChild.offsetWidth?ai():0)<=e.y&&(this.timer2=window.setInterval(function(){s.setScrollPosition(i.firstElementChild,"down",t)},200))},a.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null),this.timer2&&(window.clearInterval(this.timer2),this.timer2=null),this.preventFocus=!1},a.prototype.setScrollPosition=function(t,e,i){var s=-1,r=-1;switch((this.endAFCell||this.prevECIdxs)&&(s=this.endAFCell?parseInt(this.endAFCell.getAttribute("data-index"),10):this.prevECIdxs.rowIndex,r=this.endAFCell?parseInt(this.endAFCell.getAttribute("aria-colindex"),10)-1:this.prevECIdxs.cellIndex),e){case"up":if(i&&M(i.target,".e-headercontent"))return;this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes.length===1&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes.length>1&&this.startAFCell.getBoundingClientRect().top>0)&&(s=parseInt(this.startAFCell.getAttribute("data-index"),10)),s-=1,this.parent.frozenRows&&(s+=this.parent.frozenRows+1),s<1?t.scrollTop=0:t.scrollTop-=this.parent.getRowByIndex(s).offsetHeight;break;case"down":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(s=parseInt(this.startAFCell.getAttribute("data-index"),10)),s<this.parent.getRows().length-1?(s+=1,this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(s,this.selectedRowCellIndexes[0].cellIndexes[0])),t.scrollTop+=this.parent.getRowByIndex(s).offsetHeight):t.scrollTop=t.scrollHeight;break;case"left":if(r>0&&s>-1){this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[0].cellIndexes.length>0&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes[0].cellIndexes.length>1&&(!this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left>0||this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left<this.parent.element.offsetWidth))&&(r=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1);var n=this.findNextCell(t,e,r,s);r=n?parseInt(n.getAttribute("aria-colindex"),10)-1:-1,this.parent.enableRtl&&n?r<1?t.scrollLeft=t.scrollWidth:t.scrollLeft+=n.offsetWidth:n&&(r<1?t.scrollLeft=0:t.scrollLeft-=n.offsetWidth)}break;case"right":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(r=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1);var o=this.parent.getCellFromIndex(s,r),l=this.findNextCell(t,e,r,s);l&&this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex,parseInt(l.getAttribute("aria-colindex"),10)-1)),r=l?parseInt(l.getAttribute("aria-colindex"),10)-1:-1,this.parent.enableRtl&&l?r<this.parent.columns.length-1?t.scrollLeft-=o.offsetWidth:t.scrollLeft=-t.scrollWidth:l&&(r<this.parent.columns.length-1?t.scrollLeft+=o.offsetWidth:t.scrollLeft=t.scrollWidth),this.isAutoFillSel&&(r===this.parent.columns.length-1||r===-1)&&this.startAFCell&&this.endAFCell&&(this.positionAFBorders(),t.scrollLeft=this.parent.enableRtl?-t.scrollWidth:t.scrollWidth);break}if(s>-1&&s<this.parent.getRows().length&&r>-1){var h={target:this.parent.getCellFromIndex(s,r)};if(this.isAutoFillSel&&h.target.classList.contains("e-cellselectionbackground")&&(e==="down"&&parseInt(h.target.getAttribute("data-index"),10)===this.parent.getRows().length-1||e==="right"&&parseInt(h.target.getAttribute("aria-colindex"),10)-1===this.parent.columns.length-1))return;this.endAFCell=h.target,this.preventFocus=!0,this.selectLikeExcel(h,s,r)}},a.prototype.findNextCell=function(t,e,i,s){var r=this.parent.getCellFromIndex(s,e==="left"?i-1:i+1);if(r&&r.classList.contains("e-hide")){var n=r.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),o=Array.from(n).indexOf(r.nextElementSibling);return o>0&&o<n.length-1?(r=n[o+(e==="left"?-1:1)],r):(t.scrollLeft=0,null)}return r},a.prototype.selectLikeExcel=function(t,e,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(t)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:e,cellIndex:i}),this.drawBorders())},a.prototype.setFrozenBorders=function(t,e,i){var s=e.style.borderWidth.toString().split(" "),r=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"],n=[].slice.call(t.querySelectorAll(".e-cellselectionbackground."+r[""+i])).filter(function(S){return S.style.display===""}),o=[].slice.call(t.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(S){return S.style.display===""}),l=this.parent.enableRtl;if(n.length)for(var h=n[0].getAttribute("data-index"),p=n[0].getAttribute("aria-colindex"),c=n[n.length-1].getAttribute("data-index"),d=n[n.length-1].getAttribute("aria-colindex"),f=0;f<n.length;f++)n[parseInt(f.toString(),10)].getAttribute("data-index")===h&&(s.length===1||s.length===3&&parseInt(s[0],10)===2||s.length===4&&parseInt(s[0],10)===2)&&n[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),n[parseInt(f.toString(),10)].getAttribute("aria-colindex")===p&&(s.length===1||s.length===3&&parseInt(s[1],10)===2||s.length===4&&(!l&&parseInt(s[3],10)===2||l&&parseInt(s[1],10)===2))&&n[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border"),n[parseInt(f.toString(),10)].getAttribute("data-index")===c&&(s.length===1||s.length===3&&parseInt(s[2],10)===2||s.length===4&&parseInt(s[2],10)===2)&&n[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),n[parseInt(f.toString(),10)].getAttribute("aria-colindex")===d&&(s.length===1||s.length===3&&parseInt(s[1],10)===2||s.length===4&&!l&&parseInt(s[1],10)===2||l&&parseInt(s[3],10)===2)&&n[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border");if(o.length)for(var h=o[0].getAttribute("data-index"),p=(parseInt(o[0].getAttribute("aria-colindex"),10)-1).toString(),c=o[o.length-1].getAttribute("data-index"),d=(parseInt(o[o.length-1].getAttribute("aria-colindex"),10)-1).toString(),f=0;f<o.length;f++){var g=o[parseInt(f.toString(),10)].getAttribute("data-index"),y=(parseInt(o[parseInt(f.toString(),10)].getAttribute("aria-colindex"),10)-1).toString();g===h&&(!this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&F(t,"e-content")||!F(t,"e-content"))&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),g===c&&(!this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&F(t,"e-headercontent")||!F(t,"e-headercontent"))&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border");var b=o[parseInt(f.toString(),10)].parentElement.children[parseInt(y,10)-1];y===p&&(!b||b&&!b.classList.contains("e-cellselectionbackground"))&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border");var C=o[parseInt(f.toString(),10)].parentElement.children[parseInt(y,10)+1];y===d&&(!C||C&&!C.classList.contains("e-cellselectionbackground"))&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border")}},a.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===Ii&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===Ii&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")))},a.prototype.drawBorders=function(){this.selectionSettings.cellSelectionMode==="BoxWithBorder"&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},a.prototype.isLastCell=function(t){var e=[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return e[e.length-1]===t},a.prototype.isLastRow=function(t){var e=[].slice.call(M(t,ze).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[e.length-1]},a.prototype.isFirstRow=function(t){var e=[].slice.call(M(t,ze).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[0]},a.prototype.isFirstCell=function(t){var e=[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return e[0]===t},a.prototype.setBorders=function(t,e,i){var s=[].slice.call(t.getElementsByClassName("e-cellselectionbackground")).filter(function(b){return b.style.display===""});if(s.length&&this.parent.isFrozenGrid()){var r=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"];s=[].slice.call(t.querySelectorAll(".e-cellselectionbackground."+r[""+i]+":not(.e-hide)")).filter(function(b){return b.style.display===""})}if(s.length){var n=this.parent.isFrozenGrid(),o=s[0],l=s[s.length-1],h=o.getBoundingClientRect(),p=l.getBoundingClientRect(),c=o.offsetParent.getBoundingClientRect();(o.offsetParent.classList.contains("e-content")||o.offsetParent.classList.contains("e-headercontent"))&&(c=o.offsetParent.querySelector("table").getBoundingClientRect());var d=!n&&this.isLastRow(l)&&(i==="1"||i==="2"||i==="5")?2:0,f=0,g=n&&(i==="2"||i==="4")&&this.isFirstCell(o)?1:0,y=(this.parent.getFrozenMode()==="Right"&&(i==="1"||i==="3")||this.parent.getFrozenMode()===Ii&&(i==="5"||i==="6"))&&this.isFirstCell(o)?1:0;this.parent.enableRtl?(e.style.right=c.right-h.right-g+"px",e.style.width=h.right-p.left+g+1+"px"):(e.style.left=h.left-c.left-g-y+"px",e.style.width=p.right-h.left+g-y+1+"px"),e.style.top=h.top-c.top-f+"px",e.style.height=p.top-h.top>0?p.top-c.top+p.height+(n?0:1)-(h.top-c.top)-d+f+"px":p.height+f-d+(n?0:1)+"px",this.selectDirection+=i}else e.style.display="none"},a.prototype.positionBorders=function(){this.updateStartEndCells(),!(!this.startCell||!this.bdrElement||!this.selectedRowCellIndexes.length)&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Ii&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Ii&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},a.prototype.applyBothFrozenBorders=function(t){var e=this.parent.enableRtl;switch(t.length){case 6:this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right;break;case 4:t.includes("1")&&t.includes("2")&&t.includes("3")&&t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom),t.includes("2")&&t.includes("4")&&t.includes("5")&&t.includes("6")&&(this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom);break;case 2:t.includes("1")&&(this.mcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),t.includes("2")&&(this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),t.includes("3")&&(this.mhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),t.includes("5")&&(this.mcBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),t.includes("6")&&(this.mhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border);break}},a.prototype.applyBorders=function(t){var e=this.parent.enableRtl;if(this.parent.getFrozenMode()===Ii)this.applyBothFrozenBorders(t);else switch(t.length){case 4:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 2:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border));break}},a.prototype.createBorders=function(){if(!this.bdrElement){var t=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr"});if(t.style.cssText="width: 2px; border-width: 0;",this.bdrElement=this.parent.getContentTable().parentElement.appendChild(t),this.parent.isFrozenGrid()){var e=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr"});if(e.style.cssText="height: 2px; border-width: 0;",this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(e),this.parent.getFrozenMode()===Ii){var i=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr"});i.style.cssText="height: 2px; border-width: 0;",this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(i)}}if(this.parent.frozenRows){var s=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr"});s.style.height="2px",this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(s)}if(this.parent.frozenRows&&this.parent.isFrozenGrid()){var r=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr"});if(r.style.height="2px",this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(r),this.parent.getFrozenMode()===Ii){var n=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr"});n.style.height="2px",this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(n)}}}},a.prototype.showHideBorders=function(t,e){if(this.bdrElement){if(this.bdrElement.style.display=t,this.parent.isFrozenGrid()){var i=this.parent.getContentTable();R(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),R(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),R(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),R(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),e||(this.mcBdrElement.style.display=t),this.parent.getFrozenMode()===Ii&&(this.frcBdrElement.style.display=t)}if(this.parent.frozenRows){var i=this.parent.getHeaderTable();R(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),R(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),R(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),R(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=t}this.parent.frozenRows&&this.parent.isFrozenGrid()&&(e||(this.mhBdrElement.style.display=t),this.parent.getFrozenMode()===Ii&&(this.frhBdrElement.style.display=t))}},a.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},a.prototype.positionAFBorders=function(){if(!(!this.startCell||!this.bdrAFLeft)){var t=this.startAFCell.getBoundingClientRect(),e=this.endAFCell.getBoundingClientRect(),i=e.top-t.top>0?1:0,s=e.top-t.top>=0&&(F(this.startAFCell,Xn)||F(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,r=(F(this.startAFCell,Xn)||F(this.startAFCell,Gl))&&this.isFirstCell(this.startAFCell)?1:0,n=this.isLastRow(this.endAFCell)&&(F(this.endAFCell,Xn)||F(this.endAFCell,"e-frozencontent"))?2:0,o=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,p=this.startAFCell.offsetParent.parentElement.scrollLeft,c=h-this.startAFCell.offsetTop,d=p-this.startAFCell.offsetLeft,f=this.parent.element.clientHeight-ai();this.parent.allowPaging&&(f-=this.parent.element.querySelector(".e-pager").offsetHeight),this.parent.aggregates.length&&(f-=this.parent.getFooterContent().offsetHeight);var g=this.parent.element.clientWidth-(this.parent.height!=="auto"?ai():0);c=c>0?Math.floor(c)-1:0,d=d>0?d:0;var y=t.left-l.left;if(this.parent.enableRtl){var C=F(this.startAFCell,Xn)||F(this.startAFCell,Gl)?t.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-e.right-2+e.width+"px",this.bdrAFLeft.style.width=g<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px";var S=l.right-t.right-r+C-1;S>0?this.bdrAFRight.style.right=S+"px":this.bdrAFRight.style.right="0px",this.bdrAFTop.style.left=e.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-r+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.parent.height!=="auto"&&ai()?(this.bdrAFTop.style.left=ai()+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-ai()+"px"):this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=y-r+d-1+"px",this.bdrAFRight.style.left=e.left-l.left-2+e.width+"px",this.bdrAFRight.style.width=g<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=y+d-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-r+1+"px",g<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var b=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-g;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-b+"px"}if(this.bdrAFLeft.style.top=t.top-l.top-s+c+"px",this.bdrAFLeft.style.height=e.top-t.top>0?e.top-o.top+e.height+1-(t.top-o.top)+s-n-c+"px":e.height+s-n-c+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=f<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,f<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var I=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-f;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-I+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},a.prototype.createAFBorders=function(){if(!this.bdrAFLeft){var t=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft"});t.style.width="2px",this.bdrAFLeft=this.parent.element.appendChild(t);var e=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright"});e.style.width="2px",this.bdrAFRight=this.parent.element.appendChild(e);var i=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom"});i.style.height="2px",this.bdrAFBottom=this.parent.element.appendChild(i);var s=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop"});s.style.height="2px",this.bdrAFTop=this.parent.element.appendChild(s)}},a.prototype.destroyAutoFillElements=function(){this.bdrAFLeft&&(this.bdrAFLeft.remove(),this.bdrAFRight.remove(),this.bdrAFBottom.remove(),this.bdrAFTop.remove(),this.bdrAFLeft=this.bdrAFRight=this.bdrAFBottom=this.bdrAFTop=null),this.autofill&&(this.autofill.remove(),this.autofill=null)},a.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},a.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},a.prototype.updateValue=function(t,e,i){var s=this.createBeforeAutoFill(t,e,i);if(!s.cancel){var r=this.parent.getColumnByIndex(e);this.parent.editModule&&i&&(r.type==="number"?this.parent.editModule.updateCell(t,r.field,parseFloat(s.value)):this.parent.editModule.updateCell(t,r.field,s.value))}},a.prototype.createBeforeAutoFill=function(t,e,i){var s=this.parent.getColumnByIndex(e),r={column:s,value:i.innerText};return this.parent.trigger(rm,r),r},a.prototype.getAutoFillCells=function(t,e){var i=".e-cellselectionbackground",s=[].slice.call(this.parent.getDataRows()[parseInt(t.toString(),10)].querySelectorAll(i));return s},a.prototype.selectLikeAutoFill=function(t,e){var i=parseInt(F(this.startAFCell,jt).getAttribute(it),10)-1,s=parseInt(this.startAFCell.getAttribute(yt),10)-1,r=parseInt(F(this.endAFCell,jt).getAttribute(it),10)-1,n=parseInt(this.endAFCell.getAttribute(yt),10)-1,o=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case(!e&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!F(t.target,He)):this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.parent.getCellFromIndex(i+o,s+l),this.drawAFBorders();break;case(this.autoFillRLselection&&s+l<n&&n-s-l+1>r-i-o&&n-s-l+1>i-r):if(this.endAFCell=this.parent.getCellFromIndex(i+o,n),r=parseInt(F(this.endAFCell,jt).getAttribute(it),10)-1,n=parseInt(this.endAFCell.getAttribute(yt),10)-1,!e)this.drawAFBorders();else{for(var h=parseInt(this.endCell.getAttribute(yt),10)-1,p=i;p<=r;p++)for(var c=this.getAutoFillCells(p,s),d=0,f=h+1;f<=n;f++)d>l&&(d=0),this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:r,cellIndex:n})}break;case(this.autoFillRLselection&&s>n&&s-n+1>r-i-o&&s-n+1>i-r):if(this.startAFCell=this.parent.getCellFromIndex(i,n),this.endAFCell=this.endCell,!e)this.drawAFBorders();else{for(var p=i;p<=i+o;p++){var c=this.getAutoFillCells(p,s);c.reverse();for(var d=0,f=this.startCellIndex-1;f>=n;f--)d>l&&(d=0),this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:i,cellIndex:n},{rowIndex:i+o,cellIndex:this.startCellIndex+l})}break;case i>r:if(this.startAFCell=this.parent.getCellFromIndex(r,s),this.endAFCell=this.endCell,!e)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(it),10)-1,y=g,p=i-1;p>=r;p--){y===this.startIndex-1&&(y=g);var c=this.getAutoFillCells(y,s),d=0;y--;for(var f=this.startCellIndex;f<=this.startCellIndex+l;f++)this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:r,cellIndex:s+l},{rowIndex:i+o,cellIndex:s})}break;default:if(this.endAFCell=this.parent.getCellFromIndex(r,s+l),!e)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(it),10)-1,y=this.startIndex,p=g+1;p<=r;p++){y===g+1&&(y=this.startIndex);var c=this.getAutoFillCells(y,s);y++;for(var d=0,b=this.startCellIndex;b<=this.startCellIndex+l;b++)this.updateValue(p,b,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:g-o,cellIndex:s},{rowIndex:r,cellIndex:s+l})}break}},a.prototype.mouseUpHandler=function(t){this.stopTimer(),document.body.classList.remove("e-disableuserselect"),this.element&&!u(this.element.parentElement)&&ce(this.element),this.isDragged&&this.selectedRowCellIndexes.length===1&&this.selectedRowCellIndexes[0].cellIndexes.length===1?this.mUPTarget=F(t.target,He):this.mUPTarget=null;var e=M(t.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&this.selectionSettings.mode==="Cell"&&e&&e.classList.contains(He)){var i=parseInt(e.parentElement.getAttribute(it),10)-1,s=parseInt(e.getAttribute(yt),10)-1;this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:s})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){this.preventFocus=!0;var r=F(t.target,He);this.endAFCell=r||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,!u(this.endAFCell)&&!u(this.startAFCell)&&(this.updateStartCellsIndex(),this.selectLikeAutoFill(t,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.parent.aggregates.length>0&&this.parent.notify(kl,{})),this.isAutoFillSel=!1,this.preventFocus=!1}v.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&v.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),v.remove(document,"mouseup",this.mouseUpHandler)},a.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},a.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var t=parseInt(this.target.getAttribute(yt),10)-1,e=parseInt(this.target.getAttribute("data-index"),10),i=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,s=this.getAutoFillCells(i,t).filter(function(g){return g.style.display===""}),r=this.parent.getColumnByIndex(t),n=r.getFreezeTableName()==="movable",o=e<this.parent.frozenRows,l=this.parent.getFrozenMode()===Ii&&r.getFreezeTableName()===fv;Me("#"+this.parent.element.id+"_autofill",F(this.target,rs))||(Me("#"+this.parent.element.id+"_autofill",this.parent.element)&&Me("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=pe("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),o?n?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):n?this.parent.getContentTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(o?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill)));var h=s[s.length-1];if(h&&h.offsetParent){var p=h.getBoundingClientRect(),c=h.offsetParent.getBoundingClientRect();(h.offsetParent.classList.contains("e-content")||h.offsetParent.classList.contains("e-headercontent"))&&(c=h.offsetParent.querySelector("table").getBoundingClientRect());var d=this.isLastCell(h)?4:0,f=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=c.right-p.right+p.width-4-d+"px":this.autofill.style.left=p.left-c.left+p.width-4-d+"px",this.autofill.style.top=p.top-c.top+p.height-5-f+"px"}this.autofill.style.display=""}else this.hideAutoFill()},a.prototype.mouseDownHandler=function(t){this.mouseButton=t.button;var e=t.target,i=this.parent,s,r=F(e,"e-grid");if(!(r&&r.id!==i.element.id||F(e,Ft)&&!this.parent.frozenRows||F(e,"e-editedbatchcell")||F(e,on))){if((t.shiftKey||t.ctrlKey)&&t.preventDefault(),F(e,He)&&!t.shiftKey&&!t.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,s=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||M(e,"td").classList.contains("e-selectionbackground")){this.isDragged=!1;return}s=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}s&&this.enableDrag(t,!0)}this.updateStartEndCells(),(e.classList.contains("e-autofill")||e.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(t))}},a.prototype.updateStartEndCells=function(){var t=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=t[0],this.endCell=t[t.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(it),10)-1,this.startCellIndex=parseInt(F(this.startCell,He).getAttribute(yt),10)-1)},a.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(it),10)-1,this.startCellIndex=parseInt(F(this.startCell,He).getAttribute(yt),10)-1)},a.prototype.enableDrag=function(t,e){var i=this.parent;if(e){var s=M(t.target,"tr");this.startDIndex=parseInt(s.getAttribute(it),10)-1,this.startDCellIndex=parseInt(F(t.target,He).getAttribute(yt),10)-1}document.body.classList.add("e-disableuserselect");var r=i.element.getBoundingClientRect(),n=Yl(t);this.x=n.x-r.left,this.y=n.y-r.top,v.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&v.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),v.add(document,"mouseup",this.mouseUpHandler,this)},a.prototype.clearSelAfterRefresh=function(t){var e=this.parent.enableInfiniteScrolling&&t.requestType==="infiniteScroll";if(t.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!e&&this.clearSelection(),(t.requestType==="virtualscroll"||e)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(o){return o.isSelectable}),s=[];this.selectedRowState={},this.persistSelectedData=[];for(var r=0;r<i.length;r++){s.push(i[parseInt(r.toString(),10)].index);var n=this.getPkValue(this.primaryKey,i[parseInt(r.toString(),10)].data);this.selectedRowState[""+n]=!0,this.persistSelectedData.push(i[parseInt(r.toString(),10)].data)}this.selectedRowIndexes=s}},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:bt,handler:this.enableAfterRender},{event:Xa,handler:this.initializeSelection},{event:um,handler:this.onActionComplete},{event:pm,handler:this.onActionComplete},{event:Wt,handler:this.onPropertyChanged},{event:Rl,handler:this.onCellFocused},{event:id,handler:this.clearSelAfterRefresh},{event:Pa,handler:this.columnPositionChanged},{event:nt,handler:this.initialEnd},{event:Ml,handler:this.rowsRemoved},{event:mi,handler:this.refreshHeader},{event:Tl,handler:this.destroyAutoFillElements},{event:ut,handler:this.destroy}],yi(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(Rt,this.actionBeginFunction),this.parent.addEventListener(Fe,this.actionCompleteFunction),this.addEventListener_checkbox())},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(v.remove(document,"mouseup",this.mouseUpHandler),v.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),v.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),yi(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Rt,this.actionBeginFunction),this.parent.removeEventListener(Fe,this.actionCompleteFunction),this.removeEventListener_checkbox(),this.parent.off(Tl,this.destroyAutoFillElements))},a.prototype.wireEvents=function(){this.isMacOS=navigator.userAgent.indexOf("Mac OS")!==-1,this.isMacOS?(v.add(this.parent.element,"keydown",this.keyDownHandler,this),v.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||v.add(this.parent.element,"keydown",this.keyDownHandler,this)},a.prototype.unWireEvents=function(){this.isMacOS?(v.remove(this.parent.element,"keydown",this.keyDownHandler),v.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||v.remove(this.parent.element,"keydown",this.keyDownHandler)},a.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},a.prototype.refreshHeader=function(){var t=this.parent.getColumns().filter(function(e){return e.type==="checkbox"});t.length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData()),this.setCheckAllState()},a.prototype.rowsRemoved=function(t){for(var e=0;e<t.records.length;e++){var i=this.getPkValue(this.primaryKey,t.records[parseInt(e.toString(),10)]);delete this.selectedRowState[""+i],--this.totalRecordsCount}this.setCheckAllState()},a.prototype.beforeFragAppend=function(t){t.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&this.clearSelection()},a.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},a.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&(this.render(),this.initPerisistSelection())},a.prototype.render=function(t){v.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),v.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},a.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){var e=this.parent;u(t.properties.type)||(this.selectionSettings.type==="Single"?(e.element.removeAttribute("aria-multiselectable"),this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):this.selectionSettings.type==="Multiple"&&e.element.setAttribute("aria-multiselectable","true")),(!u(t.properties.mode)||!u(t.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection();var i=this.parent.getColumns().filter(function(s){return s.type==="checkbox"});i.length&&(e.isCheckBoxSelection=this.selectionSettings.checkboxMode!=="ResetOnRowClick"),this.drawBorders()}},a.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},a.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(nt,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},a.prototype.checkBoxSelectionChanged=function(){var t=this.parent;t.off(nt,this.checkBoxSelectionChanged);var e=t.enableColumnVirtualization?t.columns:t.getColumns(),i=e.filter(function(s){return s.type==="checkbox"});i.length>0&&(t.isCheckBoxSelection=!0,this.chkField=i[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,u(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(t.selectionSettings.type="Multiple",t.dataBind()):this.initPerisistSelection()),!t.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},a.prototype.initPerisistSelection=function(){var t=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(t.isPersistSelection=!1,this.selectedRowState={})},a.prototype.ensureCheckboxFieldSelection=function(){var t=this.parent;this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!t.enableVirtualization&&this.chkField&&(t.isPersistSelection&&Object.keys(this.selectedRowState).length===0||!t.isPersistSelection)&&this.dataSuccess(!u(this.parent.dataSource)&&this.parent.dataSource.result||this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords():this.parent.renderModule.data.dataManager.dataSource.json)},a.prototype.dataSuccess=function(t){for(var e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[parseInt(e.toString(),10)]),s=t[parseInt(e.toString(),10)][this.chkField];u(this.selectedRowState[""+i])&&s&&typeof s=="boolean"&&(this.selectedRowState[""+i]=s,this.parent.isPersistSelection&&this.persistSelectedData.push(t[parseInt(e.toString(),10)]))}},a.prototype.setRowSelection=function(t){if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)if(t){var d=Object.keys(this.selectedRowState),f=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var g=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData,y=0,b=g;y<b.length;y++){var h=b[y];if(!u(h[this.primaryKey])){var C=h[this.primaryKey].toString();d.indexOf(C)===-1&&f.indexOf(C)===-1&&(this.selectedRowState[h[this.primaryKey]]=!0)}}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(t)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var e=this.parent.getRowsObject().filter(function(S){return S.isSelectable}),i=0,s=e;i<s.length;i++){var r=s[i];this.selectedRowState[this.getPkValue(this.primaryKey,r.data)]=!0}else{var n=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var o=0,l=this.isPartialSelection?n:n.records;o<l.length;o++){var h=l[o];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}else for(var p=0,c=n;p<c.length;p++){var h=c[p];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}}else this.selectedRowState={}},a.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},a.prototype.getAvailableSelectedData=function(t){var e=new N(t).executeLocal(this.parent.getDataModule().generateQuery(!0));return this.parent.groupSettings.columns.length&&e&&e.records&&(e=e.records.slice()),e},a.prototype.refreshPersistSelection=function(){var t=this.parent.getRows();if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!u(t)&&t.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var e=[],i=0;i<t.length;i++){var s=this.getRowObj(t[parseInt(i.toString(),10)]),r=s&&s.data?this.getPkValue(this.primaryKey,s.data):null;if(r===null)return;if(!(this.isPartialSelection&&!s.isSelectable)){var n=void 0,o=t[parseInt(i.toString(),10)].querySelector(".e-checkselect");this.selectedRowState[""+r]||this.parent.checkAllRows==="Check"&&this.selectedRowState[""+r]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(r)<0||this.parent.checkAllRows==="Uncheck"&&this.chkAllCollec.indexOf(r)>0&&!this.parent.selectedRowIndex||this.parent.checkAllRows==="Intermediate"&&!u(this.chkField)&&s.data[this.chkField]?(e.push(parseInt(t[parseInt(i.toString(),10)].getAttribute(it),10)-1),n=!0):(n=!1,this.checkedTarget!==o&&this.parent.isCheckBoxSelection&&o&&xa(o.nextElementSibling,n)),this.updatePersistCollection(t[parseInt(i.toString(),10)],n)}}this.isSingleSel()&&e.length>0?this.selectRow(e[0],!0):this.selectRows(e)}(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick")&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},a.prototype.actionBegin=function(t){if(t.requestType==="save"&&this.parent.isPersistSelection){var e=this.parent.element.querySelector(".e-edit-checkselect");if(!u(e)){var i=M(e,"."+on);if(i){this.parent.editSettings.mode==="Dialog"&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var s=this.getRowObj(i);if(!s)return;this.selectedRowState[this.getPkValue(this.primaryKey,s.data)]=s.isSelected=e.checked}else this.isCheckedOnAdd=e.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&t.requestType==="paging"&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[])},a.prototype.actionComplete=function(t){if(t.requestType==="save"&&this.parent.isPersistSelection){if(t.action==="add"){if(this.isCheckedOnAdd){var e=this.parent.getRowObjectFromUID(this.parent.getRows()[t.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,e.data)]=e.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if(t.requestType==="delete"&&this.parent.isPersistSelection){for(var i=t.data,s=i.slice(),r=0;r<s.length;r++){var n=this.getPkValue(this.primaryKey,s[parseInt(r.toString(),10)]);u(n)||this.updatePersistDelete(n,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if(t.requestType==="paging"){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var o=this.parent.getRowsObject(),l=[],r=0;r<o.length;r++)o[parseInt(r.toString(),10)].isSelectable&&l.push(o[parseInt(r.toString(),10)].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},a.prototype.onDataBound=function(){var t=this.parent.getColumns().filter(function(r){return r.type==="checkbox"});if(t.length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData()),!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked||this.isPartialSelection&&this.parent.isPersistSelection&&this.isHdrSelectAllClicked)&&(this.parent.checkAllRows==="Intermediate"?this.setRowSelection(!0):this.parent.checkAllRows==="Uncheck"&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var e=this.parent.getRowsObject(),i=[],s=0;s<e.length;s++)e[parseInt(s.toString(),10)].isSelected&&i.push(s);i.length&&this.selectRows(i),this.initialRowSelection=!0}},a.prototype.updatePersistSelectedData=function(t){var e=this;if(this.parent.isPersistSelection){var i=[];if(this.parent.checkAllRows==="Check"&&(this.parent.searchSettings.key.length>0||this.parent.filterSettings.columns.length>0)&&this.persistSelectedData.length&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection){var s=this.getAvailableSelectedData(this.persistSelectedData),r=new Set(s.map(function(l){return l[e.primaryKey]}));i=this.persistSelectedData.filter(function(l){return!r.has(l[e.primaryKey])})}for(var n=this.parent.getRows(),o=0;o<n.length;o++)this.updatePersistCollection(n[parseInt(o.toString(),10)],t);if(this.parent.checkAllRows==="Uncheck")this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[];else if(this.parent.checkAllRows==="Check"&&(this.setRowSelection(!0),this.persistSelectedData=!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection?this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice():this.persistSelectedData,i.length>0))for(var o=0;o<i.length;o++)this.persistSelectedData.push(i[parseInt(o.toString(),10)])}},a.prototype.checkSelectAllAction=function(t){var e=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),t&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(t),this.selectRowsByRange(e.getVirtualRowIndex(0),e.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1)),this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(this.virtualSelectedData=this.virtualCheckBoxData().slice(),this.selectedRowIndexes=Object.keys(this.virtualSelectedData).map(function(r){return parseInt(r,10)}))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(t),this.clearSelection()),this.chkAllCollec=[],!u(i)){var s=i.querySelector(".e-edit-checkselect");u(s)||xa(s.nextElementSibling,t)}},a.prototype.checkSelectAll=function(t){var e=this,i=this.getCheckAllStatus(t),s=i==="Check";if(this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(i==="Uncheck"||this.isCheckboxReset||i==="Intermediate"&&this.parent.isPersistSelection)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,i==="Intermediate"&&(!this.chkField&&!this.parent.isPersistSelection&&(s=this.getCurrentBatchRecordChanges().some(function(o){return e.getPkValue(e.primaryKey,o)in e.selectedRowState})),this.parent.isPersistSelection)){if(this.parent.allowPaging&&this.isPartialSelection)for(var r=this.parent.getRowsObject(),n=0;n<r.length;n++)if(r[n].isDataRow&&r[n].isSelectable&&!r[n].isSelected){s=!1;break}else s=!0;else if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result){for(var n=0;n<this.getCurrentBatchRecordChanges().length;n++)if(!u(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n])))if(Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n]).toString()))s=!0;else{s=!1;break}}}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!s),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(t,!s)},a.prototype.getCheckAllStatus=function(t){var e;u(t)?u(this.getCheckAllBox())||(e=this.getCheckAllBox().nextElementSibling.classList):e=t.nextElementSibling.classList;var i="None";return e instanceof DOMTokenList&&(e.contains("e-check")?i="Check":e.contains("e-uncheck")?i="Uncheck":e.contains("e-stop")&&(i="Intermediate")),i},a.prototype.checkSelect=function(t){var e=M(this.checkedTarget,"."+He),i=this.parent;this.isMultiCtrlRequest=!0;var s=0;if(this.isHeaderCheckboxClicked=!1,Pi(i)){var r=e.parentElement.getAttribute("data-uid");this.parent.enableVirtualization&&this.parent.groupSettings.columns.length?s=parseInt(e.parentElement.getAttribute(it),10)-1:s=i.getRows().map(function(n){return n.getAttribute("data-uid")}).indexOf(r)}else s=parseInt(e.parentElement.getAttribute(it),10)-1;this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Sr).length>0&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.editSettings.showAddNewRow&&++s,this.rowCellSelectionHandler(s,parseInt(e.getAttribute(yt),10)-1),this.moveIntoUncheckCollection(M(e,"."+jt)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(t,t.nextElementSibling.classList.contains("e-check"))},a.prototype.moveIntoUncheckCollection=function(t){if(this.parent.checkAllRows==="Check"||this.parent.checkAllRows==="Uncheck"){var e=this.getRowObj(t),i=e&&e.data?this.getPkValue(this.primaryKey,e.data):null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},a.prototype.triggerChkChangeEvent=function(t,e){this.parent.trigger(tm,{checked:e,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:t}),this.parent.isEdit||(this.checkedTarget=null)},a.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&this.parent.checkAllRows!=="Uncheck")for(var t=this.parent.getRowsObject().filter(function(o){return o.isSelectable}),e=0,i=t;e<i.length;e++){var s=i[e];this.selectedRowIndexes.push(s.index)}if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&this.parent.checkAllRows==="Check"){var t=this.parent.getRowsObject().filter(function(l){return l.isSelectable});if(t.length!==this.selectedRowIndexes.length)for(var r=0,n=t;r<n.length;r++){var s=n[r];this.selectedRowIndexes.indexOf(s.index)<=-1&&this.selectedRowIndexes.push(s.index)}}},a.prototype.updateSelectedRowIndex=function(t){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if(this.parent.checkAllRows==="Check"){this.selectedRowIndexes=[];for(var e=this.parent.groupSettings.columns.length?this.getData().records.length:this.getData().length,i=0;i<e;i++)this.selectedRowIndexes.push(i)}else if(this.parent.checkAllRows==="Uncheck")this.selectedRowIndexes=[];else{var s=this.parent.getRowByIndex(t);if(t&&s&&s.getAttribute("aria-selected")==="false"){var r=this.selectedRowIndexes.indexOf(t);this.selectedRowIndexes.splice(r,1)}}},a.prototype.isAllSelected=function(t){if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData(this.persistSelectedData).length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection)if(this.parent.allowPaging&&!this.selectionSettings.persistSelection&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var e=this.parent.partialSelectedRecords,i=0;i<e.length;i++){var s=this.getPkValue(this.primaryKey,e[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+s])return!1}return!0}else return this.isSelectAllRowCount(t);else{var e=this.getData();this.parent.groupSettings.columns.length&&e.records&&(e=e.records);for(var i=0;i<e.length;i++){var s=this.getPkValue(this.primaryKey,e[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+s])return!1}return!0}},a.prototype.someDataSelected=function(){if((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(var t=this.getAvailableSelectedData(this.persistSelectedData),e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[parseInt(e.toString(),10)]);if(this.selectedRowState[""+i])return!1}for(var s=this.isPartialSelection?this.getAvailableSelectedData(this.parent.partialSelectedRecords):this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),e=0;e<s.length;e++){var i=this.getPkValue(this.primaryKey,s[parseInt(e.toString(),10)]);if(this.selectedRowState[""+i])return!1}return!0},a.prototype.setCheckAllState=function(t,e){if(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick"){var i=!1,s=!1,r=Object.keys(this.selectedRowState).length;this.parent.element.classList.contains("e-treelistgrid")&&this.parent.isPersistSelection&&!this.parent.enableVirtualization&&!this.parent.getDataModule().isRemote()&&Array.isArray(this.parent.dataSource)&&r===this.parent.dataSource.length&&r>this.totalRecordsCount&&(r=this.totalRecordsCount),this.parent.isPersistSelection||(r=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(s=!0,i=this.isAllSelected(r));var n=this.getCheckAllBox();if(n){var o=n.nextElementSibling;R([o],["e-check","e-stop","e-uncheck"]),$s(n,!1),n.indeterminate=!1;var l=this.parent.getDataModule().isRemote()?[]:this.gridCurrentRecord;if(this.parent.groupSettings.columns.length&&l.records&&(l=l.records),this.totalRecordsCount=this.checkVirtualCheckBox()?l.length:this.totalRecordsCount,i&&s&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result||l.length)||!s&&(r===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(r)||this.isHdrSelectAllClicked&&!this.parent.isPersistSelection)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&l.length&&r===l.length||(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(r===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(r)||r===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(r)))||r===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(x([o],["e-check"]),$s(n,!0),e&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!s||s&&this.someDataSelected())||r===0&&this.getCurrentBatchRecordChanges().length===0)&&!this.parent.allowPaging||this.parent.allowPaging&&(r===0||r&&s&&this.someDataSelected())?(x([o],["e-uncheck"]),e&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(x([o],["e-stop"]),this.parent.checkAllRows="Intermediate",n.indeterminate=!0),r===0&&this.getCurrentBatchRecordChanges().length===0?x([o.parentElement],["e-checkbox-disabled"]):R([o.parentElement],["e-checkbox-disabled"]),this.isPartialSelection){var h=this.parent.getRowsObject().filter(function(p){return p.isSelectable}).length;h===0&&o.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?x([o.parentElement],["e-checkbox-disabled"]):R([o.parentElement],["e-checkbox-disabled"])}(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.updateSelectedRowIndex(t)}}},a.prototype.checkVirtualCheckBox=function(){return this.parent.enableVirtualization&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isCheckBoxSelection&&!this.isPartialSelection},a.prototype.virtualCheckBoxData=function(){var t=this.getData();return this.parent.groupSettings.columns.length&&t.records&&(t=t.records),t},a.prototype.isSelectAllRowCount=function(t){var e=0,i=this.parent.getRowsObject();if(this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var s=this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length;return s===i.length?(e=i.filter(function(l){return l.isSelectable}).length,e&&t===e):!1}else if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var r=this.getAvailableSelectedData(this.parent.disableSelectedRecords).length,n=this.getAvailableSelectedData(this.parent.partialSelectedRecords).length,o=this.getAvailableSelectedData(this.persistSelectedData).length;return e=r+n,e===this.totalRecordsCount&&o!==0&&o===n}else return e=i.filter(function(l){return l.isSelectable}).length,e&&t===e},a.prototype.keyDownHandler=function(t){(E.info.name==="opera"&&t.keyCode===17||E.info.name==="mozilla"&&t.keyCode===224||(E.info.name==="safari"||E.info.name==="chrome")&&(t.keyCode===91||t.keyCode===93))&&(this.cmdKeyPressed=!0);var e=F(t.target,"e-headercell"),i=F(t.target,He),s=e?e.children[0].classList.contains("e-headerchkcelldiv"):i?i.classList.contains("e-gridchkbox"):!1;s&&!this.parent.allowKeyboard&&t.keyCode===32&&t.preventDefault()},a.prototype.keyUpHandler=function(t){(E.info.name==="opera"&&t.keyCode===17||E.info.name==="mozilla"&&t.keyCode===224||(E.info.name==="safari"||E.info.name==="chrome")&&(t.keyCode===91||t.keyCode===93))&&(this.cmdKeyPressed=!1)},a.prototype.clickHandler=function(t){var e=t.target;this.actualTarget=e,!this.isAutoFillSel&&!t.ctrlKey&&!t.shiftKey&&(this.startAFCell=this.endAFCell=null),this.selectionSettings.persistSelection&&(this.deSelectedData=wa(this.persistSelectedData)),(F(e,jt)||F(e,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&e.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.cmdKeyPressed=t.metaKey,this.isMultiCtrlRequest=t.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=t.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.popUpClickHandler(t);var i=!1;this.preventFocus=!0;var s,r=F(e,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(r&&r.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&F(e,jt)),this.selectionSettings.persistSelection&&this.isPartialSelection&&F(e,"e-headerchkcelldiv")&&!e.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),r&&r.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(s=r.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),e=F(e,He),this.parent.isReact&&e&&!e.parentElement&&e.classList.contains("e-rowcell")&&(e=this.parent.getCellFromIndex(parseInt(e.getAttribute("data-index"),10),parseInt(e.getAttribute("aria-colindex"),10)-1)),this.isRowDragSelected&&u(e)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(e&&e.parentElement.classList.contains(jt)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=e,!u(s))this.checkedTarget=s,s.classList.contains("e-checkselectall")?this.checkSelectAll(s):this.checkSelect(s);else{var n=0;n=parseInt(e.parentElement.getAttribute(it),10)-1,this.parent.isPersistSelection&&!this.parent.editSettings.showAddNewRow&&this.parent.element.getElementsByClassName(Sr).length>0&&++n,(!this.mUPTarget||!this.mUPTarget.isEqualNode(e))&&this.rowCellSelectionHandler(n,parseInt(e.getAttribute(yt),10)-1),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(M(e,"."+jt)),this.setCheckAllState())}!this.parent.isCheckBoxSelection&&E.isDevice&&!this.isSingleSel()&&this.showPopup(t)}else if(t.target.classList.contains("e-headercell")&&!t.target.classList.contains("e-stackedheadercell")){var o=t.target.querySelector(".e-headercelldiv").getAttribute("data-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(o))}this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.isMultiShiftRequest=!1,u(M(t.target,".e-unboundcell"))&&(this.preventFocus=!1)},a.prototype.popUpClickHandler=function(t){var e=t.target;M(e,".e-headercell")||t.target.classList.contains(He)||M(e,".e-gridpopup")?e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?(e.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(e.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},a.prototype.showPopup=function(t){this.selectionSettings.enableSimpleMultiRowSelection||Sd(this.parent.element.querySelector(".e-gridpopup"),t,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},a.prototype.rowCellSelectionHandler=function(t,e){if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(t,this.selectionSettings.enableToggle),this.selectCell({rowIndex:t,cellIndex:e},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest){var i=M(this.target,"."+He).classList.contains(Cr);this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!i||this.parent.getColumns().some(function(n){return n.type==="checkbox"})&&this.selectionSettings.checkboxMode==="ResetOnRowClick"&&i?this.selectRowsByRange(Pt(this.prevRowIndex)?t:this.prevRowIndex,t):this.addRowsToSelection([t]),this.selectCellsByRange(Pt(this.prevCIdxs)?{rowIndex:t,cellIndex:e}:this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.updateAutoFillPosition(),this.drawBorders()}else{if(this.addRowsToSelection([t]),this.selectionSettings.mode==="Both"){var s=this.parent.getColumns().find(function(n){return n.type==="checkbox"}),r=s&&s.index!==e;r&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:t,cellIndex:e},this.selectionSettings.enableToggle):(!s||r)&&this.addCellsToSelection([{rowIndex:t,cellIndex:e}])}else this.addCellsToSelection([{rowIndex:t,cellIndex:e}]);this.showHideBorders("none")}this.isDragged=!1},a.prototype.onCellFocused=function(t){if(this.parent.frozenRows&&t.container.isHeader&&t.byKey)if(t.keyArgs.action==="upArrow")this.parent.allowFiltering?t.isJump=t.element.tagName==="INPUT":t.isJump=t.element.tagName==="TH";else if(t.keyArgs.action==="downArrow"){var e=Number(t.element.parentElement.getAttribute(it))-1;t.isJump=e===0}else t.keyArgs.action==="ctrlHome"&&(t.isJump=!0);var i=(t.container.isHeader&&t.isJump||t.container.isContent&&!t.container.isSelectable)&&!(t.byKey&&t.keyArgs.action==="space")&&!(t.element.classList.contains("e-detailrowexpand")||t.element.classList.contains("e-detailrowcollapse")),s=t.container.isHeader&&t.element.tagName!=="TD"&&!M(t.element,"."+He)&&!(t.byKey&&t.keyArgs.action==="space");if(!t.byKey||i){i&&!(this.parent.isCheckBoxSelection||this.selectionSettings.persistSelection&&(t.parent.classList.contains("e-recordplusexpand")||t.parent.classList.contains("e-recordpluscollapse")||t.parent.classList.contains("e-groupcaption")))&&this.clearSelection();return}var r=t.container.isContent?t.container.indexes:t.indexes,n=r[0],o=r[1],l=this.focus.getPrevIndexes();if((t.element.parentElement.querySelector(".e-rowcelldrag")||t.element.parentElement.querySelector(".e-dtdiagonalright")||t.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(l.cellIndex=l.cellIndex-1),this.parent.frozenRows)if(t.container.isHeader&&(t.element.tagName==="TD"||M(t.element,"."+He))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&t.keyArgs.action==="upArrow"&&h++,n-=h,l.rowIndex=u(l.rowIndex)?null:l.rowIndex-h}else n+=this.parent.frozenRows,l.rowIndex=l.rowIndex===0||!u(l.rowIndex)?l.rowIndex+this.parent.frozenRows:null;if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(n=parseInt(t.element.parentElement.getAttribute("aria-rowindex"),10)-1),!((s||["ctrlPlusA","escape"].indexOf(t.keyArgs.action)===-1&&t.keyArgs.action!=="space"&&n===l.rowIndex&&o===l.cellIndex)&&!this.selectionSettings.allowColumnSelection)){this.parent.enableVirtualization&&(n=parseInt(t.element.parentElement.getAttribute("aria-rowindex"),10)-1,!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.parent.totalDataRecordsCount>=1&&(t.keyArgs.action==="ctrlHome"?(n=0,this.parent.isFocusFirstCell=!0):t.keyArgs.action==="ctrlEnd"&&(n=this.parent.totalDataRecordsCount-1,this.isFocusLastCell=!0))),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&t.keyArgs.action==="downArrow"&&n--,this.preventFocus=!0;var p=this.getKeyColIndex(t);if(this.needColumnSelection&&(o=p),this.parent.element.classList.contains("e-gridcell-read")&&(t.keyArgs.action==="tab"||t.keyArgs.action==="shiftTab"||t.keyArgs.action==="rightArrow"||t.keyArgs.action==="leftArrow")){var c=this.target.getAttribute("aria-label");c=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(o).field,this.target.setAttribute("aria-label",c)}switch(t.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=t.element,this.isKeyAction=!0,this.applyDownUpKey(n,o);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(n,o);break;case"shiftDown":case"shiftUp":this.shiftDownKey(n,o);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(n,o);break;case"home":case"end":o=t.keyArgs.action==="end"?this.getLastColIndex(n):0,this.applyHomeEndKey(n,o);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(n,o);break;case"escape":this.clearSelection(),this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(t.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(n);break}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.updateAutoFillPosition()}},a.prototype.getKeyColIndex=function(t){var e,i=null,s=t.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&F(t.element,"e-columnheader"))if(this.needColumnSelection=!!t.container.isHeader,s){if(t.keyArgs.action==="rightArrow"||t.keyArgs.action==="leftArrow")return i;e=s.getAttribute("data-mappinguid");var r=this.getstackedColumns(this.parent.getColumnByUid(e).columns),n=this.parent.getColumnIndexByUid(r[r.length-1].uid),o=this.parent.getColumnIndexByUid(r[0].uid);i=this.prevColIndex>=n?o:n}else u(t.element.querySelector(".e-headercelldiv"))||(i=this.parent.getColumnIndexByUid(t.element.querySelector(".e-headercelldiv").getAttribute("data-mappinguid")));return i},a.prototype.ctrlPlusA=function(){if(this.isRowType()&&!this.isSingleSel()){var t=this.parent.getRowsObject();this.selectRowsByRange(t[0].index,t[t.length-1].index)}this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},a.prototype.applySpaceSelection=function(t){t.classList.contains("e-checkselectall")?(this.checkedTarget=t,this.checkSelectAll(this.checkedTarget)):t.classList.contains("e-checkselect")&&(this.checkedTarget=t,this.checkSelect(this.checkedTarget))},a.prototype.applyDownUpKey=function(t,e){var i=this.parent;this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows?(this.selectRow(t,!0),this.applyUpDown(i.selectedRowIndex)):(this.selectRow(t,!0),this.applyUpDown(i.selectedRowIndex))),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(e)},a.prototype.applyUpDown=function(t){if(!(t<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var e=parseInt(this.target.getAttribute(yt),10)-1,i=this.contentRenderer.getRowByIndex(t);if(i&&(this.target=i.getElementsByClassName(He)[parseInt(e.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")){var s=this.target.getAttribute("aria-label");s=this.target.innerHTML,this.target.setAttribute("aria-label",s)}}},a.prototype.applyRightLeftKey=function(t,e){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(e):this.isCellType()&&(this.selectCell({rowIndex:t,cellIndex:e},!0),this.addAttribute(this.target))},a.prototype.applyHomeEndKey=function(t,e){this.isCellType()?this.selectCell({rowIndex:t,cellIndex:e},!0):this.addAttribute(this.parent.getCellFromIndex(t,e))},a.prototype.shiftDownKey=function(t,e){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(Pt(this.prevRowIndex)?this.isPartialSelection?this.selectRow(t,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,t),this.applyUpDown(t))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},a.prototype.applyShiftLeftRightKey=function(t,e){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,e):this.selectCellsByRange(this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},a.prototype.getstackedColumns=function(t){for(var e=[],i=0,s=t.length;i<s;i++)t[parseInt(i.toString(),10)].columns?this.getstackedColumns(t[parseInt(i.toString(),10)].columns):e.push(t[parseInt(i.toString(),10)]);return e},a.prototype.applyCtrlHomeEndKey=function(t,e){this.isRowType()&&(this.selectRow(t,!0),this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.addAttribute(this.parent.getCellFromIndex(t,e))),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0)},a.prototype.addRemoveClassesForRow=function(t,e,i){for(var s=[],r=3;r<arguments.length;r++)s[r-3]=arguments[r];if(t){var n=[].slice.call(t.getElementsByClassName(He)),o=t.querySelector(".e-detailrowcollapse")||t.querySelector(".e-detailrowexpand"),l=t.querySelector(".e-rowdragdrop");o&&n.push(o),l&&n.push(l),qs.apply(void 0,[n,e].concat(s))}this.getRenderer().setSelection(t?t.getAttribute("data-uid"):null,e,i)},a.prototype.isRowType=function(){return this.selectionSettings.mode==="Row"||this.selectionSettings.mode==="Both"},a.prototype.isCellType=function(){return this.selectionSettings.mode==="Cell"||this.selectionSettings.mode==="Both"},a.prototype.isSingleSel=function(){return this.selectionSettings.type==="Single"},a.prototype.getRenderer=function(){return u(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(oi.Content)),this.contentRenderer},a.prototype.getSelectedRecords=function(){var t=[];return!this.selectionSettings.persistSelection&&this.selectedRecords.length?t=this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data}):t=this.persistSelectedData,this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(t=this.virtualSelectedData),t},a.prototype.selectColumn=function(t){var e=this.parent;if(!u(e.getColumns()[parseInt(t.toString(),10)])){var i=e.getColumnByIndex(t),s=e.getColumnHeaderByUid(i.uid),r=s.classList.contains("e-columnselection");if(e.selectionSettings.allowColumnSelection){var n=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(t)>-1;if(this.clearColDependency(),!this.selectionSettings.enableToggle||n||!r){var o={columnIndex:t,headerCell:s,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(o,Yo),o.cancel){this.disableInteracted();return}(n||!(r&&e.selectionSettings.enableToggle&&t===this.prevColIndex))&&this.updateColSelection(s,t);var l={columnIndex:t,headerCell:s,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(l,Xo)}this.updateColProps(t)}}},a.prototype.selectColumnsByRange=function(t,e){var i=this.parent;if(!u(i.getColumns()[parseInt(t.toString(),10)])){var s=[];if(i.selectionSettings.type==="Single"||u(e))s[0]=t;else for(var r=t<e,n=t;r?n<=e:n>=e;r?n++:n--)s.push(n);this.selectColumns(s)}},a.prototype.selectColumns=function(t){var e=this.parent,i=this.getselectedCols();if(e.selectionSettings.type==="Single"&&(t=[t[0]]),!!e.selectionSettings.allowColumnSelection){this.clearColDependency();var s={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,Yo),s.cancel){this.disableInteracted();return}for(var r=0,n=t.length;r<n;r++)this.updateColSelection(e.getColumnHeaderByUid(e.getColumnByIndex(t[parseInt(r.toString(),10)]).uid),t[parseInt(r.toString(),10)]);i=this.getselectedCols();var o={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,Xo),this.updateColProps(t[0])}},a.prototype.selectColumnWithExisting=function(t){var e=this.parent;if(!u(e.getColumns()[parseInt(t.toString(),10)])){var i=e.getColumnHeaderByUid(e.getColumnByIndex(t).uid),s=this.getselectedCols();if(e.selectionSettings.type==="Single"&&this.clearColDependency(),!!e.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(t)>-1)this.clearColumnSelection(t);else{var r={columnIndex:t,headerCell:s,columnIndexes:this.selectedColumnsIndexes,column:e.getColumnByIndex(t),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,Yo),r.cancel){this.disableInteracted();return}this.updateColSelection(i,t),s=this.getselectedCols();var n={columnIndex:t,headerCell:s,column:e.getColumnByIndex(t),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(n,Xo)}this.updateColProps(t)}}},a.prototype.clearColumnSelection=function(t){if(this.isColumnSelected){var e=this.parent;if(!u(t)&&this.selectedColumnsIndexes.indexOf(t)===-1)return;var i=u(t)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:t,s=e.getColumnByIndex(i),r=e.getColumnHeaderByUid(s.uid),n={columnIndex:i,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:s,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted},o=this.columnDeselect(n,Gg);if(o){this.disableInteracted();return}for(var l=u(t)?[].slice.call(e.getHeaderContent().getElementsByClassName("e-columnselection")):[r],h=this.getSelectedColumnCells(t),p=0,c=l.length;p<c;p++)qs([l[parseInt(p.toString(),10)]],!1,"e-columnselection");for(var p=0,c=h.length;p<c;p++)qs([h[parseInt(p.toString(),10)]],!1,"e-columnselection");u(t)?(this.columnDeselect(n,_g),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(d){return d.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(t),1),this.parent.getColumns()[parseInt(t.toString(),10)].isSelected=!1)}},a.prototype.getselectedCols=function(){var t=this.parent,e;if(this.selectedColumnsIndexes.length>1){e=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)e.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[parseInt(i.toString(),10)]).uid))}else e=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return e},a.prototype.getSelectedColumnCells=function(t){for(var e=this.parent,i=!u(this.parent.rowTemplate),s=i?e.getRows():e.getDataRows(),r=[],n=u(t)?".e-columnselection":'[aria-colindex="'+(t+1)+'"]',o=0,l=s.length;o<l;o++)r=r.concat([].slice.call(s[parseInt(o.toString(),10)].querySelectorAll(n)));return r},a.prototype.columnDeselect=function(t,e){return e==="columnDeselected"&&delete t.cancel,this.onActionComplete(t,e),t.cancel},a.prototype.updateColProps=function(t){this.prevColIndex=t,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},a.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},a.prototype.updateColSelection=function(t,e){if(!u(this.parent.getColumns()[parseInt(e.toString(),10)])){var i=!u(this.parent.rowTemplate),s=i?this.parent.getRows():this.parent.getDataRows();this.selectedColumnsIndexes.push(e),this.parent.getColumns()[parseInt(e.toString(),10)].isSelected=!0,e=e+this.parent.getIndentCount(),qs([t],!0,"e-columnselection");for(var r=0,n=s.length;r<n;r++)if(s[parseInt(r.toString(),10)].classList.contains(jt))if((s[parseInt(r.toString(),10)].classList.contains(on)||s[parseInt(r.toString(),10)].classList.contains(Sr))&&this.parent.editSettings.mode==="Normal"&&!u(s[parseInt(r.toString(),10)].querySelector("tr").childNodes[parseInt(e.toString(),10)]))qs([s[parseInt(r.toString(),10)].querySelector("tr").childNodes[parseInt(e.toString(),10)]],!0,"e-columnselection");else if(this.parent.isSpan&&this.parent.isFrozenGrid())for(var o=s[parseInt(r.toString(),10)].querySelectorAll(".e-rowcell"),l=0;l<o.length;l++)o[parseInt(l.toString(),10)].getAttribute("aria-colindex")===t.getAttribute("aria-colindex")&&qs([o[parseInt(l.toString(),10)]],!0,"e-columnselection");else u(s[parseInt(r.toString(),10)].childNodes[parseInt(e.toString(),10)])||qs([s[parseInt(r.toString(),10)].childNodes[parseInt(e.toString(),10)]],!0,"e-columnselection")}},a.prototype.headerSelectionHandler=function(t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(t):this.isMultiShiftRequest?this.selectColumnsByRange(Pt(this.prevColIndex)?t:this.prevColIndex,t):this.selectColumnWithExisting(t)},a.prototype.addEventListener_checkbox=function(){var t=this;this.parent.on(Ar,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(As,this.onDataBoundFunction),this.parent.on(rp,this.onDataBoundFunction),this.parent.on(nt,this.checkBoxSelectionChanged,this),this.parent.on(Vl,this.initPerisistSelection,this),this.parent.on(Hi,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(Fe,this.actionCompleteFunc),this.parent.on(ls,this.clickHandler,this),this.resizeEndFn=function(){t.updateAutoFillPosition(),t.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(Wu,this.resizeEndFn)},a.prototype.removeEventListener_checkbox=function(){this.parent.off(Ar,this.dataReady),this.parent.removeEventListener(As,this.onDataBoundFunction),this.parent.removeEventListener(Fe,this.actionCompleteFunc),this.parent.off(rp,this.onDataBoundFunction),this.parent.off(Hi,this.setCheckAllForEmptyGrid),this.parent.off(ls,this.clickHandler),this.parent.removeEventListener(Wu,this.resizeEndFn),this.parent.off(Vl,this.initPerisistSelection)},a.prototype.setCheckAllForEmptyGrid=function(){var t=this.getCheckAllBox();if(t){this.parent.isCheckBoxSelection=!0;var e=t.nextElementSibling;R([e],["e-check","e-stop","e-uncheck"]),x([e.parentElement],["e-checkbox-disabled"])}},a.prototype.dataReady=function(t){this.isHeaderCheckboxClicked=!1;var e=this.parent.enableInfiniteScrolling&&t.requestType==="infiniteScroll";t.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!e&&(this.disableUI=!this.parent.enableImmutableMode&&!(t.requestType==="save"&&t.action==="add"),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},a.prototype.actionCompleteHandler=function(t){t.requestType==="save"&&this.parent.isPersistSelection&&this.refreshPersistSelection()},a.prototype.selectRowIndex=function(t){this.parent.isSelectedRowIndexUpdating=!0,u(this.parent.selectedRowIndex)||this.parent.selectedRowIndex===-1||!this.parent.enablePersistence?this.parent.selectedRowIndex=t:this.parent.selectedRowIndex=-1},a.prototype.disableInteracted=function(){this.isInteracted=!1},a.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},a})(),Jv=(function(){function a(t){this.headerFocus=!1,this.parent=t,this.addEventListener()}return a.prototype.hasNonNumericCharacters=function(t){for(var e=!1,i=0,s=t;i<s.length;i++){var r=s[i];if((r<"0"||r>"9")&&r!==".")return!0;if(r==="."){if(e)return!0;e=!0}}return!1},a.prototype.search=function(t){var e=this.parent;if(t=u(t)?"":t,Ds(e)){e.notify(Bi,{instance:this,handler:this.search,arg1:t});return}if(t!==e.searchSettings.key){if(this.headerFocus=!1,t!==""&&!this.hasNonNumericCharacters(t)){var i=t.split(".");t==="."||t.indexOf(".")===-1||i[0].startsWith("0")&&i[0].length>1?e.searchSettings.key=t.toString():e.searchSettings.key=parseFloat(t).toString()}else e.searchSettings.key=t.toString();e.dataBind()}else this.refreshSearch?e.refresh():this.headerFocus=!1},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Wt,this.onPropertyChanged,this),this.parent.on(Uu,this.onSearchComplete,this),this.parent.on(ut,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(Fe,this.actionCompleteFunc),this.parent.on(Na,this.cancelBeginEvent,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Wt,this.onPropertyChanged),this.parent.off(Uu,this.onSearchComplete),this.parent.off(ut,this.destroy),this.parent.removeEventListener(Fe,this.actionCompleteFunc),this.parent.off(Na,this.cancelBeginEvent))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(u(t.properties.key)?this.parent.notify(os,{requestType:"searching",type:Rt}):this.parent.notify(os,{requestType:"searching",type:Rt,searchString:this.parent.searchSettings.key}))},a.prototype.onSearchComplete=function(t){this.parent.trigger(Fe,$(t,{searchString:this.parent.searchSettings.key,requestType:"searching",type:Fe}))},a.prototype.onActionComplete=function(t){this.refreshSearch&&t.requestType==="refresh"&&this.headerFocus&&(this.headerFocus=!1,this.parent.focusModule.focus(),x([this.parent.focusModule.currentInfo.element],["e-focused"])),this.refreshSearch=t.requestType!=="searching"},a.prototype.cancelBeginEvent=function(t){t.requestType==="searching"&&this.parent.setProperties({searchSettings:{key:""}},!0)},a.prototype.getModuleName=function(){return"search"},a})(),Zv=(function(){function a(t){this.colName=[],this.isShowHide=!1,this.parent=t,this.addEventListener(),this.widthService=new wh(t)}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Xc,handler:this.batchChanges},{event:lv,handler:this.resetColumnState}],yi(this.parent,this.evtHandlers,!0,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||yi(this.parent,this.evtHandlers,!1)},a.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},a.prototype.show=function(t,e){var i=this.getToggleFields(t),s=this.getColumns(i,e);if(this.parent.notify(Ol,{module:"edit"}),this.parent.enableVirtualization&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length){var r=s.filter(function(o){return!o.visible});r.forEach(function(o){return o.visible=!0}),r.length>0&&this.setVisible(r)}else{for(var n=0;n<s.length;n++)s[parseInt(n.toString(),10)].visible=!0;this.setVisible(s)}},a.prototype.hide=function(t,e){var i=this.getToggleFields(t),s=this.getColumns(i,e);if(this.parent.notify(Ol,{module:"edit"}),this.parent.enableVirtualization&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length){var r=s.filter(function(o){return o.visible});r.forEach(function(o){return o.visible=!1}),r.length>0&&this.setVisible(r)}else{for(var n=0;n<s.length;n++)s[parseInt(n.toString(),10)].visible=!1;this.setVisible(s)}},a.prototype.getToggleFields=function(t){var e=[];return typeof t=="string"?e=[t]:e=t,e},a.prototype.getColumns=function(t,e){var i=this,s=Qs(t,function(r){return Qs(i.parent.columnModel,function(n){if(n[""+e]===r)return n})[0]});return s},a.prototype.batchActionPrevent=function(t,e){return e===void 0&&(e=[]),Ds(this.parent)?(this.colName=t,this.changedCol=e,this.parent.closeEdit(),!1):!0},a.prototype.resetColumnState=function(){if(this.isShowHide)for(var t=0;t<this.colName.length;t++)this.colName[parseInt(t.toString(),10)].visible=!this.colName[parseInt(t.toString(),10)].visible},a.prototype.setVisible=function(t,e){var i=this;if(e===void 0&&(e=[]),this.isShowHide=!0,!!this.batchActionPrevent(t,e)){e=e.length>0?e:t;var s={requestType:"columnstate",cancel:!1,columns:e},r="cancel";if(this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(Rt,s,function(o){var l=i.parent.getColumns();if(t=u(t)?l:t,o[""+r]){i.parent.notify(Um,{showHideArgs:o}),t.length>0&&(t[0].visible=!0);return}i.parent.notify(hd,s),Pi(i.parent)&&i.parent.contentModule.emptyVcRows();var h=i.parent.element.querySelector(".e-addedrow");i.parent.editSettings.showAddNewRow&&h&&(ce(h),(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&(i.parent.isAddNewRow=!0),i.parent.addNewRowFocus=!0,i.parent.isEdit=!1),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization?i.parent.notify(Va,{isModeChg:!0}):(i.parent.isFrozenGrid()||i.parent.enableColumnSpan)&&t.length?i.parent.notify(Va,{isModeChg:!0}):i.parent.notify(bh,t);var p={requestType:"columnstate",columns:e};i.parent.trigger(Fe,p);var c=!i.parent.element.querySelector(".e-addedrow");i.parent.editSettings.showAddNewRow&&c&&(i.parent.isEdit=!1,i.parent.addRecord(),i.parent.enableVirtualization||i.parent.enableInfiniteScrolling||i.parent.notify(br,{})),i.parent.columnQueryMode!=="All"&&i.parent.refresh()}),!this.parent.groupSettings.columns.length){if(this.parent.autoFit)this.parent.preventAdjustColumns();else if(this.parent.allowResizing&&this.parent.resizeSettings.mode==="Normal"){var n=this.parent.getHeaderTable().style.width.indexOf("px")===-1;this.widthService.setWidthToTable(n)}}}},a})(),ey=(function(){function a(t){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=t,this.widthService=new wh(t),this.addEventListener()}return a.prototype.getModuleName=function(){return"scroll"},a.prototype.setWidth=function(t){if(this.parent.element.style.width=ve(this.parent.width),t&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element){var e=this.parent.toolbarModule.toolbar.element,i=e.querySelector(".e-toolbar-left"),s=e.querySelector(".e-toolbar-center"),r=e.querySelector(".e-toolbar-right"),n=e.querySelector(".e-toolbar-items"),o=i?i.clientWidth:0,l=s?s.clientWidth:0,h=r?r.clientWidth:0,p=n?n.clientWidth:0,c=e?e.clientWidth:0;(!this.parent.enableAdaptiveUI||o>c||l>c||h>c||p>c)&&this.parent.toolbarModule.toolbar.refreshOverflow()}},a.prototype.setHeight=function(){var t=0,e=this.parent.getContent().querySelector("."+Nt),i=this.parent.height;if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()){this.parent.height!=="auto"&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-a.getScrollBarWidth());var s=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.height.toString().indexOf("%")>0&&!u(s)&&(i="calc("+i+" - "+s.scrollHeight+"px)")}if(!this.parent.enableVirtualization&&this.parent.frozenRows&&this.parent.height!=="auto"&&this.parent.height!=="100%"){var r=this.parent.getHeaderContent().querySelector(ze+":not(.e-masked-tbody)");if(t=r?r.offsetHeight:0,r&&t){var n=r.getElementsByClassName(Sr).length,o=n*this.parent.getRowHeight();t-=o}else!this.parent.isInitialLoad&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight());e.style.height=ve(parseInt(i,10)-t)}else e.style.height=ve(i);this.ensureOverflow(e),this.parent.isFrozenGrid()&&this.refresh()},a.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),e=a.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties();t.querySelector("."+Ft).style[i.border]=e>0?"1px":"0px",t.style[i.padding]=e>0?e+"px":"0px"},a.prototype.removePadding=function(t){var e=this.getCssProperties(t),i=this.parent.getHeaderContent().querySelector("."+Ft);i.style[e.border]="",i.parentElement.style[e.padding]="";var s=this.parent.getFooterContent();s&&s.classList.contains("e-footerpadding")&&s.classList.remove("e-footerpadding")},a.prototype.refresh=function(){if(this.parent.height==="100%"){var t=this.parent.getContent();this.parent.element.style.height="100%";var e=this.widthService.getSiblingsHeight(t);t.style.height="calc(100% - "+e+"px)"}},a.prototype.getThreshold=function(){var t=E.info.name;return t==="mozilla"?.5:1},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Hi,this.wireEvents,this),this.parent.on(nt,this.wireEvents,this),this.parent.on(bt,this.onPropertyChanged,this),this.parent.on(Ju,this.wireEvents,this),this.parent.on(mi,this.setScrollLeft,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Hi,this.wireEvents),this.parent.off(nt,this.wireEvents),this.parent.off(bt,this.onPropertyChanged),this.parent.off(Ju,this.wireEvents),this.parent.off(mi,this.setScrollLeft),this.unwireEvents())},a.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(v.remove(this.header,"touchstart pointerdown",this.setPageXY),v.remove(this.header,"touchmove pointermove",this.onTouchScroll));var t=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(t&&v.remove(t,"scroll",this.onCustomScrollbarScroll),this.content&&(v.remove(this.content,"scroll",this.onCustomScrollbarScroll),v.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(E.userAgent.toLowerCase())&&E.isDevice||v.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header&&(v.remove(this.header,"scroll",this.onCustomScrollbarScroll),v.remove(this.header,"touchstart pointerdown",this.setPageXY),v.remove(this.header,"touchmove pointermove",this.onTouchScroll))),this.content&&v.remove(this.content,"scroll",this.contentScrollHandler),this.header&&v.remove(this.header,"scroll",this.headerScrollHandler),this.contentScrollHandler=null,this.headerScrollHandler=null,this.parent.aggregates.length&&this.parent.getFooterContent()&&v.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},a.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+Ft).scrollLeft=this.previousValues.left},a.prototype.onContentScroll=function(t){var e=this,i=t,s=i.classList.contains(Ft);return function(r){if(!(e.content.querySelector(ze)===null||e.parent.isPreventScrollEvent)){var n=r.target;if(e.parent.frozenRows&&(e.content.scrollTop>0&&e.parent.frozenRows?x([e.parent.element],"e-top-shadow"):R([e.parent.element],"e-top-shadow")),e.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){var o=e.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),l=e.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])'),h=e.parent.enableRtl?Math.abs(n.scrollLeft):n.scrollLeft,p=h<=1;!p&&e.parent.getVisibleFrozenLeftCount()?x([e.parent.element],"e-left-shadow"):R([e.parent.element],"e-left-shadow");var c=e.parent.enableRtl?Math.abs(n.scrollLeft):n.scrollLeft,d=Math.round(c+n.clientWidth)>=n.scrollWidth-1;d&&e.parent.getVisibleFrozenRightCount()?R([e.parent.element],"e-right-shadow"):x([e.parent.element],"e-right-shadow");var f=[].slice.call(e.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));if((f.length===1&&o.length||e.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||l.length)&&n.scrollLeft!==e.previousValues.left){n.scrollLeft=e.previousValues.left;return}if(f.length!==1&&(o.length||l.length)&&n.scrollTop!==e.previousValues.top){n.scrollTop=e.previousValues.top;return}}var g=n.scrollLeft;if(!u(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling&&(!e.parent.isEdit||e.parent.editSettings.showAddNewRow&&!e.parent.element.querySelector(".e-editedrow"))&&e.parent.notify(Nm,{target:r.target,isLeft:e.previousValues.left!==g}),e.parent.groupSettings.columns.length&&e.parent.groupSettings.enableLazyLoading){var y=e.previousValues.top<e.parent.getContent().firstElementChild.scrollTop;e.parent.notify(_m,{scrollDown:y})}e.parent.notify(Mm,{});var b=n.classList.contains("e-summarycontent");if(e.previousValues.left===g){e.previousValues.top=s?n.scrollTop:e.previousValues.top;return}e.parent.notify(Hl,r),i.scrollLeft=g,b&&(e.header.scrollLeft=g),e.previousValues.left=g,e.parent.notify(_u,{left:g})}}},a.prototype.onCustomScrollbarScroll=function(t,e){var i=this,s=t,r=e;return function(n){if(i.content.querySelector(ze)!==null){var o=n.target,l=o.scrollLeft;i.previousValues.left!==l&&(s.scrollLeft=l,r.scrollLeft=l,i.previousValues.left=l,i.parent.notify(_u,{left:l}),i.parent.isDestroyed)}}},a.prototype.onTouchScroll=function(t){var e=this,i=t;return function(s){if(s.pointerType!=="mouse"){var r=e.parent.isFrozenGrid(),n=e.getPointXY(s),o=i.scrollLeft+(e.pageXY.x-n.x),l=e.parent.getHeaderContent().querySelector("."+Ft),h=e.parent.getContent().querySelector("."+Nt);if(!(e.previousValues.left===o||o<0||l.scrollWidth-l.clientWidth<o)){if(s.preventDefault(),l.scrollLeft=o,h.scrollLeft=o,r&&e.parent.enableColumnVirtualization){var p=e.parent.getContent().querySelector(".e-movablescrollbar");p.scrollLeft=o}e.pageXY.x=n.x,e.previousValues.left=o}}}},a.prototype.setPageXY=function(){var t=this;return function(e){e.pointerType!=="mouse"&&(t.pageXY=t.getPointXY(e))}},a.prototype.getPointXY=function(t){var e={x:0,y:0};return t.touches&&t.touches.length?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):(e.x=t.pageX,e.y=t.pageY),e},a.prototype.getScrollbleParent=function(t){if(t===null)return null;var e=u(t.tagName)?t.scrollingElement:t,i=document.defaultView.getComputedStyle(e,null).overflowY;return e.scrollHeight>e.clientHeight&&i!=="hidden"&&i!=="visible"||t.tagName==="HTML"||t.tagName==="BODY"?t:this.getScrollbleParent(t.parentNode)},a.prototype.addStickyListener=function(t){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),t&&this.parentElement?(this.eventElement=this.parentElement.tagName==="HTML"||this.parentElement.tagName==="BODY"?document:this.parentElement,v.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(v.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},a.prototype.resizeFrozenRowBorder=function(){var t;this.parent.element.querySelector(".e-frozenrow-border")?t=this.parent.element.querySelector(".e-frozenrow-border"):(t=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(t,this.parent.element.querySelector(".e-gridcontent")));var e=this.parent.height!=="auto"?a.getScrollBarWidth():0;t.style.width=this.parent.element.offsetWidth-e-.5+"px"},a.prototype.wireEvents=function(){var t=this;if(this.oneTimeReady){var e=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+Nt),this.header=this.parent.getHeaderContent().querySelector("."+Ft);var i=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&this.header&&this.content&&(v.add(this.header,"touchstart pointerdown",this.setPageXY(),this),v.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),e&&i&&this.parent.enableColumnVirtualization&&(v.add(i,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),v.add(this.content,"scroll",this.onCustomScrollbarScroll(i,this.header),this),v.add(this.header,"scroll",this.onCustomScrollbarScroll(i,this.content),this),v.add(this.header,"touchstart pointerdown",this.setPageXY(),this),v.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),v.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(E.userAgent.toLowerCase())&&E.isDevice||v.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),v.add(this.content,"scroll",this.contentScrollHandler,this),v.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&v.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var s=this.parent.getContentTable(),r,n,o;Cd(function(){r=t.header.scrollLeft,n=s.scrollHeight,o=t.parent.getContent().clientHeight},function(){var l={cancel:!1};t.parent.notify(Qm,l),n<o&&t.parent.height!=="auto"&&(t.setLastRowCell(),t.parent.notify(uv,l)),t.parent.frozenRows&&t.resizeFrozenRowBorder(),!t.parent.enableVirtualization&&!t.parent.enableInfiniteScrolling&&(l.cancel||(t.header.scrollLeft=t.previousValues.left,t.content.scrollLeft=t.previousValues.left,t.content.scrollTop=t.previousValues.top)),t.parent.enableColumnVirtualization||(t.content.scrollLeft=r,t.parent.isFrozenGrid()&&(t.previousValues.left=r))}),this.parent.isPreventScrollEvent=!1},a.prototype.setLastRowCell=function(){var t=this.parent.getContentTable();R(t.querySelectorAll("td"),"e-lastrowcell"),t.querySelector("tr:nth-last-child(2)")&&this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Bottom"&&x(t.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell"),x(t.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isSpan&&x(t.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell")},a.prototype.getCssProperties=function(t){var e={},i=u(t)?this.parent.enableRtl:t;return e.border=i?"borderLeftWidth":"borderRightWidth",e.padding=i?"paddingLeft":"paddingRight",e},a.prototype.ensureOverflow=function(t){t.style.overflowY=this.parent.height==="auto"?"auto":"scroll"},a.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,this.parent.height==="auto"&&this.removePadding(),this.wireEvents(),this.setHeight();var e="width";this.setWidth(!u(t.properties[""+e]))}},a.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var t=this.parent.getContent().getClientRects()[0];if(t){var e=window.devicePixelRatio,i=this.parent.getHeaderContent(),s=this.parent.element.querySelector(".e-toolbar"),r=this.parent.element.querySelector(".e-groupdroparea"),n=i.offsetHeight+(s?s.offsetHeight:0)+(r?r.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,l=t.top-(o<0?0:o),h=t.left,p=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(e!==1&&(l=Math.ceil(l)),l<n&&t.bottom>0){i.classList.add("e-sticky");var c=0;r&&this.parent.groupSettings.showDropArea&&(this.setSticky(r,c,t.width,h,!0),c+=r.getClientRects()[0].height),s&&(this.setSticky(s,c,t.width,h,!0),c+=s.getClientRects()[0].height),this.setSticky(i,c,t.width,h,!0),u(p)||(p.style.position="fixed",p.style.top=n+"px")}else if(i.classList.contains("e-sticky")){this.setSticky(i,null,null,null,!1),s&&this.setSticky(s,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1);var d=this.parent.element.querySelector(".e-ccdlg");if(d&&d.classList.remove("e-sticky"),!u(p)){p.style.position="absolute";var f=t.top-o;p.style.top=f+"px"}}this.parent.notify(nv,{})}}},a.prototype.setSticky=function(t,e,i,s,r){r?t.classList.add("e-sticky"):t.classList.remove("e-sticky"),t.style.width=i!=null?i+"px":"",t.style.top=e!=null?e+"px":"",t.style.left=s!==null?parseInt(t.style.left,10)!==s?s+"px":t.style.left:""},a.prototype.destroy=function(){var t=this.parent.element;if(!(!t||!t.querySelector("."+Xt)&&!t.querySelector("."+ki))){this.removeEventListener();var e=this.parent.getContent().querySelector("."+Nt);v.remove(e,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),R([this.parent.getHeaderContent().querySelector("."+Ft)],Ft),R([e],Nt),e.style.height="",this.parent.element.style.width=""}},a.getScrollBarWidth=function(){return ai()},a})(),md=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Zi=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},ty=(function(a){md(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.templateFn={},e}return t.prototype.setFormatter=function(e){this.formatFn=e},t.prototype.getFormatter=function(){return this.formatFn},t.prototype.setTemplate=function(e){e===void 0&&(e={}),this.footerTemplate!==void 0&&(this.templateFn[ws(he,he.Summary)]={fn:qe(this.footerTemplate,e),property:"footerTemplate"}),this.groupFooterTemplate!==void 0&&(this.templateFn[ws(he,he.GroupSummary)]={fn:qe(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),this.groupCaptionTemplate!==void 0&&(this.templateFn[ws(he,he.CaptionSummary)]={fn:qe(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})},t.prototype.getTemplate=function(e){return this.templateFn[ws(he,e)]},t.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},Zi([m()],t.prototype,"type",void 0),Zi([m()],t.prototype,"field",void 0),Zi([m()],t.prototype,"columnName",void 0),Zi([m()],t.prototype,"format",void 0),Zi([m()],t.prototype,"footerTemplate",void 0),Zi([m()],t.prototype,"groupFooterTemplate",void 0),Zi([m()],t.prototype,"groupCaptionTemplate",void 0),Zi([m()],t.prototype,"customAggregate",void 0),t})(Je),iy=(function(a){md(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Zi([Rs([],ty)],t.prototype,"columns",void 0),t})(Je),sy=(function(){function a(t,e){this.copyContent="",this.isSelect=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(nt,this.initialEnd,this),this.parent.on(hi,this.keyDownHandler,this),this.parent.on(ls,this.clickHandler,this),this.parent.on(Hi,this.initialEnd,this),v.add(this.parent.element,"keydown",this.pasteHandler,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(hi,this.keyDownHandler),this.parent.off(nt,this.initialEnd),this.parent.off(ls,this.clickHandler),this.parent.off(Hi,this.initialEnd),v.remove(this.parent.element,"keydown",this.pasteHandler))},a.prototype.clickHandler=function(t){var e=t.target;e=F(e,"e-rowcell")},a.prototype.pasteHandler=function(t){var e=this,i=this.parent,s=/(Mac)/i.test(navigator.platform),r=this.parent.getSelectedRowCellIndexes();if(!i.isEdit&&t.keyCode===67&&s&&t.metaKey&&this.copy(),r.length&&t.keyCode===86&&(!s&&t.ctrlKey||s&&t.metaKey)&&!i.isEdit){var n=M(document.activeElement,"."+He);if(!this.clipBoardTextArea||!n||!i.editSettings.allowEditing||i.editSettings.mode!=="Batch"||i.selectionSettings.mode!=="Cell"||i.selectionSettings.cellSelectionMode==="Flow")return;this.activeElement=document.activeElement;var o=window.scrollX,l=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){e.activeElement.focus(),window.scrollTo(o,l),e.paste(e.clipBoardTextArea.value,r[0].rowIndex,r[0].cellIndexes[0])},s?100:10)}},a.prototype.paste=function(t,e,i){for(var s=this.parent,r=i,n=e,o,l,h,p=t.split(`
`),c,d=0;d<p.length;d++){if(c=p[parseInt(d.toString(),10)].split("	"),r=i,d===p.length-1&&p[parseInt(d.toString(),10)]===""||Pt(s.getRowByIndex(n))){r++;break}for(var f=0;f<c.length;f++){if(h=s.getCellFromIndex(n,r),!h){r++;break}if(o=s.getColumnByIndex(r),l=o.getParser()?o.getParser()(c[parseInt(f.toString(),10)]):c[parseInt(f.toString(),10)],o.allowEditing&&!o.isPrimaryKey){var g={column:o,data:l,rowIndex:n};this.parent.trigger(sm,g),n=g.rowIndex,g.cancel||s.editModule&&(o.type==="number"?this.parent.editModule.updateCell(n,o.field,parseFloat(g.data)):s.editModule.updateCell(n,o.field,g.data))}r++}n++}s.selectionModule.selectCellsByRange({rowIndex:e,cellIndex:i},{rowIndex:n-1,cellIndex:r-1});var y=this.parent.getCellFromIndex(n-1,r-1);y&&Se(y,["e-focus","e-focused"],[]),this.clipBoardTextArea.value=""},a.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(nt,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.clipBoardTextArea.style.opacity="0",this.parent.element.appendChild(this.clipBoardTextArea)},a.prototype.keyDownHandler=function(t){t.action==="ctrlPlusC"?this.copy():t.action==="ctrlShiftPlusH"&&this.copy(!0)},a.prototype.setCopyData=function(t){if(window.getSelection().toString()===""){this.clipBoardTextArea.value=this.copyContent="";var e=this.parent.getDataRows();if(this.parent.selectionSettings&&this.parent.selectionSettings.allowColumnSelection&&this.parent.selectionModule&&this.parent.selectionModule.selectedColumnsIndexes.length){if(t){for(var i=this.parent.selectionModule.selectedColumnsIndexes,s=[],r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)],o=this.parent.getColumnHeaderByIndex(n);o&&!o.classList.contains("e-hide")&&s.push(o)}this.getCopyData(s,!1,"	",t),this.copyContent+=`
`}for(var l=0;l<e.length;l++){var h=[];l>0&&(this.copyContent+=`
`),h.push.apply(h,[].slice.call(e[parseInt(l.toString(),10)].querySelectorAll(".e-columnselection:not(.e-hide)"))),this.getCopyData(h,!1,"	",t)}}else if(this.parent.selectionSettings.mode!=="Cell"){var p=this.parent.getSelectedRowIndexes().sort(function(T,L){return T-L});if(t){for(var c=[],r=0;r<this.parent.getVisibleColumns().length;r++)c[parseInt(r.toString(),10)]=this.parent.getVisibleColumns()[parseInt(r.toString(),10)].headerText;this.getCopyData(c,!1,"	",t),this.copyContent+=`
`}if((this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&p.length>e.length){p=[];for(var r=0;r<e.length;r++){var d=e[parseInt(r.toString(),10)];d.getAttribute("aria-selected")==="true"&&p.push(parseInt(d.getAttribute("data-rowindex"),10))}}for(var r=0;r<p.length;r++){r>0&&(this.copyContent+=`
`);var f=[],g=p[parseInt(r.toString(),10)];!Pi(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(g=e.map(function(L){return L.getAttribute("data-rowindex")}).indexOf(p[parseInt(r.toString(),10)].toString()));var y=e[parseInt(g.toString(),10)];u(y)||(f.push.apply(f,[].slice.call(y.querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(f,!1,"	",t))}}else if(this.parent.selectionModule&&this.parent.selectionModule.selectedRowCellIndexes.length){var b=this.checkBoxSelection();if(b.status){if(t){for(var C=[],r=0;r<b.colIndexes.length;r++){var S=this.parent.getColumnHeaderByIndex(b.colIndexes[parseInt(r.toString(),10)]);S.classList.contains("e-hide")||C.push(S)}this.getCopyData(C,!1,"	",t),this.copyContent+=`
`}for(var r=0;r<b.rowIndexes.length;r++){r>0&&(this.copyContent+=`
`);var I=[].slice.call(e[b.rowIndexes[parseInt(r.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));this.getCopyData(I,!1,"	",t)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,`
`,t)}var A={data:this.copyContent,cancel:!1};if(this.parent.trigger(im,A),A.cancel)return;this.clipBoardTextArea.value=this.copyContent=A.data,E.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},a.prototype.getCopyData=function(t,e,i,s){for(var r=typeof t[0]!="string",n=0;n<t.length;n++){if(s&&e){var o=parseInt(t[parseInt(n.toString(),10)].getAttribute(yt),10)-1;this.copyContent+=this.parent.getColumns()[parseInt(o.toString(),10)].headerText+`
`}r?t[parseInt(n.toString(),10)].classList.contains("e-hide")||(this.copyContent+=t[parseInt(n.toString(),10)].innerText):this.copyContent+=t[parseInt(n.toString(),10)],n<t.length-1&&(this.copyContent+=i)}},a.prototype.copy=function(t){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(t),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},a.prototype.getModuleName=function(){return"clipboard"},a.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&(ce(this.clipBoardTextArea),this.clipBoardTextArea=null)},a.prototype.checkBoxSelection=function(){var t=this.parent,e={status:!1};if(t.selectionSettings.mode==="Cell"){var i=t.getSelectedRowCellIndexes(),s=void 0,r=[],n=void 0;for(n=0;n<i.length&&(i[parseInt(n.toString(),10)].cellIndexes.length&&r.push(i[parseInt(n.toString(),10)].rowIndex),!(i[parseInt(n.toString(),10)].cellIndexes.length&&(s||(s=JSON.stringify(i[parseInt(n.toString(),10)].cellIndexes.sort())),s!==JSON.stringify(i[parseInt(n.toString(),10)].cellIndexes.sort()))));n++);r.sort(function(o,l){return o-l}),n===i.length&&(e={status:!0,rowIndexes:r,colIndexes:i[0].cellIndexes})}return e},a})(),Yi="https://ej2.syncfusion.com/documentation/grid",qa="https://ej2.syncfusion.com/documentation/",Xi="[EJ2Grid.Warning]",zs="[EJ2Grid.Error]",$n="[EJ2Grid.Info]",ry=(function(){function a(t){this.parent=t,this.parent.on("initial-end",this.patchadaptor,this)}return a.prototype.getModuleName=function(){return"logger"},a.prototype.log=function(t,e){t instanceof Array||(t=[t]);for(var i=t,s=0;s<i.length;s++){var r=ny[i[parseInt(s.toString(),10)]],n=r.check(e,this.parent);n.success&&console[r.logType](r.generateMessage(e,this.parent,n.options))}},a.prototype.patchadaptor=function(){var t=this.parent.getDataModule().dataManager.adaptor,e=t.beforeSend;e&&(t.beforeSend=function(i,s,r){e.call(t,i,s,r)})},a.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},a})(),ny={module_missing:{type:"module_missing",logType:"warn",check:function(a,t){var e=t.getInjectedModules().map(function(s){return s.prototype.getModuleName()}),i=t.requiredModules().map(function(s){return s.member}).filter(function(s){return e.indexOf(s)===-1});return{success:i.filter(function(s){return s!=="resize"}).length>0,options:i}},generateMessage:function(a,t,e){return e=e.filter(function(i){return i!=="resize"}).reduce(function(i,s){return i+("* "+s+`
`)},""),Xi+`: MODULES MISSING
The following modules are not injected:.
`+(""+e)+("Refer to "+Yi+"/module.html for documentation on importing feature modules.")}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(){return{success:typeof Promise>"u"}},generateMessage:function(){return zs+`: PROMISE UNDEFINED
Promise object is not present in the global environment,please use polyfil to support Promise object in your environment.
`+("Refer to "+qa+"/base/browser.html?#required-polyfills for more information.")}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(a,t){return{success:t.enableColumnVirtualization?t.getPrimaryKeyFieldNames().length===0:t.getColumns().filter(function(e){return e.isPrimaryKey}).length===0}},generateMessage:function(){return Xi+`: PRIMARY KEY MISSING
Editing is enabled but primary key column is not specified.
`+("Refer to "+Yi+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(a,t){return{success:t.selectionSettings.persistSelection&&t.getColumns().filter(function(e){return e.isPrimaryKey}).length===0}},generateMessage:function(){return Xi+`: PRIMARY KEY MISSING
selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.
`+("Refer to "+Yi+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},actionfailure:{type:"actionfailure",logType:"error",check:function(){return{success:!0}},generateMessage:function(a,t){var e="",i=ay(a),s=oy(a);return s!==""?e=s:i!==""?e=i:e=a.error,Xi+": "+e}},locale_missing:{type:"locale_missing",logType:"warn",check:function(a,t){var e=P.getObject("locale."+t.locale+".grid",zt);return{success:t.locale!=="en-US"&&u(e)}},generateMessage:function(a,t){return Xi+`: LOCALE CONFIG MISSING
`+("Locale configuration for '"+t.locale+`' is not provided.
`)+("Refer to "+Yi+`/globalization-and-localization.html?#localization 
             for documentation on setting locale configuration.`)}},limitation:{type:"limitation",logType:"warn",check:function(a,t){var e=a,i;switch(e){case"freeze":i={success:!Pt(t.detailTemplate)||!Pt(t.childGrid),options:{name:"freeze"}};break;case"virtualization":i={success:!Pt(t.detailTemplate)||!Pt(t.childGrid),options:{name:"virtualization"}};break;default:i={success:!1};break}return i},generateMessage:function(a,t,e){var i=e.name,s;switch(i){case"freeze":s=`Frozen rows and columns do not support the following features:
* Details Template
* Hierarchy Grid
`;break;case"virtualization":s=`Virtualization does not support the following features.
* Details Template.
* Hierarchy Grid.
`;break;default:s="";break}return Xi+(": "+i.toUpperCase()+` LIMITATIONS
`)+s}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(a,t){return{success:!(t.columns.length||t.dataSource instanceof N||!u(t.dataSource)&&t.dataSource.length)}},generateMessage:function(){return Xi+`: GRID CONFIG MISSING
dataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.
`+("Refer to "+Yi+"/columns.html for documentation on configuring the grid data and columns.")}},virtual_height:{type:"virtual_height",logType:"error",check:function(a,t){return{success:u(t.height)||t.height==="auto"}},generateMessage:function(){return zs+`: GRID HEIGHT MISSING 
height property is required to use virtualization.
`+("Refer to "+Yi+"/virtual.html for documentation on configuring the virtual grid.")}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(a){return{success:Array.isArray(a)||Array.isArray(a.result)}},generateMessage:function(){return zs+`: RETRUN VALUE MISSING  
Remote service returns invalid data. 
`+("Refer to "+Yi+"/edit.html for documentation on configuring editing with remote data.")}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(a,t){return{success:t.getDataModule().isRemote()}},generateMessage:function(){return Xi+`: SORT COMPARER NOT WORKING  
Sort comparer will not work with remote data.`+("Refer to "+Yi+"/sorting/#custom-sort-comparer for documentation on using the sort comparer.")}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(a){return{success:a.column.minWidth&&a.column.minWidth>=a.width||a.column.maxWidth&&a.column.maxWidth<=a.width}},generateMessage:function(){return $n+`: RESIZING COLUMN REACHED MIN OR MAX  
The column resizing width is at its min or max.`}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(a){var t=!0,e;switch(a.moduleName){case"reorder":u(a.destColumn)?e="reordering action is disabled for the "+a.column.headerText+" column":e="reordering action is disabled for the "+(a.column.allowReordering?a.destColumn.headerText:a.column.headerText)+" column";break;case"group":e="grouping action is disabled for the "+a.columnName+" column.";break;case"filter":e="filtering action is disabled for the "+a.columnName+" column.";break;case"sort":e="sorting action is disabled for the "+a.columnName+" column.";break}return{success:t,options:{fn:e}}},generateMessage:function(a,t,e){return $n+(`: ACTION DISABLED 
 `+e.fn)}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(a){return{success:!0,options:{args:a}}},generateMessage:function(a,t,e){return $n+(`: EXPORTING INPROGRESS 
 Grid `+e.args+"ing is in progress")}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(a){return{success:!0,options:{args:a}}},generateMessage:function(a,t,e){return $n+(`: EXPORTING COMPLETED 
 Grid `+e.args+"ing is complete")}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(){return{success:!0}},generateMessage:function(){return zs+`: FOREIGNKEY CONFIG 
  Grid foreign key column needs a valid data source/service.`+("Refer to "+Yi+"/columns/#foreign-key-column for documentation on configuring foreign key columns.")}},initial_action:{type:"initial_action",logType:"error",check:function(a){var t=!0,e;switch(a.moduleName){case"group":e="The "+a.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":e="The "+a.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":e="The "+a.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column.";break}return{success:t,options:{fn:e}}},generateMessage:function(a,t,e){return zs+(`: INITIAL ACTION FAILURE 
 `+e.fn)}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(a,t){return{success:t.getColumns().length<=t.frozenColumns||t.currentViewData.length&&t.frozenRows>=t.currentViewData.length}},generateMessage:function(a,t){return zs+(`: OUT OF RANGE ERROR-
 `+(t.getColumns().length<=t.frozenColumns?"FROZEN COLUMNS,":""))+((t.frozenRows>=t.currentViewData.length?"FROZEN ROWS":"")+" invalid")}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(a){return{success:u(a.column.type),options:a.column.headerText}},generateMessage:function(a,t,e){return zs+(`: COLUMN TYPE MISSING-
  `+e+" column type was invalid or not defined.")+("Please go through below help link: "+qa+"/grid/columns/#column-type")}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(a){return{success:a.dataState.dataSource&&!(a.dataState.dataSource instanceof N||"result"in a.dataState.dataSource||a.dataState.dataSource instanceof Array)&&!u(a.dataState.dataStateChange)}},generateMessage:function(){return Xi+`: DATASOURCE SYNTAX WARNING
DataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used`}}},ay=function(a){var t=a.error;return t.indexOf&&t.indexOf("Format options")!==0?"":`INVALID FORMAT
For more information, refer to the following documentation links:
`+("Number format: "+qa+`/common/internationalization#supported-format-string
`)+("Date format: "+qa+`/common/internationalization#manipulating-datetime
`)+("Message: "+t)},oy=function(a){var t=P.getObject("error.error",a);if(u(t))return"";var e="";try{e=JSON.parse(t.responseText)}catch{e=""}return`XMLHTTPREQUEST FAILED
`+("Url: "+t.responseURL+`
`)+("Status: "+t.status+" - "+t.statusText+`
`)+(e!==""?"Message: "+e:"")},Jt=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Kl=function(){return Kl=Object.assign||function(a){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=t[s])}return a},Kl.apply(this,arguments)},D=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},ly=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m()],t.prototype,"field",void 0),D([m()],t.prototype,"direction",void 0),D([m(!1)],t.prototype,"isFromGroup",void 0),t})(Je),hy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([Rs([],ly)],t.prototype,"columns",void 0),D([m(!0)],t.prototype,"allowUnsort",void 0),t})(Je),uy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m()],t.prototype,"field",void 0),D([m()],t.prototype,"operator",void 0),D([m()],t.prototype,"value",void 0),D([m()],t.prototype,"matchCase",void 0),D([m(!1)],t.prototype,"ignoreAccent",void 0),D([m()],t.prototype,"predicate",void 0),D([m({})],t.prototype,"actualFilterValue",void 0),D([m({})],t.prototype,"actualOperator",void 0),D([m()],t.prototype,"type",void 0),D([m()],t.prototype,"ejpredicate",void 0),D([m()],t.prototype,"uid",void 0),D([m()],t.prototype,"isForeignKey",void 0),D([m()],t.prototype,"condition",void 0),t})(Je),py=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m(!1)],t.prototype,"enableCache",void 0),D([m(3)],t.prototype,"maxBlocks",void 0),D([m(3)],t.prototype,"initialBlocks",void 0),t})(Je),cy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([Rs([],uy)],t.prototype,"columns",void 0),D([m("FilterBar")],t.prototype,"type",void 0),D([m("OnEnter")],t.prototype,"mode",void 0),D([m(!0)],t.prototype,"showFilterBarStatus",void 0),D([m(1500)],t.prototype,"immediateModeDelay",void 0),D([m()],t.prototype,"operators",void 0),D([m(!1)],t.prototype,"ignoreAccent",void 0),D([m(!1)],t.prototype,"enableInfiniteScrolling",void 0),D([m(50)],t.prototype,"itemsCount",void 0),D([m("Shimmer")],t.prototype,"loadingIndicator",void 0),D([m(!1)],t.prototype,"enableCaseSensitivity",void 0),D([m(!1)],t.prototype,"showFilterBarOperator",void 0),t})(Je),dy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m("Row")],t.prototype,"mode",void 0),D([m("Flow")],t.prototype,"cellSelectionMode",void 0),D([m("Single")],t.prototype,"type",void 0),D([m(!1)],t.prototype,"checkboxOnly",void 0),D([m(!1)],t.prototype,"persistSelection",void 0),D([m("Default")],t.prototype,"checkboxMode",void 0),D([m(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),D([m(!0)],t.prototype,"enableToggle",void 0),D([m(!1)],t.prototype,"allowColumnSelection",void 0),t})(Je),fy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m([])],t.prototype,"fields",void 0),D([m("")],t.prototype,"key",void 0),D([m("contains")],t.prototype,"operator",void 0),D([m(!0)],t.prototype,"ignoreCase",void 0),D([m(!1)],t.prototype,"ignoreAccent",void 0),t})(Je),gy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m()],t.prototype,"targetID",void 0),t})(Je),my=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m("Both")],t.prototype,"wrapMode",void 0),t})(Je),vy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m("Normal")],t.prototype,"mode",void 0),t})(Je),yy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m(!0)],t.prototype,"showDropArea",void 0),D([m(!1)],t.prototype,"allowReordering",void 0),D([m(!1)],t.prototype,"showToggleButton",void 0),D([m(!1)],t.prototype,"showGroupedColumn",void 0),D([m(!0)],t.prototype,"showUngroupButton",void 0),D([m(!1)],t.prototype,"disablePageWiseAggregates",void 0),D([m([])],t.prototype,"columns",void 0),D([m()],t.prototype,"captionTemplate",void 0),D([m(!1)],t.prototype,"enableLazyLoading",void 0),t})(Je),by=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m(!1)],t.prototype,"allowAdding",void 0),D([m(!1)],t.prototype,"allowEditing",void 0),D([m(!1)],t.prototype,"allowDeleting",void 0),D([m("Normal")],t.prototype,"mode",void 0),D([m(!0)],t.prototype,"allowEditOnDblClick",void 0),D([m(!0)],t.prototype,"showConfirmDialog",void 0),D([m(!1)],t.prototype,"showDeleteConfirmDialog",void 0),D([m()],t.prototype,"template",void 0),D([m()],t.prototype,"headerTemplate",void 0),D([m()],t.prototype,"footerTemplate",void 0),D([m("Top")],t.prototype,"newRowPosition",void 0),D([m({})],t.prototype,"dialog",void 0),D([m(!1)],t.prototype,"allowNextRowEdit",void 0),D([m(!1)],t.prototype,"showAddNewRow",void 0),t})(Je),Cy=(function(a){Jt(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return D([m("Spinner")],t.prototype,"indicatorType",void 0),t})(Je),vd=(function(a){Jt(t,a);function t(i,s){var r=a.call(this,i,s)||this;return r.isPreventScrollEvent=!1,r.inViewIndexes=[],r.keyA=!1,r.frozenRightCount=0,r.freezeColumnRefresh=!0,r.rightcount=0,r.frozenLeftCount=0,r.leftcount=0,r.tablesCount=1,r.movableCount=0,r.movablecount=0,r.fixedcount=0,r.fixedCount=0,r.visibleFrozenLeft=0,r.visibleFrozenFixed=0,r.isPreparedFrozenColumns=!1,r.visibleFrozenRight=0,r.visibleMovable=0,r.frozenLeftColumns=[],r.frozenRightColumns=[],r.movableColumns=[],r.fixedColumns=[],r.stackedLeft=[],r.stackedRight=[],r.stackedFixed=[],r.stackedMovable=[],r.stackedarrayLeft=[],r.stackedarrayRight=[],r.stackedarrayFixed=[],r.stackedarrayMovable=[],r.media={},r.autoFitColumnsResize=!1,r.tableIndex=0,r.componentRefresh=Vt.prototype.refresh,r.isChangeDataSourceCall=!1,r.mergedColumns=!1,r.isVirtualAdaptive=!1,r.requireTemplateRef=!0,r.vRows=[],r.vcRows=[],r.vGroupOffsets={},r.rowUid=0,r.translateX=0,r.isManualRefresh=!1,r.isAutoFitColumns=!1,r.enableDeepCompare=!1,r.totalDataRecordsCount=0,r.disableSelectedRecords=[],r.partialSelectedRecords=[],r.isSpan=!1,r.islazyloadRequest=!1,r.isAddNewRow=!1,r.addNewRowFocus=!0,r.selectVirtualRowOnAdd=!1,r.lockcolPositionCount=0,r.prevPageMoving=!1,r.pageTemplateChange=!1,r.isAutoGen=!1,r.isAutoGenerateColumns=!1,r.pageRequireRefresh=!0,r.mediaBindInstance={},r.commandDelIndex=void 0,r.preventAutoFit=!1,r.asyncTimeOut=50,r.isExportGrid=!1,r.isWidgetsDestroyed=!1,r.enableLogger=!1,r.needsID=!0,e.Inject($v),We("mergePersistData",r.mergePersistGridData,r),r}e=t,t.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],s={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},r=0;r<i.length;r++)for(var n=this[i[parseInt(r.toString(),10)]],o=0,l=s[i[parseInt(r.toString(),10)]];o<l.length;o++){var h=l[o];delete n[""+h]}var p=this.pageSettings.template,c=Object.assign({template:void 0},this.pageSettings);this.enableVirtualization&&this.enablePersistence&&this.contentModule&&this.contentModule.getPageFromTop&&!u(this.scrollPosition)&&!u(this.scrollPosition.top)&&(c.properties.currentPage=this.contentModule.getPageFromTop(this.scrollPosition.top,{block:1})),this.setProperties({pageSettings:c},!0);var d=this.groupSettings.captionTemplate,f=d&&this.isAngular;f&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!u(this.pagerTemplate);var g=this.addOnPersist(i);return c.template=p,this.setProperties({pageSettings:c},!0),f&&(this.groupSettings.captionTemplate=d),g},t.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var i=[];return this.isDestroyed||(this.allowFiltering&&i.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator],name:"Filter"}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this,this.serviceLocator],name:"ExcelExport"}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.allowSorting&&i.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator],name:"Sort"}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowSelection&&i.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator],name:"Selection"}),this.resizeCheck()&&i.push({member:"resize",args:[this],name:"Resize"}),this.allowReordering&&i.push({member:"reorder",args:[this],name:"Reorder"}),this.allowRowDragAndDrop&&i.push({member:"rowDragAndDrop",args:[this],name:"RowDD"}),this.allowGrouping&&i.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator],name:"Group"}),this.aggregates.length&&i.push({member:"aggregate",args:[this,this.serviceLocator],name:"Aggregate"}),this.isDetail()&&i.push({member:"detailRow",args:[this,this.serviceLocator],name:"DetailRow"}),(this.toolbar||this.toolbarTemplate)&&i.push({member:"toolbar",args:[this,this.serviceLocator],name:"Toolbar"}),(this.enableVirtualization||this.enableColumnVirtualization)&&i.push({member:"virtualscroll",args:[this,this.serviceLocator],name:"VirtualScroll"}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&i.push({member:"freeze",args:[this,this.serviceLocator],name:"Freeze"}),!u(this.columns)&&this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this,this.serviceLocator],name:"CommandColumn"}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this,this.serviceLocator],name:"Edit"}),this.extendRequiredModules(i)),i},t.prototype.extendRequiredModules=function(i){this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this,this.serviceLocator],name:"InfiniteScroll"}),this.groupSettings.enableLazyLoading&&i.push({member:"lazyLoadGroup",args:[this,this.serviceLocator],name:"LazyLoadGroup"}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this,this.serviceLocator],name:"ContextMenu"}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this,this.serviceLocator],name:"ColumnMenu"}),this.showColumnChooser&&i.push({member:"columnChooser",args:[this,this.serviceLocator],name:"ColumnChooser"}),!u(this.columns)&&this.isForeignKeyEnabled(this.columns)&&i.push({member:"foreignKey",args:[this,this.serviceLocator],name:"ForeignKey"}),this.enableLogger&&i.push({member:"logger",args:[this],name:"Logger"})},t.prototype.resizeCheck=function(){var i=!!this.getColumns().filter(function(n){return n.autoFit===!0}).length;!u(this.columnModel)&&this.columnModel.length&&!(this.columnModel[0]instanceof Dt)&&(this.columnModel=[]);var s=!!(this.showColumnMenu&&(!this.columnMenuItems||this.columnMenuItems.filter(function(n){return n==="AutoFit"||n==="AutoFitAll"}).length)),r=!!(this.contextMenuItems&&this.contextMenuItems.filter(function(n){return n==="AutoFit"||n==="AutoFitAll"}).length);return this.allowResizing||this.autoFitColumnsResize||i||s||r},t.prototype.preRender=function(){this.serviceLocator=new qv,this.initProperties(),this.initializeServices()},t.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Vt.prototype.refresh,this.freezeColumnRefresh=!0,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.defaultChartLocale={Chart:"Chart",BarChart:"Bar Chart",Bar:"Bar",StackingBar:"Stacked Bar",StackingBar100:"100% Stacked Bar",Pie:"Pie Chart",ColumnChart:"Column Chart",Column:"Column",StackingColumn:"Stacked Column",StackingColumn100:"100% Stacked Column",LineChart:"Line Chart",Line:"Line",StackingLine:"Stacked Line",StackingLine100:"100% Stacked Line",AreaChart:"Area Chart",Area:"Area",StackingArea:"Stacked Area",StackingArea100:"100% Stacked Area",Scatter:"Scatter Chart"},this.defaultLocale=Kl({EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",FilterTitle:"Filter",FilterIcon:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",In:"In",NotIn:"Not In",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",SortIcon:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.defaultChartLocale),this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},t.prototype.render=function(){if(this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),xr({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new Hv(this,this.serviceLocator),this.searchModule=new Jv(this),this.scrollModule=new ey(this),this.notify(yh,{}),this.pageSettings.enableQueryString){var i=new URL(window.location.href).searchParams.get("page");if(!u(i)&&window.location.href.indexOf("?page=")>0){var s=parseInt(i,10);this.setProperties({pageSettings:{currentPage:s}},!0),this.pageSettings.currentPage=s}}if((this.getDataModule().dataManager.dataSource.offline===!0||this.getDataModule().dataManager.dataSource.url===void 0)&&!(!u(this.dataSource)&&this.dataSource.result)&&(this.isVirtualAdaptive=!0),this.aggregateModule&&this.aggregates.length)for(var r=0;r<this.aggregates.length;r++)for(var n=0;n<this.aggregates[parseInt(r.toString(),10)].columns.length;n++){var o=this.aggregates[parseInt(r.toString(),10)].columns[parseInt(n.toString(),10)];o.types&&(o.type=o.types)}if(this.isReact){var l={requireTemplateRef:this.requireTemplateRef};this.trigger(xl,l),l.requireTemplateRef||(this.requireTemplateRef=l.requireTemplateRef)}else this.trigger(xl);Wa(this.columns,this.enableColumnVirtualization,this),this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.isPreparedFrozenColumns=!0,this.enablePersistence&&this.notify(Pl,{}),this.getMediaColumns(),Ia(this.columns),this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.loadingIndicator.indicatorType==="Spinner"&&this.showSpinner(),this.notify(Xa,{}),this.loadingIndicator.indicatorType==="Shimmer"&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},t.prototype.setInitialFrozenColumnIndex=function(i){for(var s=0;s<i.length;s++){var r=i[parseInt(s.toString(),10)];r[""+lp]=r.index,r.columns&&this.setInitialFrozenColumnIndex(r.columns)}},t.prototype.showSpinner=function(){this.isExportGrid||Is(this.element)},t.prototype.hideSpinner=function(){this.isExportGrid||Er(this.element)},t.prototype.showMaskRow=function(i,s){if(!(u(this.headerModule)||u(this.contentModule))){var r=this.getHeaderContent().firstChild,n=this.getContent().firstChild,o=this.getFooterContent();if(s){var l=s.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),p='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var c=0;c<h;c++){l.innerHTML+=p,l.querySelector(".e-ftrchk.e-mask-ftrchk").style.width="100%",l.querySelector(".e-checkbox-wrapper").style.width="100%";var d=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));d[0].classList.add("e-mask-checkbox-filter-intent"),d[1].classList.add("e-mask-checkbox-filter-span-intent")}return}if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(n.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var f=n.getBoundingClientRect().height,g=f===0?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:f,y=Math.ceil(g/this.getRowHeight());this.rowRenderingMode!=="Vertical"&&(this.headerMaskTable=this.createEmptyMaskTable(r,1)),this.contentMaskTable=this.createEmptyMaskTable(n,y);return}if(this.maskRowContentScroll=!!((this.enableVirtualization||this.enableColumnVirtualization)&&i),!this.contentMaskTable){var b=n;(this.enableVirtualization||this.enableColumnVirtualization)&&(b=b.querySelector(".e-virtualtable")),u(b.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(b,this.getContentMaskColumns(),i))}if(!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&i==="X")){var b=r;this.enableColumnVirtualization&&i==="X"&&(b=b.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(b,this.getContentMaskColumns(),i)}if(o&&o.querySelector(".e-summaryrow")){var C=o.firstChild;if(!this.footerContentMaskTable){var S=C;this.footerContentMaskTable=this.createMaskTable(S)}}this.enableVirtualization&&i||v.add(n,"scroll",this.translateMaskRow,this)}},t.prototype.getContentMaskColumns=function(){return this.getColumns()},t.prototype.createEmptyMaskTable=function(i,s){var r=this.createElement("table",{className:"e-table e-masked-table"}),n=this.createElement("tbody",{className:"e-masked-tbody"}),o=this.createElement("tr",{className:"e-masked-row e-row"});o.style.height=this.getRowHeight()+"px";var l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),o.appendChild(l);for(var h=0;h<s;h++)n.appendChild(o.cloneNode(!0));return r.appendChild(n),i.appendChild(r),r},t.prototype.createFrozenMaskRow=function(i,s){for(var r=0;r<i.length;r++)r<this.frozenLeftCount?(this.frozenLeftCount-1===r&&i[parseInt(r.toString(),10)].classList.add("e-freezeleftborder"),i[parseInt(r.toString(),10)].classList.add("e-leftfreeze"),i[parseInt(r.toString(),10)].setAttribute("aria-colindex",(r+1).toString()),i[parseInt(r.toString(),10)].style.left=s[parseInt(r.toString(),10)].valueX-this.translateX+"px"):i.length-this.frozenRightCount<=r&&s[parseInt(r.toString(),10)]&&(i.length-this.frozenRightCount===r&&i[parseInt(r.toString(),10)].classList.add("e-freezerightborder"),i[parseInt(r.toString(),10)].classList.add("e-rightfreeze"),i[parseInt(r.toString(),10)].setAttribute("aria-colindex",(r+1).toString()),i[parseInt(r.toString(),10)].style.right=this.translateX+s[parseInt(r.toString(),10)].valueX+"px")},t.prototype.createMaskTable=function(i,s,r){var n=i,o=!!M(n,".e-gridheader"),l=!!M(n,".e-gridcontent"),h=!!M(n,".e-gridfooter"),p=this.getContent().firstChild,c=p.scrollHeight,d=n.querySelector("table"),f=d.cloneNode();f.removeAttribute("role"),f.removeAttribute("id"),zd(f,"position: absolute; z-index: 5; width: "+d.getBoundingClientRect().width+"px;"),o&&!(this.enableColumnVirtualization&&r==="X")&&(f.style.transform="translate(0px,"+d.querySelector("thead").getBoundingClientRect().height+"px)"),f.setAttribute("class","e-table e-masked-table");var g=d.querySelector("colgroup").cloneNode(!0);if(g.removeAttribute("id"),g.setAttribute("class","e-masked-colgroup"),f.appendChild(g),o&&this.enableColumnVirtualization&&r==="X"){var y=this.createMaskRow(g,s);if(this.isFrozenGrid()){var b=[].slice.call(y.querySelectorAll(".e-rowcell"));this.createFrozenMaskRow(b,s)}var C=d.querySelector("thead"),S=[].slice.call(C.querySelectorAll("tr")),I=C.cloneNode();I.removeAttribute("role"),I.setAttribute("class","e-masked-thead");for(var A=S.length,T=0;T<A;T++)I.appendChild(y.cloneNode(!0)),I.childNodes[parseInt(T.toString(),10)].style.height=S[parseInt(T.toString(),10)].getBoundingClientRect().height+"px";f.appendChild(I)}var L=d.querySelector("tbody").cloneNode();L.removeAttribute("role"),L.setAttribute("class","e-masked-tbody");var _=d.querySelector("tbody");if(l||o){var X=p,A=Math.ceil(X.getBoundingClientRect().height/this.getRowHeight());if(this.allowPaging&&this.pageSettings.pageSize!==this.currentViewData.length&&this.pagerModule.pagerObj.totalPages!==this.pageSettings.currentPage){var y=this.createMaskRow(g,s),re=y.cloneNode(!0);re.classList.add("e-altrow");for(var T=0;T<this.pageSettings.pageSize-this.currentViewData.length;T++)L.appendChild(T%2===1?re.cloneNode(!0):y.cloneNode(!0))}if(_.querySelector(".e-emptyrow")||!_.childNodes.length||l&&this.childGrid){var y=this.createMaskRow(g,s),re=y.cloneNode(!0);re.classList.add("e-altrow");for(var T=0;T<A;T++){var ye=1;L.appendChild((T+ye)%2===0?re.cloneNode(!0):y.cloneNode(!0))}}else{var V='tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"])';this.isTreeGrid&&(V='tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"]):not(.e-childrow-hidden)');var S=[].slice.call(_.querySelectorAll(V)),q=_.querySelector(".e-addedrow, .e-editedrow"),z=void 0;if(q){if(z=S.indexOf(q),this.isFrozenGrid()&&this.enableColumnVirtualization)for(var U=[].slice.call(S[z+1].querySelectorAll(".e-rowcell")),T=0;T<U.length;T++)T<this.frozenLeftCount?(U[parseInt(T.toString(),10)].classList.add("e-leftfreeze"),U[parseInt(T.toString(),10)].setAttribute("aria-colindex",(T+1).toString()),U[parseInt(T.toString(),10)].style.left=s[parseInt(T.toString(),10)].valueX-this.translateX+"px"):U.length-this.frozenRightCount<=T&&s[parseInt(T.toString(),10)]&&(U[parseInt(T.toString(),10)].classList.add("e-rightfreeze"),U[parseInt(T.toString(),10)].setAttribute("aria-colindex",(T+1).toString()),U[parseInt(T.toString(),10)].style.right=this.translateX+s[parseInt(T.toString(),10)].valueX+"px");q.classList.contains("e-addedrow")?S.splice(z,2):S.splice(z,1)}A=(this.enableVirtualization||this.enableColumnVirtualization)&&r?S.length:A<=S.length?A:S.length;for(var T=0;T<A;T++){var ie=this.applyMaskRow(S[parseInt(T.toString(),10)].cloneNode(!0),S[parseInt(T.toString(),10)].getBoundingClientRect().height);if(this.enableColumnVirtualization&&r==="X"&&this.isFrozenGrid()){var b=[].slice.call(ie.querySelectorAll(".e-masked-cell"));this.createFrozenMaskRow(b,s)}L.appendChild(ie)}if(q&&q.classList.contains("e-editedrow")&&z<A){var J=L.childNodes[parseInt(z.toString(),10)];J.style.height=this.getRowHeight()+"px",J.classList.add("e-row"),q.classList.contains("e-altrow")&&J.classList.add("e-altrow")}}}if(f.appendChild(L),h){var K=d.querySelector("tfoot"),Y=K.cloneNode();Y.setAttribute("class","e-masked-tfoot");for(var S=[].slice.call(K.querySelectorAll("tr")),T=0;T<S.length;T++)Y.appendChild(this.applyMaskRow(S[parseInt(T.toString(),10)].cloneNode(!0),S[parseInt(T.toString(),10)].getBoundingClientRect().height));f.appendChild(Y)}if(o&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+Ft).style.position="relative"),n.insertBefore(f,n.firstChild),l&&!(this.enableVirtualization&&r)){var ne=c-f.getBoundingClientRect().height;ne=ne<0?0:ne;var de=p.scrollTop<=ne?p.scrollTop:ne;this.enableVirtualization&&(de-=$l(M(n,".e-virtualtable")).height),f.style.transform="translate(0px,"+de+"px)"}return f},t.prototype.applyMaskRow=function(i,s){var r=i;r.removeAttribute("role"),r.removeAttribute("aria-rowindex"),r.removeAttribute("data-uid"),r.classList.add("e-masked-row"),r.style.height=s+"px";for(var n=[].slice.call(r.childNodes),o=0;o<n.length;o++){var l=n[parseInt(o.toString(),10)],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),this.enableColumnVirtualization&&l.classList.contains("e-fixedfreeze")&&(R([l],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),x([l],["e-unfreeze"])),l.removeAttribute("aria-colindex"),l.removeAttribute("data-index"),l.removeAttribute("data-mappingname"),l.removeAttribute("data-mappingvalue"),l.removeAttribute("data-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return r},t.prototype.createMaskRow=function(i,s){var r=i,n=s,o=this.createElement("tr",{className:"e-masked-row e-row"});this.rowRenderingMode!=="Vertical"&&(o.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,p=0;h<r.childNodes.length;h++){var c=r.childNodes[parseInt(h.toString(),10)],d=l.cloneNode();d.innerHTML=this.getShimmerTemplate(),c.classList.contains("e-group-intent")||c.classList.contains("e-detail-intent")||c.classList.contains("e-drag-intent")?c.classList.contains("e-group-intent")?d.firstChild.classList.add("e-mask-group-intent"):c.classList.contains("e-detail-intent")?d.firstChild.classList.add("e-mask-detail-intent"):c.classList.contains("e-drag-intent")&&d.firstChild.classList.add("e-mask-drag-intent"):(this.rowRenderingMode==="Vertical"&&n[parseInt(p.toString(),10)]&&d.setAttribute("data-cell",n[parseInt(p.toString(),10)].headerText?n[parseInt(p.toString(),10)].headerText:n[parseInt(p.toString(),10)].field),c.style.display==="none"?d.classList.add("e-hide"):(d.style.textAlign=n[parseInt(p.toString(),10)]&&n[parseInt(p.toString(),10)].textAlign?n[parseInt(p.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",n[parseInt(p.toString(),10)]&&(n[parseInt(p.toString(),10)].type==="checkbox"||n[parseInt(p.toString(),10)].displayAsCheckBox)&&d.firstChild.classList.add("e-mask-checkbox-intent")),p++),o.appendChild(d)}return o},t.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},t.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var i=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),s=0;s<i.length;s++)i[parseInt(s.toString(),10)]&&i[parseInt(s.toString(),10)].classList.add("e-shimmer-wave")},t.prototype.translateMaskRow=function(i){for(var s=i.target,r=s.querySelectorAll(".e-masked-table"),n=0;n<r.length;n++){var o=r[parseInt(n.toString(),10)];if(o){var l=s.scrollHeight-o.getBoundingClientRect().height;l=l<0?0:l;var h=s.scrollTop<=l?s.scrollTop:l;this.enableVirtualization&&(h-=$l(M(o,".e-virtualtable")).height),o.style.transform="translate(0px,"+h+"px)"}}},t.prototype.removeMaskRow=function(){if(!u(this.contentModule)){var i=this.getContent().firstChild;v.remove(i,"scroll",this.translateMaskRow)}this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+Ft).style.position="");for(var s=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],r=0;r<s.length;r++){var n=s[parseInt(r.toString(),10)];n&&ce(n)}this.headerMaskTable=null,this.contentMaskTable=null,this.footerContentMaskTable=null},t.prototype.refreshMaskRow=function(){var i=this.getContent().firstChild;if(!(!this.isInitialLoad&&!this.getColumns().length)&&this.contentMaskTable&&i.querySelector(".e-masked-table")){var s=i;this.enableVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)}},t.prototype.refreshMaskRowColgroupWidth=function(i){var s=i.querySelector("table:not(.e-masked-table)"),r=s.querySelector(li).cloneNode(!0),n=i.querySelector(".e-masked-table");r.removeAttribute("id"),r.setAttribute("class","e-masked-colgroup");for(var o=0;o<r.childNodes.length;o++)r.childNodes[parseInt(o.toString(),10)].removeAttribute("class");ce(n.querySelector(".e-masked-colgroup")),n.insertBefore(r,n.firstChild),n.style.width=s.getBoundingClientRect().width+"px"},t.prototype.updateStackedFilter=function(){this.allowFiltering&&this.filterSettings.type==="FilterBar"&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},t.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var i=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!u(i))for(var s=0;s<i.length;s++)!u(i[parseInt(s.toString(),10)].hideAtMedia)&&(u(i[parseInt(s.toString(),10)].visible)||i[parseInt(s.toString(),10)].visible)&&this.pushMediaColumn(i[parseInt(s.toString(),10)],s)}this.updateFrozenColumnsWidth()},t.prototype.pushMediaColumn=function(i,s){this.mediaCol.push(i),this.media[i.uid]=window.matchMedia(i.hideAtMedia),this.mediaQueryUpdate(s,this.media[i.uid]),this.mediaBindInstance[parseInt(s.toString(),10)]=this.mediaQueryUpdate.bind(this,s),this.media[i.uid].addListener(this.mediaBindInstance[parseInt(s.toString(),10)])},t.prototype.updateMediaColumns=function(i){if(!this.enableColumnVirtualization){for(var s=this.getColumnIndexByUid(i.uid),r=0;r<this.mediaCol.length;r++)if(i.uid===this.mediaCol[parseInt(r.toString(),10)].uid){this.mediaCol.splice(r,1);return}this.pushMediaColumn(i,s)}},t.prototype.mediaQueryUpdate=function(i,s){var r=this.getColumns()[parseInt(i.toString(),10)];this.mediaCol.some(function(n){return n.uid===r.uid})&&(r.visible=s.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,r.visible?this.showHider.show(r.headerText,"headerText"):this.showHider.hide(r.headerText,"headerText")))},t.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var i=this.element.querySelector("."+Sa);this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&i&&x([i],["e-footerpadding"]);var s=this.enableColumnVirtualization?this.columns:this.getColumns(),r=s.filter(function(n){return n.type==="checkbox"});(r.length===0||r.length&&this.selectionSettings.checkboxMode==="ResetOnRowClick")&&(this.isCheckBoxSelection=!1),this.rowRenderingMode==="Vertical"&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),R([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh(),this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},t.prototype.removeMediaListener=function(){for(var i=0;i<this.mediaCol.length;i++)this.media[this.mediaCol[parseInt(i.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(i.toString(),10)].index])},t.prototype.eventInitializer=function(){},t.prototype.destroy=function(){var i=this.element;if(i){var s=!!(i.querySelector("."+Xt)&&i.querySelector("."+ki));s&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(ut,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),s&&a.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!E.isIE&&(this.element.innerHTML="");for(var r=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],n=0;n<r.length;n++)this[r[parseInt(n.toString(),10)]]&&(this[r[parseInt(n.toString(),10)]]=null);this.element.innerHTML="",Se(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},t.prototype.destroyDependentModules=function(){var i=this.element;!i||!i.querySelector("."+Xt)&&!i.querySelector("."+ki)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},t.prototype.getModuleName=function(){return"grid"},t.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):(this.element.classList.remove("e-afenabled"),this.notify(Tl,{}))},t.prototype.setCSSClass=function(i){this.cssClass&&x([this.element],this.cssClass.split(" ")),i&&R([this.element],i.split(" "))},t.prototype.onPropertyChanged=function(i,s){var r=!1,n=!1,o=!1,l,h={requestType:"refresh"},p=null,c=null;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var d=Object.keys(i);d.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),n=!0);for(var f=0,g=d;f<g.length;f++){var y=g[f];switch(y){case"allowPaging":this.notify(bt,{module:"pager",enable:this.allowPaging}),r=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Wt,{module:"pager",properties:i.pageSettings});break}if(this.pagerModule&&this.pagerModule.isCancel){this.pagerModule.isCancel=!1;return}this.notify(Wt,{module:"pager",properties:i.pageSettings}),(u(i.pageSettings.currentPage)&&u(i.pageSettings.pageSize)&&u(i.pageSettings.totalRecordsCount)||!u(s.pageSettings)&&i.pageSettings.currentPage!==s.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageRequireRefresh&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(r=!0),this.pageRequireRefresh||(this.pageRequireRefresh=!0),this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1);break;case"allowSorting":this.notify(bt,{module:"sort",enable:this.allowSorting}),r=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(bt,{module:"filter",enable:this.allowFiltering}),r=!0,this.filterSettings.type!=="FilterBar"||this.editSettings.showAddNewRow&&this.filterSettings.type==="FilterBar"?this.refreshHeader():this.height==="100%"&&this.scrollModule.refresh();break;case"height":case"width":this.notify(bt,{module:"scroll",properties:{width:i.width,height:i.height}}),this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(bt,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(bt,{module:"selection",enable:this.allowSelection}),this.renderModule.refresh();break;case"cssClass":this.setCSSClass(s.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=st(this.rowTemplate),r=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=st(this.emptyRecordTemplate),r=!0;break;case"detailTemplate":this.detailTemplateFn=st(this.detailTemplate),r=!0;break;case"allowGrouping":this.notify(bt,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),r=!0,l=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(r=!0,p=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null,c=p?p.ej2_instances[0]:null,this.childGrid&&c&&u(c.childGrid.childGrid)){var b=Object.assign({},c.childGrid,{childGrid:i.childGrid});for(c.setProperties({childGrid:b},!0);!u(c.parentDetails);){var C=document.querySelector("#"+c.parentDetails.parentID),S=C?C.ej2_instances[0]:null;if(S){var I=Object.assign({},S.childGrid);I.childGrid=c.childGrid,S.setProperties({childGrid:I},!0)}c=S}}this.headerModule.refreshUI();break;case"toolbar":this.notify(bt,{module:"toolbar"}),this.height==="100%"&&this.scrollModule.refresh();break;case"groupSettings":this.notify(Wt,{module:"group",properties:i.groupSettings,oldProperties:s.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(r=!0),this.notify(bt,{module:"aggregate",properties:i}),this.height==="100%"&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.isFrozenGrid()&&this.log("frozen_rows_columns"),o=!0,n=!0,this.addNewRowFocus=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(r=!0),this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(y,i,n)}}l&&this.updateDefaultCursor(),n?o||this.getFrozenColumns()||this.frozenRows||this.frozenLeftColumns.length||this.frozenRightColumns.length?this.freezeRefresh():this.refresh():r&&(this.notify(os,h),r=!1,this.maintainSelection(i.selectedRowIndex))}},t.prototype.extendedPropertyChange=function(i,s,r){switch(i){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=s.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),this.height!=="auto"&&(this.scrollModule.removePadding(!s.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=s.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=s.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=s.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify(Sm,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.resizeModule&&this.resizeModule.render(),this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?x([this.element],"e-grid-min-height"):R([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(bt,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(bt,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(bt,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.toolbarModule&&this.toolbarModule.refreshToolbarItems(),this.notify(bt,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Wt,{module:"filter",properties:s.filterSettings});break;case"searchSettings":this.notify(Wt,{module:"search",properties:s.searchSettings});break;case"sortSettings":this.notify(Wt,{module:"sort"});break;case"selectionSettings":this.notify(Wt,{module:"selection",properties:s.selectionSettings});break;case"editSettings":this.notify(Wt,{module:"edit",properties:s.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(an,{case:"textwrap",isModeChg:i==="textWrapSettings"}),this.refreshHeader(),this.height==="100%"&&this.scrollModule.refresh();break;case"dataSource":var n=this.getDataModule().getState();if(this.allowPaging&&this.pageSettings.pageSizes&&!this.getDataModule().isRemote()&&!(n&&n.isPending)&&this.pagerModule.pagerObj.isAllPage){var o=this.dataSource instanceof N?this.dataSource.dataSource.json.length:"result"in this.dataSource?this.dataSource.count:this.dataSource.length,l=Array.isArray(this.pageSettings.pageSizes)&&this.pageSettings.pageSizes.indexOf("All")>-1?!0:this.pageSettings.pageSizes;!l&&this.pageSettings.pageSize!==o?this.pagerModule.pagerObj.isAllPage=!1:(this.setProperties({pageSettings:{pageSize:o}},!0),this.pagerModule.pagerObj.setProperties({pageSize:o},!0))}if(this.allowSelection&&this.isPersistSelection&&!(n&&n.isPending)&&this.clearSelection(),!u(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(s).deepWatch)for(var h=this.getPrimaryKeyFieldNames()[0],p=0,c=Object.keys(s.dataSource);p<c.length;p++)this.setRowData(H(h,this.dataSource[c[parseInt(p.toString(),10)]]),this.dataSource[c[parseInt(p.toString(),10)]]);else if(n.isPending){var d=u(this.dataSource)?[]:this.dataSource.result,f=n.group||[];if(f.length&&!this.groupSettings.enableLazyLoading&&!(d.length&&d[0].field))for(var p=0;p<f.length;p++)d=P.group(d,f[parseInt(p.toString(),10)],n.aggregates||[]);this.dataSource={result:d,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),n.resolver(this.dataSource)}else{if(!u(this.dataSource)&&this.dataSource.result&&this.dataSource.count&&this.groupSettings.columns.length){var d=this.dataSource.result,f=this.groupSettings.columns;if(f.length&&!(d.length&&d[0].field))for(var p=0;p<f.length;p++)d=P.group(d,f[parseInt(p.toString(),10)]);this.dataSource={result:d,count:this.dataSource.count}}this.getDataModule().setState({isDataChanged:!1}),this.notify(Fl,{}),r||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(Vl,{}))}this.scrollRefresh();break;case"enableHover":var g=s.enableHover?x:R;g([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(s.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(Ha,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(Zm,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(s.enableStickyHeader);break;case"allowPdfExport":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();break;case"allowExcelExport":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();break;case"enableRowSpan":case"enableColumnSpan":this.refreshColumns();break}},t.prototype.maintainSelection=function(i){var s=this;if(i!==-1){var r=function(){s.selectRow(i),s.off(nt,r)};this.on(nt,r,this)}},t.prototype.setProperties=function(i,s){a.prototype.setProperties.call(this,i,s);var r="filterSettings";i[""+r]&&this.filterModule&&s&&this.filterModule.refreshFilter()},t.prototype.getTablesCount=function(){return this.tablesCount},t.prototype.updateDefaultCursor=function(){for(var i=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),s=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),r=this.getColumns(),n=0;n<i.length;n++){var o=i[parseInt(n.toString(),10)],l=r[parseInt(n.toString(),10)];this.allowGrouping&&l.allowGrouping||this.allowReordering&&l.allowReordering||this.allowSorting&&l.allowSorting?o.classList.add("e-mousepointer"):o.classList.add("e-defaultcursor")}for(var h=0;h<s.length;h++)this.allowReordering&&s[parseInt(h.toString(),10)].classList.add("e-mousepointer")},t.prototype.updateColumnModel=function(i,s){for(var r=0,n=u(i)?0:i.length;r<n;r++)i[parseInt(r.toString(),10)].columns?this.updateColumnModel(i[parseInt(r.toString(),10)].columns,!0):this.columnModel.push(i[parseInt(r.toString(),10)]);(u(s)||!s)&&this.updateLockableColumns()},t.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},t.prototype.isFrozenGrid=function(){return this.getFrozenColumns()!==0||this.frozenLeftColumns.length!==0||this.frozenRightColumns.length!==0||this.fixedColumns.length!==0},t.prototype.getFrozenMode=function(){return this.frozenName},t.prototype.updateLockableColumns=function(){for(var i=this.columnModel,s=0,r=0,n=this.getFrozenColumns(),o=0;o<i.length;o++)i[parseInt(o.toString(),10)].lockColumn&&(o<n?(i.splice(s,0,i.splice(o,1)[0]),s++):(i.splice(n+r,0,i.splice(o,1)[0]),r++))},t.prototype.checkLockColumns=function(i){for(var s=0;s<i.length;s++)i[parseInt(s.toString(),10)].columns?this.checkLockColumns(i[parseInt(s.toString(),10)].columns):i[parseInt(s.toString(),10)].lockColumn&&this.lockcolPositionCount++},t.prototype.leftrightColumnWidth=function(i){var s=i==="left"?this.getFrozenLeftColumns():i==="right"?this.getFrozenRightColumns():[],r=0;return s.filter(function(n){n.visible&&(r+=parseInt(n.width.toString(),10))}),r},t.prototype.getColumns=function(i){var s=this,r=this.inViewIndexes.map(function(f){return f-s.groupSettings.columns.length}).filter(function(f){return f>-1}),n=r.length;(!this.enableColumnVirtualization||u(this.columnModel)||this.columnModel.length===0||i)&&(this.columnModel=[],this.updateColumnModel(this.columns));var o=n===0?this.columnModel:this.getVisibleColumns().slice(r[0],r[n-1]+1),l=[],h=[],p=[],c=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&n===0;c&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]);for(var d=0;d<o.length;d++)o[parseInt(d.toString(),10)].freeze==="Left"||o[parseInt(d.toString(),10)].isFrozen?(l.push(o[parseInt(d.toString(),10)]),c&&this.frozenLeftColumns.push(o[parseInt(d.toString(),10)])):o[parseInt(d.toString(),10)].freeze==="Right"?(h.push(o[parseInt(d.toString(),10)]),c&&this.frozenRightColumns.push(o[parseInt(d.toString(),10)])):p.push(o[parseInt(d.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(l=this.frozenLeftColumns),this.frozenRightColumns.length&&(h=this.frozenRightColumns)),l.concat(p).concat(h)},t.prototype.getStackedHeaderColumnByHeaderText=function(i,s){for(var r=0;r<s.length;r++){var n=s[parseInt(r.toString(),10)];if(n.field===i||n.headerText===i){this.stackedColumn=n;break}else n.columns&&this.getStackedHeaderColumnByHeaderText(i,n.columns)}return this.stackedColumn},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.getQuery=function(){return this.query},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setColumnIndexesInView=function(i){this.inViewIndexes=i},t.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},t.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},t.prototype.setGridHeaderContent=function(i){this.headerModule.setPanel(i)},t.prototype.getContentTable=function(){return this.contentModule.getTable()},t.prototype.setGridContentTable=function(i){this.contentModule.setTable(i)},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.setGridContent=function(i){this.contentModule.setPanel(i)},t.prototype.getHeaderTable=function(){return this.headerModule.getTable()},t.prototype.setGridHeaderTable=function(i){this.headerModule.setTable(i)},t.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(Sa)[0],this.footerElement},t.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(Sa)[0],this.footerElement.firstChild.firstChild},t.prototype.getPager=function(){return this.gridPager},t.prototype.setGridPager=function(i){this.gridPager=i},t.prototype.getRowByIndex=function(i){return this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender.getRowByIndex(i):this.contentModule.getRowByIndex(i)},t.prototype.getMovableRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},t.prototype.getFrozenRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},t.prototype.getRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},t.prototype.getRowInfo=function(i){var s=i,r={target:i};if(!u(i)&&u(F(s,"e-detailrowcollapse")&&u(F(s,"e-recordplusexpand")))){var n=M(s,"."+He);if(!n){var o=M(s,"."+jt);if(!u(o)&&!o.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(o.getAttribute("data-uid")),h=parseInt(o.getAttribute(it),10)-1;r={row:o,rowData:l.data,rowIndex:h}}return r}var p=parseInt(n.getAttribute(yt),10)-1,c=M(n,"."+jt);if(!u(n)&&!isNaN(p)&&!u(c)){var h=parseInt(c.getAttribute(it),10)-1,d=this.contentModule.getRows(),f=p+this.getIndentCount(),g=d.filter(function(S){return S.uid===c.getAttribute("data-uid")}),y={},b=void 0;Object.keys(g).length&&(y=g[0].data,b=g[0].cells[parseInt(f.toString(),10)].column),r={cell:n,cellIndex:p,row:c,rowIndex:h,rowData:y,column:b,target:i}}}return r},t.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},t.prototype.getDataRows=function(){return this.getAllDataRows()},t.prototype.getAllDataRows=function(i){if(u(this.getContentTable().querySelector(ze)))return[];var s=this.getContentTable().querySelector(ze),r=[].slice.call(s.children);if(this.editSettings.showAddNewRow&&(r[0].classList.contains("e-addedrow")?r.shift():r[r.length-1].classList.contains("e-addedrow")&&r.pop()),this.frozenRows){var n=this.getHeaderTable().querySelector(ze),o=[].slice.call(n.children);r=this.addMovableRows(o,r),this.editSettings.showAddNewRow&&o[0].classList.contains("e-addedrow")&&o.shift()}var l=this.generateDataRows(r,i);return l},t.prototype.addMovableRows=function(i,s){for(var r=0,n=s.length;r<n;r++)i.push(s[parseInt(r.toString(),10)]);return i},t.prototype.generateDataRows=function(i,s){for(var r=[],n=0,o=i.length;n<o;n++)i[parseInt(n.toString(),10)].classList.contains(jt)&&(!i[parseInt(n.toString(),10)].classList.contains("e-hiddenrow")||s)&&(this.isCollapseStateEnabled()?r[parseInt(i[parseInt(n.toString(),10)].getAttribute("aria-rowindex"),10)-1]=i[parseInt(n.toString(),10)]:r.push(i[parseInt(n.toString(),10)]));return r},t.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},t.prototype.getAllMovableDataRows=function(i){return this.getAllDataRows(i)},t.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},t.prototype.getAllFrozenDataRows=function(i){return this.getAllDataRows(i)},t.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},t.prototype.getAllFrozenRightDataRows=function(i){return this.getAllDataRows(i)},t.prototype.setCellValue=function(i,s,r){var n="cells",o="data",l="index",h="uid",p=this.getPrimaryKeyFieldNames()[0],c=new $t(this,this.serviceLocator),d=this.getColumnIndexByField(s),f=this.getColumnByField(s),g=this.contentModule.getRows(),y=g.filter(function(A){return H(p,A.data)===i})[0],b=y?this.element.querySelector("[data-uid="+y[""+h]+"]"):null;if(!u(b)){typeof r=="string"&&(r=this.sanitize(r)),We(s,r,y[""+o]);var C=this.enableVirtualization?b.children[parseInt(d.toString(),10)]:this.getCellFromIndex(y[""+l],d);if(!u(C)){var S=0;this.groupSettings.columns.length&&(d=d+this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&d++,this.isRowDragable()&&d++;var I=y[""+n][d-S];c.refreshTD(C,I,y[""+o],{index:y[""+l]}),this.isReact&&(C=this.enableVirtualization?b.children[parseInt(d.toString(),10)]:this.getCellFromIndex(y[""+l],d)),this.aggregates.length>0&&(this.notify(kl,{}),this.groupSettings.columns.length>0&&this.notify(Gu,{})),!u(y)&&!u(y.changes)&&(y.changes[""+s]=r),this.trigger(El,{cell:C,column:f,data:y[""+o]}),this.isReact&&C.getAttribute("tabindex")==="0"&&C.classList.contains("e-focused")&&C.focus()}}},t.prototype.refreshReactColumnTemplateByUid=function(i,s){var r=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var n=!!(r.childGrid&&r.element.querySelectorAll(".e-childgrid").length),o=n?r.getContentTable().querySelectorAll(".e-row"):r.getDataRows();r.refreshReactTemplateTD(o,n),s&&r.renderTemplates()})},t.prototype.refreshReactTemplateTD=function(i,s,r){for(var n="cells",o="index",l=this.getIndentCount(),h=0,p=!1,c=0;c<i.length;c++){var d=this.getRowObjectFromUID(i[parseInt(c.toString(),10)].getAttribute("data-uid"));if(s&&!d&&F(i[parseInt(c.toString(),10)],"e-childgrid")){var f=F(i[parseInt(c.toString(),10)],"e-childgrid").ej2_instances[0];d=f.getRowObjectFromUID(i[parseInt(c.toString(),10)].getAttribute("data-uid")),h=f.getIndentCount(),p=!0}if(d&&d.isDataRow&&!u(d.index)&&!i[parseInt(c.toString(),10)].classList.contains("e-editedrow"))for(var g=0;g<d[""+n].length;g++){var y=d[""+n][parseInt(g.toString(),10)];if(y.isTemplate){var b=new $t(this,this.serviceLocator),C=s?i[parseInt(c.toString(),10)].children[y.index+(p?h:l)]:this.getCellFromIndex(c,r?y.index:g-l);b.refreshTD(C,y,d.data,{index:d[""+o]})}}p=!1}},t.prototype.refreshGroupCaptionFooterTemplate=function(){for(var i=!!(this.childGrid&&this.element.querySelectorAll(".e-childgrid").length),s=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),r=0;r<s.length;r++){var n=this,o=this.getRowObjectFromUID(s[parseInt(r.toString(),10)].getAttribute("data-uid"));if(i&&!o&&F(s[parseInt(r.toString(),10)],"e-childgrid")&&(n=F(s[parseInt(r.toString(),10)],"e-childgrid").ej2_instances[0],o=n.getRowObjectFromUID(s[parseInt(r.toString(),10)].getAttribute("data-uid"))),o){var l=o.cells.filter(function(p){return p.isDataCell}),h={cells:l,data:o.data,dataUid:o.uid};n.notify(hm,h)}}},t.prototype.refreshReactHeaderTemplateByUid=function(i){if(this.isReact)for(var s="cells",r=this.headerModule.rows,n=this.getNormalizedColumnIndex(i),o=function(p){var c=r[parseInt(p.toString(),10)][""+s][parseInt(n.toString(),10)];if(c&&c.column.uid===i){var d=new dd(l,l.serviceLocator),f=F(l.element.querySelectorAll("[data-mappinguid="+i+"]")[0],"e-templatecell");d.refresh(c,f);var g=l.sortSettings.columns,y=g.findIndex(function(S){return S.field===c.column.field});if(y!==-1){var b=l.getColumnHeaderByField(c.column.field);l.ariaService.setSort(b,g[parseInt(y.toString(),10)].direction.toLowerCase()),g.length>1&&b.querySelector(".e-headercelldiv").insertBefore(l.createElement("span",{className:"e-sortnumber",innerHTML:(y+1).toString()}),b.querySelector(".e-headertext"));var C=b.querySelector(".e-sortfilterdiv");g[parseInt(y.toString(),10)].direction==="Ascending"?Se(C,["e-ascending","e-icon-ascending"],[]):Se(C,["e-descending","e-icon-descending"],[])}}},l=this,h=0;h<r.length;h++)o(h)},t.prototype.setRowData=function(i,s){var r="uid",n=this.contentModule.getRows(),o=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(n=n.filter(function(f){return f.isDataRow}));var l=n.filter(function(f){return H(o,f.data)===i})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l[""+r]+"]")):void 0;if(!u(l)&&h.length){if(l.changes=s,this.frozenRows){var p=this.getRowsObject()[l.index];this.setFrozenRowData(p,s)}else{var c=this.getRowElementByUID(l.uid),d=!!(c&&c.querySelector(".e-lastrowcell"));this.setFrozenRowData(l,s),d&&this.scrollModule.setLastRowCell()}this.aggregates.length>0&&(this.notify(kl,{}),this.groupSettings.columns.length>0&&this.notify(Gu,{}))}else return},t.prototype.setFrozenRowData=function(i,s){var r=new Lr(this.serviceLocator,null,this);i.changes=s,ky(i,this.getForeignKeyColumns(),i.changes),r.refresh(i,this.getColumns(),!0)},t.prototype.getCellFromIndex=function(i,s){var r=this.getColumnByIndex(s);return Vy(this,r,i,s)},t.prototype.getMovableCellFromIndex=function(i,s){return this.getCellFromIndex(i,s)},t.prototype.getFrozenRightCellFromIndex=function(i,s){return this.getCellFromIndex(i,s)},t.prototype.getColumnHeaderByIndex=function(i){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(i.toString(),10)]},t.prototype.getMovableColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},t.prototype.getFrozenRightColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},t.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},t.prototype.getRowObjectFromUID=function(i){var s=this.contentModule.getRows(),r=this.rowObject(s,i);return u(r)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(r=this.rowObject(this.vRows,i)),r},t.prototype.rowObject=function(i,s){if(i)for(var r=0,n=i;r<n.length;r++){var o=n[r];if(o.uid===s)return o}return null},t.prototype.getRowsObject=function(){return this.contentModule.getRows()},t.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},t.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},t.prototype.getColumnHeaderByField=function(i){var s=this.getColumnByField(i);return s?this.getColumnHeaderByUid(s.uid):void 0},t.prototype.getColumnHeaderByUid=function(i){var s=this.getHeaderContent().querySelector("[data-mappinguid="+i+"]");return s?s.parentElement:void 0},t.prototype.getColumnByIndex=function(i){var s;return this.getColumns().some(function(r,n){return s=r,n===i}),s},t.prototype.getColumnByField=function(i){return Qs(this.getColumns(),function(s){if(s.field===i)return s})[0]},t.prototype.getColumnIndexByField=function(i){for(var s=this.getColumns(),r=0;r<s.length;r++)if(s[parseInt(r.toString(),10)].field===i)return r;return-1},t.prototype.getColumnByUid=function(i,s){var r=s?this.columns:this.getColumns();return Qs(r.concat(this.getStackedColumns(this.columns)),function(n){if(n.uid===i)return n})[0]},t.prototype.getStackedColumns=function(i,s){s===void 0&&(s=[]);for(var r=0,n=i;r<n.length;r++){var o=n[r];o.columns&&(s.push(o),this.getStackedColumns(o.columns,s))}return s},t.prototype.getColumnIndexByUid=function(i){var s=Qs(this.getColumns(),function(r,n){if(r.uid===i)return n})[0];return u(s)?-1:s},t.prototype.getUidByColumnField=function(i){return Qs(this.getColumns(),function(s){if(s.field===i)return s.uid})[0]},t.prototype.getNormalizedColumnIndex=function(i){var s=this.getColumnIndexByUid(i);return s+this.getIndentCount()},t.prototype.getIndentCount=function(){var i=0;return this.allowGrouping&&(i+=this.groupSettings.columns.length),this.isDetail()&&i++,this.isRowDragable()&&u(this.rowDropSettings.targetID)&&i++,i},t.prototype.getColumnFieldNames=function(){for(var i=[],s,r=0,n=this.getColumns().length;r<n;r++)s=this.getColumns()[parseInt(r.toString(),10)],s.visible&&i.push(s.field);return i},t.prototype.getRowTemplate=function(){return this.rowTemplateFn},t.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},t.prototype.getDetailTemplate=function(){return this.detailTemplateFn},t.prototype.getEditTemplate=function(){return this.editTemplateFn},t.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},t.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},t.prototype.getColumnChooserTemplate=function(){return this.columnChooserTemplateFn},t.prototype.getColumnChooserHeaderTemplate=function(){return this.columnChooserHeaderTemplateFn},t.prototype.getColumnChooserFooterTemplate=function(){return this.columnChooserFooterTemplateFn},t.prototype.getPrimaryKeyFieldNames=function(){for(var i=[],s=0;s<this.columnModel.length;s++)this.columnModel[parseInt(s.toString(),10)].isPrimaryKey&&i.push(this.columnModel[parseInt(s.toString(),10)].field);return i},t.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},t.prototype.refreshHeader=function(){this.headerModule.refreshUI()},t.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},t.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},t.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},t.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},t.prototype.getSelectedColumnsUid=function(){var i=this,s=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(r){return s.push(i.getColumns()[parseInt(r.toString(),10)].uid)}),s},t.prototype.getDataModule=function(){return this.renderModule.data},t.prototype.showColumns=function(i,s){s=s||"headerText",this.showHider.show(i,s)},t.prototype.hideColumns=function(i,s){s=s||"headerText",this.showHider.hide(i,s)},t.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},t.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},t.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},t.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},t.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var i=this.getColumns(),s=!0,r=0,n=0,o=0,l=i.some(function(d){return(d.freeze==="Left"||d.freeze==="Right"||d.freeze==="Fixed"||d.isFrozen)&&d.width==="auto"}),h=function(d){var f=i[parseInt(d.toString(),10)];if(u(f.width)&&(f.freeze==="Left"||f.freeze==="Right"||f.freeze==="Fixed"||f.isFrozen)&&(f.width=Math.max(200,f.minWidth?parseFloat(f.minWidth.toString()):0),!u(f.maxWidth)&&parseFloat(f.maxWidth.toString())<f.width&&(f.width=f.maxWidth)),f.width==="auto"&&l){var g=0;if(s){i.filter(function(b){if(b.visible&&(b.width==="auto"&&r++,b.width!=="auto")){var C=u(b.width)?Math.max(200,b.minWidth?parseFloat(b.minWidth.toString()):0):parseFloat(b.width.toString());g+=C}});var y=p.isPercentageWidthGrid()||p.width==="auto"?p.element.getBoundingClientRect().width:parseFloat(p.width.toString());n=p.height==="auto"?y-g:y-g-ai(),n<0&&(n=0),o=parseFloat((n/r).toString()),i.filter(function(b){b.visible&&b.minWidth&&parseFloat(b.minWidth.toString())>o&&(n=n-parseFloat(b.minWidth.toString()),r--)}),s=!1}f.minWidth&&parseFloat(f.minWidth.toString())>o?f.width=parseFloat(f.minWidth.toString()):f.width=n/r}},p=this,c=0;c<i.length;c++)h(c)},t.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns),this.updateFrozenColumnsWidth(),this.isAutoGenerateColumns=!0},t.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.fixedColumns=[],this.splitFrozenCount(this.columns),this.leftcount=this.frozenLeftCount,this.rightcount=this.frozenRightCount,this.movablecount=this.movableCount,this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount?this.frozenName="Left-Right":this.frozenColumns||this.frozenRows?this.frozenName="Left":this.frozenName=void 0},t.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},t.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},t.prototype.getVisibleMovableCount=function(){return this.visibleMovable},t.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},t.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},t.prototype.getMovableColumns=function(){return this.movableColumns},t.prototype.splitStackedColumns=function(i){for(var s=0;s<i.length;s++)i[parseInt(s.toString(),10)].columns?this.splitStackedColumns(i[parseInt(s.toString(),10)].columns):i[parseInt(s.toString(),10)].freeze==="Left"||i[parseInt(s.toString(),10)].isFrozen?(i[parseInt(s.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.leftcount++):i[parseInt(s.toString(),10)].freeze==="Right"?(i[parseInt(s.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.rightcount++):i[parseInt(s.toString(),10)].freeze==="Fixed"?(i[parseInt(s.toString(),10)].visible!==!1&&this.visibleFrozenFixed++,this.fixedcount++):(i[parseInt(s.toString(),10)].visible!==!1&&this.visibleMovable++,this.movablecount++)},t.prototype.pushStackedColumns=function(i,s,r,n,o){r[parseInt(s.toString(),10)]={headerText:n.headerText},n.textAlign&&(r[parseInt(s.toString(),10)].textAlign=n.textAlign),n.customAttributes&&(r[parseInt(s.toString(),10)].customAttributes=n.customAttributes);for(var l=0;l<i.length;l++)if(i[parseInt(l.toString(),10)].columns)s=s+1,this.pushStackedColumns(i[parseInt(l.toString(),10)].columns,s,r,i[parseInt(l.toString(),10)],o),s=s-1;else{var h=[];h=r.slice().slice(0,s+1),i[parseInt(l.toString(),10)].freeze==="Left"||i[parseInt(l.toString(),10)].isFrozen?(this.stackedLeft.push(h),this.stackedarrayLeft.push(i[parseInt(l.toString(),10)])):i[parseInt(l.toString(),10)].freeze==="Right"?(this.stackedRight.push(h),this.stackedarrayRight.push(i[parseInt(l.toString(),10)])):i[parseInt(l.toString(),10)].freeze==="Fixed"?(this.stackedFixed.push(h),this.stackedarrayFixed.push(i[parseInt(l.toString(),10)])):(this.stackedMovable.push(h),this.stackedarrayMovable.push(i[parseInt(l.toString(),10)]))}},t.prototype.pushallcol=function(i,s,r,n,o){if(r.headerText===s.headerText)if(o)r.columns.push(n);else{var l={headerText:i.headerText,columns:[]};i.textAlign&&(l.textAlign=i.textAlign),i.customAttributes&&(l.customAttributes=i.customAttributes),r.columns.push(l)}else if(r.columns&&r.columns.length)for(var h=0;h<r.columns.length;h++)this.pushallcol(i,s,r.columns[parseInt(h.toString(),10)],n,o)},t.prototype.resetStackedColumns=function(i,s,r){for(var n={},o=[],l=1;l<=i.length;l++)for(var h=i[l-1],p=0;p<h.length;p++)if(!n.columns&&l===1?(n={headerText:h[parseInt(p.toString(),10)].headerText,textAlign:h[parseInt(p.toString(),10)].textAlign,customAttributes:h[parseInt(p.toString(),10)].customAttributes,columns:[]},o.push(h[parseInt(p.toString(),10)])):o.indexOf(h[parseInt(p.toString(),10)])===-1&&(this.pushallcol(h[parseInt(p.toString(),10)],h[p-1],n),o.push(h[parseInt(p.toString(),10)])),p===h.length-1){this.pushallcol(null,h[parseInt(p.toString(),10)],n,s[l-1],!0);for(var c=0;c!==i.length-1&&l!==i.length;){var d=h.map(function(g){return g.headerText}).join(", "),f=i[parseInt(l.toString(),10)].map(function(g){return g.headerText}).join(", ");d===f&&(l++,this.pushallcol(null,h[parseInt(p.toString(),10)],n,s[l-1],!0)),c++}}r==="Left"?this.frozenLeftColumns.push(n):r==="Right"?this.frozenRightColumns.push(n):this.movableColumns.push(n)},t.prototype.splitFrozenCount=function(i){if(this.frozenColumns||this.changedProperties&&this.changedProperties.frozenColumns===0){var s=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns;if(!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns)for(var r=0;r<s.length;r++)this.frozenColumns>r?s[parseInt(r.toString(),10)].freeze="Left":s[parseInt(r.toString(),10)].freeze==="Right"||s[parseInt(r.toString(),10)].freeze==="Fixed"?s[parseInt(r.toString(),10)].freeze=s[parseInt(r.toString(),10)].freeze:s[parseInt(r.toString(),10)].freeze=void 0}for(var r=0;r<(u(i)?0:i.length);r++)if(i[parseInt(r.toString(),10)].columns){this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0;var n=[];this.splitStackedColumns(i[parseInt(r.toString(),10)].columns),this.leftcount&&!this.rightcount&&!this.movablecount&&!this.fixedcount?(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(i[parseInt(r.toString(),10)])):this.rightcount&&!this.leftcount&&!this.movablecount&&!this.fixedcount?(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(i[parseInt(r.toString(),10)])):this.movablecount&&!this.leftcount&&!this.rightcount&&!this.fixedcount?(this.movableCount+=this.movablecount,this.movableColumns.push(i[parseInt(r.toString(),10)])):this.fixedcount&&!this.leftcount&&!this.rightcount&&!this.movablecount?(this.fixedCount+=this.fixedcount,this.fixedColumns.push(i[parseInt(r.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(i[parseInt(r.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(i[parseInt(r.toString(),10)].columns,0,n,i[parseInt(r.toString(),10)],{headerText:i[parseInt(r.toString(),10)].headerText,textAlign:i[parseInt(r.toString(),10)].textAlign,customAttributes:i[parseInt(r.toString(),10)].customAttributes,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[])}else i[parseInt(r.toString(),10)].freeze==="Right"?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.frozenRightColumns.push(i[parseInt(r.toString(),10)]),this.frozenRightCount++):i[parseInt(r.toString(),10)].freeze==="Left"||i[parseInt(r.toString(),10)].isFrozen?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(i[parseInt(r.toString(),10)]),this.frozenLeftCount++):i[parseInt(r.toString(),10)].freeze==="Fixed"?(this.fixedColumns.push(i[parseInt(r.toString(),10)]),this.fixedCount++,this.movableColumns.push(i[parseInt(r.toString(),10)]),this.movableCount++):(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleMovable++,this.movableColumns.push(i[parseInt(r.toString(),10)]),this.movableCount++);if(this.frozenLeftColumns.length){var s=this.frozenLeftColumns[this.frozenLeftColumns.length-1];this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(s instanceof Dt?this.lastVisibleLeftCol(this.frozenLeftColumns):s)}if(this.frozenRightColumns.length){var s=this.frozenRightColumns[0];this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(s instanceof Dt?this.firstVisibleRightCol(this.frozenRightColumns):s)}if((this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh){var s=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns);this.setProperties({columns:s},!0),this.freezeColumnRefresh=!1}},t.prototype.removeBorder=function(i){for(var s=0;s<i.length;s++)i[parseInt(s.toString(),10)].columns&&i[parseInt(s.toString(),10)].columns.length?((i[parseInt(s.toString(),10)].border==="Right"||i[parseInt(s.toString(),10)].border==="Left")&&(i[parseInt(s.toString(),10)].border=void 0),this.removeBorder(i[parseInt(s.toString(),10)].columns)):(i[parseInt(s.toString(),10)].border==="Right"||i[parseInt(s.toString(),10)].border==="Left")&&(i[parseInt(s.toString(),10)].border=void 0)},t.prototype.isVisibleColumns=function(i,s){if(i.columns&&i.columns.length)for(var r=0;r<i.columns.length;r++)this.isVisibleColumns(i.columns[parseInt(r.toString(),10)],s),i.columns[parseInt(r.toString(),10)].visible&&u(i.columns[parseInt(r.toString(),10)].columns)&&(!u(i.columns[parseInt(r.toString(),10)].freeze)||i.columns[parseInt(r.toString(),10)].isFrozen)&&s.push("true");else i.visible&&(!u(i.freeze)||i.isFrozen)&&s.push("true")},t.prototype.lastVisibleLeftCol=function(i){for(var s,r=i.length-1;r>=0;r--){var n=[];if(this.isVisibleColumns(i[parseInt(r.toString(),10)],n),i[parseInt(r.toString(),10)].visible&&n.indexOf("true")!==-1){s=i[parseInt(r.toString(),10)];break}}return s},t.prototype.firstVisibleRightCol=function(i){for(var s,r=0;r<i.length;r++){var n=[];if(this.isVisibleColumns(i[parseInt(r.toString(),10)],n),i[parseInt(r.toString(),10)].visible&&n.indexOf("true")!==-1){s=i[parseInt(r.toString(),10)];break}}return s},t.prototype.frozenLeftBorderColumns=function(i){if(!u(i))if(i.columns&&i.columns.length){i.border="Left";var s=i.columns[i.columns.length-1];this.frozenLeftBorderColumns(s instanceof Dt&&s.columns?this.lastVisibleLeftCol(i.columns):s)}else i.border="Left"},t.prototype.frozenRightBorderColumns=function(i){if(!u(i))if(i.columns&&i.columns.length){i.border="Right";var s=i.columns[0];this.frozenRightBorderColumns(s instanceof Dt&&s.columns?this.firstVisibleRightCol(i.columns):s)}else i.border="Right"},t.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},t.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},t.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,s=this.columnModel,r=0;r<this.frozenColumns;r++)s[parseInt(r.toString(),10)].visible&&i++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(var r=0;r<s.length;r++)s[parseInt(r.toString(),10)].visible&&(s[parseInt(r.toString(),10)].freeze==="Left"||s[parseInt(r.toString(),10)].freeze==="Right")&&i++;return i},t.prototype.getVisibleFrozenCount=function(i,s){if(!this.frozenLeftCount&&!this.leftcount&&(!this.frozenRightCount||!this.rightcount))for(var r=0,n=i.length;r<n;r++)i[parseInt(r.toString(),10)].columns?s=this.getVisibleFrozenCount(i[parseInt(r.toString(),10)].columns,s):i[parseInt(r.toString(),10)].isFrozen&&i[parseInt(r.toString(),10)].visible&&s++;return s},t.prototype.getFrozenCount=function(i,s,r){for(var n=0,o=u(i)?0:i.length;n<o;n++)i[parseInt(n.toString(),10)].columns?s=this.getFrozenCount(i[parseInt(n.toString(),10)].columns,s,r):(i[parseInt(n.toString(),10)].isFrozen&&r>this.frozenColumns-1&&s++,r++);return s},t.prototype.goToPage=function(i){this.pagerModule&&this.pagerModule.goToPage(i)},t.prototype.updateExternalMessage=function(i){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(i)},t.prototype.sortColumn=function(i,s,r){this.sortModule&&this.sortModule.sortColumn(i,s,r)},t.prototype.changeDataSource=function(i,s){this.isChangeDataSourceCall=!0,this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0),s&&s.length&&this.setProperties({columns:s},!0),i&&(u(s)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:i},!0)),this.freezeRefresh(),this.isChangeDataSourceCall=!1},t.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},t.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},t.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},t.prototype.filterByColumn=function(i,s,r,n,o,l,h,p){this.filterModule&&this.filterModule.filterByColumn(i,s,r,n,o,l,h,p)},t.prototype.clearFiltering=function(i){this.filterModule&&this.filterModule.clearFiltering(i)},t.prototype.removeFilteredColsByField=function(i,s){this.filterModule&&this.filterModule.removeFilteredColsByField(i,s)},t.prototype.selectRow=function(i,s){this.selectionModule&&this.selectionModule.selectRow(i,s)},t.prototype.selectRows=function(i){this.selectionModule&&this.selectionModule.selectRows(i)},t.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.selectCell=function(i,s){this.selectionModule&&this.selectionModule.selectCell(i,s)},t.prototype.selectCellsByRange=function(i,s){this.selectionModule.selectCellsByRange(i,s)},t.prototype.search=function(i){this.searchModule&&this.searchModule.search(i)},t.prototype.print=function(){this.printModule&&this.printModule.print()},t.prototype.deleteRecord=function(i,s){this.editModule&&this.editModule.deleteRecord(i,s)},t.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},t.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},t.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},t.prototype.addRecord=function(i,s){this.editModule&&this.editModule.addRecord(i,s)},t.prototype.deleteRow=function(i){this.editModule&&this.editModule.deleteRow(i)},t.prototype.editCell=function(i,s){this.editModule&&this.editModule.editCell(i,s)},t.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},t.prototype.updateCell=function(i,s,r){this.editModule&&this.editModule.updateCell(i,s,r)},t.prototype.updateRow=function(i,s){this.editModule&&this.editModule.updateRow(i,s)},t.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},t.prototype.enableToolbarItems=function(i,s){this.toolbarModule&&this.toolbarModule.enableItems(i,s)},t.prototype.copy=function(i){this.clipboardModule&&this.clipboardModule.copy(i)},t.prototype.recalcIndentWidth=function(){var i=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&!(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell.e-indentRefreshed")||!this.getContentTable())){var s=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,r=[].slice.call(this.getHeaderTable().querySelector(li).childNodes),n=[].slice.call(this.getContentTable().querySelector(li).childNodes),o=s/30,l=this.getFrozenMode()==="Right"?this.groupSettings.columns.length+this.getColumns().length:0,h=this.element.offsetWidth,p=function(c,d){if(Jl(i)){var f=(d/h*100).toFixed(1)+"%";r[parseInt(c.toString(),10)].style.width=f,n[parseInt(c.toString(),10)].style.width=f}else r[parseInt(c.toString(),10)].style.width=d+"px",n[parseInt(c.toString(),10)].style.width=d+"px";i.notify(Zc,{index:c,width:d})};for(o>=1&&(s=30/o),s<1&&(s=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(s=30);l<this.groupSettings.columns.length;)p(l,s),l++;this.isDetail()&&(p(l,s),l++),this.isRowDragable()&&p(l,s),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").classList.add("e-indentRefreshed")}},t.prototype.resetIndentWidth=function(){if(!this.isDestroyed){if(Jl(this)&&(this.getHeaderTable().querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit&&this.preventAdjustColumns()),(this.width==="auto"||typeof this.width=="string"&&this.width.indexOf("%")!==-1)&&this.getColumns().filter(function(s){return(!s.width||s.width==="auto")&&s.minWidth}).length>0){var i=this.widthService.getTableWidth(this.getColumns(),!0);this.widthService.setMinwidthBycalculation(i)}this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&this.textWrapSettings.wrapMode!=="Content"&&this.notify($o,{}),this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder(),this.enableStickyHeader&&this.scrollModule.makeStickyHeader(),this.enableAutoFill&&this.selectionSettings.type==="Multiple"&&this.selectionSettings.mode==="Cell"&&this.selectionModule.selectedRowCellIndexes.length&&(this.selectionModule.updateAutoFillPosition(),this.selectionModule.drawBorders())}},t.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},t.prototype.reorderColumns=function(i,s){this.reorderModule&&this.reorderModule.reorderColumns(i,s)},t.prototype.reorderColumnByModel=function(i,s){this.reorderModule&&this.reorderModule.reorderColumnByModel(i,s)},t.prototype.reorderColumnByIndex=function(i,s){this.reorderModule&&this.reorderModule.reorderColumnByIndex(i,s)},t.prototype.reorderColumnByTargetIndex=function(i,s){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(i,s)},t.prototype.reorderRows=function(i,s){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(i,s)},t.prototype.refreshDataSource=function(i){this.notify("refreshdataSource",i)},t.prototype.disableRowDD=function(i){var s=this.getHeaderTable(),r=this.getContentTable(),n=s.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),o=this.getRows(),l=i?"none":"";At(s.querySelector(li).childNodes[0],{display:l}),At(r.querySelector(li).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var p=o[parseInt(h.toString(),10)].firstElementChild;i?x([p],"e-hide"):R([p],["e-hide"])}for(var c=0;c<s.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;c++){var p=n[parseInt(c.toString(),10)];i?x([p],"e-hide"):R([p],["e-hide"])}},t.prototype.autoFitColumns=function(i,s,r){var n=this.getInjectedModules(),o=n.find(function(l){return typeof l=="function"&&!u(l.prototype)?l.prototype.getModuleName()==="resize":l.name==="Resize"});!this.resizeModule&&o&&(this.autoFitColumnsResize=!0,this.injectModules()),this.resizeModule&&this.resizeModule.autoFitColumns(i,s,r)},t.prototype.preventAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){for(var i=this.getColumns(),s=this.getHeaderTable(),r=0,n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].visible){if(this.groupSettings.columns.length&&this.groupSettings.columns.indexOf(i[parseInt(n.toString(),10)].field)>-1){var o=[].slice.call(s.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"));if(o[parseInt(n.toString(),10)].style.display==="none")continue}if(i[parseInt(n.toString(),10)].width)r+=parseFloat(i[parseInt(n.toString(),10)].width.toString());else{r=0;break}}if(r){var l=this.isPercentageWidthGrid(),h=this.widthUnit(l),p=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())for(var c=this.defaultIndentWidth(l),d=c.toString()+h,f=[].slice.call(s.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),g=[].slice.call(p.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),n=0;n<f.length;n++)f[parseInt(n.toString(),10)].style.setProperty("width",d),g[parseInt(n.toString(),10)].style.setProperty("width",d),r+=c;(l&&r<100||!l&&r<p.parentElement.clientWidth)&&(u(p.querySelector(".e-emptyrow"))?x([s,p],["e-tableborder"]):(x([s],["e-tableborder"]),R([p],["e-tableborder"])));var y=r.toString()+h;s.style.setProperty("width",y),p.style.setProperty("width",y)}else this.restoreAdjustColumns()}},t.prototype.restoreAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){var i=this.getHeaderTable(),s=this.getContentTable();if(R([i,s],["e-tableborder"]),i.style.removeProperty("width"),s.style.removeProperty("width"),this.groupSettings.columns.length||this.isDetail()||this.isRowDragable()){var r=this.isPercentageWidthGrid(),n=this.defaultIndentWidth(r).toString()+this.widthUnit(r),o=[].slice.call(i.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));o.forEach(function(l){l.style.setProperty("width",n)}),i.querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.recalcIndentWidth()}}},t.prototype.widthUnit=function(i){return i?"%":"px"},t.prototype.defaultIndentWidth=function(i){return i?parseFloat((30/this.element.offsetWidth*100).toFixed(1)):30},t.prototype.isPercentageWidthGrid=function(){var i=this.getColumns().find(function(s){return!u(s.width)});return i?i.width.toString().indexOf("%")>-1:!1},t.prototype.createColumnchooser=function(i,s,r){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(i,s,r)},t.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new wh(this)),this.serviceLocator.register("cellRendererFactory",new Vv),this.serviceLocator.register("rendererFactory",new Wv),this.serviceLocator.register("localization",this.localeObj=new zt(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new xn(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Zv(this)),this.serviceLocator.register("ariaService",this.ariaService=new Sh),this.serviceLocator.register("focus",this.focusModule=new Uv(this))},t.prototype.processModel=function(){var i=this.groupSettings.columns,s=this.sortSettings.columns,r,n;if(this.allowGrouping)for(var o=function(d,f){r=!1,n=0;for(var g=s.length;n<g;n++)if(s[parseInt(n.toString(),10)].field===i[parseInt(d.toString(),10)]){r=!0;break}if(r?l.allowSorting?l.sortedColumns.push(s[parseInt(n.toString(),10)].field):s[parseInt(n.toString(),10)].direction="Ascending":s.push({field:i[parseInt(d.toString(),10)],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var y=l.enableColumnVirtualization?l.columns.filter(function(b){return b.field===i[parseInt(d.toString(),10)]})[0]:l.getColumnByField(i[parseInt(d.toString(),10)]);y?y.visible=!1:l.log("initial_action",{moduleName:"group",columnName:i[parseInt(d.toString(),10)]})}},l=this,h=0,p=i.length;h<p;h++)o(h,p);if(!i.length)for(var h=0;h<s.length;h++)this.sortedColumns.push(s[parseInt(h.toString(),10)].field);if(this.rowTemplateFn=st(this.rowTemplate),this.emptyRecordTemplateFn=st(this.emptyRecordTemplate),this.detailTemplateFn=st(this.detailTemplate),this.editTemplateFn=st(this.editSettings.template),this.editHeaderTemplateFn=st(this.editSettings.headerTemplate),this.editFooterTemplateFn=st(this.editSettings.footerTemplate),this.columnChooserTemplateFn=st(this.columnChooserSettings.template),this.columnChooserHeaderTemplateFn=st(this.columnChooserSettings.headerTemplate),this.columnChooserFooterTemplateFn=st(this.columnChooserSettings.footerTemplate),!u(this.parentDetails)){var c=u(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",c,!0)}this.initForeignColumn()},t.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(Cm,this.getForeignKeyColumns())},t.prototype.enableVerticalRendering=function(){this.rowRenderingMode==="Vertical"?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},t.prototype.gridRender=function(){var i;this.updateRTL(),this.rowRenderingMode==="Vertical"&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||E.isSafari())&&this.element.classList.add("e-mac-safari"),E.isDevice&&(this.element.classList.add("e-device"),this.adaptiveUIMode==="Desktop"&&this.rowRenderingMode!=="Vertical"&&(this.enableAdaptiveUI=!1)),this.adaptiveUIMode==="Mobile"&&!(E.isDevice||this.rowRenderingMode==="Vertical")&&(this.enableAdaptiveUI=!1),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?(i=this.element.classList).add.apply(i,this.cssClass.split(" ")):this.element.classList.add(this.cssClass)),this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&E.info.name==="mozilla"&&this.element.classList.add("e-disableuserselect"),this.editSettings.showAddNewRow&&(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.editSettings.newRowPosition="Top"),Se(this.element,["e-responsive","e-default"],[]);var s=this.serviceLocator.getService("rendererFactory");this.headerModule=s.getRenderer(oi.Header),this.contentModule=s.getRenderer(oi.Content),this.printModule=new yd(this,this.scrollModule),this.clipboardModule=new sy(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},t.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.height!=="auto"&&this.scrollModule.setPadding()},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.createGridPopUpElement=function(){var i=this.createElement("div",{className:"e-gridpopup"});i.style.display="none";var s=this.createElement("div",{className:Nt,attrs:{tabIndex:"-1"}});Ie([s,this.createElement("div",{className:"e-uptail e-tail"})],i),s.appendChild(this.createElement("span")),Ie([s,this.createElement("div",{className:"e-downtail e-tail"})],i),this.element.appendChild(i)},t.prototype.updateGridLines=function(){switch(Se(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines");break}this.updateResizeLines()},t.prototype.updateResizeLines=function(){this.allowResizing&&!(this.gridLines==="Vertical"||this.gridLines==="Both")?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},t.prototype.applyTextWrap=function(){if(this.allowTextWrap){var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":si(this.element,!1),si(this.getContent(),!1),si(i,!0);break;case"Content":si(this.getContent(),!0),si(this.element,!1),si(i,!1);break;default:si(this.element,!0),si(this.getContent(),!1),si(i,!1)}this.textWrapSettings.wrapMode!=="Content"&&this.notify($o,{})}},t.prototype.removeTextWrap=function(){si(this.element,!1);var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));si(i,!1),si(this.getContent(),!1),this.textWrapSettings.wrapMode!=="Content"&&this.notify($o,{})},t.prototype.createTooltip=function(){this.toolTipObj=new Wf({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},t.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1),this.componentRefresh()},t.prototype.getTooltipStatus=function(i){var s=this.getHeaderTable(),r=this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"?"e-gridcontent":"e-gridheader",n=this.createTable(s,r,"header"),o=this.createTable(s,r,"content"),l=i.classList.contains("e-headercell")?n:o,h=i.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=i.className;var p=l.querySelector(h);p.innerHTML="",Array.from(i.childNodes).forEach(function(d){p.appendChild(d.cloneNode(!0))});var c=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(n),document.body.removeChild(o),!!(c>i.getBoundingClientRect().width&&!i.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"&&c>i.getBoundingClientRect().width*.55-(this.height!=="auto"?16:0))},t.prototype.mouseMoveHandler=function(i){if(this.isEllipsisTooltip()){var s=F(i.target,"e-ellipsistooltip");i.type==="mouseout"&&(this.prevElement!==s||s!==F(i.relatedTarget,"e-ellipsistooltip"))&&(this.toolTipObj.close(),this.prevElement=null);var r=i.target.tagName,n=["A","BUTTON","INPUT"];if(s&&i.type!=="mouseout"&&!(E.isDevice&&n.indexOf(r)!==-1)&&this.getTooltipStatus(s)){var o=this.getColumns()[parseInt(s.getAttribute(yt),10)-1],l=o&&o.disableHtmlEncode?"innerText":"innerHTML",h=this.createElement("div");if(s.getElementsByClassName("e-headertext").length){var p=s.getElementsByClassName("e-headertext")[0];h[""+l]=this.sanitize(p.innerText),this.toolTipObj.content=h}else h[""+l]=this.sanitize(s.innerText),this.toolTipObj.content=h;this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0),o&&o.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),s!==this.prevElement&&this.toolTipObj.open(s),this.prevElement=s}}},t.prototype.isEllipsisTooltip=function(){var i=this.getColumns();if(this.clipMode==="EllipsisWithTooltip")return!0;for(var s=0;s<i.length;s++)if(i[parseInt(s.toString(),10)].clipMode==="EllipsisWithTooltip")return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},t.prototype.createTable=function(i,s,r){var n=this.createElement("div");n.className=this.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";var o=this.createElement("div");o.className=s;var l=this.createElement("table");l.className=i.className,l.style.cssText="table-layout: auto;width: auto";var h=r==="header"?"th":"td",p=this.createElement("tr",{attrs:{role:"row"}}),c=this.createElement(h);return p.appendChild(c),l.appendChild(p),o.appendChild(l),n.appendChild(o),document.body.appendChild(n),n},t.prototype.onKeyPressed=function(i){(i.action==="tab"||i.action==="shiftTab")&&this.toolTipObj.close()},t.prototype.wireEvents=function(){v.add(this.element,"click",this.mouseClickHandler,this),v.add(this.element,"touchend",this.mouseClickHandler,this),v.add(this.element,"focusout",this.focusOutHandler,this),v.add(this.element,"dblclick",this.dblClickHandler,this),v.add(this.element,"keydown",this.keyPressHandler,this),v.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=this.element.tabIndex===-1?0:this.element.tabIndex),this.keyboardModule=new Gt(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),v.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),v.add(this.element,"mouseover",this.mouseMoveHandler,this),v.add(this.element,"mouseout",this.mouseMoveHandler,this),v.add(this.getContent(),"touchstart",this.tapEvent,this),v.add(document.body,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){v.remove(this.element,"click",this.mouseClickHandler),v.remove(this.element,"touchend",this.mouseClickHandler),v.remove(this.element,"focusout",this.focusOutHandler),v.remove(this.element,"dblclick",this.dblClickHandler),v.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),v.remove(this.element,"mouseover",this.mouseMoveHandler),v.remove(this.element,"mouseout",this.mouseMoveHandler),v.remove(this.element,"keydown",this.keyPressHandler),v.remove(this.getContent(),"touchstart",this.tapEvent),v.remove(document.body,"keydown",this.keyDownHandler),v.remove(window,"resize",this.resetIndentWidth)},t.prototype.addListener=function(){this.isDestroyed||(this.on(Ar,this.dataReady,this),this.on(nt,this.recalcIndentWidth,this),this.on(mi,this.recalcIndentWidth,this),this.on(Va,this.refreshFrozenPosition,this),this.on(jl,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(As,this.dataBoundFunction),this.on(hi,this.onKeyPressed,this))},t.prototype.removeListener=function(){this.isDestroyed||(this.off(Ar,this.dataReady),this.off(nt,this.recalcIndentWidth),this.off(mi,this.recalcIndentWidth),this.on(Va,this.refreshFrozenPosition,this),this.on(jl,this.refreshSplitFrozenColumn,this),this.removeEventListener(As,this.dataBoundFunction),this.off(hi,this.onKeyPressed))},t.prototype.getCurrentViewRecords=function(){return Pi(this)?u(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},t.prototype.mouseClickHandler=function(i){if(!(this.isChildGrid(i)||F(i.target,"e-gridpopup")&&i.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(i))&&!((!this.allowRowDragAndDrop&&(F(i.target,ki)||i.target.tagName==="TD")||F(i.target,"e-headercell")&&F(i.target,"e-headercell").querySelector(".e-checkselectall")||!(this.allowGrouping||this.allowReordering)&&F(i.target,"e-gridheader"))&&i.touches)&&(F(i.target,"e-gridheader")&&this.allowRowDragAndDrop&&!F(i.target,"e-filterbarcell")&&i.target&&["A","BUTTON","INPUT"].indexOf(i.target.tagName)===-1&&i.preventDefault(),!(this.allowRowDragAndDrop&&F(i.target,"e-rowcell")&&!F(i.target,"e-rowdragdrop")&&i.touches))){var s=this.getRowInfo(i.target);s.event=i;var r="cancel";s[""+r]=!1;var n=!1,o=M(i.target,"tr");if(o&&o.getAttribute("data-uid")){var l=this.getRowObjectFromUID(o.getAttribute("data-uid"));n=l?l.isDataRow:!1}n&&this.trigger(em,s),this.notify(ls,i)}},t.prototype.checkEdit=function(i){var s=F(i.target,jt),r=this.editSettings.mode!=="Batch"&&this.isEdit&&s&&(s.classList.contains(on)||s.classList.contains(Sr)&&!this.editSettings.showAddNewRow);return!F(i.target,"e-unboundcelldiv")&&(r||F(i.target,He)&&F(i.target,He).classList.contains("e-editedbatchcell"))},t.prototype.dblClickHandler=function(i){var s=F(i.target,"e-grid");if(!(u(s)||s.id!==this.element.id||M(i.target,".e-unboundcelldiv"))){var r=!1,n=M(i.target,"tr");if(n&&n.getAttribute("data-uid")){var o=this.getRowObjectFromUID(n.getAttribute("data-uid"));r=o?o.isDataRow:!1}var l=this.getRowInfo(i.target);l.target=i.target,l.event=i,r&&this.trigger(Zg,l),this.notify(gm,i)}},t.prototype.focusOutHandler=function(i){if(!this.isChildGrid(i)){F(i.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var s=this.element.querySelector(".e-cancel:not(.e-hide)");s&&!s.parentElement.classList.contains("e-tbar-btn")&&s.classList.add("e-hide");var r=i.relatedTarget,n=r?r.getAttribute("aria-owns"):null;(!r||!F(r,"e-grid")&&(!u(n)&&n)!==i.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!E.isDevice&&(this.editSettings.mode==="Batch"&&!((F(r,"e-ddl")||F(r,"e-ddt"))&&(F(r,"e-multi-select-list-wrapper")||F(r,"e-input-filter"))&&F(r,"e-input-group"))&&(F(r,"e-uploader")||!(r&&u(F(r,"e-input-group")))&&!F(i.target,"edit-custom-template"))&&(this.editModule.saveCell(),this.notify(wm,{})),this.editSettings.mode==="Normal"&&!this.isWidgetsDestroyed&&this.editModule.editFormValidate()),this.editSettings.showAddNewRow&&(this.editModule.isShowAddedRowValidate=!1),this.keyPress=!1}},t.prototype.isChildGrid=function(i){var s=F(i.target,"e-grid");return!!(s&&s.id!==this.element.id||F(i.target,"e-unboundcelldiv")&&u(s))},t.prototype.mergePersistGridData=function(i){var s=this.getLocalData();if(!(u(s)||s==="")||!u(i)){var r=u(i)?JSON.parse(s):i,n=Object.keys(r);this.isProtectedOnChange=!0;for(var o=0,l=n;o<l.length;o++){var h=l[o];typeof this[""+h]=="object"&&!u(this[""+h])?Array.isArray(this[""+h])&&h==="columns"?(this.setFrozenCount(),Ia(this[""+h]),this.mergeColumns(r[""+h],this[""+h]),this.mergedColumns=!0,this[""+h]=r[""+h]):$(this[""+h],r[""+h]):this[""+h]=r[""+h]}this.isProtectedOnChange=!1}},t.prototype.mergeColumns=function(i,s){for(var r=i,n=this.isFrozenGrid(),o=function(p){var c=s.filter(function(d){return n?d.index===r[parseInt(p.toString(),10)][""+lp]:d.index===r[parseInt(p.toString(),10)].index})[0];u(c)||(n&&(c=$({},c,{},!0),c.freeze=r[parseInt(p.toString(),10)].freeze),c.columns&&c.columns.length?(l.mergeColumns(r[parseInt(p.toString(),10)].columns,c.columns),r[parseInt(p.toString(),10)]=$(c,r[parseInt(p.toString(),10)],{},!0)):r[parseInt(p.toString(),10)]=$(c,r[parseInt(p.toString(),10)],{},!0))},l=this,h=0;h<r.length;h++)o(h)},t.prototype.isDetail=function(){return!u(this.detailTemplate)||!u(this.childGrid)},t.prototype.isCommandColumn=function(i){var s=this;return i.some(function(r){return r.columns?s.isCommandColumn(r.columns):!!(r.commands||r.commandsTemplate)})},t.prototype.isForeignKeyEnabled=function(i){var s=this;return i.some(function(r){return r.columns?s.isForeignKeyEnabled(r.columns):!!(r.dataSource&&r.foreignKeyValue)})},t.prototype.keyPressHandler=function(i){var s=$(i,{cancel:!1});this.trigger("keyPressed",s),(s.cancel===!0||this.isEdit&&i&&F(i.target,"e-gridform")&&F(i.target,"e-ddl")&&i.action==="open"&&i.altKey===!0&&i.code==="ArrowDown")&&i.stopImmediatePropagation()},t.prototype.keyDownHandler=function(i){if(i.altKey){if(i.keyCode===74&&(this.keyA?(this.notify(ip,{target:i.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(R([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),i.keyCode===87){var s=this.focusModule;if(s){if(!this.currentViewData.length)return;this.element.getBoundingClientRect().width!==0&&s.focusContent(),s.addOutline()}}i.keyCode===65&&(this.keyA=!0),i.keyCode===72&&this.keyA&&(this.notify(ip,{target:i.target,collapse:!0}),this.keyA=!1)}i.keyCode===13&&this.notify(Ca,i)},t.prototype.keyActionHandler=function(i){this.isChildGrid(i)||this.editModule&&(this.editModule.alertDObj&&this.editModule.alertDObj.visible||this.editModule.dialogObj&&this.editModule.dialogObj.visible)||this.isEdit&&(!this.editSettings.showAddNewRow||this.editSettings.showAddNewRow&&this.element.querySelector(on))&&i.action!=="escape"&&i.action!=="enter"&&i.action!=="shiftEnter"&&i.action!=="tab"&&i.action!=="shiftTab"||(this.keyPress=!0,this.allowKeyboard&&(i.action==="ctrlPlusP"&&(i.preventDefault(),this.print()),this.notify(hi,i)))},t.prototype.setInjectedModules=function(i){this.injectedModules=i},t.prototype.updateColumnObject=function(){Wa(this.columns,this.enableColumnVirtualization,this),Ia(this.columns),this.initForeignColumn(),this.notify(pn,{})},t.prototype.refreshFrozenPosition=function(i){i&&i.isModeChg?(this.refreshColumns(),this.notify(hv,{})):this.refreshColumns()},t.prototype.getForeignKeyColumns=function(){var i=this.enableColumnVirtualization?this.columns:this.getColumns();return i.filter(function(s){return s.isForeignColumn()})},t.prototype.getRowHeight=function(i){return this.rowHeight?this.rowHeight:Ay(this.element,i)},t.prototype.refreshColumns=function(){if(this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization){var i=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.getHeaderContent().querySelector("."+Ft).scrollLeft=i,this.getContent().querySelector("."+Nt).scrollLeft=i}},t.prototype.excelExport=function(i,s,r,n){if(this.exportGrids&&this.exportGrids.length){var o=this.exportGrids.slice();return this.exportMultipleExcelGrids(o,i,s,r,n)}else return this.excelExportModule?this.excelExportModule.Map(this,i,s,r,!1,n):null},t.prototype.csvExport=function(i,s,r,n){return this.excelExportModule?this.excelExportModule.Map(this,i,s,r,!0,n):null},t.prototype.pdfExport=function(i,s,r,n){if(this.exportGrids&&this.exportGrids.length){var o=this.exportGrids.slice();return this.exportMultiplePdfGrids(o,i,s,r,n)}else return this.pdfExportModule?this.pdfExportModule.Map(this,i,s,r,n):null},t.prototype.exportMultiplePdfGrids=function(i,s,r,n,o){var l=this;if(i.length!==0){var h=i.shift(),p=document.getElementById(h).ej2_instances[0],c=p.pdfExportModule?p.pdfExportModule.Map(p,s,r,n,o):Promise.resolve();return c.then(function(d){return r=i.length!==1,l.exportMultiplePdfGrids(i,s,r,d,o)})}return null},t.prototype.exportMultipleExcelGrids=function(i,s,r,n,o){var l=this;if(i.length!==0){var h=i.shift(),p=document.getElementById(h).ej2_instances[0],c=p.excelExportModule?p.excelExportModule.Map(p,s,r,n,!1,o):null;return c.then(function(d){return r=i.length!==1,l.exportMultipleExcelGrids(i,s,r,d,o)})}return null},t.prototype.groupColumn=function(i){this.groupModule&&this.groupModule.groupColumn(i)},t.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},t.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},t.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},t.prototype.ungroupColumn=function(i){this.groupModule&&this.groupModule.ungroupColumn(i)},t.prototype.openColumnChooser=function(i,s){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,s)},t.prototype.scrollRefresh=function(){var i=this,s=function(){i.scrollModule.refresh(),i.off(nt,s)};this.on(nt,s,this)},t.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},t.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},t.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},t.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},t.prototype.selectCells=function(i){this.selectionModule&&this.selectionModule.selectCells(i)},t.prototype.selectRowsByRange=function(i,s){this.selectionModule&&this.selectionModule.selectRowsByRange(i,s)},t.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},t.prototype.ensureModuleInjected=function(i){return this.getInjectedModules().indexOf(i)>=0},t.prototype.destroyTemplate=function(i,s,r){this.clearTemplate(i,s,r)},t.prototype.log=function(i,s){var r=this.getInjectedModules(),n=r.find(function(o){return o.name==="Logger"});n||(e.Inject(ry),this.enableLogger=!0,this.injectModules()),this.loggerModule&&this.loggerModule.log(i,s)},t.prototype.applyBiggerTheme=function(i){this.element.classList.contains("e-bigger")&&i.classList.add("e-bigger")},t.prototype.getPreviousRowData=function(){var i=this.getRowsObject()[this.getRows().length-1].data;return i},t.prototype.hideScroll=function(){var i=this.getContent().querySelector("."+Nt);i.scrollHeight<=i.clientHeight&&(this.scrollModule.removePadding(),i.style.overflowY="auto")},t.prototype.getRowIndexByPrimaryKey=function(i){var s=this.getPrimaryKeyFieldNames()[0];i=typeof i=="object"?i[""+s]:i;for(var r=this.getRowsObject(),n=0;n<r.length;n++)if(!(r[parseInt(n.toString(),10)].isDetailRow||r[parseInt(n.toString(),10)].isCaptionRow)){var o=r[parseInt(n.toString(),10)].data[""+s];if(s.split(".").length>1&&(o=Zl(s,r[parseInt(n.toString(),10)].data)),o===i)return r[parseInt(n.toString(),10)].index}return-1},t.prototype.grabColumnByFieldFromAllCols=function(i,s){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,o=0;o<n.length;o++)if(!s&&i===n[parseInt(o.toString(),10)].field||s&&n[parseInt(o.toString(),10)].isForeignColumn()&&i===n[parseInt(o.toString(),10)].foreignKeyValue){r=n[parseInt(o.toString(),10)];break}return r},t.prototype.grabColumnByUidFromAllCols=function(i){var s;this.columnModel=[],this.updateColumnModel(this.columns);for(var r=this.columnModel,n=0;n<r.length;n++)i===r[parseInt(n.toString(),10)].uid&&(s=r[parseInt(n.toString(),10)]);return s},t.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length){var i=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof N?this.renderModule.data.getData(this.dataSource,i):this.dataSource instanceof N?this.dataSource.executeLocal(i):new N(this.dataSource,i).executeLocal(i)}return[]},t.prototype.getUserAgent=function(){var i=E.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(i)},t.prototype.tapEvent=function(i){this.getUserAgent()&&(Di.timer?(clearTimeout(Di.timer),Di.timer=null,this.dblClickHandler(i),this.notify(bm,i)):Di.timer=setTimeout(function(){Di.timer=null},300))},t.prototype.getRowUid=function(i){return""+i+this.rowUid++},t.prototype.getRowElementByUID=function(i){var s,r=[],n=[].slice.call(this.getContent().querySelector(ze).children);this.frozenRows?(r=[].slice.call(this.getHeaderContent().querySelector(ze).children),r=r.concat(n)):r=n;for(var o=0,l=r;o<l.length;o++){var h=l[o];if(h.getAttribute("data-uid")===i){s=h;break}}return s},t.prototype.getHiddenColumns=function(){for(var i=[],s=0,r=this.columnModel;s<r.length;s++){var n=r[s];n.visible===!1&&i.push(n)}return i},t.prototype.calculatePageSizeByParentHeight=function(i){if(this.allowPaging&&(this.allowTextWrap&&this.textWrapSettings.wrapMode==="Header"||!this.allowTextWrap)){var s=0;i.indexOf("%")!==-1&&(i=parseInt(i,10)/100*this.element.clientHeight);var r=this.getNoncontentHeight()+this.getRowHeight();if(i>r){var n=0;n=i-this.getNoncontentHeight(),s=n/this.getRowHeight()}if(s>0)return Math.floor(s)}return 0},t.prototype.getNoncontentHeight=function(){var i=0;if(this.getHeaderContent()&&!u(this.getHeaderContent().clientHeight)&&(i+=this.getHeaderContent().clientHeight),this.toolbar&&!u(this.element.querySelector(".e-toolbar").clientHeight)&&(i+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!u(this.element.querySelector(".e-gridpager").clientHeight)&&(i+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!u(this.element.querySelector(".e-columnheader").clientHeight)&&(i+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!u(this.element.querySelector(".e-groupdroparea").clientHeight)&&(i+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!u(this.element.querySelector(".e-summaryrow").clientHeight))for(var s=0;s<this.element.getElementsByClassName("e-summaryrow").length;s++)i+=this.element.getElementsByClassName("e-summaryrow")[parseInt(s.toString(),10)].clientHeight;return i},t.prototype.getSummaryValues=function(i,s){return P.aggregates[i.type.toLowerCase()](s,i.field)},t.prototype.serverExcelExport=function(i,s){this.isExcel=!0,this.exportGrid(i,s)},t.prototype.serverPdfExport=function(i,s){this.isExcel=!1,this.exportGrid(i,s)},t.prototype.serverCsvExport=function(i,s){this.isExcel=!0,this.exportGrid(i,s)},t.prototype.exportGrid=function(i,s){var r=this,n=this,o=n.getDataModule().generateQuery(!0),l=new vi().processQuery(new N({url:""}),o),h=JSON.parse(l.data),p=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),c=["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"];p.filterSettings.columns=h.where,p.searchSettings.fields=h.search&&h.search[0].fields||[],p.sortSettings.columns=h.sorted,p.columns=this.setHeaderText(p.columns,c);var d=this.createElement("form",{id:"ExportForm"});d.style.display="none";var f=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});f.value=JSON.stringify(p),d.method="POST",d.action=i,d.appendChild(f),s&&s.headers&&Array.isArray(s.headers)&&s.headers.forEach(function(g){Object.keys(g).forEach(function(y){var b=typeof g[""+y]=="string"?g[""+y]:JSON.stringify(g[""+y]),C=r.createElement("input",{attrs:{name:y,value:b,type:"hidden"}});d.appendChild(C)})}),document.body.appendChild(d),d.submit(),d.remove()},t.prototype.setHeaderText=function(i,s){for(var r=0;r<i.length;r++){var n=this.getColumnByUid(i[parseInt(r.toString(),10)].uid);i[parseInt(r.toString(),10)].headerText=n.headerText,u(n.template)||(i[parseInt(r.toString(),10)].template="true"),i[parseInt(r.toString(),10)].format&&(i[parseInt(r.toString(),10)].format=zy(this.getFormat(i[parseInt(r.toString(),10)].format),i[parseInt(r.toString(),10)].type,!1,qd),(n.type==="datetime"||n.type==="date"||n.type==="time")&&(i[parseInt(r.toString(),10)].format=i[parseInt(r.toString(),10)].format.toString().replace("AM/PM","tt"))),i[parseInt(r.toString(),10)].columns&&this.setHeaderText(i[parseInt(r.toString(),10)].columns,s);for(var o=Object.keys(i[parseInt(r.toString(),10)]),l=0;l<o.length;l++)s.indexOf(o[parseInt(l.toString(),10)])<0&&delete i[parseInt(r.toString(),10)][o[parseInt(l.toString(),10)]]}return i},t.prototype.getFormat=function(i){return typeof i=="object"?u(i.format)?i.skeleton:i.format:i},t.prototype.isCollapseStateEnabled=function(){var i="isExpanded";return this[""+i]===!1},t.prototype.updateRowValue=function(i,s){var r={requestType:"save",data:s};this.showSpinner(),this.notify(Bl,r),this.refresh()},t.prototype.setForeignKeyData=function(){this.dataBind();var i=this.getDataModule().getForeignKeyDataState();i.isPending?(this.getDataModule().setForeignKeyDataState({}),i.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},t.prototype.resetFilterDlgPosition=function(i){var s=this.getColumnHeaderByField(i);if(s){var r=s.querySelector(".e-filtermenudiv"),n=this.element.querySelector(".e-filter-popup");if(r){var o=this.element.getBoundingClientRect(),l=r.getBoundingClientRect();n&&(n.offsetWidth+l.right>o.right?n.style.left=(l.right-n.offsetWidth-o.left).toString()+"px":n.style.left=(l.right-o.left).toString()+"px")}}},t.prototype.renderTemplates=function(i){var s=this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact,r=this.printGridParent&&this.printGridParent.isReact;if((s||r)&&this.portals){var n=r?this.printGridParent:this.parentDetails.parentInstObj;n.portals=n.portals.concat(this.portals),n.renderTemplates(i),this.portals=void 0}else{var o="portals";this.notify("reactTemplateRender",this[""+o]),this.renderReactTemplates(i)}},t.prototype.batchUpdate=function(i){this.processRowChanges(i)},t.prototype.batchAsyncUpdate=function(i){this.processBulkRowChanges(i)},t.prototype.processBulkRowChanges=function(i){var s=this;if(!this.dataToBeUpdated)this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i),setTimeout(function(){s.processRowChanges(s.dataToBeUpdated),s.dataToBeUpdated=null},this.asyncTimeOut);else for(var r=[za,dv,ud],n=this.getPrimaryKeyFieldNames()[0],o=0;o<r.length;o++)i[r[parseInt(o.toString(),10)]]&&Py(this,i,r[parseInt(o.toString(),10)],n)},t.prototype.processRowChanges=function(i){var s=this,r=this.getPrimaryKeyFieldNames()[0];i=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i);var n=this.getDataModule().saveChanges(i,r,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?n.then(function(){s.setNewData()}):this.setNewData()},t.prototype.setNewData=function(){var i=this,s=JSON.parse(JSON.stringify(this.getCurrentViewRecords())),r=this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount());r.then(function(n){i.bulkRefresh(n.result,s,n.count)})},t.prototype.deleteRowElement=function(i){var s=this.getRowElementByUID(i.uid);ce(s)},t.prototype.bulkRefresh=function(i,s,r){for(var n=this,o=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(b){i.filter(function(C){return C[""+l]===o[parseInt(b.toString(),10)].data[""+l]}).length||(p.deleteRowElement(o[parseInt(b.toString(),10)]),o.splice(b,1),b--),c=b},p=this,c,d=0;d<o.length;d++)h(d),d=c;for(var f=function(b){var C;s.filter(function(S){S[""+l]===i[parseInt(b.toString(),10)][""+l]&&(S!==i[parseInt(b.toString(),10)]&&n.setRowData(i[parseInt(b.toString(),10)][""+l],i[parseInt(b.toString(),10)]),C=!0)}),C||g.renderRowElement(i[parseInt(b.toString(),10)],b)},g=this,d=0;d<i.length;d++)f(d);this.currentViewData=i;var y=[].slice.call(this.getContentTable().getElementsByClassName(jt));By(this,this.getRowsObject(),y),Ny(this),this.allowPaging&&this.notify(Wt,{module:"pager",properties:{totalRecordsCount:r}})},t.prototype.renderRowElement=function(i,s){var r=new Lr(this.serviceLocator,null,this),n=new $a(this),o=n.generateRows([i]),l=r.render(o[0],this.getColumns());this.addRowObject(o[0],s);var h=this.getContentTable().querySelector(ze);if(h.querySelector(".e-emptyrow")){var p=h.querySelector(".e-emptyrow");p.parentNode.removeChild(p),this.frozenRows&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}this.frozenRows&&s<this.frozenRows?h=this.getHeaderContent().querySelector(ze):h=this.getContent().querySelector(ze),h=this.getContent().querySelector(ze),h.appendChild(l)},t.prototype.addRowObject=function(i,s){this.getRowsObject().splice(s,1,i)},t.prototype.updateVisibleExpandCollapseRows=function(){for(var i=this.getRowsObject(),s=0,r=i.length;s<r;s++)(i[parseInt(s.toString(),10)].isDataRow||i[parseInt(s.toString(),10)].isAggregateRow)&&this.getRowElementByUID(i[parseInt(s.toString(),10)].uid)&&this.getRowElementByUID(i[parseInt(s.toString(),10)].uid).style.display==="none"?i[parseInt(s.toString(),10)].visible=!1:i[parseInt(s.toString(),10)].visible=!0},t.prototype.sanitize=function(i){return this.enableHtmlSanitizer?Kt.sanitize(i):i},t.prototype.getHeight=function(i){return!Number.isInteger(i)&&i.indexOf("%")!==-1?i=parseInt(i,10)/100*this.element.clientHeight:!Number.isInteger(i)&&this.height!=="auto"?i=parseInt(i,10):i=this.height,i},t.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},t.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},t.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(ze)},t.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(ze)},t.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(ze)},t.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(ze)},t.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(ze)},t.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(ze)},t.prototype.showResponsiveCustomFilter=function(i){this.filterModule&&this.filterModule.showCustomFilter(i||this.rowRenderingMode==="Vertical")},t.prototype.showResponsiveCustomSort=function(i){this.sortModule&&this.sortModule.showCustomSort(i||this.rowRenderingMode==="Vertical")},t.prototype.showResponsiveCustomColumnChooser=function(i){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(i||this.rowRenderingMode==="Vertical")},t.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},t.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},t.prototype.getCurrentVisibleColumns=function(i){for(var s=[],r=i?this.getColumns():this.columnModel,n=0,o=r;n<o.length;n++){var l=o[n];l.visible&&s.push(l)}return s},t.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)};var e;return D([m([])],t.prototype,"currentViewData",void 0),D([m()],t.prototype,"parentDetails",void 0),D([m()],t.prototype,"showHider",void 0),D([m([])],t.prototype,"columns",void 0),D([m(!0)],t.prototype,"enableAltRow",void 0),D([m(!0)],t.prototype,"enableHover",void 0),D([m(!1)],t.prototype,"enableAutoFill",void 0),D([m(!0)],t.prototype,"allowKeyboard",void 0),D([m(!1)],t.prototype,"enableStickyHeader",void 0),D([m(!1)],t.prototype,"enableHtmlSanitizer",void 0),D([m(!1)],t.prototype,"allowTextWrap",void 0),D([dt({},my)],t.prototype,"textWrapSettings",void 0),D([dt({},vy)],t.prototype,"resizeSettings",void 0),D([m(!1)],t.prototype,"allowPaging",void 0),D([dt({},Yv)],t.prototype,"pageSettings",void 0),D([dt({},Cy)],t.prototype,"loadingIndicator",void 0),D([m(!0)],t.prototype,"enableVirtualMaskRow",void 0),D([m(!1)],t.prototype,"enableVirtualization",void 0),D([m(!1)],t.prototype,"enableColumnVirtualization",void 0),D([m(!1)],t.prototype,"enableInfiniteScrolling",void 0),D([dt({},fy)],t.prototype,"searchSettings",void 0),D([m(!1)],t.prototype,"allowSorting",void 0),D([m("Ellipsis")],t.prototype,"clipMode",void 0),D([m(!0)],t.prototype,"allowMultiSorting",void 0),D([m(!1)],t.prototype,"allowExcelExport",void 0),D([m(!1)],t.prototype,"allowPdfExport",void 0),D([dt({},hy)],t.prototype,"sortSettings",void 0),D([dt({},py)],t.prototype,"infiniteScrollSettings",void 0),D([m(!0)],t.prototype,"allowSelection",void 0),D([m(-1)],t.prototype,"selectedRowIndex",void 0),D([dt({},dy)],t.prototype,"selectionSettings",void 0),D([m(!1)],t.prototype,"allowFiltering",void 0),D([m("Horizontal")],t.prototype,"rowRenderingMode",void 0),D([m(!1)],t.prototype,"enableAdaptiveUI",void 0),D([m("Both")],t.prototype,"adaptiveUIMode",void 0),D([m(!1)],t.prototype,"allowReordering",void 0),D([m(!1)],t.prototype,"enableRowSpan",void 0),D([m(!1)],t.prototype,"enableColumnSpan",void 0),D([m(!1)],t.prototype,"allowResizing",void 0),D([m(!1)],t.prototype,"allowRowDragAndDrop",void 0),D([dt({},gy)],t.prototype,"rowDropSettings",void 0),D([dt({},cy)],t.prototype,"filterSettings",void 0),D([m(!1)],t.prototype,"allowGrouping",void 0),D([m(!1)],t.prototype,"enableImmutableMode",void 0),D([m(!1)],t.prototype,"showColumnMenu",void 0),D([m(!1)],t.prototype,"autoFit",void 0),D([dt({},yy)],t.prototype,"groupSettings",void 0),D([dt({},by)],t.prototype,"editSettings",void 0),D([Rs([],iy)],t.prototype,"aggregates",void 0),D([m(!1)],t.prototype,"showColumnChooser",void 0),D([dt({},Qv)],t.prototype,"columnChooserSettings",void 0),D([m(!1)],t.prototype,"enableHeaderFocus",void 0),D([m("auto")],t.prototype,"height",void 0),D([m("auto")],t.prototype,"width",void 0),D([m("Default")],t.prototype,"gridLines",void 0),D([m()],t.prototype,"rowTemplate",void 0),D([m()],t.prototype,"emptyRecordTemplate",void 0),D([m()],t.prototype,"detailTemplate",void 0),D([m()],t.prototype,"childGrid",void 0),D([m()],t.prototype,"queryString",void 0),D([m("AllPages")],t.prototype,"printMode",void 0),D([m("Expanded")],t.prototype,"hierarchyPrintMode",void 0),D([m([])],t.prototype,"dataSource",void 0),D([m(null)],t.prototype,"rowHeight",void 0),D([m()],t.prototype,"query",void 0),D([m("USD")],t.prototype,"currencyCode",void 0),D([m()],t.prototype,"exportGrids",void 0),D([m()],t.prototype,"toolbar",void 0),D([m()],t.prototype,"contextMenuItems",void 0),D([m()],t.prototype,"columnMenuItems",void 0),D([m()],t.prototype,"toolbarTemplate",void 0),D([m()],t.prototype,"pagerTemplate",void 0),D([m(0)],t.prototype,"frozenRows",void 0),D([m(0)],t.prototype,"frozenColumns",void 0),D([m("")],t.prototype,"cssClass",void 0),D([m("All")],t.prototype,"columnQueryMode",void 0),D([m({})],t.prototype,"currentAction",void 0),D([m("")],t.prototype,"ej2StatePersistenceVersion",void 0),D([O()],t.prototype,"created",void 0),D([O()],t.prototype,"destroyed",void 0),D([O()],t.prototype,"load",void 0),D([O()],t.prototype,"rowDataBound",void 0),D([O()],t.prototype,"queryCellInfo",void 0),D([O()],t.prototype,"headerCellInfo",void 0),D([O()],t.prototype,"actionBegin",void 0),D([O()],t.prototype,"actionComplete",void 0),D([O()],t.prototype,"actionFailure",void 0),D([O()],t.prototype,"dataBound",void 0),D([O()],t.prototype,"recordDoubleClick",void 0),D([O()],t.prototype,"recordClick",void 0),D([O()],t.prototype,"rowSelecting",void 0),D([O()],t.prototype,"rowSelected",void 0),D([O()],t.prototype,"rowDeselecting",void 0),D([O()],t.prototype,"rowDeselected",void 0),D([O()],t.prototype,"cellSelecting",void 0),D([O()],t.prototype,"cellSelected",void 0),D([O()],t.prototype,"cellDeselecting",void 0),D([O()],t.prototype,"cellDeselected",void 0),D([O()],t.prototype,"columnSelecting",void 0),D([O()],t.prototype,"columnSelected",void 0),D([O()],t.prototype,"columnDeselecting",void 0),D([O()],t.prototype,"columnDeselected",void 0),D([O()],t.prototype,"columnDragStart",void 0),D([O()],t.prototype,"columnDrag",void 0),D([O()],t.prototype,"columnDrop",void 0),D([O()],t.prototype,"printComplete",void 0),D([O()],t.prototype,"beforePrint",void 0),D([O()],t.prototype,"pdfQueryCellInfo",void 0),D([O()],t.prototype,"pdfHeaderQueryCellInfo",void 0),D([O()],t.prototype,"pdfAggregateQueryCellInfo",void 0),D([O()],t.prototype,"excelAggregateQueryCellInfo",void 0),D([O()],t.prototype,"exportDetailDataBound",void 0),D([O()],t.prototype,"exportDetailTemplate",void 0),D([O()],t.prototype,"excelQueryCellInfo",void 0),D([O()],t.prototype,"excelHeaderQueryCellInfo",void 0),D([O()],t.prototype,"beforeExcelExport",void 0),D([O()],t.prototype,"excelExportComplete",void 0),D([O()],t.prototype,"beforePdfExport",void 0),D([O()],t.prototype,"pdfExportComplete",void 0),D([O()],t.prototype,"rowDragStartHelper",void 0),D([O()],t.prototype,"detailDataBound",void 0),D([O()],t.prototype,"rowDragStart",void 0),D([O()],t.prototype,"rowDrag",void 0),D([O()],t.prototype,"rowDrop",void 0),D([O()],t.prototype,"toolbarClick",void 0),D([O()],t.prototype,"beforeOpenColumnChooser",void 0),D([O()],t.prototype,"beforeOpenAdaptiveDialog",void 0),D([O()],t.prototype,"batchAdd",void 0),D([O()],t.prototype,"batchDelete",void 0),D([O()],t.prototype,"batchCancel",void 0),D([O()],t.prototype,"beforeBatchAdd",void 0),D([O()],t.prototype,"beforeBatchDelete",void 0),D([O()],t.prototype,"beforeBatchSave",void 0),D([O()],t.prototype,"beginEdit",void 0),D([O()],t.prototype,"commandClick",void 0),D([O()],t.prototype,"cellEdit",void 0),D([O()],t.prototype,"cellSave",void 0),D([O()],t.prototype,"cellSaved",void 0),D([O()],t.prototype,"resizeStart",void 0),D([O()],t.prototype,"resizing",void 0),D([O()],t.prototype,"resizeStop",void 0),D([O()],t.prototype,"keyPressed",void 0),D([O()],t.prototype,"beforeDataBound",void 0),D([O()],t.prototype,"contextMenuOpen",void 0),D([O()],t.prototype,"contextMenuClick",void 0),D([O()],t.prototype,"contextMenuClose",void 0),D([O()],t.prototype,"columnMenuOpen",void 0),D([O()],t.prototype,"columnMenuClick",void 0),D([O()],t.prototype,"columnMenuClose",void 0),D([O()],t.prototype,"checkBoxChange",void 0),D([O()],t.prototype,"beforeCopy",void 0),D([O()],t.prototype,"beforePaste",void 0),D([O()],t.prototype,"beforeAutoFill",void 0),D([O()],t.prototype,"columnDataStateChange",void 0),D([O()],t.prototype,"dataStateChange",void 0),D([O()],t.prototype,"dataSourceChanged",void 0),D([O()],t.prototype,"exportGroupCaption",void 0),D([O()],t.prototype,"lazyLoadGroupExpand",void 0),D([O()],t.prototype,"lazyLoadGroupCollapse",void 0),D([O()],t.prototype,"beforeDetailTemplateDetach",void 0),D([O()],t.prototype,"beforeCustomFilterOpen",void 0),t=e=D([pt],t),t})(Vt);function Sy(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound","enableHtmlSanitizer"]}var yd=(function(){function a(t,e){this.isAsyncPrint=!1,this.defered=new Ut,this.parent=t,!this.parent.isDestroyed&&(this.parent.on(nt,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(Rt,this.actionBeginFunction),this.parent.on(Hi,this.onEmpty.bind(this)),this.parent.on(ep,this.hierarchyPrint,this),this.scrollModule=e)}return a.prototype.isContentReady=function(){var t=this;return this.isPrintGrid()&&(this.parent.hierarchyPrintMode==="None"||!this.parent.childGrid)?this.contentReady:function(){t.defered.promise.then(function(){t.contentReady()}),t.isPrintGrid()&&t.hierarchyPrint()}},a.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var t=window.printGridObj;t&&!t.element.querySelector("[aria-busy=true")&&t.printModule.defered.resolve()},a.prototype.print=function(){this.renderPrintGrid()},a.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},a.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},a.prototype.renderPrintGrid=function(){var t=this.parent,e=pe("div",{id:this.parent.element.id+"_print",className:t.element.className+" e-print-grid"});e.classList.remove("e-gridhover"),document.body.appendChild(e);for(var i=new vd(Id(t,t.hierarchyPrintMode)),s=0;s<i.columns.length;s++)i.columns[parseInt(s.toString(),10)]=$({},i.columns[parseInt(s.toString(),10)]),!t.getFrozenColumns()&&t.isFrozenGrid()&&(i.columns[parseInt(s.toString(),10)].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=t.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var r=i.getInjectedModules(),n=t.getInjectedModules();(!r||r.length!==n.length)&&i.setInjectedModules(n),t.notify(xm,{element:e,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,this.parent.isVue&&(i.vueInstance=this.parent.vueInstance),i.printGridParent=t,i.appendTo(e),t.isVue3||(i.trigger=t.trigger)},a.prototype.contentReady=function(){var t=this;if(this.isPrintGrid()){var e=this.parent;if(this.isAsyncPrint){this.printGrid();return}var i={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(Vu,i),i.cancel){Z(e.element);return}this.isAsyncPrint||(this.parent.printGridParent&&this.parent.printGridParent.isReact?this.parent.printGridParent.renderTemplates(function(){t.printGrid()}):this.printGrid())}},a.prototype.printGrid=function(){var t=this.parent;if(t.height!=="auto"){var e=this.scrollModule.getCssProperties(),i=t.element.querySelector("."+Nt),s=t.element.querySelector("."+Xt);i.style.height="auto",i.style.overflowY="auto",s.style[e.padding]="",s.firstElementChild.style[e.border]=""}t.allowGrouping&&(t.groupSettings.columns.length?this.removeColGroup(t):t.element.querySelector(".e-groupdroparea").style.display="none");for(var r=0,n=[].slice.call(t.element.getElementsByClassName(Nt));r<n.length;r++){var o=n[r];o.style.overflowX="hidden"}for(var l=[].slice.call(t.element.getElementsByClassName("e-spin-show")),h=0,p=[].slice.call(l);h<p.length;h++){var o=p[h];Se(o,["e-spin-hide"],["e-spin-show"])}this.printGridElement(t),t.isPrinting=!1,delete window.printGridObj;var c={element:t.element};t.trigger(zu,c),t.destroy(),this.parent.log("exporting_complete",this.getModuleName())},a.prototype.printGridElement=function(t){Se(t.element,["e-print-grid-layout"],["e-print-grid"]),t.isPrinting&&Z(t.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),u(this.printWind)||(this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=Wd(t.element,this.printWind))},a.prototype.removeColGroup=function(t){var e=t.groupSettings.columns.length,i=t.element,s="#"+t.element.id;if(e){for(var r=Ke(".e-groupcaption",i),n=t.groupSettings.enableLazyLoading?(parseInt(r[0].getAttribute("colspan"),10)-(t.groupSettings.columns.length-1)).toString():r[e-1].getAttribute("colspan"),o=0;o<r.length;o++)r[parseInt(o.toString(),10)].setAttribute("colspan",n);var l=Ke("colgroup"+s+"colgroup",i),h=Ke(".e-content colgroup",i),p=Ke(".e-summarycontent colgroup",i);this.hideColGroup(l,e),this.hideColGroup(h,e),this.hideColGroup(p,e)}},a.prototype.hideColGroup=function(t,e){for(var i=0;i<t.length;i++)for(var s=0;s<e;s++)t[parseInt(i.toString(),10)].children[parseInt(s.toString(),10)].style.display="none"},a.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},a.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(nt,this.contentReady.bind(this)),this.parent.removeEventListener(Rt,this.actionBeginFunction),this.parent.off(Hi,this.onEmpty.bind(this)),this.parent.off(ep,this.hierarchyPrint))},a.prototype.getModuleName=function(){return"print"},a.printGridProp=Sy().concat([Vu,zu,xl]),a})();function wy(a,t){return a.prototype&&t in a.prototype}function bd(a,t,e){return u(a)||a===""?"":P.getObject(a,t)}function Cd(a,t){requestAnimationFrame(function(){try{t(null,a())}catch(e){t(e)}})}function Qs(a,t){for(var e=[],i=0,s=a.length;i<s;i++){var r=t(a[parseInt(i.toString(),10)],i);u(r)||e.push(r)}return e}function wa(a){for(var t=[],e=0;e<a.length;e++)t.push($({},fn(a[parseInt(e.toString(),10)]),{},!0));return t}function st(a){if(a)try{var t=a[0]!=="<";return typeof a=="function"?qe(a):t&&document.querySelectorAll(a).length?qe(document.querySelector(a).innerHTML.trim()):qe(a)}catch{return qe(a)}}function Fi(a,t){var e={},i=["style","class"];$(e,t,{}),"style"in e&&(At(a,e[i[0]]),delete e[i[0]]),"class"in e&&(x([a],e[i[1]]),delete e[i[1]]),G(a,e)}function dr(a,t,e,i){for(var s=$(a,t,e),r=Object.keys(s),n=0;n<r.length;n++)i&&i.indexOf(r[parseInt(n.toString(),10)])!==-1&&delete s[r[parseInt(n.toString(),10)]];return s}function Ia(a,t){t===void 0&&(t=0);for(var e=0,i=u(a)?0:a.length;e<i;e++)a[parseInt(e.toString(),10)].columns?(a[parseInt(e.toString(),10)].index=u(a[parseInt(e.toString(),10)].index)?t:a[parseInt(e.toString(),10)].index,t++,t=Ia(a[parseInt(e.toString(),10)].columns,t)):(a[parseInt(e.toString(),10)].index=u(a[parseInt(e.toString(),10)].index)?t:a[parseInt(e.toString(),10)].index,t++);return t}function Wa(a,t,e){for(var i=0,s=u(a)?0:a.length;i<s;i++){var r=void 0;typeof a[parseInt(i.toString(),10)]=="string"?r=new Dt({field:a[parseInt(i.toString(),10)]},e):!(a[parseInt(i.toString(),10)]instanceof Dt)||a[parseInt(i.toString(),10)].columns?a[parseInt(i.toString(),10)].columns?(a[parseInt(i.toString(),10)].columns=Wa(a[parseInt(i.toString(),10)].columns,null,e),r=new Dt(a[parseInt(i.toString(),10)],e)):r=new Dt(a[parseInt(i.toString(),10)],e):r=a[parseInt(i.toString(),10)],r.type&&r.type.toLowerCase()==="checkbox"&&(r.allowReordering=!1),r.headerText=u(r.headerText)?r.foreignKeyValue||r.field||"":r.headerText,r.foreignKeyField=r.foreignKeyField||r.field,r.valueAccessor=(typeof r.valueAccessor=="string"?H(r.valueAccessor,window):r.valueAccessor)||bd,r.headerValueAccessor=typeof r.headerValueAccessor=="string"?H(r.headerValueAccessor,window):r.headerValueAccessor,r.width=t&&u(r.width)?200:r.width,u(r.visible)&&(r.visible=!0),a[parseInt(i.toString(),10)]=r}return a}function Sd(a,t,e){var i=a.querySelector("span"),s=a.parentElement.getBoundingClientRect(),r=t.target.getBoundingClientRect();i.className=e,a.style.display="";var n=(u(t.clientY)?t.changedTouches[0].clientY:t.clientY)>a.offsetHeight+10;a.style.top=r.top-s.top+(n?-(a.offsetHeight+10):a.offsetHeight+10)+"px",a.style.left=Iy(a,t,r,s.left)+"px",n?(a.querySelector(".e-downtail").style.display="",a.querySelector(".e-uptail").style.display="none"):(a.querySelector(".e-downtail").style.display="none",a.querySelector(".e-uptail").style.display="")}function Iy(a,t,e,i){var s=a.offsetWidth/2,r=Yl(t).x;return r-e.left<s?e.left-i:e.right-r<s?e.right-i-s*2:r-i-s}function fn(a){return a instanceof Je?H("properties",a):a}function F(a,t,e){for(var i=a;i&&!i.classList.contains(t);)i=i.parentElement;return i}function Ih(a){for(var t=[],e=0,i=a.length;e<i;e++)a[parseInt(e.toString(),10)].hasOwnProperty("properties")?t.push(a[parseInt(e.toString(),10)].properties):t.push(a[parseInt(e.toString(),10)]);return t}function Yl(a){var t={};return t.x=u(a.clientX)?a.changedTouches[0].clientX:a.clientX,t.y=u(a.clientY)?a.changedTouches[0].clientY:a.clientY,t}var xy=0;function xs(a){return a+xy++}function Ht(a,t){for(var e=0,i=t.length;e<i;e++)i===t.length?a.appendChild(t[parseInt(e.toString(),10)]):a.appendChild(t[0]);return a}function Ey(a,t,e,i){if(a==="Custom"){var s=e.customAggregate;return typeof s=="string"&&(s=H(s,window)),s?s.call(i,t,e):""}return e.field in t||t instanceof Array?P.aggregates[a.toLowerCase()](t,e.field):null}var Zo=null;function ai(){if(Zo!==null)return Zo;var a=document.createElement("div"),t=0;return a.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(a),t=a.offsetWidth-a.clientWidth|0,document.body.removeChild(a),Zo=t}var Jn,Zn;function Ay(a,t){if(t&&Zn!==void 0)return Zn;if(Jn!==void 0)return Jn;var e=pe("table",{className:rs,attrs:{role:"grid"}});e.style.visibility="hidden",e.innerHTML='<tr><td class="e-rowcell">A<td></tr>',a.appendChild(e);var i=e.querySelector("td").getBoundingClientRect();return a.removeChild(e),Zn=i.height,Jn=Math.ceil(i.height),t?Zn:Jn}function Mi(a){return a.split(".").length>1}function ds(a){return a===void 0&&(a=""),a.replace(/\./g,"___")}function Ds(a){var t=Me("#"+a.element.id+"EditConfirm",a.element);return a.editSettings.mode==="Batch"&&(Ke(".e-updatedtd",a.element).length||Ke(".e-gridform.e-formvalidator",a.element).length)&&a.editSettings.showConfirmDialog&&(t?t.classList.contains("e-popup-close"):!0)}function si(a,t){var e="e-wrap";a=a instanceof Array?a:[a];for(var i=0;i<a.length;i++)t?a[parseInt(i.toString(),10)].classList.add(e):a[parseInt(i.toString(),10)].classList.remove(e)}function Xl(a,t){var e=a.getService("valueFormatter"),i="format",s;switch((t.type==="date"||t.type==="datetime"||t.type==="dateonly")&&(s={type:t.type==="dateonly"?"date":t.type,skeleton:t.format},typeof t.format=="string"&&t.format!=="yMd"&&(s[""+i]=t.format)),t.type){case"date":t.setFormatter(e.getFormatFunction(s)),t.setParser(e.getParserFunction(s));break;case"dateonly":t.setFormatter(e.getFormatFunction(s)),t.setParser(e.getParserFunction(s));break;case"datetime":t.setFormatter(e.getFormatFunction(s)),t.setParser(e.getParserFunction(s));break;case"number":t.setFormatter(e.getFormatFunction({format:t.format})),t.setParser(e.getParserFunction({format:t.format}));break}}function qs(a,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];for(var s=0,r=a.length;s<r;s++){var n=a[parseInt(s.toString(),10)];t?(Se(n,e.slice(),[]),n.classList.contains("e-detailrowcollapse")||n.classList.contains("e-detailrowexpand")||n.setAttribute("aria-selected","true")):(Se(n,[],e.slice()),n.removeAttribute("aria-selected"))}}function Dy(a){for(var t={},e=[],i=0;i<a.length;i++)a[parseInt(i.toString(),10)]in t||(e.push(a[parseInt(i.toString(),10)].toString()),t[a[parseInt(i.toString(),10)]]=1);return e}function wd(a,t,e){var i=t.element.style.display;t.element.style.display="block";var s=t.width,r=rh(a,t.element);t.element.style.display=i,t.element.style.top=r.top+a.getBoundingClientRect().height-5+"px";var n=r.left-s+a.clientWidth;if(e&&e.enableRtl){var o=e.element?e.element.clientWidth:0,l=a.getBoundingClientRect().right+s-o;l>1?t.element.style.left=n-4+"px":t.element.style.left=s+n-16+"px",parseInt(t.element.style.left,10)<0&&(t.element.style.left="0px")}else if(n<1?t.element.style.left=s+n-16+"px":t.element.style.left=n-4+"px",e&&e.element){var h=e.element.offsetWidth-parseInt(t.element.style.left,10);e.element.offsetWidth>=s&&h<s&&(t.element.style.left=e.element.offsetWidth-s+"px")}}function xh(a,t){a.popup.element.style.zIndex=(t.zIndex+1).toString()}function gn(a,t,e,i,s,r){if(u(e.filterTemplate)){var n="";i==="string"?n="strui-"+t:i==="number"?n="numberui-"+t:i==="boolean"?n="bool-ui-"+t:(i==="date"||i==="datetime")&&(n="dateui-"+t);var o=a==="in"||a==="notin",l=F(s.element.querySelector("#multiselect"+n),"e-control-wrapper"),h=F(s.element.querySelector("#"+n),"e-popup-flmenu");l&&(l.style.display=o?"inline-flex":"none"),h&&(h.style.display=o?"none":"inline-flex")}}function Xr(a){var t=a.querySelector(".e-frame"),e=t.previousSibling;t.classList.contains("e-check")?(e.checked=!1,Se(t,["e-uncheck"],["e-check"])):(e.checked=!0,Se(t,["e-check"],["e-uncheck"]))}function $s(a,t){a.checked=t}function el(a,t,e){var i=pe("div",{className:e});return i.appendChild(t),i.setAttribute("data-uid",a),i}function xa(a,t){R([a],["e-check","e-stop","e-uncheck"]),t?a.classList.add("e-check"):a.classList.add("e-uncheck")}function ky(a,t,e){for(var i=0;i<(u(t)?0:t.length);i++)We(t[parseInt(i.toString(),10)].field,Js(t[parseInt(i.toString(),10)],e),a.foreignKeyData);for(var s=a.cells,i=0;i<s.length;i++)s[parseInt(i.toString(),10)].isForeignKey&&We("foreignKeyData",H(s[parseInt(i.toString(),10)].column.field,a.foreignKeyData),s[parseInt(i.toString(),10)])}function Js(a,t,e,i){var s=a.foreignKeyField,r=u(e)?bd(a.field,t):e;r=u(r)?"":r;var n=new se,o=i||(a.dataSource instanceof N&&a.dataSource.dataSource.json.length?a.dataSource.dataSource.json:a.columnData);return r.getDay?n.where(Ks({field:s,operator:"equal",value:r,matchCase:!1})):n.where(s,"==",r,!1),new N(o).executeLocal(n)}function mn(a,t){var e;return t.some(function(i){return e=i,i.foreignKeyValue===a})&&e}function ja(a){return a<10?"0"+a:String(a)}function Ks(a,t,e){var i,s,r,n=$({},fn(a)),o=$({},fn(a));if(u(a.value)||a.value==="")return i=new we(n.field,n.operator,n.value,!1),i;var l=new Date(a.value);if(t==="dateonly"&&!e){typeof n.value=="string"&&(n.value=new Date(n.value));var h=n.value.getFullYear()+"-"+ja(n.value.getMonth()+1)+"-"+ja(n.value.getDate()),p=new we(n.field,n.operator,h,!1);i=p}else if(a.operator=a.operator.toLowerCase(),a.operator==="equal"||a.operator==="notequal"){t==="datetime"?(s=new Date(l.setSeconds(l.getSeconds()-1)),r=new Date(l.setSeconds(l.getSeconds()+2)),a.value=new Date(l.setSeconds(r.getSeconds()-1))):(s=new Date(l.setHours(0)-1),r=new Date(l.setHours(24))),n.value=s,o.value=r,a.operator==="equal"?(n.operator="greaterthan",o.operator="lessthan"):a.operator==="notequal"&&(n.operator="lessthanorequal",o.operator="greaterthanorequal");var c=new we(n.field,n.operator,n.value,!1),d=new we(o.field,o.operator,o.value,!1);i=a.operator==="equal"?c.and(d):c.or(d)}else{t==="date"&&(a.operator==="lessthanorequal"||a.operator==="greaterthan")&&(n.value=new Date(l.setHours(24)-1)),typeof n.value=="string"&&(n.value=new Date(n.value));var p=new we(n.field,n.operator,n.value,!1);i=p}return a.setProperties?a.setProperties({ejpredicate:i},!0):a.ejpredicate=i,i}function Pi(a){return a.enableVirtualization&&a.groupSettings.columns.length>0&&a.isVirtualAdaptive&&!a.groupSettings.enableLazyLoading}function ns(a,t){if(a===void 0&&(a=""),a){for(var e=t,i=a.split("."),s=0;s<i.length&&!u(e);s++)if(e=e[i[parseInt(s.toString(),10)]],Pt(e)){var r=i[parseInt(s.toString(),10)].charAt(0).toUpperCase()+i[parseInt(s.toString(),10)].slice(1);e=t[""+r]||t[(""+r).charAt(0).toLowerCase()+(""+r).slice(1)]}return e}}function Ql(a,t){var e=new ft,i,s="format",r="type";return t==="date"?i=typeof a=="object"?e.getDatePattern({type:a[""+r]?a[""+r]:"date",format:a[""+s]},!1):e.getDatePattern({type:"dateTime",skeleton:a},!1):i=typeof a=="object"?e.getDatePattern({type:a[""+r]?a[""+r]:"dateTime",format:a[""+s]},!1):e.getDatePattern({type:"dateTime",skeleton:a},!1),i}function Ty(a,t){for(var e=a.getRowsObject(),i={},s=0,r=e;s<r.length;s++){var n=r[s];if(n.isExpand&&!n.isDetailRow){var o=a.allowPaging&&a.printMode==="AllPages"?n.index+a.pageSettings.currentPage*a.pageSettings.pageSize-a.pageSettings.pageSize:n.index;u(o)||(i[parseInt(o.toString(),10)]={},i[parseInt(o.toString(),10)].isExpand=!0,a.childGrid&&(i[parseInt(o.toString(),10)].gridModel=Id(n.childGrid,t),i[parseInt(o.toString(),10)].gridModel.query=a.childGrid.query))}}return i}function Id(a,t){t===void 0&&(t="Expanded");var e={};if(!a)return e;for(var i=0,s=yd.printGridProp;i<s.length;i++){var r=s[i];r==="columns"?e[""+r]=Ih(a[""+r]):r==="allowPaging"?e[""+r]=a.printMode==="CurrentPage":e[""+r]=fn(a[""+r])}return e.enableHover=!1,(a.childGrid||a.detailTemplate)&&t!=="None"&&(e.expandedRows=Ty(a,t)),e}function Eh(a,t,e,i){for(var s=a||{},r=arguments.length,n=1;n<r;n++)if(arguments[parseInt(n.toString(),10)])for(var o=arguments[parseInt(n.toString(),10)],l=Object.keys(Object.getPrototypeOf(o)).length?Object.keys(o).concat(Ly(o)):Object.keys(o),h=0;h<l.length;h++){s[l[parseInt(h.toString(),10)]];var p=o[l[parseInt(h.toString(),10)]];s[l[parseInt(h.toString(),10)]]=p}return s}function Ly(a){for(var t=[];Object.getPrototypeOf(a)&&Object.keys(Object.getPrototypeOf(a)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(a))),a=Object.getPrototypeOf(a);return t}function Ry(a){for(var t=0,e=0;e<(u(a)?0:a.length);e++){var i=xd(a[parseInt(e.toString(),10)],0);t<i&&(t=i)}return t+1}function xd(a,t){var e=t,i=[];if(a.columns){t++;for(var s=0;s<a.columns.length;s++)i[parseInt(s.toString(),10)]=xd(a.columns[parseInt(s.toString(),10)],t);for(var r=0;r<i.length;r++)e<i[parseInt(r.toString(),10)]&&(e=i[parseInt(r.toString(),10)]);t=e}return t}function My(a,t){for(var e=0;e<t.length;e++)t[parseInt(e.toString(),10)].uid=t[parseInt(e.toString(),10)].isForeignKey?mn(t[parseInt(e.toString(),10)].field,a.getForeignKeyColumns()).uid:a.enableColumnVirtualization?jy(a,t[parseInt(e.toString(),10)].field).uid:a.getColumnByField(t[parseInt(e.toString(),10)].field).uid}var Di;(function(a){a.timer=null})(Di||(Di={}));function $l(a){var t=document.defaultView.getComputedStyle(a,null),e=t.getPropertyValue("transform"),i=e.replace(/,/g,""),s=parseFloat(i.split(" ")[4]),r=parseFloat(i.split(" ")[5]);return{width:s,height:r}}function up(a,t){a.classList.contains("e-bigger")&&t.classList.add("e-bigger")}function Ah(a){var t=a.getContent().firstElementChild;return t.scrollWidth>t.offsetWidth?ai():0}function Ed(a,t){var e=0,i=a.getColumns(),s=t*30;a.isRowDragable()&&(e++,s+=30),e+=a.groupSettings.columns.length-t,s+=30*(a.groupSettings.columns.length-t);for(var r=(a.width==="auto"?a.element.offsetWidth:a.width.toString().indexOf("%")!==-1?a.element.getBoundingClientRect().width:parseInt(a.width.toString(),10))-Ah(a),n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].visible&&(s+=Ea(i[parseInt(n.toString(),10)],a),e++),s>r){e--;break}return e}function Fy(a,t){for(var e=0,i=0,s=t.getVisibleFrozenLeftCount(),r=0;r<a.childNodes.length;r++){var n=a.childNodes[parseInt(r.toString(),10)];if(s===i)break;if((n.classList.contains("e-groupcaption")||n.classList.contains("e-summarycell"))&&(i+=parseInt(n.getAttribute("colspan"),10)),n.classList.add("e-leftfreeze"),n.classList.contains("e-groupcaption")&&parseInt(n.getAttribute("colspan"),10)===1&&n.classList.add("e-freezeleftborder"),Bt(n,e,t.enableRtl,"Left"),(n.classList.contains("e-indentcell")||n.classList.contains("e-recordplusexpand")||n.classList.contains("e-recordpluscollapse"))&&(e+=30),n.classList.contains("e-groupcaption")){var o=parseInt(n.getAttribute("colspan"),10);t.isRowDragable()&&(o--,e+=30),o=o-(t.groupSettings.columns.length-r),e=e+30*(t.groupSettings.columns.length-r);for(var l=t.getColumns(),h=0;h<l.length;h++){if(parseInt(n.getAttribute("colspan"),10)>1&&Ea(l[parseInt(h.toString(),10)],t)+e>parseInt(t.width.toString(),10)-Ah(t)){var p=Ed(t,r);n.setAttribute("colspan",p.toString());break}if(l[parseInt(h.toString(),10)].visible&&(e+=Ea(l[parseInt(h.toString(),10)],t),o--),o===0)break}}if(n.classList.contains("e-summarycell")){var c=n.getAttribute("data-mappinguid"),d=t.getColumnByUid(c);e+=Ea(d,t)}}}function Ea(a,t){if(!u(a.width)&&a.width!=="auto"&&a.width.toString().indexOf("%")===-1)return parseInt(a.width.toString(),10);var e=t.getColumnHeaderByField(a.field);return u(e)?0:e.getBoundingClientRect().width}function Ja(a,t){var e=Oy(t),i=new Ut;return e.dataSource=i.resolve,e.action=a,{state:e,deffered:i}}function Oy(a){var t=new vi,e=new N({url:"",adaptor:new vi}),i=t.processQuery(e,a),s=JSON.parse(i.data);return s}function Jl(a){for(var t=a.getVisibleColumns(),e=0,i=0,s=0;s<t.length;s++)Pt(t[parseInt(s.toString(),10)].width)?i++:t[parseInt(s.toString(),10)].width.toString().indexOf("%")!==-1&&e++;return(a.width==="auto"||typeof a.width=="string"&&a.width.indexOf("%")!==-1)&&!a.groupSettings.showGroupedColumn&&a.groupSettings.columns.length&&e&&!i}function By(a,t,e,i,s){for(var r=0,n=0;n<t.length;n++)if(t[parseInt(n.toString(),10)]&&t[parseInt(n.toString(),10)].isDataRow){t[parseInt(n.toString(),10)].index=r,t[parseInt(n.toString(),10)].isAltRow=a.enableAltRow?r%2!==0:!1,e[parseInt(n.toString(),10)].setAttribute(it,(r+1).toString()),t[parseInt(n.toString(),10)].isAltRow?e[parseInt(n.toString(),10)].classList.add("e-altrow"):e[parseInt(n.toString(),10)].classList.remove("e-altrow");for(var o=0;o<e[parseInt(n.toString(),10)].cells.length;o++)e[parseInt(n.toString(),10)].cells[parseInt(o.toString(),10)].setAttribute("data-index",r.toString());r++}t.length||a.renderModule.emptyRow(!0)}function Py(a,t,e,i){var s=a.dataToBeUpdated[""+e].concat(t[""+e]).reduce(function(r,n){return r[n[""+i]]=r[n[""+i]]===void 0?n:Object.assign(r[n[""+i]],n),r},{});a.dataToBeUpdated[""+e]=Object.keys(s).map(function(r){return s[""+r]})}function Ny(a){if(a.enableInfiniteScrolling&&(a.childGrid||a.detailTemplate)){a.contentModule.rowElements=[].slice.call(a.getContentTable().rows).filter(function(t){return(t.classList.contains("e-row")||t.classList.contains("e-detailrow"))&&!t.classList.contains("e-addedrow")});return}a.contentModule.rowElements=[].slice.call(a.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"))}function Dh(a,t){var e=a.createElement("div",{className:"e-grid-popup",id:a.element.id+"_e-popup"}),i=Tt(a.element,"left","Top");document.getElementById(a.element.id+"_e-popup")&&(e=document.getElementById(a.element.id+"_e-popup")),e.style.top=i.top+"px",e.style.left=i.left+"px",e.style.zIndex=t.zIndex.toString(),e.style.width=t.element.offsetWidth+"px",e.appendChild(t.element);var s=document.querySelector(".sb-demo-section,.e-grid-dialog-fixed");if(s){var r=rh(a.element,s);e.style.top=r.top+"px",e.style.left=r.left+"px",s.insertBefore(e,s.firstChild)}else document.body.insertBefore(e,document.body.firstChild)}function pp(a,t){var e=[];return e.push(a.uid),Ad(a,e),e.indexOf(t)>-1}function Ad(a,t){for(var e=0;e<a.columns.length;e++)a.columns[parseInt(e.toString(),10)].uid&&t.push(a.columns[parseInt(e.toString(),10)].uid),a.columns[parseInt(e.toString(),10)].columns&&a.columns[parseInt(e.toString(),10)].columns.length&&Ad(a.columns[parseInt(e.toString(),10)],t)}function Aa(a){return a.columns[0].freeze||a.columns[0].isFrozen?a.columns[0].freeze==="Left"||a.columns[0].isFrozen?"Left":a.columns[0].freeze==="Right"?"Right":a.columns[0].freeze==="Fixed"?"Fixed":"None":a.columns[0].columns&&a.columns[0].columns.length?Aa(a.columns[0]):"None"}function Ua(a){if(a.querySelector(".e-fixedfreeze"))for(var t=[].slice.call(a.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),e=0;e<t.length;e++)t[parseInt(e.toString(),10)].classList.contains("e-fixedfreeze")&&(!t[e-1]||t[e-1]&&!t[e-1].classList.contains("e-fixedfreeze"))&&t[parseInt(e.toString(),10)].classList.add("e-freezeleftborder"),t[parseInt(e.toString(),10)].classList.contains("e-fixedfreeze")&&(!t[e+1]||t[e+1]&&!t[e+1].classList.contains("e-fixedfreeze"))&&t[parseInt(e.toString(),10)].classList.add("e-freezerightborder")}function Bt(a,t,e,i){i==="Left"&&(e?a.style.right=t+"px":a.style.left=t+"px"),i==="Right"&&(e?a.style.left=t+"px":a.style.right=t+"px")}function Hy(a,t,e,i){var s=a.getColumns(),r=t.index;if(t.freeze==="Left"&&t.border!=="Left"){for(var n=r+(i-1);s[parseInt(n.toString(),10)].visible===!1;)n++;s[parseInt(n.toString(),10)].border==="Left"&&e.classList.add("e-freezeleftborder")}else if(t.freeze==="Right"||t.freeze==="Fixed"){for(var o=0,l=r+1;l<r+i&&l!==s.length;l++)s[parseInt(l.toString(),10)].visible?o+=parseInt(s[parseInt(l.toString(),10)].width.toString(),10):i++;a.enableRtl?e.style.left=parseInt(e.style.left,10)-o+"px":e.style.right=parseInt(e.style.right,10)-o+"px"}}function cp(a,t,e){for(var i=a.getRowByIndex(t),s=0;s<i.cells.length;s++)if(parseInt(i.cells[parseInt(s.toString(),10)].getAttribute("aria-colindex").toString(),10)-1===e)return i.cells[parseInt(s.toString(),10)];return null}function kh(a,t,e){if(t.freeze==="Left"||t.isFrozen)if(e.classList.add("e-leftfreeze"),t.border==="Left"&&e.classList.add("e-freezeleftborder"),t.index===0)Bt(e,a.getIndentCount()*30,a.enableRtl,"Left"),a.enableColumnVirtualization&&(t.valueX=a.getIndentCount()*30);else{for(var i=a.getColumns(),s=a.getIndentCount()*30,r=0;r<i.length&&t.uid!==i[parseInt(r.toString(),10)].uid;r++)i[parseInt(r.toString(),10)].visible&&(s+=parseFloat(i[parseInt(r.toString(),10)].width.toString()));Bt(e,s,a.enableRtl,"Left"),a.enableColumnVirtualization&&(t.valueX=s)}else if(t.freeze==="Right"){e.classList.add("e-rightfreeze");var i=a.getColumns();if(t.border==="Right"&&e.classList.add("e-freezerightborder"),t.index===i[i.length-1].index){var s=a.getFrozenMode()==="Right"&&a.isRowDragable()?30:0;Bt(e,s,a.enableRtl,"Right"),a.enableColumnVirtualization&&(t.valueX=s)}else{for(var s=a.getFrozenMode()==="Right"&&a.isRowDragable()?30:0,r=i.length-1;r>=0&&t.uid!==i[parseInt(r.toString(),10)].uid;r--)i[parseInt(r.toString(),10)].visible&&(s+=parseFloat(i[parseInt(r.toString(),10)].width.toString()));Bt(e,s,a.enableRtl,"Right"),a.enableColumnVirtualization&&(t.valueX=s)}}else if(t.freeze==="Fixed"){e.classList.add("e-fixedfreeze");var i=a.getColumns(),s=0;a.getVisibleFrozenLeftCount()?s=a.getIndentCount()*30:a.getFrozenMode()==="Right"&&(s=a.groupSettings.columns.length*30);for(var r=0;r<i.length&&t.uid!==i[parseInt(r.toString(),10)].uid;r++)(i[parseInt(r.toString(),10)].freeze==="Left"||i[parseInt(r.toString(),10)].isFrozen||i[parseInt(r.toString(),10)].freeze==="Fixed")&&i[parseInt(r.toString(),10)].visible&&(s+=parseFloat(i[parseInt(r.toString(),10)].width.toString()));Bt(e,s-1,a.enableRtl,"Left"),s=a.getFrozenMode()==="Right"&&a.isRowDragable()?30:0;for(var r=i.length-1;r>=0&&t.uid!==i[parseInt(r.toString(),10)].uid;r--)(i[parseInt(r.toString(),10)].freeze==="Right"||i[parseInt(r.toString(),10)].freeze==="Fixed")&&i[parseInt(r.toString(),10)].visible&&(s+=parseFloat(i[parseInt(r.toString(),10)].width.toString()));Bt(e,s-1,a.enableRtl,"Right")}else e.classList.add("e-unfreeze")}function Dd(a,t,e){return[].slice.call(a.getDataRows()[parseInt(e.toString(),10)].getElementsByClassName(He))}function Vy(a,t,e,i){return Dd(a,t,e)[parseInt(i.toString(),10)]}function zy(a,t,e,i){var s,r=new ft;if(t==="number")try{s=r.getNumberPattern({format:a,currency:i,useGrouping:!0},!0)}catch{s=a}else if(t==="date"||t==="time"||t==="datetime")try{if(s=r.getDatePattern({skeleton:a,type:t},e),u(s))throw"error"}catch{try{s=r.getDatePattern({format:a,type:t},e)}catch{s=a}}else s=a;if(t!=="number"){var n=/G|H|c|'| a|yy|y|EEEE|E/g,o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};s=s.replace(n,function(l){return o[""+l]})}return s}function qy(a){if(a.enableAdaptiveUI)for(var t=document.getElementsByClassName("e-responsive-dialog"),e=0;e<t.length;e++)t[parseInt(e.toString(),10)].classList.add("e-bigger")}function Zl(a,t){for(var e,i=a.split(".").length,s=a.split("."),r=t,n=0;n<i;n++)e=r[s[parseInt(n.toString(),10)]],r=e;return e}function Wy(a,t,e,i,s,r){for(var n=Object.keys(a),o=t,l=0;l<n.length;l++){var h=a[n[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)];if(s&&!s.isFrozenGrid()&&!s.isRowDragable()){if(h=!u(h)&&(parseInt(h.getAttribute("aria-colindex"),10)-1===t||F(h,"e-addedrow")&&h.parentElement.childNodes[parseInt(t.toString(),10)]===h)?h:a[parseInt(l.toString(),10)].querySelector('td[aria-colindex="'+(t+1)+'"]'),u(h))continue;t=s.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}if(a[n[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h){if(At(a[n[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)],{display:e}),a[n[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)].classList.contains("e-hide")&&R([a[n[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)]],["e-hide"]),r&&s.isRowDragable()||s&&s.isDetail()){var p=t+1;i[n[parseInt(l.toString(),10)]].cells[parseInt(p.toString(),10)].visible=e===""}else u(i[n[parseInt(l.toString(),10)]])||(i[n[parseInt(l.toString(),10)]].cells[parseInt(t.toString(),10)].visible=e==="",i[n[parseInt(l.toString(),10)]].cells[parseInt(t.toString(),10)].visible===!1&&a[n[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)].classList.add("e-hide"));t=o}}}function yi(a,t,e,i){for(var s=0,r=t;s<r.length;s++){var n=r[s];e?a.on(n.event,n.handler,i):a.off(n.event,n.handler)}}function jy(a,t){var e;a.columnModel||a.getColumns();for(var i=0,s=a.columnModel;i<s.length;i++){var r=s[i];if(r.field===t){e=r;break}}return e}function dp(a,t,e,i){i.eventHandlers[""+a]={};for(var s=0;s<t.length;s++)i.eventHandlers[""+a][t[parseInt(s.toString(),10)]]=e[t[parseInt(s.toString(),10)]]}function fp(a,t,e){for(var i=0;i<t.length&&!a.isDestroyed;i++)a.removeEventListener(t[parseInt(i.toString(),10)],e.eventHandlers[a.element.id][t[parseInt(i.toString(),10)]])}function Zs(a,t,e){a.destroyTemplate(t,void 0,e),a.isReact&&a.renderTemplates()}function ea(a){for(var t=0;t<a.length;t++)ce(a[t])}function gp(a,t){for(var e=0;e<a.length;e++)t.insertBefore(a[e],t.children[e])}function ta(a,t){var e=pe("div",{className:"e-ftrchk"});e.style.visibility="hidden",e.innerHTML='<div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"></span><span class="e-label e-checkboxfiltertext">A</div></span>',a.appendChild(e);var i=e.getBoundingClientRect();a.removeChild(e);var s=Math.round(i.height);return s}function Ei(a,t,e){var i=a,s=t,r=!1;if(e)for(var n=s[0];n<i.length;n++)for(var o=i[parseInt(n.toString(),10)],l=0;l<o.length;l++){if(r&&i[parseInt(n.toString(),10)][parseInt(l.toString(),10)]===1)return s=[n,l],s;!r&&s.toString()===[n,l].toString()&&(r=!0)}else for(var n=s[0];n>=0;n--)for(var o=i[parseInt(n.toString(),10)],l=o.length-1;l>=0;l--){if(r&&i[parseInt(n.toString(),10)][parseInt(l.toString(),10)]===1)return s=[n,l],s;!r&&s.toString()===[n,l].toString()&&(r=!0)}return s}var Rr=(function(){function a(t){this.searchInputArgs=null,this.isExecuteLocal=!1,this.queryFilteredColumn=[],this.existingPredicate={},this.foreignKeyQuery=new se,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.infiniteRenderMod=!1,this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1,this.infinitePermenantLocalData=[],this.infiniteQueryExecutionPending=!1,this.infiniteSkipCnt=0,this.infiniteScrollAppendDiff=0,this.prevInfiniteScrollDirection="",this.infiniteLoadedElem=[],this.infiniteDataCount=0,this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteManualSelectMaintainPred=[],this.parent=t,this.id=this.parent.element.id,this.valueFormatter=new xn(this.parent.locale),this.cBoxTrue=wr(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=wr(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&x([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?x([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):x([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}return a.prototype.destroy=function(){this.closeDialog()},a.prototype.wireEvents=function(){v.add(this.dlg,"click",this.clickHandler,this),v.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=jd(this.searchBoxKeyUp,200);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&(v.add(t,"keyup",this.searchHandler,this),v.add(t,"input",this.searchHandler,this))},a.prototype.unWireEvents=function(){v.remove(this.dlg,"click",this.clickHandler),v.remove(this.dlg,"keyup",this.keyupHandler);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&(v.remove(t,"keyup",this.searchHandler),v.remove(t,"input",this.searchHandler))},a.prototype.foreignKeyFilter=function(t,e,i){var s=this,r={},n=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(i)).then(function(l){s.options.column.columnData=l.result,s.parent.notify(ba,{predicate:r,column:s.options.column}),t.ejpredicate=r.predicate.predicates;for(var h=r.predicate.predicates,p=0;p<h.length;p++)n.push({field:h[parseInt(p.toString(),10)].field,predicate:"or",matchCase:h[parseInt(p.toString(),10)].ignoreCase,ignoreAccent:h[parseInt(p.toString(),10)].ignoreAccent,operator:h[parseInt(p.toString(),10)].operator,value:h[parseInt(p.toString(),10)].value,type:s.options.type});t.filterCollection=n.length?n:e.filter(function(c){return c.field=s.options.field}),s.options.handler(t)})},a.prototype.searchBoxClick=function(t){var e=t.target;e.classList.contains("e-searchclear")&&(this.sInput.value=e.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},a.prototype.searchBoxKeyUp=function(t){u(this.sInput)||(u(t)||t.key!=="ArrowUp"&&t.key!=="ArrowDown"&&t.key!=="Tab"&&!(t.key==="Tab"&&t.shiftKey))&&(!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon())},a.prototype.updateSearchIcon=function(){this.sInput.value.length?(Se(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),u(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(Se(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),u(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},a.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},a.prototype.updateDataSource=function(){var t=this.options.dataSource,e="object";if(!(t instanceof N)){for(var i=0;i<t.length;i++)if(typeof t!==e){var s={};s[this.options.field]=t[parseInt(i.toString(),10)],t[parseInt(i.toString(),10)]=s}}},a.prototype.updateModel=function(t){this.options=t,this.existingPredicate=t.actualPredicate||{},this.options.dataSource=t.dataSource,this.options.dataManager=t.dataManager?t.dataManager:t.dataSource,this.updateDataSource(),this.options.type=t.type,this.options.format=t.format||"",this.options.ignoreAccent=t.ignoreAccent||!1,this.options.filteredColumns=t.filteredColumns||this.parent.filterSettings.columns,this.options.query=t.query||new se,this.options.allowCaseSensitive=t.allowCaseSensitive||!1,this.options.uid=t.column.uid,this.options.disableHtmlEncode=t.column.disableHtmlEncode||!1,this.values={},this.localeObj=t.localeObj,this.isFiltered=t.filteredColumns.length,this.infiniteRenderMod=!!(this.parent.filterSettings&&this.parent.filterSettings.enableInfiniteScrolling),this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},a.prototype.getAndSetChkElem=function(t){return this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{"data-uid":this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),t.hideSearchbox||(this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox),this.searchInputArgs={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}},W.createInput(this.searchInputArgs,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)),this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},a.prototype.showDialog=function(t){var e={requestType:$c,columnName:this.options.field,columnType:this.options.type,cancel:!1},i="filterModel";if(e[""+i]=this,this.parent.notify(Nl,e),e.cancel){t.cancel=e.cancel;return}this.dialogObj=new bn({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!u(F(t.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""});var s="isStringTemplate";this.dialogObj[""+s]=!0,this.renderResponsiveFilter(t);var r=this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA");if(this.dlg.setAttribute("aria-label",r),t.isResponsiveFilter){var n=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");n.appendChild(this.dlg)}else this.parent.element.appendChild(this.dlg);this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=t.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.parent&&this.parent.filterSettings&&(this.parent.filterSettings.type==="CheckBox"||this.options.column&&this.options.column.filter&&this.options.column.filter.type==="CheckBox")&&this.parent.getContent().firstElementChild.offsetHeight<this.dialogObj.element.offsetHeight&&!F(this.parent.element,"e-gantt-dialog")&&Dh(this.parent,this.dialogObj);var o=this.dialogObj.element.querySelector(".e-dlg-content");if(o.appendChild(this.sBox),this.wireEvents(),!this.parent.enableAdaptiveUI)!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&!this.infiniteRenderMod&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.showMask();else{if(this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"){this.getAllData();return}this.infiniteRenderMod&&(this.cBox.style.marginTop=ta(this.cBox)+"px")}this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"||(xr({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),Is(this.spinner)),this.getAllData()},a.prototype.renderResponsiveFilter=function(t){t.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},a.prototype.dialogCreated=function(t){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":E.isDevice?this.dialogObj.position={X:"center",Y:"center"}:wd(this.options.target,this.dialogObj,this.parent),this.options.column.showColumnMenu&&this.parent.notify(Ch,t)},a.prototype.openDialog=function(t){this.updateModel(t),this.getAndSetChkElem(t),this.showDialog(t)},a.prototype.closeDialog=function(){if(this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var t=this.options.columns.filter(function(s){return s.getFilterItemTemplate()}),e=this.parent.registeredTemplate;if(t.length&&!u(e)&&e.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&Zs(this.parent,["filterItemTemplate"]),this.parent.notify(Qt,{field:this.options.field}),this.unWireEvents(),this.searchInputArgs&&this.searchInputArgs.element&&this.searchInputArgs.element.parentElement&&(W.destroy(this.searchInputArgs),ce(this.searchInputArgs.element)),this.searchInputArgs=null,this.sInput=null,this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string"&&(this.options.column.filter.type==="CheckBox"||this.options.column.filter.type==="Excel")&&(this.dialogObj.element.querySelector(".e-dlg-content").innerHTML=""),this.dialogObj.destroy(),this.dialogObj.dlgClosedBy==="escape"&&(this.parent.isColumnMenuFilterClosing=!0),this.dlg&&this.dlg.parentElement){ce(this.dlg);var i=document.getElementById(this.parent.element.id+"_e-popup");u(i)||(ce(i),i=null)}this.dlg=null,this.parent.notify(Qa,{})}},a.prototype.clearFilter=function(t){var e={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(cn,e),!e.cancel&&this.options.handler({action:"clear-filter",field:t?t.field:this.options.field})},a.prototype.btnClick=function(t){if(this.filterState){if(t.target.tagName.toLowerCase()==="input"&&t.target.classList.contains("e-searchinput")||t.keyCode===13)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var e=t.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===e?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===e&&this.clearFilter()}this.closeDialog()}else t.target&&t.target.firstChild&&t.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():t.target.tagName.toLowerCase()!=="input"&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify(Wl,{}),u(this.parent.focusModule)||this.parent.focusModule.filterfocus()},a.prototype.fltrBtnHandler=function(){var t=this;this.infiniteRenderMod&&(this.cBox.innerHTML="",Ht(this.cBox,this.infiniteLoadedElem.slice()));var e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")),i=e,s="equal",r=this.dialogObj.element.querySelector(".e-dropdownlist");r&&(this.options.operator=s=r.ej2_instances[0].value),this.isMenuNotEqual=this.options.operator==="notequal";var n;this.options.hideSearchbox||(n=this.searchBox.querySelector(".e-searchinput"));var o=this.options.allowCaseSensitive,l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:s,type:this.options.type,matchCase:o,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;h&&n&&n.value===""&&(s=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=s);var p,c,d=[];if(e.length!==this.itemsCnt||n&&n.value&&n.value!==""||this.infiniteRenderMod){if(this.infiniteRenderMod)this.infiniteRenderMod&&(!this.infiniteSearchPred||this.infiniteSearchPred&&!this.infiniteSearchPred.isComplex)?this.infiniteFltrBtnHandler(d):this.infiniteSearchPred.isComplex&&(d=this.complexQueryPredicate(e,l,h));else{if(d=this.complexQueryPredicate(e,l,h),u(d))return;d=this.filterPreventColumns?this.filterPreventColumns:d}(this.options.type==="date"||this.options.type==="dateonly"||this.options.type==="datetime")&&i.length&&(c=i.length-1,p=this.values[F(i[parseInt(c.toString(),10)],"e-ftrchk").getAttribute("data-uid")],u(p)&&h&&d.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"or",value:null}));var f=this.infiniteRenderMod?this.sBox.querySelector(".e-add-current"):this.cBox.querySelector(".e-add-current");if(f&&f.classList.contains("e-check")){var g=this.existingPredicate[this.options.field];if(g)for(var y=function(S){d.some(function(I){return I.value===g[parseInt(S.toString(),10)].value})||d.push(g[parseInt(S.toString(),10)])},b=0;b<g.length;b++)y(b);else return}if(!this.infiniteRenderMod)this.initiateFilter(d);else if(d.length)this.initiateFilter(d);else if(this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!d.length){var C=this.options.filteredColumns.some(function(S){return t.options.field===S.field});C&&this.clearFilter()}}else{var C=this.options.filteredColumns.some(function(I){return t.options.field===I.field});C&&this.clearFilter()}},a.prototype.complexQueryPredicate=function(t,e,i){for(var s,r,n=[],o=0;o<t.length;o++)s=this.values[F(t[parseInt(o.toString(),10)],"e-ftrchk").getAttribute("data-uid")],r=$({},{value:s},e),s&&!s.toString().length&&(r.operator=i?"notequal":"equal"),s===""||u(s)?n=n.concat(a.generateNullValuePredicates(e)):n.push(r);var l=this.filterPreventColumns&&this.filterPreventColumns.length?this.filterPreventColumns[0]:r;return l&&!this.notifyFilterPrevEvent(l)?(this.filterPreventColumns=n,null):n},a.prototype.infiniteFltrBtnHandler=function(t){var e;if(this.infiniteManualSelectMaintainPred.length)for(var i=0;i<this.infiniteManualSelectMaintainPred.length;i++){var s=this.infiniteManualSelectMaintainPred[i];if(e=s.value+"",e===""||u(e)){var r={predicate:s.predicate,field:s.field,type:s.type,uid:s.uid,operator:s.operator,matchCase:s.matchCase,ignoreAccent:s.ignoreAccent};t.push.apply(t,a.generateNullValuePredicates(r))}else t.push(this.infiniteManualSelectMaintainPred[i]);this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i])}if(!this.localInfiniteSelectAllClicked&&this.sInput.value===""&&!(!this.options.parentCurrentViewDataCount&&t.length))for(var i=0;i<this.infiniteUnloadParentExistPred.length;i++)t.unshift(this.infiniteUnloadParentExistPred[i]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);this.sInput.value!==""&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll)&&(this.infiniteSearchPred.predicate="or",t.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},a.prototype.notifyFilterPrevEvent=function(t){var e={instance:this,handler:this.fltrBtnHandler,arg1:t.field,arg2:t.predicate,arg3:t.operator,arg4:t.matchCase,arg5:t.ignoreAccent,arg6:t.value,cancel:!1};return this.parent.notify(cn,e),!e.cancel},a.generateNullValuePredicates=function(t){var e=[];return t.type==="string"&&e.push({field:t.field,ignoreAccent:t.ignoreAccent,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:""}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:null}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:void 0}),e},a.prototype.initiateFilter=function(t){var e=t[0],i;if(!u(e)){i=e.ejpredicate?e.ejpredicate:new we(e.field,e.operator,e.value,!e.matchCase,e.ignoreAccent);for(var s=1;s<t.length;s++)i=t[parseInt(s.toString(),10)].ejpredicate!==void 0?i[t[parseInt(s.toString(),10)].predicate](t[parseInt(s.toString(),10)].ejpredicate):i[t[parseInt(s.toString(),10)].predicate](t[parseInt(s.toString(),10)].field,t[parseInt(s.toString(),10)].operator,t[parseInt(s.toString(),10)].value,!t[parseInt(s.toString(),10)].matchCase,t[parseInt(s.toString(),10)].ignoreAccent);var r={action:"filtering",filterCollection:t,field:this.options.field,ejpredicate:we.or(i)};this.options.handler(r)}},a.prototype.isForeignColumn=function(t){return t.isForeignColumn?t.isForeignColumn():!1},a.prototype.refreshCheckboxes=function(){var t=this,e=this.sInput.value,i=this.options.column,s=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),r=this.options.query.clone(),n=s.queries.filter(function(I){return I&&I.fn==="onWhere"})[0];s.queries=[],r.queries=[];var o=this.options.type!=="string"&&parseFloat(e)?parseFloat(e):e,l=this.options.isRemote?this.options.type==="string"?"contains":"equal":this.options.type?"contains":"equal",h=!0,p=this.options.ignoreAccent,c=this.isForeignColumn(i)?i.foreignKeyValue:i.field;o=o===""||o===void 0?void 0:o;var d=[],f={field:c,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:p},g,y=this.options.dataManager.adaptor.getModuleName;if(this.options.type==="boolean"&&(o!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())!==-1?o="true":o!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())!==-1&&(o="false"),o!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())!==-1&&y?o=(y(),!0):o!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())!==-1&&y&&(o=(y(),!1)),l="equal"),(this.options.type==="date"||this.options.type==="datetime"||this.options.type==="dateonly")&&this.options.format){var b=new ft,C=typeof this.options.format=="string"?this.options.format:this.options.format.format;C?o=b.parseDate(e,{format:C})||new Date(e):o=new Date(e),this.options.type==="dateonly"&&(o=o.getFullYear()+"-"+ja(o.getMonth()+1)+"-"+ja(o.getDate()))}this.infiniteSearchValChange=!0,this.infiniteLoadedElem=[],this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteSkipCnt=0,this.infiniteDataCount=0,this.infiniteManualSelectMaintainPred=[],this.sInput.value===""?this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]:this.infiniteUnloadParentExistPred=[],this.isForeignColumn(i)||this.addDistinct(s);var S={requestType:nm,filterModel:this,columnName:c,column:i,operator:l,matchCase:h,ignoreAccent:p,filterChoiceCount:null,query:s,value:o,cancel:!1};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(S.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(Rt,S,function(I){if(!I.cancel){if(I.operator=I.operator,g=new we(c,I.operator,S.value,I.matchCase,I.ignoreAccent),t.options.type==="date"||t.options.type==="datetime"||t.options.type==="dateonly"){l="equal";var A={field:c,operator:l,value:o,matchCase:h,ignoreAccent:p};u(o)||(g=Ks(A,t.options.type))}if(e&&typeof e=="string"&&t.isBlanks&&t.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){d=d.concat(a.generateNullValuePredicates(f));var T=a.generatePredicate(d);T.predicates.push(g),g=T,s.where(T)}else e.length?(g=u(n)?g:g.and(n.e),s.where(g)):u(n)||(g=n.e,s.where(n.e));t.infiniteSearchPred=g,I.filterChoiceCount=u(I.filterChoiceCount)?1e3:I.filterChoiceCount,t.infiniteRenderMod&&t.parent.filterSettings.itemsCount!==I.filterChoiceCount&&(t.parent.filterSettings.itemsCount=S.filterChoiceCount);var L={};if(Is(t.spinner),t.renderEmpty=!1,t.isForeignColumn(i)&&e.length){var _="result"in i.dataSource?new N(i.dataSource.result):i.dataSource;_.executeQuery(s).then(function(X){var re=t.options.column.columnData;t.options.column.columnData=X.result,t.parent.notify(ba,{predicate:L,column:i}),L.predicate.predicates.length?r.where(L.predicate):t.renderEmpty=!0,t.options.column.columnData=re,t.infiniteRenderMod?(t.infiniteInitialLoad=!!u(t.fullData),t.makeInfiniteScrollRequest(r),r.requiresCount()):r.take(I.filterChoiceCount),t.search(I,r)})}else t.infiniteRenderMod&&t.parent.filterSettings.itemsCount?(t.infiniteInitialLoad=!!u(t.fullData),t.makeInfiniteScrollRequest(s),s.requiresCount()):s.take(I.filterChoiceCount),t.search(I,s)}})},a.prototype.search=function(t,e){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,e):this.processSearch(e)},a.prototype.getPredicateFromCols=function(t,e){for(var i=a.getPredicate(t,e),s=[],r={},n=this.parent.getForeignKeyColumns!==void 0,o=n?this.parent.getForeignKeyColumns():[],l=0,h=Object.keys(i);l<h.length;l++){var p=h[l],c=void 0;n&&!this.parent.getColumnByField(p)&&(c=mn(p,o)),c?(this.parent.notify(ba,{predicate:r,column:c}),r.predicate.predicates.length&&s.push(we.or(r.predicate.predicates))):s.push(i[""+p])}return s.length&&we.and(s)},a.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new se},a.prototype.getAllData=function(){var t=this;this.customQuery=!1;var e=this.getQuery(),i=this.options.dataManager.adaptor.getModuleName;!u(this.parent.getDataModule)&&i&&i()==="ODataV4Adaptor"||e.requiresCount(),this.addDistinct(e);var s={requestType:Qo,query:e,filterChoiceCount:null},r="filterModel";s[""+r]=this,this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(s.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(Rt,s,function(n){n.filterChoiceCount=u(n.filterChoiceCount)?1e3:n.filterChoiceCount,t.infiniteRenderMod&&t.parent.filterSettings.itemsCount!==n.filterChoiceCount&&(t.parent.filterSettings.itemsCount=n.filterChoiceCount),t.infiniteRenderMod||e.take(n.filterChoiceCount),(!n.query.distincts.length||t.infiniteRenderMod)&&(t.customQuery=!0,t.queryGenerate(e)),t.infiniteRenderMod&&(t.infiniteInitialLoad=!!u(t.fullData),t.makeInfiniteScrollRequest(e)),t.parent.dataSource&&"result"in t.parent.dataSource?t.filterEvent(n,e):t.processDataOperation(e,!0)})},a.prototype.addDistinct=function(t){var e=this,i=P.distinct(this.options.filteredColumns,"field");i.indexOf(this.options.column.field)<=-1&&(i=i.concat(this.options.column.field));var s=this.options.dataManager.adaptor.getModuleName;if(s&&s()==="ODataV4Adaptor"&&this.parent&&this.parent.query instanceof se)for(var r=this.parent.query,n=0;n<r.queries.length;n++){var o=r.queries[parseInt(n.toString(),10)];o.fn==="onWhere"&&(this.getPredicateFields(o.e),this.queryFilteredColumn.map(function(c){i.indexOf(c)===-1&&i.push(c)}),this.queryFilteredColumn=[])}if(this.infiniteRenderMod||t.distinct(i),this.infiniteRenderMod&&!this.options.isRemote&&this.sInput.value===""){this.options.dataSource=this.options.dataSource instanceof N?this.options.dataSource:new N(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice();var l=new se;this.queryGenerate(l);var h=new N(this.options.dataSource.dataSource).executeLocal(l);this.options.dataSource=new N(P.distinct(h,this.options.column.field,!0)),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof N?this.options.column.dataSource:new N(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(c,d){return Object.assign({},c,e.options.column.dataSource.dataSource.json[d])}))}else if(this.infiniteRenderMod&&this.options.isRemote){t.select(this.options.column.field),t.sortBy(this.options.column.field,"ascending");var p=this.options.dataManager.adaptor.getModuleName;p&&p()&&(p()==="ODataV4Adaptor"||p()==="WebApiAdaptor"||p()==="CustomDataAdaptor"||p()==="GraphQLAdaptor"||p()==="ODataAdaptor")&&t.distinct(i)}return t},a.prototype.getPredicateFields=function(t){var e=this;t.isComplex&&t.predicates?t.predicates.forEach(function(i){Array.isArray(i)?i.forEach(function(s){return e.getPredicateFields(s)}):e.getPredicateFields(i)}):t.field&&!t.isComplex&&this.queryFilteredColumn.indexOf(t.field)<=-1&&(this.queryFilteredColumn=this.queryFilteredColumn.concat(P.distinct([t.field],"field")))},a.prototype.filterEvent=function(t,e){var i=this,s=Ja(t,e);this.parent.trigger(Dr,s.state),this.addInfiniteScrollEvent(e);var r=s.deffered;r.promise.then(function(n){i.infiniteDataCount=i.infiniteRenderMod&&!i.infiniteDataCount?n.count:i.infiniteDataCount;var o=i.infiniteRenderMod?n.result:n;i.dataSuccess(o)})},a.prototype.addInfiniteScrollEvent=function(t){this.infiniteRenderMod&&(this.infiniteQuery=t.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),v.add(this.cBox,"scroll",this.infiniteScrollHandler,this),v.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),v.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML=""))},a.prototype.infiniteScrollMouseKeyDownHandler=function(){v.remove(this.cBox,"scroll",this.infiniteScrollHandler)},a.prototype.infiniteScrollMouseKeyUpHandler=function(t){var e=this;v.add(this.cBox,"scroll",this.infiniteScrollHandler,this);var i=this.cBox;i.children.length>1&&(i.scrollTop>=i.scrollHeight-i.offsetHeight||i.scrollTop<=0)&&this.infiniteScrollHandler(),Di.timer=setTimeout(function(){e.clickHandler(t),Di.timer=null},0)},a.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},a.prototype.showMask=function(){var t=5,e,i=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist"});i.style.zIndex="10";var s=this.cBox;if(this.removeMask(),s){var r=getComputedStyle(s),n=ta(s),o=s.children.length?parseInt(r.height,10):Math.floor(parseInt(r.height.split("px")[0],10))-5;this.parent.enableAdaptiveUI&&this.infiniteRenderMod&&(i.style.height=o-n+"px",this.dlg.querySelector(".e-dlg-content").style.overflow="hidden");var l=this.isExcel&&!s.children.length&&!this.dlg.classList.contains("e-excelfilter")?"":getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor;i.style.cssText="width: "+r.width+"; min-height: "+r.minHeight+"; height: "+o+"px; margin: "+r.margin+"; border-style: "+r.borderStyle+"; border-width: "+r.borderWidth+"; border-color: "+r.borderColor+"; position: absolute; background-color: "+l+";",t=Math.floor(o/n),t=s.children.length>t?s.children.length:t,e=n+"px"}var h='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";if(i.innerHTML="",!s.children.length){this.spinner.insertAdjacentHTML("beforebegin",h),this.spinner.parentElement.querySelector(".e-ftrchk.e-mask-ftrchk").style.cssText="width: 100%; height: "+e+";",this.spinner.parentElement.querySelector(".e-checkbox-wrapper").style.width="100%";var p=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.spinner.insertBefore(i,this.cBox);for(var c=0;t&&c<t;c++){i.innerHTML+=h,i.lastElementChild.style.cssText="width: 100%; height: "+e+";",i.lastElementChild.querySelector(".e-checkbox-wrapper").style.width="100%";var p=[].slice.call(i.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.cBox&&(i.scrollTop=this.cBox.scrollTop)},a.prototype.removeMask=function(){var t=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");if(t.length)for(var e=0;e<t.length;e++)ce(t[e]);var i=this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist");i&&ce(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},a.prototype.infiniteScrollHandler=function(){var t=this.cBox;t.scrollTop>=t.scrollHeight-t.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):t.scrollTop>=t.scrollHeight-t.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(ea([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+=this.prevInfiniteScrollDirection==="down"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,Ht(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):t.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>this.parent.filterSettings.itemsCount*3&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(ea([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-=this.prevInfiniteScrollDirection==="up"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,gp([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):t.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<this.parent.filterSettings.itemsCount*3&&(ea([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,gp([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},a.prototype.makeInfiniteScrollRequest=function(t){var e=this;!this.infiniteInitialLoad&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?setTimeout(function(){e.infiniteQueryExecutionPending&&e.showMask()},500):this.infiniteInitialLoad||(xr({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),Is(this.spinner));var i="fn";if(this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(var s=0;s<this.infiniteQuery.queries.length;s++)(this.infiniteQuery.queries[s][""+i]==="onTake"||this.infiniteQuery.queries[s][""+i]==="onSkip")&&(this.infiniteQuery.queries.splice(s,1),s--);var r=!!t;if(t=t||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,t.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(t.take(this.parent.filterSettings.itemsCount*3),this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount*2):t.take(this.parent.filterSettings.itemsCount),!r)if(this.parent.dataSource&&"result"in this.parent.dataSource){var n={requestType:Qo,query:t,filterChoiceCount:null,filterModel:this};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(n.filterChoiceCount=this.parent.filterSettings.itemsCount),this.filterEvent(n,t)}else this.processDataOperation(t),this.infiniteQueryExecutionPending=!0},a.prototype.processDataOperation=function(t,e){var i=this;this.options.dataSource=this.options.dataSource instanceof N?this.options.dataSource:new N(this.options.dataSource);var s=[],r=[];if(this.isForeignColumn(this.options.column)&&e){var n="result"in this.options.column.dataSource?new N(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=t.params,s.push(n.executeQuery(this.foreignKeyQuery)),r.push(function(l){return i.foreignKeyData=l})}if(this.addInfiniteScrollEvent(t),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote){var o=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field;this.options.dataSource.executeQuery(new se().sortBy(o,P.fnAscending)).then(function(l){i.options.dataSource.dataSource.json=l.result,i.executeQueryOperations(t,s,r)})}else this.executeQueryOperations(t,s,r)},a.prototype.executeQueryOperations=function(t,e,i){var s=this;e.push(this.options.dataSource.executeQuery(t)),i.push(this.dataSuccess.bind(this));var r=0;Promise.all(e).then(function(n){s.infiniteQueryExecutionPending=s.infiniteRenderMod?!1:s.infiniteQueryExecutionPending;for(var o=0;o<n.length;o++)s.infiniteDataCount=s.infiniteRenderMod&&!s.infiniteDataCount?n[o].count:s.infiniteDataCount,i[r++](n[parseInt(o.toString(),10)].result)}).catch(function(){s.infiniteRenderMod&&s.parent.filterSettings&&s.parent.filterSettings.loadingIndicator==="Shimmer"&&s.parent.showMaskRow(void 0,s.dialogObj.element)})},a.prototype.dataSuccess=function(t){if(!(!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||t.length===0))){this.fullData=t;var e={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify(Km,e),e.executeQuery){var i=new se;this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(i),this.isExecuteLocal=!1);var s=new N(e.dataSource).executeLocal(i),r=this.options.column;this.filteredData=a.getDistinct(s,this.options.field,r,this.foreignKeyData,this).records||[]}var n=e.executeQuery?this.filteredData:e.dataSource;this.processDataSource(null,!0,n,e),(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&(this.sInput?this.sInput.focus():this.dlg.querySelector(".e-chk-hidden")&&this.dlg.querySelector(".e-ftrchk")&&(this.dlg.querySelector(".e-chk-hidden").focus(),this.dlg.querySelector(".e-ftrchk").classList.add("e-chkfocus"))),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1);var o={requestType:Qc,columnName:this.options.field,columnType:this.options.type},l="filterModel";o[""+l]=this,this.parent.notify(kr,o),this.isCheckboxFilterTemplate&&Er(this.spinner)}},a.prototype.queryGenerate=function(t){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var e=this.options.dataManager.adaptor.getModuleName;if(!u(this.parent.getDataModule)&&e&&e()==="ODataV4Adaptor")this.parent.getDataModule().searchQuery(t);else{var i=this.parent.searchSettings,s=i.fields.length?i.fields:this.options.columns.map(function(h){return h.field});t.search(i.key,s,i.operator,i.ignoreCase,i.ignoreAccent)}}if(this.options.filteredColumns.length){for(var r=[],n=0;n<this.options.filteredColumns.length;n++){var o=this.options.filteredColumns[parseInt(n.toString(),10)];this.options.uid?(o.uid=o.uid||this.parent.getColumnByField(o.field).uid,o.uid!==this.options.uid&&r.push(this.options.filteredColumns[parseInt(n.toString(),10)])):o.field!==this.options.field&&r.push(this.options.filteredColumns[parseInt(n.toString(),10)])}var l=this.getPredicateFromCols(r,this.isExecuteLocal);l&&t.where(l)}},a.prototype.processDataSource=function(t,e,i,s){Is(this.spinner),this.isExecuteLocal=!0,this.updateResult(),this.isExecuteLocal=!1;var r={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(av,r),this.isCheckboxFilterTemplate=r.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask():this.createFilterItems(i,e,s)},a.prototype.processSearch=function(t){this.processDataOperation(t)},a.prototype.updateResult=function(){this.result={};var t=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),e=new se;t&&e.where(t),this.parent.notify(sv,{query:e});for(var i=new N(this.fullData).executeLocal(e),s=0,r=i;s<r.length;s++){var n=r[s];this.result[ns(this.options.field,n)]=!0}},a.prototype.clickHandler=function(t){var e;u(Di.timer)||clearTimeout(Di.timer);var i=t.target;if(!(!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&F(i,"e-mask-ftrchk"))){var s=F(i,"e-checkbox-wrapper");if(F(i,"e-searchbox")&&this.searchBoxClick(t),s&&!this.isCheckboxFilterTemplate){var r=s.querySelector(".e-selectall");if(r)this.updateAllCBoxes(!r.classList.contains("e-check"));else if(Xr(s.parentElement),this.infiniteRenderMod&&!s.parentElement.querySelector(".e-add-current")){this.localInfiniteSelectionInteracted=!0;var n=this.options.allowCaseSensitive,o=s.parentElement.querySelector(".e-frame"),l=o.previousSibling,h=l.checked?"equal":"notequal",p=l.checked?"or":"and",c={field:this.options.field,predicate:p,uid:this.options.uid,operator:h,type:this.options.type,matchCase:n,ignoreAccent:this.options.ignoreAccent},d=this.values[F(l,"e-ftrchk").getAttribute("data-uid")];if(this.updateInfiniteManualSelectPred(c,d),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length){var f=this.getPredicateFromCols((e=this.options.filteredColumns).concat.apply(e,this.infiniteManualSelectMaintainPred),!0),g=new se;f&&g.where(f);var y=new N(this.infinitePermenantLocalData).executeLocal(g);this.options.parentTotalDataCount!==y.length&&(this.options.parentTotalDataCount=y.length),!this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[])}this.infiniteUnloadParentExistPred.length&&(this.options.parentTotalDataCount===this.infiniteDataCount||!this.options.parentTotalDataCount)&&(this.infiniteUnloadParentExistPred=[])}this.updateIndeterminatenBtn(),s.querySelector(".e-chk-hidden").focus()}this.setFocus(F(s,"e-ftrchk"))}},a.prototype.updateInfiniteManualSelectPred=function(t,e){for(var i=0;i<this.infiniteManualSelectMaintainPred.length;i++){var s=this.infiniteManualSelectMaintainPred[i];if(s.value+""==e+""&&(s.operator==="equal"||s.operator==="notequal")){this.infiniteManualSelectMaintainPred.splice(i,1);break}}(t.predicate==="or"&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll)||t.predicate==="and"&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll))&&(this.infiniteManualSelectMaintainPred.push($({},{value:e},t)),t.predicate==="or"?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},a.prototype.focusNextOrPrev=function(t,e){var i=t.key==="ArrowUp"?e.indexOf(document.activeElement)-1:e.indexOf(document.activeElement)+1,s=e[(i+e.length)%e.length];if(s){s.focus();var r=s.classList.contains("e-chk-hidden")?F(s,"e-ftrchk"):s;this.setFocus(r)}},a.prototype.keyupHandler=function(t){if((t.key==="Tab"||(t.key==="ArrowUp"||t.key==="ArrowDown")&&!t.altKey)&&this.setFocus(F(t.target,"e-ftrchk")),(t.key==="ArrowUp"||t.key==="ArrowDown")&&!t.altKey&&this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"){t.preventDefault();var e=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));this.focusNextOrPrev(t,e)}},a.prototype.setFocus=function(t){var e=this.dlg.querySelector(".e-chkfocus");e&&e.classList.remove("e-chkfocus"),t&&t!==e&&t.classList.add("e-chkfocus")},a.prototype.updateAllCBoxes=function(t){this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=t,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]);for(var e=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(n){return n.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)")),i=0,s=e;i<s.length;i++){var r=s[i];xa(r,t),$s(r.previousSibling,t)}},a.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},a.prototype.createCheckbox=function(t,e,i){var s=e?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);$s(s.querySelector("input"),e);var r=s.querySelector(".e-label"),n=Eh({},i,{column:this.options.column,parent:this.parent}),o=this.options.disableHtmlEncode?"textContent":"innerHTML";r[""+o]=!u(t)&&t.toString().length?this.parent.enableHtmlSanitizer?Kt.sanitize(t):t:this.getLocalizedLabel("Blanks");var l=xs("cbox");if(r.setAttribute("id",l+"cboxLabel"),s.querySelector("input").setAttribute("aria-labelledby",r.id),r.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),typeof t=="boolean"&&(r.innerHTML=t===!0?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),x([r],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&i[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection")){r.innerHTML="";var h=this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string"&&!(this.options.column.filter.itemTemplate.prototype&&this.options.column.filter.itemTemplate.prototype.CSPTemplate),p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;h||p?(this.options.template(n,this.parent,"filterItemTemplate",null,null,null,r),this.parent.renderTemplates()):Ht(r,this.options.template(n,this.parent,"filterItemTemplate",null,null,null,null,this.parent.root))}return s},a.prototype.updateIndeterminatenBtn=function(){var t=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,e=[],i=!1,s=this.infiniteRenderMod?this.sBox.querySelector(".e-selectall"):this.cBox.querySelector(".e-selectall"),r=this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(l){return l.querySelector(".e-check")}).length:this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length;this.cBox.querySelector(".e-add-current")&&(t-=1);var n;this.options.isResponsiveFilter||(n=this.dialogObj.btnObj[0],n.disabled=!1);var o=s.previousSibling;$s(o,!1),o.indeterminate=!1,this.infiniteRenderMod&&this.sInput.value===""&&!this.options.parentCurrentViewDataCount&&!this.localInfiniteSelectionInteracted&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll&&!r)&&(t!==r||t===r)?r=0:this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!r||t===r)&&this.infiniteLocalSelectAll&&(r?t+=this.infiniteUnloadParentExistPred.length:r+=this.infiniteUnloadParentExistPred.length),t===r?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),e=["e-check"],$s(o,!0)):r?(e=["e-stop"],o.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),e=["e-uncheck"],i=!0,n&&(n.disabled=!0)),n&&(this.filterState=!n.disabled,n.dataBind()),R([s],["e-check","e-stop","e-uncheck"]),x([s],e),this.parent.notify(zl,{disabled:i})},a.prototype.createFilterItems=function(t,e,i){var s,r,n,o=this.parent.createElement("div"),l,h=!1;this.options.isResponsiveFilter||(l=this.dialogObj.btnObj[0]);var p=-1,c="ejValue";i.executeQuery||(c=i.field);for(var d=0;d<t.length;d++){var f=H(c,t[parseInt(d.toString(),10)]);(f===""||u(f))&&(p=p+1)}if(this.infiniteRenderMod||(this.itemsCnt=p!==-1?t.length-p:t.length),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask(),t.length&&!this.renderEmpty){var g=this.getLocalizedLabel("SelectAll"),y=this.cBox.querySelector(".e-checkfltrnmdiv");y&&y.classList.remove("e-checkfltrnmdiv");var b=this.createCheckbox(g,!1,(s={},s[this.options.field]=g,s));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?x([b],this.parent.cssClass.split(" ")):x([b],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod){var C=el(xs("cbox"),b,"e-ftrchk");C.querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?(C.classList.add("e-infinitescroll"),this.parent.enableAdaptiveUI&&(this.spinner.style.height=this.spinner.offsetHeight-ta(this.cBox)+"px"),this.sBox.insertBefore(C,this.spinner)):o.appendChild(C)}else this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled"));var S=new we("field","equal",this.options.field);this.options.foreignKeyValue&&(S=S.or("field","equal",this.options.foreignKeyValue));var I=new N(this.options.filteredColumns).executeLocal(new se().where(S)).length;if(this.sInput&&this.sInput.value){var A=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,(r={},r[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),r));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?x([A],this.parent.cssClass.split(" ")):x([A],[this.parent.cssClass])),this.infiniteRenderMod&&!u(this.sBox.children[2])&&this.sBox.children[2].innerText!==this.getLocalizedLabel("AddCurrentSelection")||!this.infiniteRenderMod){var T=el(xs("cbox"),A,"e-ftrchk");if(T.querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod){T.classList.add("e-infinitescroll"),this.sBox.insertBefore(T,this.spinner);var L=this.spinner.querySelector(".e-checkboxlist"),_=Math.ceil(T.getBoundingClientRect().height);L.style.height=parseInt(getComputedStyle(L).height.split("px")[0],10)-_+"px",L.style.minHeight=L.style.height}else o.appendChild(T)}else this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled"))}else if(this.infiniteRenderMod&&!u(this.sBox.children[2])&&this.sBox.children[2].innerText===this.getLocalizedLabel("AddCurrentSelection")){var L=this.spinner.querySelector(".e-checkboxlist"),X=Math.ceil(this.sBox.children[2].getBoundingClientRect().height);L.style.height=parseInt(getComputedStyle(L).height.split("px")[0],10)+X+"px",L.style.minHeight=L.style.height,ce(this.sBox.children[2])}for(var re=void 0,d=0;d<t.length;d++){var ye=xs("cbox");this.values[""+ye]=H(c,t[parseInt(d.toString(),10)]);var V=H(this.options.field,t[parseInt(d.toString(),10)]);this.options.formatFn&&(V=this.valueFormatter.toView(V,this.options.formatFn));var q={value:V,column:this.options.column,data:t[parseInt(d.toString(),10)]};if(this.parent.notify(Lm,q),V=q.value,V===""||u(V)){if(re)continue;re=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(V,this.infiniteUnloadParentExistPred);var z=this.localInfiniteSelectAllClicked?this.createCheckbox(V,this.infiniteLocalSelectAll,H("dataObj",t[d])):this.createCheckbox(V,this.getCheckedState(I,this.values[""+ye]),H("dataObj",t[d]));o.appendChild(el(ye,z,"e-ftrchk")),this.infiniteRenderMod&&(o.lastChild.style.height=ta(this.cBox)+"px")}var U=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&ea([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteRenderMod&&((n=this.infiniteLoadedElem).push.apply(n,[].slice.call(o.children)),this.itemsCnt=p!==-1?this.infiniteLoadedElem.length-p:this.infiniteLoadedElem.length),this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]),Ht(this.cBox,[].slice.call(o.children)),this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(U-this.cBox.scrollTop)),this.updateIndeterminatenBtn(),this.infiniteRenderMod?l&&l.disabled?h=!0:h=!1:(l&&(l.disabled=!1),h=!1)}else{if(o.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod){var C=this.sBox.querySelector(".e-ftrchk .e-selectall");if(C){var ie=C.parentElement.parentElement;C.classList.contains("e-check")?Xr(ie):C.classList.contains("e-stop")&&(Xr(ie),C.classList.remove("e-stop"),Xr(ie)),C.previousSibling.disabled=!0,C.parentElement.classList.add("e-checkbox-disabled")}var J=this.sBox.querySelector(".e-ftrchk .e-add-current");if(J){var K=J.parentElement.parentElement;J.classList.contains("e-check")&&Xr(K),J.previousSibling.disabled=!0,J.parentElement.classList.add("e-checkbox-disabled")}}this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),Ht(this.cBox.children[0],[].slice.call(o.children)),l&&(l.disabled=!0),h=!0,this.filterState=!h}l&&t.length&&(this.filterState=!l.disabled,l.dataBind());var Y={requestType:Qo,dataSource:this.renderEmpty?[]:t},ne="filterModel";Y[""+ne]=this,this.parent.notify(kr,Y),this.parent.notify(zl,{disabled:h}),this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px"),Er(this.spinner)},a.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(t,e){for(var i=0;i<e.length;i++){var s=e[i],r=s.value instanceof Date?this.valueFormatter.toView(s.value,this.options.formatFn):s.value,n=this.options.column;if(n.isForeignColumn()){var o=Js(n,{},r,this.foreignKeyData)[0];t=H(n.foreignKeyField,o)}t===r&&(s.operator==="equal"||s.operator==="notequal")&&(this.infiniteManualSelectMaintainPred.push(e[i]),e.splice(i,1),i--)}},a.prototype.getCheckedState=function(t,e){if(!this.isFiltered||!t)return!0;var i=this.sInput&&this.sInput.value?!0:this.result[""+e];return this.infiniteRenderMod?i:this.options.operator==="notequal"?!i:i},a.getDistinct=function(t,e,i,s,r){for(var n=t.length,o=[],l,h="ejValue",p={},c=i&&i.isForeignColumn?i.isForeignColumn():!1;n--;){if(l=t[parseInt(n.toString(),10)],i&&i.type==="dateonly"&&typeof l[""+e]=="string"&&l[""+e]){var d=l[""+e].split(/[^0-9.]/);l[""+e]=new Date(parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}l=ns(e,l);var f=typeof l=="string"&&!u(r)&&!u(r.parent)&&!u(r.parent.filterSettings)&&!u(r.parent.filterSettings.enableCaseSensitivity)?l.toLowerCase():l;if(!(f in p)){var g={};if(g[""+h]=l,p[""+f]=!0,c){var y=Js(i,{},l,s)[0];We(td,y,t[parseInt(n.toString(),10)]),l=H(i.foreignKeyValue,y)}We(e,u(l)?null:l,g),We("dataObj",t[parseInt(n.toString(),10)],g),o.push(g)}}return P.group(P.sort(o,e,P.fnAscending),"ejValue")},a.getPredicate=function(t,e){for(var i=P.distinct(t,"field",!0)||[],s=[],r={},n=0;n<i.length;n++)s=new N(t).executeLocal(new se().where("field","equal",i[parseInt(n.toString(),10)].field)),s.length!==0&&(r[i[parseInt(n.toString(),10)].field]=a.generatePredicate(s,e));return r},a.generatePredicate=function(t,e){var i=t?t.length:0,s,r="or",n=a.updateDateFilter(t[0]);n.ignoreAccent=u(n.ignoreAccent)?!1:n.ignoreAccent,n.type==="date"||n.type==="datetime"||n.type==="dateonly"?s=Ks(n,n.type,e):s=n.ejpredicate?n.ejpredicate:new we(n.field,n.operator,n.value,!a.getCaseValue(n),n.ignoreAccent);for(var o=1;o<i;o++)t[parseInt(o.toString(),10)]=a.updateDateFilter(t[parseInt(o.toString(),10)]),i>2&&o>1&&(t[o].predicate==="or"&&t[o-1].predicate==="or"||t[o].predicate==="and"&&t[o-1].predicate==="and")?t[o].type==="date"||t[o].type==="datetime"||t[o].type==="dateonly"?s.predicates.push(Ks(t[parseInt(o.toString(),10)],t[o].type,e)):s.predicates.push(new we(t[o].field,t[parseInt(o.toString(),10)].operator,t[parseInt(o.toString(),10)].value,!a.getCaseValue(t[parseInt(o.toString(),10)]),t[parseInt(o.toString(),10)].ignoreAccent)):t[o].type==="date"||t[o].type==="datetime"||t[o].type==="dateonly"?t[parseInt(o.toString(),10)].predicate==="and"&&t[parseInt(o.toString(),10)].operator==="equal"?s=s[""+r](Ks(t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)].type,e),t[parseInt(o.toString(),10)].type,t[parseInt(o.toString(),10)].ignoreAccent):s=s[t[parseInt(o.toString(),10)].predicate](Ks(t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)].type,e),t[parseInt(o.toString(),10)].type,t[parseInt(o.toString(),10)].ignoreAccent):s=t[parseInt(o.toString(),10)].ejpredicate?s[t[parseInt(o.toString(),10)].predicate](t[parseInt(o.toString(),10)].ejpredicate):s[t[parseInt(o.toString(),10)].predicate](t[parseInt(o.toString(),10)].field,t[parseInt(o.toString(),10)].operator,t[parseInt(o.toString(),10)].value,!a.getCaseValue(t[parseInt(o.toString(),10)]),t[parseInt(o.toString(),10)].ignoreAccent);return s||null},a.getCaseValue=function(t){return u(t.matchCase)?!(t.type==="string"||u(t.type)&&typeof t.value=="string"):t.matchCase},a.updateDateFilter=function(t){return(t.type==="date"||t.type==="datetime"||t.type==="dateonly"||t.value instanceof Date)&&(t.type=t.type||"date"),t},a})(),ri="",Da="",Qr="",Ct=[],Uy="e-active",Ga="";function $r(a,t,e,i,s,r,n,o,l){!r||ri===""?Qr!==""?(ri=Qr+String.fromCharCode(a),Qr=""):ri+=String.fromCharCode(a):ri===Da&&(Qr=String.fromCharCode(a)),o?(setTimeout(function(){Qr=""},700),setTimeout(function(){ri=""},3e3)):setTimeout(function(){ri=""},1e3);var h;if(ri=ri.toLowerCase(),Ga===s&&Da===ri&&!l){for(var p=0;p<Ct.length;p++){if(Ct[p].classList.contains(Uy)){h=p;break}if(n&&Ct[p].textContent.toLowerCase()===n.toLowerCase()){h=p;break}}return h=h+1,o?Ct[h]&&Ct.length-1!==h?Ct[h]:Ct[Ct.length]:Ct[h]?Ct[h]:Ct[0]}else{var c=t,d=ri.length,f=void 0,g=void 0;e=e?e+1:0;var p=e;Ct=[];do p===c.length&&(p=-1),p===-1?h=0:h=p,g=c[h],f=g.innerText.toLowerCase(),f.substr(0,d)===ri&&Ct.push(c[h]),p++;while(p!==e);if(Da=ri,Ga=s,o){for(var y=!1,b=0;b<Ct.length;b++)if(n&&Ct[b].textContent.toLowerCase()===n.toLowerCase()){h=b,y=!0;break}return n&&y&&(h=h+1),Ct[h]?Ct[h]:Ct[0]}return Ct[0]}}function gi(a,t,e,i,s,r,n,o){var l=t;i=i??!0;var h={item:null,index:null};if(a&&a.length&&t){var p=a.length,c=i?a.toLocaleLowerCase():a;c=Gy(c);for(var d=function(b,C){var S=C[b],I;if(t&&s){var A=S,T=r.text.split(".");s.filter(function(_){Array.prototype.slice.call(T).forEach(function(X){(n==="object"&&!_.isHeader&&A.textContent.toString().indexOf(_[X])!==-1&&_[r.value]!=null&&A.getAttribute("data-value")===_[r.value].toString()||n==="string"&&A.textContent.toString().indexOf(_)!==-1)&&(I=n==="object"?_[X]:_)})})}var L=s&&I?(i?I.toString().toLocaleLowerCase():I).replace(/^\s+|\s+$/g,""):(i?S.textContent.toLocaleLowerCase():S.textContent).replace(/^\s+|\s+$/g,"");if(o&&L&&c&&(L=L.normalize("NFD").replace(/[\u0300-\u036f]/g,""),c=c.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),e==="Equal"&&L===c||e==="StartsWith"&&L.substr(0,p)===c||e==="EndsWith"&&L.substr(L.length-c.length)===c||e==="Contains"&&new RegExp(c,"g").test(L))return h.item=S,h.index=b,{value:{item:S,index:b}}},f=0,g=l;f<g.length;f++){var y=d(f,g);if(typeof y=="object")return y.value}return h}return h}function Gy(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _y(a){Ga===a&&(Ga="",Da="",ri="",Ct=[])}function ia(a,t,e,i){var s=/<[^>]*>/g.test(a.innerText);if(s&&(a.innerText=a.innerText.replace(/[\u00A0-\u9999<>&]/g,function(o){return"&#"+o.charCodeAt(0)+";"})),t!==""){var r=e?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var n=i==="StartsWith"?"^("+t+")":i==="EndsWith"?"("+t+")$":"("+t+")";kd(a,new RegExp(n,r))}}function kd(a,t){for(var e=0;a.childNodes&&e<a.childNodes.length;e++)if(a.childNodes[e].nodeType===3&&a.childNodes[e].textContent.trim()!==""){var i=a.childNodes[e].nodeValue.trim().replace(t,'<span class="e-highlight">$1</span>');a.childNodes[e].nodeValue="",a.innerHTML=a.innerHTML.trim()+i;break}else kd(a.childNodes[e],t)}function Ky(a){for(var t=a.querySelectorAll(".e-highlight"),e=t.length-1;e>=0;e--){var i=t[e].parentNode,s=document.createTextNode(t[e].textContent);i.replaceChild(s,t[e])}}var Yy=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),fs=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},tl={TEXTSHAPE:"e-skeleton-text",CIRCLESHAPE:"e-skeleton-circle",SQUARESHAPE:"e-skeleton-square",RECTANGLESHAPE:"e-skeleton-rectangle",WAVEEFFECT:"e-shimmer-wave",PULSEEFFECT:"e-shimmer-pulse",FADEEFFECT:"e-shimmer-fade",VISIBLENONE:"e-visible-none"},mp;(function(a){a.Text="Text",a.Circle="Circle",a.Square="Square",a.Rectangle="Rectangle"})(mp||(mp={}));var vp;(function(a){a.Wave="Wave",a.Fade="Fade",a.Pulse="Pulse",a.None="None"})(vp||(vp={}));var yp=(function(a){Yy(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.getModuleName=function(){return"skeleton"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.preRender=function(){this.element.id||(this.element.id=at("e-"+this.getModuleName())),this.updateCssClass(),G(this.element,{role:"alert","aria-busy":"true","aria-live":"polite","aria-label":this.label})},t.prototype.render=function(){this.initialize()},t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"width":case"height":this.updateDimension();break;case"shape":this.updateShape();break;case"shimmerEffect":this.updateEffect();break;case"visible":this.updateVisibility();break;case"label":this.element.setAttribute("aria-label",this.label);break;case"cssClass":i.cssClass&&R([this.element],i.cssClass.split(" ")),this.updateCssClass();break}}},t.prototype.destroy=function(){a.prototype.destroy.call(this);var e=["role","aria-live","aria-busy","aria-label"],i=[];this.cssClass&&(i=i.concat(this.cssClass.split(" ")));for(var s=0;s<e.length;s++)this.element.removeAttribute(e[parseInt(s.toString(),10)]);i=i.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[]),i=i.concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[]),R([this.element],i)},t.prototype.initialize=function(){this.updateShape(),this.updateEffect(),this.updateVisibility()},t.prototype.updateShape=function(){if(!u(this.shape)){var e=tl[this.shape.toUpperCase()+"SHAPE"],i=this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[];this.updateDimension(),i&&R([this.element],i),x([this.element],[e])}},t.prototype.updateDimension=function(){var e=!this.width&&["Text","Rectangle"].indexOf(this.shape)>-1?"100%":ve(this.width),i=["Circle","Square"].indexOf(this.shape)>-1?e:ve(this.height);this.element.style.width=e,this.element.style.height=i},t.prototype.updateEffect=function(){var e=this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[];e&&R([this.element],e),u(this.shimmerEffect)||x([this.element],[tl[this.shimmerEffect.toUpperCase()+"EFFECT"]])},t.prototype.updateVisibility=function(){this.element.classList[this.visible?"remove":"add"](tl.VISIBLENONE)},t.prototype.updateCssClass=function(){this.cssClass&&x([this.element],this.cssClass.split(" "))},fs([m("")],t.prototype,"width",void 0),fs([m("")],t.prototype,"height",void 0),fs([m(!0)],t.prototype,"visible",void 0),fs([m("Text")],t.prototype,"shape",void 0),fs([m("Wave")],t.prototype,"shimmerEffect",void 0),fs([m("Loading...")],t.prototype,"label",void 0),fs([m("")],t.prototype,"cssClass",void 0),t=fs([pt],t),t})(Vt),Td=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),$e=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Th=(function(a){Td(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return $e([m()],t.prototype,"text",void 0),$e([m()],t.prototype,"value",void 0),$e([m()],t.prototype,"iconCss",void 0),$e([m()],t.prototype,"groupBy",void 0),$e([m()],t.prototype,"htmlAttributes",void 0),$e([m()],t.prototype,"disabled",void 0),t})(Je),B={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group",virtualList:"e-list-item e-virtual-list"},Xy="ItemTemplate",Qy="DisplayTemplate",$y="SpinnerTemplate",Jy="ValueTemplate",Zy="GroupTemplate",eb="HeaderTemplate",tb="FooterTemplate",ib="NoRecordsTemplate",sb="ActionFailureTemplate",rb="e-hide-group-header",Ld=(function(a){Td(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.preventChange=!1,s.isPreventChange=!1,s.isDynamicDataChange=!1,s.addedNewItem=!1,s.isAddNewItemTemplate=!1,s.isRequesting=!1,s.isVirtualizationEnabled=!1,s.isCustomDataUpdated=!1,s.isAllowFiltering=!1,s.virtualizedItemsCount=0,s.isCheckBoxSelection=!1,s.totalItemCount=0,s.dataCount=0,s.remoteDataCount=-1,s.isRemoteDataUpdated=!1,s.isIncrementalRequest=!1,s.itemCount=30,s.virtualListHeight=0,s.isVirtualScrolling=!1,s.isPreventScrollAction=!1,s.scrollPreStartIndex=0,s.isScrollActionTriggered=!1,s.previousStartIndex=0,s.isMouseScrollAction=!1,s.isKeyBoardAction=!1,s.isScrollChanged=!1,s.isUpwardScrolling=!1,s.startIndex=0,s.currentPageNumber=0,s.pageCount=0,s.isPreventKeyAction=!1,s.generatedDataObject={},s.skeletonCount=32,s.isVirtualTrackHeight=!1,s.virtualSelectAll=!1,s.isVirtualReorder=!1,s.incrementalQueryString="",s.incrementalEndIndex=0,s.incrementalStartIndex=0,s.incrementalPreQueryString="",s.isObjectCustomValue=!1,s.appendUncheckList=!1,s.getInitialData=!1,s.preventPopupOpen=!0,s.virtualSelectAllState=!1,s.CurrentEvent=null,s.isDynamicData=!1,s.isPrimitiveData=!1,s.isCustomFiltering=!1,s.debounceTimer=null,s.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},s.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},s.selectedValueInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},s}return t.prototype.getPropObject=function(e,i,s){var r=new Object,n=new Object,o=function(h){return h};r[o(e)]=i[o(e)],n[o(e)]=s[o(e)];var l=new Object;return l.newProperty=r,l.oldProperty=n,l},t.prototype.getValueByText=function(e,i,s){var r=null;return u(this.listData)||(i?r=this.checkValueCase(e,!0,s):r=this.checkValueCase(e,!1,s)),r},t.prototype.checkValueCase=function(e,i,s,r){var n=this,o=null;if(r&&(o=e),!u(this.listData)){var l=this.listData,h=this.fields,p=this.typeOfData(l).typeof;if(p==="string"||p==="number"||p==="boolean")for(var c=0,d=l;c<d.length;c++){var f=d[c];u(f)||(s?i?this.checkIgnoreCase(String(f),e)&&(o=this.checkingAccent(String(f),e,i)):o=this.checkingAccent(String(f),e,i):i?this.checkIgnoreCase(String(f),e)&&(o=this.getItemValue(String(f),e,i)):this.checkNonIgnoreCase(String(f),e)&&(o=this.getItemValue(String(f),e,i,r)))}else if(i)l.filter(function(y){var b=H(h.value,y);!u(b)&&n.checkIgnoreCase(H(h.text,y).toString(),e)&&(o=H(h.value,y))});else if(r){var g=null;g=o,l.filter(function(y){var b=H(h.value,y);!u(b)&&!u(o)&&b.toString()===g.toString()&&(o=H(h.text,y))})}else l.filter(function(y){n.checkNonIgnoreCase(H(h.text,y),e)&&(o=H(h.value,y))})}return o},t.prototype.checkingAccent=function(e,i,s){var r=P.ignoreDiacritics(String(e)),n=P.ignoreDiacritics(i.toString()),o=null;return s?this.checkIgnoreCase(r,n)&&(o=this.getItemValue(String(e),i,s)):this.checkNonIgnoreCase(String(e),i)&&(o=this.getItemValue(String(e),i,s)),o},t.prototype.checkIgnoreCase=function(e,i){return String(e).toLowerCase()===i.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,i){return String(e)===i.toString()},t.prototype.getItemValue=function(e,i,s,r){var n=null,o=this.listData,l=this.typeOfData(o).typeof;return r?n=e.toString():s?n=l==="string"?String(e):this.getFormattedValue(String(e)):n=l==="string"?i:this.getFormattedValue(i),n},t.prototype.templateCompiler=function(e){var i=!1;if(typeof e!="function"&&e)try{i=!!Ke(e,document).length}catch{i=!1}return i},t.prototype.l10nUpdate=function(e){var i=this.getModuleName()==="listbox"?this.ulElement:this.list;if(!u(this.noRecordsTemplate)&&this.noRecordsTemplate!=="No records found"||this.actionFailureTemplate!=="Request failed"){var s=e?this.actionFailureTemplate:this.noRecordsTemplate,r=void 0,n=e?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";var o=this.templateCompiler(s);typeof s!="function"&&o?r=qe(Me(s,document).innerHTML.trim()):r=qe(s);var l=e?"actionFailureTemplate":"noRecordsTemplate",h=void 0;if(this.isReact&&typeof s=="function"?h=r({},this,l,n,this.isStringTemplate,null):h=r({},this,l,n,this.isStringTemplate,null,i),h&&h.length>0)for(var p=0;p<h.length;p++)if(this.getModuleName()==="listbox"&&l==="noRecordsTemplate")if(h[p].nodeName==="#text"){var c=this.createElement("li");c.textContent=h[p].textContent,c.classList.add("e-list-nrt"),c.setAttribute("role","option"),i.appendChild(c)}else h[p].classList.add("e-list-nr-template"),i.appendChild(h[p]);else(h[p]instanceof HTMLElement||h[p]instanceof Text&&h[p].textContent!=="")&&i.appendChild(h[p]);this.renderReactTemplates()}else{var d={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},f=new zt(this.getLocaleName(),{},this.locale);f.getConstant("actionFailureTemplate")!==""||f.getConstant("noRecordsTemplate")!==""?this.l10n=f:this.l10n=new zt(this.getModuleName()==="listbox"?"listbox":this.getModuleName()==="mention"?"mention":"dropdowns",d,this.locale);var g=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if(this.getModuleName()==="listbox"){var c=this.createElement("li");c.textContent=g,i.appendChild(c),c.classList.add("e-list-nrt"),c.setAttribute("role","option")}else u(i)||(i.innerHTML=g)}},t.prototype.checkAndResetCache=function(){this.isVirtualizationEnabled&&(this.generatedDataObject={},this.virtualItemStartIndex=this.virtualItemEndIndex=0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.selectedValueInfo=null)},t.prototype.updateIncrementalInfo=function(e,i){this.viewPortInfo.startIndex=e,this.viewPortInfo.endIndex=i,this.updateVirtualItemIndex(),this.isIncrementalRequest=!0,this.resetList(this.dataSource,this.fields,this.query),this.isIncrementalRequest=!1},t.prototype.updateIncrementalView=function(e,i){this.viewPortInfo.startIndex=e,this.viewPortInfo.endIndex=i,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+B.li),this.ulElement=this.list.querySelector("ul")},t.prototype.updateVirtualItemIndex=function(){this.virtualItemStartIndex=this.viewPortInfo.startIndex,this.virtualItemEndIndex=this.viewPortInfo.endIndex,this.virtualListInfo=this.viewPortInfo},t.prototype.getFilteringSkeletonCount=function(){var e=this.skeletonCount;this.getSkeletonCount(!0),this.skeletonCount=this.dataCount<this.itemCount*2&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount;var i=!0;if((this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&this.totalItemCount<=this.itemCount)&&(this.skeletonCount=0,i=!1),!this.list.classList.contains(B.noData)){if(e!==this.skeletonCount&&i?this.UpdateSkeleton(!0,Math.abs(e-this.skeletonCount)):this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl").length>0)this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0&&this.list.querySelector(".e-dropdownbase")){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.list.querySelector(".e-dropdownbase").appendChild(s)}this.list.getElementsByClassName("e-virtual-ddl-content").length>0&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},t.prototype.getSkeletonCount=function(e){this.virtualListHeight=this.listContainerHeight!=null?parseInt(this.listContainerHeight,10):this.virtualListHeight;var i=this.virtualListHeight>0&&this.listItemHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;this.skeletonCount=i*4<this.itemCount?this.itemCount:i*4,this.itemCount=e?this.itemCount:this.skeletonCount,this.virtualItemCount=this.itemCount,this.skeletonCount=Math.floor(this.skeletonCount/2)},t.prototype.GetVirtualTrackHeight=function(){var e=this.totalItemCount===this.viewPortInfo.endIndex?this.totalItemCount*this.listItemHeight-this.itemCount*this.listItemHeight:this.totalItemCount*this.listItemHeight;e=this.isVirtualTrackHeight?0:e;var i="height: "+(e-this.itemCount*this.listItemHeight)+"px;";return(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.skeletonCount===0?"height: 0px;":i},t.prototype.getTransformValues=function(){var e=this.viewPortInfo.startIndex*this.listItemHeight;e=e-this.skeletonCount*this.listItemHeight,e=this.viewPortInfo.startIndex===0&&this.listData&&this.listData.length===0||this.skeletonCount===0?0:e;var i="transform: translate(0px, "+e+"px);";return i},t.prototype.UpdateSkeleton=function(e,i){var s=this.list.querySelector(".e-virtual-ddl-content"),r=this.list.querySelector(".e-virtual-list");if(s&&(!r||e)&&this.isVirtualizationEnabled){for(var n=e?i:this.skeletonCount,o=0;o<n;o++){var l=this.createElement("li",{className:B.virtualList,styles:"overflow: inherit"});this.isVirtualizationEnabled&&this.itemTemplate&&(l.style.height=this.listItemHeight-parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)+"px");var h=new yp({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text"});h.appendTo(this.createElement("div")),l.appendChild(h.element),s.firstChild&&s.firstChild.insertBefore(l,s.firstChild.children[0])}if(this.getModuleName()==="multiselect"&&!this.isVirtualReorder&&!s.firstChild.classList.contains("e-reorder")){for(var o=0;o<n&&this.totalItemCount!==this.viewPortInfo.endIndex;o++){var l=this.createElement("li",{className:B.virtualList+" e-virtual-list-end",styles:"overflow: inherit"});this.isVirtualizationEnabled&&this.itemTemplate&&(l.style.height=this.listItemHeight-parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)+"px");var h=new yp({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text-end"});h.appendTo(this.createElement("div")),l.appendChild(h.element),s.firstChild&&s.firstChild.appendChild(l)}this.totalItemCount===this.viewPortInfo.endIndex&&s.querySelectorAll(".e-virtual-list-end").forEach(function(p){return p.remove()})}}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){var i=this.checkValueCase(e,!1,!1,!0);return i},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var i=void 0;if(this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?i=this.typeOfData(this.properties.value):i=this.typeOfData(this.listData),!u(i.item)&&typeof H(this.fields.value?this.fields.value:"value",i.item)=="number"||i.typeof==="number")return parseFloat(e);if(!u(i.item)&&typeof H(this.fields.value?this.fields.value:"value",i.item)=="boolean"||i.typeof==="boolean")return e==="true"||""+e=="true"}return e},t.prototype.setEnableRtl=function(){u(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?x(this.enableRtlElements,B.rtl):R(this.enableRtlElements,B.rtl))},t.prototype.initialize=function(e){if(this.bindEvent=!0,this.preventPopupOpen=!0,this.actionFailureTemplateId=""+this.element.id+sb,this.element.tagName==="UL"){var i=St.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(i,this.fields)}else if(this.element.tagName==="SELECT"){var s=this.dataSource instanceof Array?this.dataSource.length>0:!u(this.dataSource);s?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,e)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.updateDataAttribute=function(e){for(var i=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],s={},r=0;r<this.element.attributes.length;r++)i.indexOf(this.element.attributes[r].name)===-1&&!(this.getModuleName()==="dropdownlist"&&this.element.attributes[r].name==="readonly")&&(s[this.element.attributes[r].name]=this.element.getAttribute(this.element.attributes[r].name));$(s,e,s),this.setProperties({htmlAttributes:s},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,i=e.querySelectorAll("select>optgroup"),s,r=this.getModuleName()==="multiselect"&&this.isGroupChecking&&i.length>0;s=r?{value:"value",text:"text",groupBy:"categeory"}:s={value:"value",text:"text"};var n=[],o=e.querySelectorAll("select>option");if(this.getJSONfromOption(n,o,s),i.length){for(var l=0;l<i.length;l++){var h=i[l],p={};p[s.text]=h.label,p.isHeader=!0;var c=h.querySelectorAll("option");r?this.getJSONfromOption(n,c,s,h.label):(n.push(p),this.getJSONfromOption(n,c,s))}e.querySelectorAll("select>option")}this.updateFields(s.text,s.value,r?s.groupBy:this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss,this.fields.disabled),this.resetList(n,s)},t.prototype.updateFields=function(e,i,s,r,n,o){var l={fields:{text:e,value:i,groupBy:u(s)?this.fields&&this.fields.groupBy:s,htmlAttributes:u(r)?this.fields&&this.fields.htmlAttributes:r,iconCss:u(n)?this.fields&&this.fields.iconCss:n,disabled:u(o)?this.fields&&this.fields.disabled:o}};this.setProperties(l,!0)},t.prototype.getJSONfromOption=function(e,i,s,r){r===void 0&&(r=null);for(var n=0,o=i;n<o.length;n++){var l=o[n],h={};h[s.text]=l.innerHTML,h[s.value]=u(l.getAttribute(s.value))?l.innerHTML:l.getAttribute(s.value),u(r)||(h[s.groupBy]=r),e.push(h)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=""+this.element.id+Xy,this.displayTemplateId=""+this.element.id+Qy,this.spinnerTemplateId=""+this.element.id+$y,this.valueTemplateId=""+this.element.id+Jy,this.groupTemplateId=""+this.element.id+Zy,this.headerTemplateId=""+this.element.id+eb,this.footerTemplateId=""+this.element.id+tb,this.noRecordsTemplateId=""+this.element.id+ib},t.prototype.setListData=function(e,i,s,r){var n=this;i=i||this.fields;var o;this.isActive=!0;var l={cancel:!1,data:e,query:s};this.isPreventChange=this.isAngular&&this.preventChange?!0:this.isPreventChange,this.isRequesting||this.trigger("actionBegin",l,function(h){if(!h.cancel)if(n.isRequesting=!0,n.showSpinner(),e instanceof N){n.isRequested=!0;var p=!1;if(n.isDataFetched){n.emptyDataRequest(i);return}var c=n.getQuery(h.query);h.data.executeQuery(c).then(function(I){n.isPreventChange=n.isAngular&&n.preventChange?!0:n.isPreventChange;var A=!0;if(!n.virtualSelectAll){for(var T=c.clone(),L=0;L<T.queries.length;L++)T.queries[L].fn==="onWhere"&&(p=!0);if(n.isVirtualizationEnabled&&I.count!==0&&I.count<n.itemCount*2){if(T)for(var L=0;L<T.queries.length;L++)T.queries[L].fn==="onTake"&&(T.queries[L].e.nos=I.count),n.getModuleName()==="multiselect"&&(T.queries[L].e.condition==="or"||T.queries[L].e.operator==="equal")&&!n.isCustomFiltering&&(A=!1)}else if(n.isVirtualTrackHeight=!1,T)for(var L=0;L<T.queries.length;L++)n.getModuleName()==="multiselect"&&(T.queries[L].e&&T.queries[L].e.condition==="or"||T.queries[L].e&&T.queries[L].e.operator==="equal")&&(A=!1)}A&&(n.dataCount=n.totalItemCount=I.count),n.trigger("actionComplete",I,function(_){if(!_.cancel){n.isRequesting=!1,n.isCustomFiltering=!1;var X=_.result;if(n.isIncrementalRequest){o=n.renderItems(X,i);return}if((!n.isVirtualizationEnabled&&X.length===0||n.isVirtualizationEnabled&&X.length===0&&!p)&&(n.isDataFetched=!0),p||(n.remoteDataCount=_.count),n.dataCount=n.virtualSelectAll?n.dataCount:_.count,n.totalItemCount=n.virtualSelectAll?n.totalItemCount:_.count,o=n.renderItems(X,i),n.appendUncheckList=!1,n.isUpdateGroupTemplate=!1,n.onActionComplete(o,X,_),n.groupTemplate&&(n.isAngular&&n.getModuleName()==="multiselect"&&n.updateGroupHeaderItems(o),n.renderGroupTemplate(o)),n.isUpdateGroupTemplate=!0,n.isRequested=!1,n.bindChildItems(X,o,i,_),n.getInitialData){n.getInitialData=!1,n.preventPopupOpen=!1;return}var re=!1;n.isVirtualizationEnabled&&n.setCurrentView&&(re=!0,n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),n.keyboardEvent!=null&&n.handleVirtualKeyboardActions(n.keyboardEvent,n.pageCount);var ye=n.getModuleName()!=="multiselect"||n.getModuleName()==="multiselect"&&(!(n.dataSource instanceof N)||n.dataSource instanceof N&&!re);n.isVirtualizationEnabled&&ye&&(n.getFilteringSkeletonCount(),n.updatePopupPosition()),n.virtualSelectAll&&n.virtualSelectAllData&&(n.virtualSelectionAll(n.virtualSelectAllState,n.liCollections,n.CurrentEvent),n.virtualSelectAllState=!1,n.CurrentEvent=null,n.virtualSelectAll=!1)}})}).catch(function(I){n.isRequested=!1,n.isRequesting=!1,n.onActionFailure(I),n.hideSpinner()})}else{n.isRequesting=!1;var d=!0,f=void 0;if(n.isVirtualizationEnabled&&!n.virtualGroupDataSource&&n.fields.groupBy){var g=new N(n.dataSource).executeLocal(new se().group(n.fields.groupBy));n.virtualGroupDataSource=g.records}var y=n.isVirtualizationEnabled&&n.virtualGroupDataSource&&!n.isCustomDataUpdated?new N(n.virtualGroupDataSource):new N(h.data);if(f=n.getQuery(h.query).executeLocal(y),!n.virtualSelectAll){var b=n.getQuery(h.query);if(n.isVirtualizationEnabled&&f.count!==0&&f.count<n.itemCount*2&&!n.appendUncheckList){if(b){for(var C=0;C<b.queries.length;C++)b.queries[C].fn==="onTake"&&(b.queries[C].e.nos=f.count,f=b.executeLocal(y)),n.getModuleName()==="multiselect"&&(b.queries[C].e.condition==="or"||b.queries[C].e.operator==="equal")&&!n.isCustomFiltering&&(d=!1);d&&(f=b.executeLocal(y),n.isVirtualTrackHeight=!(n.dataSource instanceof N)&&!n.isCustomDataUpdated)}}else if(n.isVirtualTrackHeight=!1,b)for(var C=0;C<b.queries.length;C++)n.getModuleName()==="multiselect"&&(b.queries[C].e&&b.queries[C].e.condition==="or"||b.queries[C].e&&b.queries[C].e.operator==="equal")&&(d=!1)}d&&!(n.dataSource instanceof N)&&!n.isCustomDataUpdated&&!n.virtualSelectAll&&(n.dataCount=n.totalItemCount=n.virtualSelectAll?f.length:f.count),f=n.isVirtualizationEnabled?f.result:f;var S={cancel:!1,result:f};n.isPreventChange=n.isAngular&&n.preventChange?!0:n.isPreventChange,n.trigger("actionComplete",S,function(I){if(n.isCustomFiltering=!1,n.isIncrementalRequest){o=n.renderItems(I.result,i);return}if(!I.cancel){if(o=n.renderItems(I.result,i),n.isUpdateGroupTemplate=!1,n.onActionComplete(o,I.result,r),n.groupTemplate&&(n.isAngular&&n.getModuleName()==="multiselect"&&n.updateGroupHeaderItems(o),n.renderGroupTemplate(o)),n.isUpdateGroupTemplate=!0,n.bindChildItems(I.result,o,i),n.getInitialData){n.getInitialData=!1,n.preventPopupOpen=!1;return}setTimeout(function(){n.getModuleName()==="multiselect"&&n.itemTemplate!=null&&o.childElementCount>0&&(o.children[0].childElementCount>0||n.fields.groupBy&&o.children[1]&&o.children[1].childElementCount>0)&&n.updateDataList()})}})}})},t.prototype.updateGroupHeaderItems=function(e){for(var i=e.querySelectorAll("."+B.group),s=[],r=0;r<i.length;r++)s.push(i[r].cloneNode?i[r].cloneNode(!0):i[r]);this.isFilterAction?this.fiteredGroupHeaderItems=s:this.groupHeaderItems=s},t.prototype.setCustomListData=function(e,i,s,r){var n=this;i=i||this.fields;var o;if(this.isActive=!0,this.isPreventChange=this.isAngular&&this.preventChange?!0:this.isPreventChange,!this.isRequesting){this.isRequesting=!0,this.showSpinner(),this.isRequesting=!1;var l=!0,h=void 0;if(this.isVirtualizationEnabled&&!this.virtualGroupDataSource&&this.fields.groupBy){var p=new N(this.dataSource).executeLocal(new se().group(this.fields.groupBy));this.virtualGroupDataSource=p.records}var c=this.isVirtualizationEnabled&&this.virtualGroupDataSource&&!this.isCustomDataUpdated?new N(this.virtualGroupDataSource):new N(e);if(h=this.getQuery(s).executeLocal(c),!this.virtualSelectAll){var d=this.getQuery(s);if(this.isVirtualizationEnabled&&h.count!==0&&h.count<this.itemCount*2&&!this.appendUncheckList){if(d){for(var f=0;f<d.queries.length;f++)d.queries[f].fn==="onTake"&&(d.queries[f].e.nos=h.count,h=d.executeLocal(c)),this.getModuleName()==="multiselect"&&(d.queries[f].e.condition==="or"||d.queries[f].e.operator==="equal")&&!this.isCustomFiltering&&(l=!1);l&&(h=d.executeLocal(c),this.isVirtualTrackHeight=!(this.dataSource instanceof N)&&!this.isCustomDataUpdated)}}else if(this.isVirtualTrackHeight=!1,d)for(var f=0;f<d.queries.length;f++)this.getModuleName()==="multiselect"&&(d.queries[f].e&&d.queries[f].e.condition==="or"||d.queries[f].e&&d.queries[f].e.operator==="equal")&&(l=!1)}if(l&&!(this.dataSource instanceof N)&&!this.isCustomDataUpdated&&!this.virtualSelectAll&&(this.dataCount=this.totalItemCount=this.virtualSelectAll?h.length:h.count),h=this.isVirtualizationEnabled?h.result:h,this.isPreventChange=this.isAngular&&this.preventChange?!0:this.isPreventChange,this.isCustomFiltering=!1,this.isIncrementalRequest){o=this.renderItems(h,i);return}o=this.renderItems(h,i),this.onActionComplete(o,h,r),this.groupTemplate&&this.renderGroupTemplate(o),this.bindChildItems(h,o,i),setTimeout(function(){n.getModuleName()==="multiselect"&&n.itemTemplate!=null&&o.childElementCount>0&&(o.children[0].childElementCount>0||n.fields.groupBy&&o.children[1]&&o.children[1].childElementCount>0)&&n.updateDataList()})}},t.prototype.handleVirtualKeyboardActions=function(e,i){},t.prototype.updatePopupState=function(){},t.prototype.updatePopupPosition=function(){},t.prototype.virtualSelectionAll=function(e,i,s){},t.prototype.updateRemoteData=function(){this.setListData(this.dataSource,this.fields,this.query)},t.prototype.bindChildItems=function(e,i,s,r){var n=this;e.length>=100&&this.getModuleName()==="autocomplete"?setTimeout(function(){var o=n.remainingItems(n.sortedData,s);Ie(o,i),n.liCollections=n.list.querySelectorAll("."+B.li),n.updateListValues(),n.raiseDataBound(e,r)},0):this.raiseDataBound(e,r)},t.prototype.isObjectInArray=function(e,i){return i.some(function(s){return Object.keys(e).every(function(r){return Object.prototype.hasOwnProperty.call(s,r)&&s[r]===e[r]})})},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,i,s,r){var n=null;if(e){for(var o=[].slice.call(e.querySelectorAll(i)),l=0;l<o.length;l++)if(o[l].getAttribute(s)===r+""){n=o[l];break}}return n},t.prototype.raiseDataBound=function(e,i){this.hideSpinner();var s={items:e,e:i};this.trigger("dataBound",s)},t.prototype.remainingItems=function(e,i){var s=new N(e).executeLocal(new se().skip(100));if(this.itemTemplate){var r=this.templateListItem(s,i);return[].slice.call(r.childNodes)}var n=this.typeOfData(s).typeof;return n==="string"||n==="number"||n==="boolean"?St.createListItemFromArray(this.createElement,s,!0,this.listOption(s,i),this):St.createListItemFromJson(this.createElement,s,this.listOption(s,i),1,!0,this)},t.prototype.emptyDataRequest=function(e){var i=[];this.onActionComplete(this.renderItems(i,e),i),this.isRequested=!1,this.isRequesting=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),u(this.list)||x([this.list],B.noData)},t.prototype.onActionComplete=function(e,i,s){var r=this;if(this.listData=i,this.isVirtualizationEnabled&&!this.isCustomDataUpdated&&!this.virtualSelectAll&&this.notify("setGeneratedData",{module:"VirtualScroll"}),this.getModuleName()!=="listbox"&&e.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.isVirtualizationEnabled||(this.fixedHeaderElement=u(this.fixedHeaderElement)?this.fixedHeaderElement:null),this.getModuleName()==="multiselect"&&this.properties.allowCustomValue&&this.fields.groupBy)for(var n=0;n<e.childElementCount;n++)e.children[n].classList.contains("e-list-group-item")&&(u(e.children[n].innerHTML)||e.children[n].innerHTML==="")&&x([e.children[n]],rb),e.children[0].classList.contains("e-hide-group-header")&&At(e.children[1],{zIndex:11});if(this.getModuleName()==="multiselect"&&this.isAngular&&this.ngEle){var o=this.list;if(o){var l=o.offsetHeight+"px";o.style.height=l}}if(!u(this.list)&&!this.isVirtualizationEnabled){if(this.list.innerHTML="",this.isUpdateGroupTemplate&&this.isAngular&&this.groupTemplate&&this.getModuleName()==="multiselect"){var h=e.querySelectorAll("."+B.group);if(h.length>0&&this.groupHeaderItems.length>0){for(var p={},n=0;n<this.groupHeaderItems.length;n++)p[this.groupHeaderItems[n].id]=this.groupHeaderItems[n].innerHTML;for(var n=0;n<h.length;n++)Object.prototype.hasOwnProperty.call(p,h[n].id)&&(h[n].innerHTML=p[h[n].id])}this.renderGroupTemplate(e)}this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+B.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent)}if(this.getModuleName()==="multiselect"&&this.isAngular&&this.ngEle){var c=this.list;c&&setTimeout(function(){c.style.height="",r.refreshPopup()},0)}},t.prototype.postRender=function(e,i,s){if(this.fields.disabled){for(var r=e.querySelectorAll("."+B.li),n=this.sortOrder!=="None"?u(this.fields.groupBy)?this.sortedData:this.sortedData.filter(function(g){return!("isHeader"in g)||g.isHeader!==!0}):this.listData,o=0;o<r.length;o++)if(JSON.parse(JSON.stringify(n[o]))[this.fields.disabled])if(u(this.fields.groupBy))this.disableListItem(r[o]);else{var l=n[o],h=H(this.fields.value?this.fields.value:"value",l),p=e.querySelector('li[data-value="'+h+'"]');u(p)||this.disableListItem(p)}}var c=this.fields.disabled?e.querySelector("."+B.li+":not(.e-disabled"):e.querySelector("."+B.li),d=e.querySelector("."+B.selected);if(c&&!d){if(this.isVirtualizationEnabled&&this.viewPortInfo.startIndex!==0){var f=this.ulElement.querySelectorAll("li."+B.li+":not(.e-virtual-list):not(.e-hide-listitem)");c=f&&f.length>0?f[2]:c}c&&c.classList.add(B.focus)}i.length<=0?(this.l10nUpdate(),x([e],B.noData)):e.classList.remove(B.noData)},t.prototype.getQuery=function(e){return e||(this.query?this.query:new se)},t.prototype.performFiltering=function(e){},t.prototype.debouncedFiltering=function(e,i){var s=this;this.debounceTimer!==null&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){s.performFiltering(e)},i)},t.prototype.updateVirtualizationProperties=function(e,i,s){this.isVirtualizationEnabled=!0,this.virtualizedItemsCount=e,this.isAllowFiltering=i,this.isCheckBoxSelection=s},t.prototype.renderGroupTemplate=function(e){if(this.fields.groupBy!==null&&this.dataSource||this.element.querySelector("."+B.group)){var i=this.dataSource,s={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},r=this.isAngular&&this.getModuleName()==="multiselect"&&!u(e)&&e.classList.contains(B.fixedHead)?[e]:e.querySelectorAll("."+B.group),n=this.templateCompiler(this.groupTemplate);if(typeof this.groupTemplate!="function"&&n){var o=Me(this.groupTemplate,document).innerHTML.trim(),l=St.renderGroupTemplate(o,i,this.fields.properties,r,s,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else{var l=St.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,r,s,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}this.renderReactTemplates()}},t.prototype.createListItems=function(e,i){if(e){if(i.groupBy||this.element.querySelector("optgroup")){if(i.groupBy){this.sortOrder!=="None"&&(e=this.getSortedDataSource(e));var s=i.properties||i;e=St.groupDataSource(e,s,this.sortOrder)}x([this.list],B.grouping)}else(this.getModuleName()!=="listbox"||this.getModuleName()==="listbox"&&!this.preventDefActionFilter)&&(e=this.getSortedDataSource(e));var r=this.listOption(e,i),n=e.length>100?new N(e).executeLocal(new se().take(100)):e;return this.sortedData=e,St.createList(this.createElement,this.getModuleName()==="autocomplete"?n:e,r,!0,this)}return null},t.prototype.listOption=function(e,i){var s=!u(i.iconCss),r=u(i.properties)?i:i.properties,n=i.text!==null||i.value!==null?{fields:r,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return $({},n,i,!0)},t.prototype.setFloatingHeader=function(e){!u(this.list)&&!this.list.classList.contains(B.noData)&&(u(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:B.fixedHead}),!u(this.list)&&!this.list.querySelector("li").classList.contains(B.group)&&(this.fixedHeaderElement.style.display="none"),!u(this.fixedHeaderElement)&&!u(this.list)&&Ot([this.fixedHeaderElement],this.list),this.setFixedHeader()),!u(this.fixedHeaderElement)&&this.fixedHeaderElement.style.zIndex==="0"&&this.setFixedHeader(),this.scrollStop(e))},t.prototype.scrollStop=function(e,i){for(var s=u(e)?this.list:e.target,r=getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),n=getComputedStyle(this.getValidLi(),null).getPropertyValue("margin-bottom"),o=parseInt(n,10),l=this.getModuleName()==="multiselect"?parseFloat(r):parseInt(r,10),h=Math.round(s.scrollTop/(l+o)),p=this.list.querySelectorAll("li:not(.e-hide-listitem)"),c=this.list.querySelectorAll(".e-virtual-list").length,d=h;d>-1;d--){var f=this.isVirtualizationEnabled?d+c:d;if(this.isVirtualizationEnabled){if(this.fixedHeaderElement&&this.updateGroupHeader(f,p,s))break;i&&(!u(p[f])&&p[f].classList.contains(B.selected)&&this.getModuleName()!=="autocomplete"||!u(p[f])&&p[f].classList.contains(B.focus)&&this.getModuleName())}else if(this.updateGroupHeader(f,p,s))break}},t.prototype.getPageCount=function(e){if(this.list){var i=this.list.classList.contains(B.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height"),s=Math.round(this.list.getBoundingClientRect().height/parseInt(i,10));return e?s:Math.round(s)}else return 0},t.prototype.updateGroupHeader=function(e,i,s){return!u(i[e])&&i[e].classList.contains(B.group)?(this.updateGroupFixedHeader(i[e],s),!0):(this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none",!1)},t.prototype.updateFixedGroupTemplateHader=function(e){var i=e.cloneNode?e.cloneNode(!0):e,s=!1;if(this.groupHeaderItems&&this.groupHeaderItems.length>0){for(var r=0;r<this.groupHeaderItems.length;r++)if(i.id===this.groupHeaderItems[r].id){i.innerHTML=this.groupHeaderItems[r].innerHTML,s=!0;break}}if(!s&&this.fiteredGroupHeaderItems&&this.fiteredGroupHeaderItems.length>0){for(var r=0;r<this.fiteredGroupHeaderItems.length;r++)if(i.id===this.fiteredGroupHeaderItems[r].id){i.innerHTML=this.fiteredGroupHeaderItems[r].innerHTML;break}}this.fixedHeaderElement.innerHTML=i.innerHTML,this.renderGroupTemplate(this.fixedHeaderElement)},t.prototype.updateGroupFixedHeader=function(e,i){this.fixedHeaderElement&&this.list&&this.list.parentElement&&(u(e.innerHTML)||(this.groupTemplate&&this.isAngular&&this.getModuleName()==="multiselect"?this.updateFixedGroupTemplateHader(e):this.fixedHeaderElement.innerHTML=e.innerHTML),this.fixedHeaderElement.style.position="fixed",this.fixedHeaderElement.style.top=this.list.parentElement.offsetTop+this.list.offsetTop-window.scrollY+"px",this.fixedHeaderElement.style.display="block")},t.prototype.getValidLi=function(){return this.isVirtualizationEnabled?this.liCollections[0].classList.contains("e-virtual-list")?this.liCollections[this.skeletonCount]:this.liCollections[0]:this.liCollections[0]},t.prototype.renderItems=function(e,i,s,r){var n;if(this.itemTemplate&&e){this.getModuleName()==="multiselect"&&this.virtualSelectAll&&(this.virtualSelectAllData=e,e=e.slice(this.virtualItemStartIndex,this.virtualItemEndIndex));var o=e;o&&i.groupBy?(this.sortOrder!=="None"&&(o=this.getSortedDataSource(o)),o=St.groupDataSource(o,i.properties,this.sortOrder)):(this.getModuleName()!=="listbox"||this.getModuleName()==="listbox"&&!this.preventDefActionFilter)&&(o=this.getSortedDataSource(o)),this.sortedData=o;var l=o.length>100?new N(o).executeLocal(new se().take(100)):o;if(n=this.templateListItem(this.getModuleName()==="autocomplete"?l:o,i),this.isIncrementalRequest)return this.incrementalLiCollections=n.querySelectorAll("."+B.li),this.incrementalUlElement=n,this.incrementalListData=e,n;if(this.isVirtualizationEnabled){var h=this.list.querySelector(".e-list-parent"),p=this.list.querySelector(".e-virtual-ddl-content");if(e.length>=this.virtualizedItemsCount&&h&&p||h&&p&&this.isAllowFiltering||h&&p&&this.getModuleName()==="autocomplete"){this.getModuleName()==="multiselect"&&this.isCheckBoxSelection&&this.appendUncheckList&&this.list&&this.list.querySelector(".e-active")?(p.appendChild(n),s=!0):p.replaceChild(n,h);var c=this.list.querySelectorAll(".e-reorder");this.list.querySelector(".e-virtual-ddl-content")&&c&&c.length>0&&!s&&this.list.querySelector(".e-virtual-ddl-content").removeChild(c[0]),this.updateListElements(e)}else p||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(n),this.updateListElements(e))}}else{if(this.getModuleName()==="multiselect"&&this.virtualSelectAll&&!r&&(this.virtualSelectAllData=e,e=e.slice(this.virtualItemStartIndex,this.virtualItemEndIndex)),n=this.createListItems(e,i),this.isIncrementalRequest)return this.incrementalLiCollections=n.querySelectorAll("."+B.li),this.incrementalUlElement=n,this.incrementalListData=e,n;if(this.isVirtualizationEnabled){var h=this.list.querySelector(".e-list-parent:not(.e-reorder)"),p=this.list.querySelector(".e-virtual-ddl-content"),d=!1;(!h&&this.list.querySelector(".e-list-parent.e-reorder")||h&&this.isVirtualReorder&&this.list.querySelector(".e-list-parent.e-reorder"))&&(h=this.list.querySelector(".e-list-parent.e-reorder")),e.length>=this.virtualizedItemsCount&&h&&p||h&&p&&this.isAllowFiltering||h&&p&&(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")||d?((this.getModuleName()!=="multiselect"||this.getModuleName()==="multiselect"&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&!this.setCurrentView))&&(this.appendUncheckList?p.appendChild(n):p.replaceChild(n,h)),this.updateListElements(e)):(!p||!p.firstChild)&&(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(n),this.updateListElements(e))}}return n},t.prototype.createVirtualContent=function(){this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content"}))},t.prototype.updateListElements=function(e){this.liCollections=this.list.querySelectorAll("."+B.li),this.ulElement=this.list.querySelector("ul"),this.listData=e,this.postRender(this.list,e,this.bindEvent)},t.prototype.templateListItem=function(e,i){var s=this.listOption(e,i);s.templateID=this.itemTemplateId,s.isStringTemplate=this.isStringTemplate;var r=this.templateCompiler(this.itemTemplate),n;if(typeof this.itemTemplate!="function"&&r){var o=Me(this.itemTemplate,document).innerHTML.trim();return n=St.renderContentTemplate(this.createElement,o,e,i.properties,s,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),n}else return n=St.renderContentTemplate(this.createElement,this.itemTemplate,e,i.properties,s,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),n},t.prototype.typeOfData=function(e){for(var i={typeof:null,item:null},s=0;!u(e)&&s<e.length;s++)if(!u(e[s])){var r=typeof e[s]=="string"||typeof e[s]=="number"||typeof e[s]=="boolean",n=r?u(e[s]):u(H(this.fields.value?this.fields.value:"value",e[s]));if(!n)return i={typeof:typeof e[s],item:e[s]}}return i},t.prototype.setFixedHeader=function(){u(this.list)||(this.list.parentElement.style.display="block");var e=0;if(this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))){var i=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10),s=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10),r=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10),n=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10);e=i+s+r+n}if(!u(this.liCollections)){var o=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=o.toString()+"px"}At(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+B.group+":not(.e-hide-listitem)");u(l)||(this.groupTemplate&&this.isAngular&&this.getModuleName()==="multiselect"?this.updateFixedGroupTemplateHader(l):this.fixedHeaderElement.innerHTML=l.innerHTML)},t.prototype.getSortedDataSource=function(e){if(e&&this.sortOrder!=="None"){var i=this.fields.text?this.fields.text:"text";(this.typeOfData(e).typeof==="string"||this.typeOfData(e).typeof==="number"||this.typeOfData(e).typeof==="boolean")&&(i=""),e=St.getDataSource(e,St.addSorting(this.sortOrder,i))}return e},t.prototype.getIndexByValue=function(e){var i,s=[];this.fields.disabled&&this.getModuleName()==="multiselect"&&this.liCollections?s=this.liCollections:s=this.getItems();for(var r=0;r<s.length;r++)if(!u(e)&&s[r].getAttribute("data-value")===e.toString()){i=r;break}return i},t.prototype.getIndexByValueFilter=function(e,i){var s;if(!i)return null;var r=i.querySelectorAll("li:not(.e-list-group-item)");if(r){for(var n=0;n<r.length;n++)if(!u(e)&&r[n].getAttribute("data-value")===e.toString()){s=n;break}}return s},t.prototype.dispatchEvent=function(e,i){var s=document.createEvent("HTMLEvents");s.initEvent(i,!1,!0),e&&e.dispatchEvent(s)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&(this.isPrimitiveData=!0,this.updateFields("text","text"))},t.prototype.resetList=function(e,i,s,r){if(this.list){if(this.element.tagName==="SELECT"&&this.element.options.length>0||this.element.tagName==="UL"&&this.element.childNodes.length>0){var n=e instanceof Array?e.length>0:!u(e);!n&&this.selectData&&this.selectData.length>0&&(e=this.selectData)}e=this.getModuleName()==="combobox"&&this.selectData&&e instanceof Array&&e.length<this.selectData.length&&this.addedNewItem?this.selectData:e,this.addedNewItem=!1,this.isCustomReset&&this.getModuleName()==="multiselect"?this.setCustomListData(e,i,s,r):this.setListData(e,i,s,r)}},t.prototype.updateSelectElementData=function(e){(e||this.isVirtualizationEnabled)&&u(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e,i){this.resetList(this.dataSource),this.totalItemCount=this.dataSource instanceof N?this.dataSource.dataSource.json.length:0},t.prototype.setUpdateInitial=function(e,i,s){this.isDataFetched=!1,this.isPrimitiveData=!1;for(var r={},n=0;e.length>n;n++)i[e[n]]&&e[n]==="fields"?(this.setFields(),r[e[n]]=i[e[n]]):i[e[n]]&&(r[e[n]]=i[e[n]]);Object.keys(r).length>0&&(Object.keys(r).indexOf("dataSource")===-1&&(r.dataSource=this.dataSource),this.getModuleName()==="listbox"?(!this.isReact||this.isReact&&(!u(i.dataSource)||!u(i.sortOrder)))&&this.updateDataSource(r,s):(this.isDynamicData=!0,this.updateDataSource(r,s)))},t.prototype.onPropertyChanged=function(e,i){this.getModuleName()==="dropdownbase"&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var o=this.ulElement.querySelector("."+B.group);this.fixedHeaderElement.innerHTML=o.innerHTML}break;case"locale":this.list&&!u(this.liCollections)&&this.liCollections.length===0&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex();break}}},t.prototype.render=function(e,i){this.getModuleName()==="listbox"?this.list=this.createElement("div",{className:B.content,attrs:{tabindex:"0"}}):this.list=this.createElement("div",{className:B.content}),this.list.classList.add(B.root),this.setFields();var s={duration:300,selector:"."+B.li};this.rippleFun=ts(this.list,s);var r=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!u(r))&&!this.isGroupChecking){v.add(this.list,"scroll",this.setFloatingHeader,this);for(var n=this.getScrollableParent(),o=0;o<n.length;o++){var l=n[o];v.add(l,"scroll",this.updateGroupFixedHeader,this)}}if(this.getModuleName()==="dropdownbase"){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),R([this.element],B.root),this.element.style.display="none";var h=this.createElement("div");this.element.parentElement.insertBefore(h,this.element),h.appendChild(this.element),h.appendChild(this.list)}this.setEnableRtl(),i||this.initialize(e)},t.prototype.getScrollableParent=function(){for(var e=getComputedStyle(this.element),i=[],s=/(auto|scroll)/,r=this.element.parentElement;r&&r.tagName!=="HTML";){var n=getComputedStyle(r);!(e.position==="absolute"&&n.position==="static")&&s.test(n.overflow+n.overflowY+n.overflowX)&&i.push(r),r=r.parentElement}return i.push(document),i},t.prototype.removeScrollEvent=function(){this.list&&v.remove(this.list,"scroll",this.setFloatingHeader)},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+B.li)},t.prototype.addItem=function(e,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&this.getModuleName()!=="listbox")&&this.renderList(),this.sortOrder!=="None"&&u(i)){var s=[].slice.call(this.listData);s.push(e),s=this.getSortedDataSource(s),this.fields.groupBy&&(s=St.groupDataSource(s,this.fields.properties,this.sortOrder)),i=s.indexOf(e)}var r=this.getItems().length,n=r===0,o=this.list.querySelector("."+B.selected);e=e instanceof Array?e:[e];var l;l=u(i)||i<0||i>r-1?r:i;var h=this.fields;e&&h.groupBy&&(e=St.groupDataSource(e,h.properties));for(var p=[],c=0;c<e.length;c++){var d=e[c],f=d.isHeader,g=this.createElement("li",{className:f?B.group:B.li,id:"option-add-"+c}),y=d instanceof Object?H(h.text,d):d;if(f&&(g.innerText=y),this.itemTemplate&&!f){var b=this.templateCompiler(this.itemTemplate),C=typeof this.itemTemplate!="function"&&b?qe(Me(this.itemTemplate,document).innerHTML.trim()):qe(this.itemTemplate),S=C(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,g);S&&Ie(S,g)}else f||g.appendChild(document.createTextNode(y));g.setAttribute("data-value",d instanceof Object?H(h.value,d):d),g.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:g}),p.push(g),this.getModuleName()==="listbox"?(this.listData.splice(n?this.listData.length:l,0,d),this.listData.length!==this.sortedData.length&&(this.sortedData=this.listData)):this.listData.push(d),this.sortOrder==="None"&&u(i)&&l===0&&(l=null),this.getModuleName()==="listbox"?this.updateActionCompleteData(g,d,n?null:l+c):this.updateActionCompleteData(g,d,l),this.trigger("beforeItemRender",{element:g,item:d})}if(r===0&&u(this.list.querySelector("ul")))u(this.list)||(this.list.innerHTML="",this.list.classList.remove(B.noData),this.isAddNewItemTemplate=!0,u(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=p,!u(p)&&!u(this.ulElement)&&Ie(p,this.ulElement),this.updateAddItemList(this.list,r);else{this.getModuleName()==="listbox"&&r===0&&(this.ulElement.innerHTML="");for(var I=[],c=0;c<e.length;c++){for(var A=this.ulElement.querySelectorAll(".e-list-group-item"),T=0;T<A.length;T++)I[T]=A[T].innerText;if(I.indexOf(p[c].innerText)>-1&&h.groupBy){for(var T=0;T<A.length;T++)if(I[T]===p[c].innerText){this.sortOrder==="None"?this.ulElement.insertBefore(p[c+1],A[T+1]):this.ulElement.insertBefore(p[c+1],this.ulElement.childNodes[i]),c=c+1;break}}else this.liCollections[l]&&this.liCollections[l].parentNode?this.liCollections[l].parentNode.insertBefore(p[c],this.liCollections[l]):i&&this.getModuleName()==="listbox"?this.ulElement.insertBefore(p[c],this.ulElement.childNodes[i+c]):this.ulElement.appendChild(p[c]);var L=[].slice.call(this.liCollections);L.splice(l,0,p[c]),this.liCollections=L,l+=1,this.getModuleName()==="multiselect"&&this.updateDataList()}}this.getModuleName()==="listbox"&&this.isReact&&this.renderReactTemplates(),(o||i===0)&&this.updateSelection(),this.addedNewItem=!0},t.prototype.isDisabledElement=function(e){return!!(e&&e.classList.contains("e-disabled"))},t.prototype.isDisabledItemByIndex=function(e){return this.fields.disabled&&this.liCollections?this.isDisabledElement(this.liCollections[e]):!1},t.prototype.disableListItem=function(e){e.classList.add("e-disabled"),e.setAttribute("aria-disabled","true"),e.setAttribute("aria-selected","false")},t.prototype.validationAttribute=function(e,i){var s=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",s),e.removeAttribute("name");for(var r=["required","aria-required","form"],n=0;n<r.length;n++)if(e.getAttribute(r[n])){var o=e.getAttribute(r[n]);i.setAttribute(r[n],o),e.removeAttribute(r[n])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,i,s){},t.prototype.updateAddItemList=function(e,i){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!u(this.listData)){var i=this.typeOfData(this.listData).typeof;if(i==="string"||i==="number"||i==="boolean")for(var s=0,r=this.listData;s<r.length;s++){var n=r[s];if(!u(n)&&n===e)return n}else for(var o=0,l=this.listData;o<l.length;o++){var n=l[o];if(!u(n)&&H(this.fields.value?this.fields.value:"value",n)===e)return n}}return null},t.prototype.destroy=function(){if(document){if(this.fields&&this.fields.groupBy)for(var e=this.getScrollableParent(),i=0;i<e.length;i++){var s=e[i];v.remove(s,"scroll",this.updateGroupFixedHeader)}document.body.contains(this.list)&&(v.remove(this.list,"scroll",this.setFloatingHeader),u(this.rippleFun)||this.rippleFun(),Z(this.list))}this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.groupHeaderItems=null,this.fiteredGroupHeaderItems=null,this.rippleFun=null,a.prototype.destroy.call(this)},$e([dt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},Th)],t.prototype,"fields",void 0),$e([m(null)],t.prototype,"itemTemplate",void 0),$e([m(null)],t.prototype,"groupTemplate",void 0),$e([m("No records found")],t.prototype,"noRecordsTemplate",void 0),$e([m("Request failed")],t.prototype,"actionFailureTemplate",void 0),$e([m("None")],t.prototype,"sortOrder",void 0),$e([m([])],t.prototype,"dataSource",void 0),$e([m(null)],t.prototype,"query",void 0),$e([m("StartsWith")],t.prototype,"filterType",void 0),$e([m(!0)],t.prototype,"ignoreCase",void 0),$e([m(1e3)],t.prototype,"zIndex",void 0),$e([m(!1)],t.prototype,"ignoreAccent",void 0),$e([m()],t.prototype,"locale",void 0),$e([O()],t.prototype,"actionBegin",void 0),$e([O()],t.prototype,"actionComplete",void 0),$e([O()],t.prototype,"actionFailure",void 0),$e([O()],t.prototype,"select",void 0),$e([O()],t.prototype,"dataBound",void 0),$e([O()],t.prototype,"created",void 0),$e([O()],t.prototype,"destroyed",void 0),t=$e([pt],t),t})(Vt),nb=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Pe=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},oe={root:"e-dropdownlist",selected:B.selected,li:B.li,disable:B.disabled,focus:B.focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",resizeIcon:"e-resizer-right e-icons",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},ab={container:null,buttons:[]},Fr=(function(a){nb(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.isListSearched=!1,s.preventChange=!1,s.isTouched=!1,s.isFocused=!1,s.autoFill=!1,s.isUpdateHeaderHeight=!1,s.isUpdateFooterHeight=!1,s.isReactTemplateUpdate=!1,s}return t.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),a.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isPopupRender=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"VirtualScroll"}),e},t.prototype.renderList=function(e,i){a.prototype.render.call(this,e,i),this.dataSource instanceof N||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.enableVirtualization&&this.isFiltering()&&this.getModuleName()==="combobox"&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+B.li),this.ulElement=this.list.querySelector("ul")),this.unWireListEvents(),this.wireListEvents()},t.prototype.floatLabelChange=function(){if(this.getModuleName()==="dropdownlist"&&this.floatLabelType==="Auto"){var e=this.inputWrapper.container.querySelector(".e-float-text");e&&this.inputElement.value!==""||this.isInteracted?Se(e,["e-label-top"],["e-label-bottom"]):e&&Se(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,this.getModuleName()!=="autocomplete"&&!u(this.ulElement)){var e=this.fields.disabled?this.ulElement.querySelector("."+oe.li+":not(.e-disabled)"):this.ulElement.querySelector("."+oe.li);this.enableVirtualization&&(e=this.liCollections[this.skeletonCount]),e&&e.classList.add(oe.focus)}},t.prototype.clearAll=function(e,i){this.previousItemData=u(this.itemData)?null:this.itemData,(u(i)||!u(i)&&(u(i.dataSource)||!(i.dataSource instanceof N)&&i.dataSource.length===0))&&(this.isActive=!0,this.resetSelection(i));var s=this.getItemData();if(!this.allowObjectBinding&&this.previousValue===s.value||this.allowObjectBinding&&this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom?this.value?this.value:s:s.value?this.getDataByValue(s.value):s])){this.checkAndResetCache(),this.enableVirtualization&&this.list&&this.updateInitialData();return}this.onChangeEvent(e),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData()},t.prototype.resetSelection=function(e){this.list&&(!u(e)&&(u(e.dataSource)||!(e.dataSource instanceof N)&&e.dataSource.length===0)?(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource)):(this.allowFiltering&&this.getModuleName()!=="autocomplete"&&!u(this.actionCompleteData.ulElement)&&!u(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement())),u(this.hiddenElement)||(this.hiddenElement.innerHTML=""),u(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(Z(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if(s==="class"){var r=this.htmlAttributes[""+s].replace(/\s+/g," ").trim();r!==""&&x([this.inputWrapper.container],r.split(" "))}else if(s==="disabled"&&this.htmlAttributes[""+s]==="disabled")this.enabled=!1,this.setEnable();else if(s==="readonly"&&!u(this.htmlAttributes[""+s]))this.readonly=!0,this.dataBind();else if(s==="style")this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+s]);else if(s==="aria-label")(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+s]):this.getModuleName()==="dropdownlist"&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+s]);else{var n=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],o=["name","required"];(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&n.push("tabindex"),o.indexOf(s)>-1||s.indexOf("data")===0?this.hiddenElement.setAttribute(s,this.htmlAttributes[""+s]):n.indexOf(s)>-1?s==="placeholder"&&this.element.getAttribute("placeholder")!==this.htmlAttributes[""+s]?W.setPlaceholder(this.htmlAttributes[""+s],this.inputElement):s!=="placeholder"&&this.inputElement.setAttribute(s,this.htmlAttributes[""+s]):this.inputWrapper.container.setAttribute(s,this.htmlAttributes[""+s])}}(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){!u(this.inputElement)&&!u(this.inputElement.parentElement)&&W.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){W.setEnabled(this.enabled,this.inputElement),this.enabled?(R([this.inputWrapper.container],oe.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex),this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","false"),this.inputWrapper.container.removeAttribute("disabled"))):(this.hidePopup(),x([this.inputWrapper.container],oe.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1,this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","true"),this.inputWrapper.container.setAttribute("disabled","")))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){this.getModuleName()==="dropdownlist"&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return u(this.inputWrapper)?null:this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var i,s=this.getItems(),r=0,n=s;r<n.length;r++){var o=n[r];if(this.getFormattedValue(o.getAttribute("data-value"))===e){i=o;break}}return i},t.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof N?this.initialRemoteRender=!0:this.updateValues()},t.prototype.isDisableItemValue=function(e){if(typeof e=="object"){var i=JSON.parse(JSON.stringify(e))[this.fields.value];return this.isDisabledItemByIndex(this.getIndexByValue(i))}return this.isDisabledItemByIndex(this.getIndexByValue(e))},t.prototype.updateValues=function(){if(this.fields.disabled&&(this.value!=null&&(this.value=this.isDisableItemValue(this.value)?null:this.value),this.text!=null&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),this.index!=null&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),this.selectedValueInfo=this.viewPortInfo,u(this.value))if(this.text&&u(this.value)){var i=this.getElementByText(this.text);if(u(i)){this.setProperties({text:null});return}else this.setSelection(i,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else{var e=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;this.setSelection(this.getElementByValue(e),null)}this.setHiddenValue(),W.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlurHandler=function(e){if(this.enabled){var i=e.relatedTarget,s=e.target,r=this.isPreventBlur;if(this.isPreventBlur=!1,r&&!this.isDocumentClick&&this.isPopupOpen&&(!u(s)||!this.isFilterLayout()&&u(i))){this.getModuleName()==="dropdownlist"&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus();return}if(this.isDocumentClick||!u(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(oe.mobileFilter)){this.beforePopupOpen||(this.isDocumentClick=!1);return}(this.getModuleName()==="dropdownlist"&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&s.classList.contains(oe.inputFocus))||u(i)&&this.getModuleName()==="dropdownlist"&&this.allowFiltering&&s!==this.inputWrapper.container||this.getModuleName()!=="dropdownlist"&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1),this.isFocused=!1}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut(e)},t.prototype.onFocusOut=function(e){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),this.getModuleName()==="dropdownlist"&&this.element.tagName!=="INPUT"&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&x([this.inputWrapper.clearButton],oe.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){if(!this.isInteracted){this.isInteracted=!0;var i={isInteracted:!!e,event:e};this.trigger("focus",i)}this.updateIconState(),this.isFocused=!0},t.prototype.resizingWireEvent=function(){v.add(document,"mousemove",this.resizePopup,this),v.add(document,"mouseup",this.stopResizing,this),v.add(document,"touchmove",this.resizePopup,this),v.add(document,"touchend",this.stopResizing,this)},t.prototype.resizingUnWireEvent=function(){v.remove(document,"mousemove",this.resizePopup),v.remove(document,"mouseup",this.stopResizing),v.remove(document,"touchmove",this.resizePopup),v.remove(document,"touchend",this.stopResizing)},t.prototype.resetValueHandler=function(e){var i=M(this.inputElement,"form");if(i&&e.target===i){var s=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=s}},t.prototype.wireEvent=function(){v.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),v.add(this.inputWrapper.container,"focus",this.focusIn,this),v.add(this.inputWrapper.container,"keypress",this.onSearch,this),v.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){v.add(this.targetElement(),"blur",this.onBlurHandler,this);var e=M(this.inputElement,"form");e&&v.add(e,"reset",this.resetValueHandler,this),E.isDevice?this.keyboardModule=new Gt(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new Gt(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},t.prototype.bindClearEvent=function(){this.showClearButton&&v.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){!u(this.inputWrapper)&&this.targetElement()&&v.remove(this.targetElement(),"blur",this.onBlurHandler);var e=this.inputElement&&M(this.inputElement,"form");e&&v.remove(e,"reset",this.resetValueHandler),E.isDevice||this.keyboardModule.destroy(),this.showClearButton&&v.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement.value!==""&&!this.readonly?R([this.inputWrapper.clearButton],oe.clearIconHide):x([this.inputWrapper.clearButton],oe.clearIconHide))},t.prototype.wireListEvents=function(){u(this.list)||(v.add(this.list,"click",this.onMouseClick,this),v.add(this.list,"mouseover",this.onMouseOver,this),v.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.onSearch=function(e){e.charCode!==32&&e.charCode!==13&&(this.list===void 0&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){!this.isRequested&&!u(this.list)&&!u(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(e)},t.prototype.startResizing=function(e){this.isResizing=!0,this.trigger("resizeStart",e);var i=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=i,this.originalMouseY=s),this.resizingWireEvent(),e&&e.preventDefault()},t.prototype.resizePopup=function(e){if(this.isResizing){this.trigger("resizing",e);var i=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=i-this.originalMouseX,n=s-this.originalMouseY;if(this.list&&this.list.parentElement){var o=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),l=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);o=o||100,l=l||120,this.resizeWidth=Math.max(this.originalWidth+r,o),this.resizeHeight=Math.max(this.originalHeight+n,l),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}e&&e.preventDefault()}},t.prototype.stopResizing=function(e){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",e),this.resizingUnWireEvent()),e&&e.preventDefault()},t.prototype.onMouseClick=function(e){var i=e.target;this.keyboardEvent=null;var s=M(i,"."+B.li);if(!(!this.isValidLI(s)||this.isDisabledElement(s)))if(this.setSelection(s,e),E.isDevice&&this.isFilterLayout())history.back();else{var r=100;this.closePopup(r,e)}},t.prototype.onMouseOver=function(e){var i=M(e.target,"."+B.li);this.setHover(i)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(B.hover)&&(this.removeHover(),x([e],B.hover))},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll("."+B.hover);e&&e.length&&R(e,B.hover)}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&e.getAttribute("role")==="option"},t.prototype.updateIncrementalItemIndex=function(e,i){this.incrementalStartIndex=e,this.incrementalEndIndex=i},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0)if(this.enableVirtualization){var i=!1,s=!1,r=this.ulElement.getElementsByClassName("e-active")[0],n=r?r.textContent:null;this.incrementalQueryString===""?(this.incrementalQueryString=String.fromCharCode(e.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(e.charCode).toLocaleLowerCase()===this.incrementalPreQueryString.toLocaleLowerCase()?s=!0:this.incrementalQueryString=String.fromCharCode(e.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex===0)&&(i=!0,this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex===0?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0),(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount);for(var o=$r(e.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,s,n,!0);u(o)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0,(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount),o=$r(e.charCode,this.incrementalLiCollections,0,!0,this.element.id,s,n,!0,!0),!!u(o));)if(u(o)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}u(o)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0,(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount),o=$r(e.charCode,this.incrementalLiCollections,0,!0,this.element.id,s,n,!0,!0));var l=o&&this.getIndexByValue(o.getAttribute("data-value"));if(l)l=l-this.skeletonCount;else for(var h=0;h<this.incrementalLiCollections.length;h++)if(!u(o)&&!u(o.getAttribute("data-value"))&&this.incrementalLiCollections[h].getAttribute("data-value")===o.getAttribute("data-value").toString()){l=h,l=this.incrementalStartIndex+l;break}if(l&&(!(this.viewPortInfo.startIndex>=l)||!(l>=this.viewPortInfo.endIndex))){var p=l-(this.itemCount/2-2)>0?l-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(u(o))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.getIndexByValue(o.getAttribute("data-value"))-this.skeletonCount;if(d>this.itemCount/2){var p=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(o=this.getElementByValue(o.getAttribute("data-value")),this.setSelection(o,e),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var f=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=f-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var o=void 0;if(this.fields.disabled){var g=this.list.querySelectorAll("."+B.li+":not(.e-disabled)");o=$r(e.charCode,g,this.activeIndex,!0,this.element.id)}else o=$r(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);u(o)||(this.setSelection(o,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){u(this.spinnerElement)||(Er(this.spinnerElement),R([this.spinnerElement],oe.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){u(this.spinnerElement)&&(this.spinnerElement=E.isDevice&&!u(this.filterInputObj)&&this.filterInputObj.buttons[1]||!u(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],x([this.spinnerElement],oe.disableIcon),xr({target:this.spinnerElement,width:E.isDevice?"16px":"14px"},this.createElement),Is(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){this.keyboardEvent=e,this.isPreventKeyAction&&this.enableVirtualization&&e.preventDefault();var i=e.action==="pageUp"||e.action==="pageDown",s=this.getModuleName()!=="dropdownlist"&&(e.action==="home"||e.action==="end");this.isEscapeKey=e.action==="escape",this.isTabKey=!this.isPopupOpen&&e.action==="tab";var r=e.action==="down"||e.action==="up"||e.action==="pageUp"||e.action==="pageDown"||e.action==="home"||e.action==="end";if(!((this.isEditTextBox()||i||s)&&!this.isPopupOpen)&&!this.readonly){var n=e.action==="tab"||e.action==="close";if(u(this.list)&&!this.isRequested&&!n&&e.action!=="escape"&&(this.searchKeyEvent=e,(!this.enableVirtualization||this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&e.type!=="mousedown"&&(e.keyCode===40||e.keyCode===38))&&(this.renderList(e),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+B.li),this.ulElement=this.list.querySelector("ul"))),u(this.list)||!u(this.liCollections)&&r&&this.liCollections.length===0||this.isRequested)return;switch((n&&this.getModuleName()!=="autocomplete"&&this.isPopupOpen||e.action==="escape")&&e.preventDefault(),this.isSelected=e.action==="escape"?!1:this.isSelected,this.isTyped=r||e.action==="escape"?!1:this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(e);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(e);break;case"space":this.getModuleName()==="dropdownlist"&&(this.beforePopupOpen||(this.showPopup(),e.preventDefault()));break;case"open":this.showPopup(e);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e));break}}}},t.prototype.updateUpDownAction=function(e,i){if(!(this.fields.disabled&&this.list&&this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length===0)){if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var s=this.getItemData().value;u(s)&&(s="null");var r=this.getIndexByValue(s);u(r)||(this.activeIndex=r)}var n=this.list.querySelector("."+oe.focus);if(this.isSelectFocusItem(n)&&!i){if(this.setSelection(n,e),this.enableVirtualization){var o=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.fields.groupBy&&(o=this.virtualListInfo&&this.virtualListInfo.startIndex===0?this.selectedLI.offsetHeight-o:o-this.selectedLI.offsetHeight),this.list.scrollTop=o-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!u(this.liCollections)){var l=this.activeIndex,h=e.action==="down"?this.activeIndex+1:this.activeIndex-1;h=i?l:h;var p=0;this.getModuleName()==="autocomplete"&&(p=e.action==="down"&&u(this.activeIndex)?0:this.liCollections.length-1,h=h<0?this.liCollections.length-1:h===this.liCollections.length?0:h);var c=void 0;if(this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&this.isPopupOpen)if(!this.enableVirtualization)c=u(this.activeIndex)?this.liCollections[p]:this.liCollections[h];else if(!i)c=u(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[h],c=!u(c)&&!c.classList.contains("e-virtual-list")?c:null;else if(this.getModuleName()==="autocomplete"){var s=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));c=this.getElementByValue(s)}else c=this.getElementByValue(this.getItemData().value);if(u(c)){if(this.enableVirtualization&&!this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&(this.viewPortInfo.endIndex!==this.totalItemCount&&e.action==="down"||this.viewPortInfo.startIndex!==0&&e.action==="up")){if(e.action==="down"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var s=this.liCollections[0].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,f=this.getDataByValue(s);f&&(this.itemData=f)}else if(e.action==="up"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var s=this.liCollections[this.liCollections.length-1].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,f=this.getDataByValue(s);f&&(this.itemData=f)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+B.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(e,this.pageCount)}}else{var d=this.liCollections[this.skeletonCount]&&this.liCollections[this.skeletonCount].classList.contains("e-item-focus");if(this.setSelection(c,e),d&&this.enableVirtualization&&this.getModuleName()==="autocomplete"&&!i){var o=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;o=this.virtualListInfo&&this.virtualListInfo.startIndex===0&&this.fields.groupBy?this.selectedLI.offsetHeight-o:o-this.selectedLI.offsetHeight,this.list.scrollTop=o-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}}if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var s=this.getItemData().value,r=this.getIndexByValueFilter(s,this.actionCompleteData.ulElement);u(r)||(this.activeIndex=r)}this.allowFiltering&&this.getModuleName()==="dropdownlist"&&this.filterInput&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?G(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&G(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}));for(var g,h=0;h<this.liCollections.length;h++)if(this.liCollections[h].classList.contains(oe.focus)||this.liCollections[h].classList.contains(oe.selected)){g=h;break}g!=null&&this.isDisabledElement(this.liCollections[g])&&(this.getModuleName()!=="autocomplete"&&(this.liCollections.length-1===g&&e.action==="down"&&(e.action="up"),g===0&&e.action==="up"&&(e.action="down")),this.updateUpDownAction(e)),e.preventDefault()}},t.prototype.updateHomeEndAction=function(e,i){if(this.getModuleName()==="dropdownlist"){var s=0;if(e.action==="home"?(s=0,this.enableVirtualization&&this.isPopupOpen?s=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),s=this.getItems().length-1),e.preventDefault(),this.activeIndex===s){i&&this.setSelection(this.liCollections[s],e);return}if(!this.enableVirtualization&&this.liCollections[s]&&this.liCollections[s].classList.contains("e-disabled"))return;this.setSelection(this.liCollections[s],e)}},t.prototype.selectCurrentValueOnTab=function(e){this.getModuleName()==="autocomplete"?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&!(this.isEditTextBox()&&!this.isPopupOpen)&&!this.readonly){if(this.list===void 0&&!this.isRequested&&(this.searchKeyEvent=e,this.renderList()),u(this.list)||!u(this.liCollections)&&this.liCollections.length===0||this.isRequested)return;e.action==="enter"&&this.selectCurrentItem(e)}},t.prototype.handleVirtualKeyboardActions=function(e,i){switch(e.action){case"down":case"up":(this.itemData!=null||this.getModuleName()==="autocomplete")&&this.updateUpDownAction(e,!0);break;case"pageUp":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))+this.getPageCount()-1:this.getIndexByValue(this.previousValue),this.pageUpSelection(this.activeIndex-this.getPageCount(),e,!0),e.preventDefault();break;case"pageDown":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))-this.getPageCount():this.getIndexByValue(this.previousValue),this.pageDownSelection(u(this.activeIndex)?2*this.getPageCount():this.activeIndex+this.getPageCount(),e,!0),e.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(e,!0);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(e,!0);break}this.keyboardEvent=null},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var i=this.list.querySelector("."+oe.focus);if(this.isDisabledElement(i))return;i&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(e),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!u(e)},t.prototype.pageUpSelection=function(e,i,s){var r=e>=0?this.liCollections[e+1]:this.liCollections[0];if(!this.enableVirtualization&&r&&r.classList.contains("e-disabled")){for(var n=e>=0?e+1:0;n<this.liCollections.length&&(r=this.liCollections[n],!(r&&!r.classList.contains("e-disabled")));)if(n--,n<0)return}this.enableVirtualization&&this.activeIndex==null&&(r=this.liCollections.length>=e&&e>=0?this.liCollections[e+this.skeletonCount+1]:this.liCollections[0]),!u(r)&&r.classList.contains("e-virtual-list")&&(r=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(r,i),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?G(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&G(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},t.prototype.PageUpDownSelection=function(e,i){this.enableVirtualization?!u(e)&&(this.getModuleName()!=="autocomplete"&&!e.classList.contains("e-active")||this.getModuleName()==="autocomplete"&&!e.classList.contains("e-item-focus"))&&this.setSelection(e,i):this.setSelection(e,i)},t.prototype.pageDownSelection=function(e,i,s){var r=this.getItems(),n=e<=r.length?this.liCollections[e-1]:this.liCollections[r.length-1];if(!this.enableVirtualization&&n&&n.classList.contains("e-disabled"))for(;e>=0&&e<this.liCollections.length&&(n=e<=r.length?this.liCollections[e-1]:this.liCollections[r.length-1],!(n&&!n.classList.contains("e-disabled")));)e++;this.enableVirtualization&&this.skeletonCount>0&&(e=this.getModuleName()==="dropdownlist"&&this.allowFiltering?e+1:e,n=e<r.length?this.liCollections[e]:this.liCollections[r.length-1]),this.enableVirtualization&&this.activeIndex==null&&(n=e<=r.length?this.liCollections[e+this.skeletonCount-1]:this.liCollections[r.length-1]),this.PageUpDownSelection(n,i),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?G(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&G(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},t.prototype.unWireEvent=function(){u(this.inputWrapper)||(v.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),v.remove(this.inputWrapper.container,"keypress",this.onSearch),v.remove(this.inputWrapper.container,"focus",this.focusIn),v.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){this.list&&(v.remove(this.list,"click",this.onMouseClick),v.remove(this.list,"mouseover",this.onMouseOver),v.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(e){var i=e.target;if(!(!u(this.popupObj)&&M(i,this.checkSelector(this.popupObj.element.id)))&&!u(this.inputWrapper)&&!this.inputWrapper.container.contains(e.target)){if(this.inputWrapper.container.classList.contains(oe.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var s=this.isRequested;this.getModuleName()==="combobox"&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(e),this.isInteracted=!1,s||(this.onFocusOut(e),this.inputWrapper.container.classList.remove(oe.inputFocus))}}else i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&!(this.getModuleName()==="combobox"&&!this.allowFiltering&&E.isDevice&&i===this.inputWrapper.buttons[0])&&(this.isPreventBlur=(E.isIE||E.info.name==="edge")&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault())},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(oe.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(!(e.which===3||e.button===2)&&(this.keyboardEvent=null,!(this.targetElement().classList.contains(oe.disable)||this.inputWrapper.clearButton===e.target))){var i=e.target;if(i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&this.getModuleName()!=="combobox"&&e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen||this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen&&this.isPopupRender?(this.hidePopup(e),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=this.inputElement.value.trim()===""?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(e));var s=this,r=this.dataSource instanceof N&&this.groupTemplate?700:this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){s.cloneElements(),s.isSecondClick=!0,s.isSecondClick=!(s.isReact&&s.isFiltering()&&s.dataSource instanceof N&&!s.list.querySelector("ul"))},r)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,i,s,r){var n=this;this.removeSelection(),e.classList.add(B.selected),this.removeHover();var o=e.getAttribute("data-value")!==null?this.getFormattedValue(e.getAttribute("data-value")):null,l=this.getDataByValue(o);if(!this.initial&&!s&&!u(i)){var h=this.detachChanges(l);this.isSelected=!0;var p={e:i,item:e,itemData:h,isInteracted:!!i,cancel:!1};this.trigger("select",p,function(c){c.cancel?e.classList.remove(B.selected):(n.selectEventCallback(e,i,s,l,o),r&&n.setSelectOptions(e,i))})}else this.selectEventCallback(e,i,s,l,o),r&&this.setSelectOptions(e,i)},t.prototype.selectEventCallback=function(e,i,s,r,n){this.previousItemData=u(this.itemData)?null:this.itemData,this.itemData!==r&&(this.previousValue=u(this.itemData)?null:typeof this.itemData=="object"&&!this.allowObjectBinding?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=e,this.itemData=r;var o=this.list.querySelector("."+B.focus);if(o&&R([o],B.focus),e.setAttribute("aria-selected","true"),u(n)&&(n="null"),this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var l=this.getIndexByValueFilter(n,this.actionCompleteData.ulElement);u(l)?this.activeIndex=this.getIndexByValue(n):this.activeIndex=l}else this.enableVirtualization&&this.activeIndex==null&&this.dataSource instanceof N&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+B.li),this.ulElement=this.list.querySelector("ul")),this.activeIndex=this.getIndexByValue(n)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(B.selected)&&(this.removeSelection(),e.classList.add(B.selected),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var i=this.getItemData();this.isTouched=!u(e),i.value===null?W.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):W.setValue(i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&this.itemData!==null?this.setValueTemplate():!u(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(Z(this.valueTempElement),this.inputElement.style.display="block"),!u(i.value)&&!this.enableVirtualization&&this.allowFiltering&&(this.activeIndex=this.getIndexByValueFilter(i.value,this.actionCompleteData.ulElement),u(this.activeIndex)&&(this.activeIndex=this.getIndexByValue(i.value)));var s=oe.clearIcon,r=this.isFiltering()&&this.filterInput&&this.getModuleName()==="combobox",n=r&&this.filterInput.parentElement.querySelector("."+s);return this.isFiltering()&&n&&n.style.removeProperty("visibility"),!this.allowObjectBinding&&this.previousValue===i.value||this.allowObjectBinding&&this.previousValue!=null&&this.isObjectInArray(this.previousValue,[this.allowCustom&&this.isObjectCustomValue?this.value?this.value:i:i.value?this.getDataByValue(i.value):i])?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,this.getModuleName()==="dropdownlist"&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,i){if(this.isValidLI(e)&&(!e.classList.contains(B.selected)||this.isPopupOpen&&this.isSelected&&e.classList.contains(B.selected)))this.updateSelectedItem(e,i,!1,!0);else if(this.setSelectOptions(e,i),this.enableVirtualization&&this.value){var s=this.isPrimitiveData?"":this.fields.value,r=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof N){var n=new N(this.virtualGroupDataSource).executeLocal(new se().where(new we(s,"equal",r)));if(n&&n.length>0){this.itemData=n[0];var o=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text?o.text.toString():o.text,value:l})}}else{var n=new N(this.dataSource).executeLocal(new se().where(new we(s,"equal",r)));if(n&&n.length>0){this.itemData=n[0];var o=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&(this.setProperties({text:o.text?o.text.toString():o.text,value:l}),u(e)&&(this.previousValue=this.value))}}}},t.prototype.setSelectOptions=function(e,i){this.list&&this.removeHover(),this.previousSelectedLI=u(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,!this.setValue(i)&&((!this.isPopupOpen&&!u(e)||this.isPopupOpen&&!u(i)&&(i.type!=="keydown"||i.type==="keydown"&&i.action==="enter"))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.isPopupOpen&&!u(this.selectedLI)&&this.itemData!==null&&(!i||i.type!=="click")&&this.setScrollPosition(i),E.info.name!=="mozilla"&&this.targetElement()&&(G(this.targetElement(),{"aria-describedby":this.inputElement.id!==""?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),this.isPopupOpen&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?G(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):this.isPopupOpen&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&G(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},t.prototype.dropdownCompiler=function(e){var i=!1;if(typeof e!="function"&&e)try{i=!!document.querySelectorAll(e).length}catch{i=!1}return i},t.prototype.setValueTemplate=function(){var e;this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(Z(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:oe.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var i=this.dropdownCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&i?e=qe(document.querySelector(this.valueTemplate).innerHTML.trim()):e=qe(this.valueTemplate);var s=e(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);s&&s.length>0&&Ie(s,this.valueTempElement),this.renderReactTemplates()},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll("."+B.selected);e.length&&(R(e,B.selected),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var e=this.fields,i=null;i=this.itemData;var s,r;u(i)||(s=H(e.value,i),r=H(e.text,i));var n=!u(i)&&!Pt(s)?s:i,o=!u(i)&&!Pt(s)?r:i;return{value:n,text:o}},t.prototype.onChangeEvent=function(e,i){var s=this,r=this.getItemData(),n=this.isSelectCustom?null:this.activeIndex;if(this.enableVirtualization){var o=this.dataSource instanceof N?this.virtualGroupDataSource:this.dataSource;if(r.value&&o&&o.length>0){var l=o.findIndex(function(p){return!u(r.value)&&H(s.fields.value,p)===r.value});l!==-1&&(n=l)}}var h=this.allowObjectBinding?i?this.value:this.getDataByValue(r.value):r.value;this.setProperties({index:n,text:r.text?r.text.toString():r.text,value:h},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){var i;return typeof e=="string"||typeof e=="boolean"||typeof e=="number"?i=Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):i=e,i},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.enableVirtualization?this.getIndexByValue(this.value):this.index,this.typedString=u(this.text)?"":this.text,!this.initial){var i=this.detachChanges(this.itemData),s=void 0;typeof this.previousItemData=="string"||typeof this.previousItemData=="boolean"||typeof this.previousItemData=="number"?s=Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):s=this.previousItemData,this.setHiddenValue();var r={e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:s,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",r)}(u(this.value)||this.value==="")&&this.floatLabelType!=="Always"&&R([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(u(this.value))this.hiddenElement.innerHTML="";else{var e=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;if(this.hiddenElement.querySelector("option")){var i=this.hiddenElement.querySelector("option");i.textContent=this.text,i.setAttribute("value",e.toString())}else if(!u(this.hiddenElement)){var s=document.createElement("option");s.text=this.text,s.setAttribute("selected",""),this.hiddenElement.appendChild(s);var i=this.hiddenElement.querySelector("option");i.setAttribute("value",e.toString())}}},t.prototype.onFilterUp=function(e){if(!(e.ctrlKey&&e.keyCode===86)&&(this.isValidKey||e.keyCode===40||e.keyCode===38))switch(this.isValidKey=!1,this.filterArgs=e,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,e.keyCode){case 38:case 40:this.getModuleName()==="autocomplete"&&!this.isPopupOpen&&!this.preventAltUp&&!this.isRequested?(this.preventAutoFill=!0,this.searchLists(e)):this.preventAutoFill=!1,this.preventAltUp=!1,this.getModuleName()==="autocomplete"&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])&&G(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&this.typedString!==""||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(e)):this.typedString===""&&this.queryString===""&&this.getModuleName()!=="autocomplete"?(this.preventAutoFill=!0,this.searchLists(e)):this.typedString===""&&(this.list&&this.resetFocusElement(),this.activeIndex=null,this.getModuleName()!=="dropdownlist"&&(this.preventAutoFill=!0,this.searchLists(e),this.getModuleName()==="autocomplete"&&this.hidePopup())),e.preventDefault();break;default:this.isFiltering()&&this.getModuleName()==="combobox"&&u(this.list)&&(this.getInitialData=!0,this.renderList(),!this.isSecondClick&&!this.isDropDownClick&&this.executeCloneElements()),this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.getInitialData||this.searchLists(e),(this.enableVirtualization&&this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof N)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof N&&this.totalItemCount!==0)&&this.getFilteringSkeletonCount();break}else this.isValidKey=!1},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value;break}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var i;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){i=e?e.clone():this.query?this.query.clone():new se;var s=this.typedString===""?"contains":this.filterType,r=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof N)&&r==="string"||r==="number")i.where("",s,this.typedString,this.ignoreCase,this.ignoreAccent);else if(this.getModuleName()!=="combobox"||this.isFiltering()&&this.getModuleName()==="combobox"&&this.typedString!==""){var n=this.fields.text?this.fields.text:"";i.where(n,s,this.typedString,this.ignoreCase,this.ignoreAccent)}}else i=this.enableVirtualization&&!u(this.customFilterQuery)?this.customFilterQuery.clone():e?e.clone():this.query?this.query.clone():new se;if(this.enableVirtualization&&this.viewPortInfo.endIndex!==0){var o=this.getTakeValue(),l=!1;if(i){for(var h=0;h<i.queries.length;h++)if(i.queries[h].fn==="onSkip"){l=!0;break}}var p=0,c=0;if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++)i.queries[h].fn==="onSkip"&&(c=i.queries[h].e.nos),i.queries[h].fn==="onTake"&&(p=o<=i.queries[h].e.nos?i.queries[h].e.nos:o);if(p<=0&&this.query&&this.query.queries.length>0)for(var h=0;h<this.query.queries.length;h++)this.query.queries[h].fn==="onTake"&&(p=o<=this.query.queries[h].e.nos?this.query.queries[h].e.nos:o);var d=!1;if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++){if(i.queries[h].fn==="onSkip"){c=i.queries[h].e.nos,i.queries.splice(h,1),l=!1,--h;continue}i.queries[h].fn==="onTake"&&(p=i.queries[h].e.nos<=p?p:i.queries[h].e.nos,i.queries.splice(h,1),--h)}!d&&(this.allowFiltering||!this.isPopupOpen||!l)&&(c>0?i.skip(c):i.skip(this.virtualItemStartIndex)),this.isIncrementalRequest?i.take(this.incrementalEndIndex):p>0?i.take(p):i.take(o),i.requiresCount()}return i},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.performFiltering=function(e){var i=this;this.checkAndResetCache(),this.isRequesting=!1;var s={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(r,n,o){s.cancel||(i.isCustomFilter=!0,i.customFilterQuery=n&&n.clone(),i.filteringAction(r,n,o))},baseEventArgs:e,cancel:!1};this.trigger("filtering",s,function(r){!r.cancel&&!i.isCustomFilter&&!r.preventDefaultAction&&i.filteringAction(i.dataSource,null,i.fields)})},t.prototype.searchLists=function(e){if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+oe.clearIcon)){var i=this.filterInput.parentElement.querySelector("."+oe.clearIcon);i.style.visibility=this.filterInput.value===""?"hidden":"visible"}this.isDataFetched=!1,this.isFiltering()&&(this.typedString!==""&&this.debounceDelay>0?this.debouncedFiltering(e,this.debounceDelay):this.performFiltering(e))},t.prototype.filter=function(e,i,s){this.isCustomFilter=!0,this.filteringAction(e,i,s)},t.prototype.filteringAction=function(e,i,s){if(!u(this.filterInput)){this.beforePopupOpen=!(!this.isPopupOpen&&this.getModuleName()==="combobox"&&this.filterInput.value===""||this.getInitialData);var r=this.list.classList.contains(B.noData);if(this.filterInput.value.trim()===""&&!this.itemTemplate){if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!u(this.actionCompleteData.ulElement)&&!u(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.isFiltering()&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(e,s,i),r&&!this.list.classList.contains(B.noData))){if(!this.list.querySelector(".e-virtual-ddl-content")){var n=this.createElement("div",{className:"e-virtual-ddl-content"});n.style.cssText=this.getTransformValues(),this.list.appendChild(n).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});o.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(o)}}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,!u(this.itemData)&&this.getModuleName()==="dropdownlist"&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}else if(this.isNotSearchList=!1,i=this.filterInput.value.trim()===""?null:i,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(e,s,i),this.getModuleName()==="dropdownlist"&&this.list.classList.contains(B.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),G(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&r&&!this.list.classList.contains(B.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var n=this.createElement("div",{className:"e-virtual-ddl-content"});n.style.cssText=this.getTransformValues(),this.list.appendChild(n).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});o.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(o)}}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates(),this.filterInput&&this.filterInput.value===""&&this.getModuleName()==="combobox"&&this.executeCloneElements()}},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var i=e.querySelector("."+oe.filterParent)?e.querySelector("."+oe.filterParent):this.createElement("span",{className:oe.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:oe.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var s=!1;return E.isDevice&&this.isDeviceFullScreen&&(s=!0),this.filterInputObj=W.createInput({element:this.filterInput,buttons:s?[oe.backIcon,oe.filterBarClearIcon]:[oe.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),u(this.cssClass)||(this.cssClass.split(" ").indexOf("e-outline")!==-1?x([this.filterInputObj.container],"e-outline"):this.cssClass.split(" ").indexOf("e-filled")!==-1&&x([this.filterInputObj.container],"e-filled")),Ie([this.filterInputObj.container],i),Ot([i],e),G(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+oe.clearIcon),!E.isDevice&&this.clearIconElement&&(v.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),E.isDevice?this.searchKeyModule=new Gt(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new Gt(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),v.add(this.filterInput,"input",this.onInput,this),v.add(this.filterInput,"keyup",this.onFilterUp,this),v.add(this.filterInput,"keydown",this.onFilterDown,this),v.add(this.filterInput,"blur",this.onBlurHandler,this),v.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}else return ab},t.prototype.onInput=function(e){!u(e)&&!u(e.data)&&e.data.length>1&&this.autoFill&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.inputElement.value=e.data),this.isValidKey=!0,this.getModuleName()==="combobox"&&this.updateIconState(),E.isDevice&&E.info.name==="mozilla"&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var i=this;setTimeout(function(){i.typedString=i.filterInput.value,i.getModuleName()==="combobox"&&i.isFiltering()&&u(i.list)&&i.renderList(),i.searchLists(e)})},t.prototype.onActionFailure=function(e){a.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},t.prototype.getTakeValue=function(){return this.allowFiltering&&this.getModuleName()==="dropdownlist"&&E.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},t.prototype.onActionComplete=function(e,i,s,r){var n=this;if(this.dataSource instanceof N&&!u(s)&&!this.virtualGroupDataSource&&(this.totalItemCount=s.count),this.isNotSearchList&&!this.enableVirtualization){this.isNotSearchList=!1;return}if(this.getInitialData){this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){n.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i),this.enableVirtualization&&this.updateSelectElementData(this.allowFiltering),this.getInitialData=!1,this.isReactTemplateUpdate=!0,this.typedString=this.filterInput.value,this.searchLists(this.filterArgs);return}var o=this.itemCount;if(this.isActive||!u(e)){var l=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(a.prototype.onActionComplete.call(this,e,i,s),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!u(this.searchKeyEvent)&&this.searchKeyEvent.type==="keydown"&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!u(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),u(e)||G(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof N){var h=u(this.fields.value)?this.fields.text:this.fields.value,p=this.allowObjectBinding&&!u(this.value)?H(h,this.value):this.value,c=this.fields.value.split("."),d=i.some(function(C){return u(C[h])&&c.length>1?n.checkFieldValue(C,c)===p:C[h]===p});this.enableVirtualization&&this.virtualGroupDataSource&&(d=this.virtualGroupDataSource.some(function(C){return u(C[h])&&c.length>1?n.checkFieldValue(C,c)===p:C[h]===p})),d?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new we(h,"equal",p))).then(function(C){C.result.length>0&&(n.enableVirtualization||n.addItem(C.result,i.length)),n.updateValues()})}else this.updateValues();this.initial=!1}else this.getModuleName()==="autocomplete"&&this.value&&this.setInputValue();if(this.getModuleName()!=="autocomplete"&&this.isFiltering()&&!this.isTyped){if((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||u(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof N||!u(this.dataSource)&&!u(this.dataSource.length)&&this.dataSource.length!==0))&&(this.itemTemplate&&(this.element.tagName==="EJS-COMBOBOX"||this.isReact)&&this.allowFiltering?setTimeout(function(){n.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i)),this.isDynamicData){var f=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(f),this.selectedLI=this.getElementByValue(f),this.isDynamicData=!1}if((this.allowCustom||this.allowFiltering&&!this.isValueInList(i,this.value)&&this.dataSource instanceof N)&&!this.enableVirtualization)this.addNewItem(i,l);else if((this.allowCustom||this.allowFiltering&&this.isValueInList(i,this.value))&&!this.enableVirtualization){var g=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value,y=!u(this.value)&&l&&l.getAttribute("data-value")===g.toString();y&&this.addNewItem(i,l)}(!u(this.itemData)||u(this.itemData)&&this.enableVirtualization)&&(this.getSkeletonCount(),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.focusIndexItem()),this.enableVirtualization&&this.updateActionCompleteDataValues(e,i)}else if(this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&!this.isFiltering()){var g=this.getItemData().value;this.activeIndex=this.getIndexByValue(g);var b=this.findListElement(this.list,"li","data-value",g);this.selectedLI=b}else this.enableVirtualization&&this.getModuleName()==="autocomplete"&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(s),this.enableVirtualization&&(this.list.querySelector(".e-virtual-list")||(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"))),this.enableVirtualization&&o!==this.itemCount&&this.resetList(this.dataSource,this.fields))}},t.prototype.isValueInList=function(e,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)if(e[s]===i)return!0}else if(typeof e=="object"&&e!==null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]===i)return!0}return!1},t.prototype.checkFieldValue=function(e,i){var s=e;return i.forEach(function(r){s=s[r]}),s},t.prototype.updateActionCompleteDataValues=function(e,i){this.actionCompleteData={ulElement:e.cloneNode(!0),list:i,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},t.prototype.addNewItem=function(e,i){var s=this;if(!u(this.itemData)&&!u(i)){var r=this.getItemData().value,n=e.some(function(o){return(typeof o=="string"||typeof o=="number"||typeof o=="boolean")&&o===r||H(s.fields.value,o)===r});n||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,i,s){var r=this;this.getModuleName()!=="autocomplete"&&this.actionCompleteData.ulElement&&(this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){r.actionCompleteDataUpdate(e,i,s)},0):this.actionCompleteDataUpdate(e,i,s))},t.prototype.actionCompleteDataUpdate=function(e,i,s){s!==null?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[s]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list.indexOf(i)<0&&this.actionCompleteData.list.push(i)},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.enableVirtualization&&!u(e)||!this.enableVirtualization?this.getIndexByValue(e):this.activeIndex;var i=this.findListElement(this.list,"li","data-value",e);this.selectedLI=i,this.activeItem(i),this.enableVirtualization&&u(i)||this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector("."+B.selected);if(e)this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index;else{if(this.removeFocus(),this.allowFiltering&&this.actionCompleteData&&this.actionCompleteData.ulElement&&this.dataSource instanceof N){var i=this.actionCompleteData.ulElement.querySelectorAll("."+oe.focus);i&&i.length&&R(i,oe.focus)}this.list.querySelector("."+B.li).classList.add(oe.focus)}},t.prototype.updateSelectionList=function(){var e=this.list&&this.list.querySelector(".e-active");if(!e&&!u(this.value)&&this.getModuleName()!=="autocomplete"){var i=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value):this.value,s=this.findListElement(this.list,"li","data-value",i);s&&s.classList.add("e-active")}},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+oe.focus);e&&e.length&&R(e,oe.focus)},t.prototype.renderPopup=function(e){var i=this;if(this.popupObj&&document.body.contains(this.popupObj.element)){this.refreshPopup();return}var s={cancel:!1};this.trigger("beforeOpen",s,function(r){var n;if(r.cancel)i.beforePopupOpen=!1;else{var o=i.createElement("div",{id:i.element.id+"_popup",className:"e-ddl e-popup "+(i.cssClass!==null?i.cssClass:"")});o.setAttribute("aria-label",i.element.id),o.setAttribute("role","dialog");var l=i.setSearchBox(o);if(i.listContainerHeight=i.allowFiltering&&i.getModuleName()==="dropdownlist"&&E.isDevice&&i.isDeviceFullScreen?ve(Math.round(window.outerHeight).toString()+"px"):ve(i.popupHeight),i.headerTemplate&&(i.setHeaderTemplate(o),i.isUpdateHeaderHeight=i.header.offsetHeight!==0),Ie([i.list],o),i.footerTemplate&&(i.setFooterTemplate(o),i.isUpdateFooterHeight=i.footer.offsetHeight!==0),document.body.appendChild(o),o.style.top="0px",n=o.clientHeight,i.enableVirtualization&&(i.itemTemplate||i.isAngular)){var h=o.querySelectorAll("li.e-list-item:not(.e-virtual-list)"),p=o.querySelectorAll("li.e-virtual-list"),c=h&&h.length>0?Math.ceil(h[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(h[0]).marginBottom,10):0,d=p&&p.length>0?Math.ceil(p[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(p[0]).marginBottom,10):0;c!==d&&p&&p.length>0&&p.forEach(function(ie){ie.parentNode.removeChild(ie)}),i.listItemHeight=c}if(i.enableVirtualization&&!i.list.classList.contains(B.noData)){if(i.getSkeletonCount(),i.skeletonCount=i.totalItemCount<i.itemCount*2&&(!(i.dataSource instanceof N)||i.dataSource instanceof N&&i.totalItemCount<=i.itemCount)?0:i.skeletonCount,i.list.querySelector(".e-virtual-ddl-content"))i.list.getElementsByClassName("e-virtual-ddl-content")[0].style=i.getTransformValues();else{var f=i.createElement("div",{className:"e-virtual-ddl-content"});f.style.cssText=i.getTransformValues(),i.list.appendChild(f).appendChild(i.list.querySelector(".e-list-parent"))}if(i.UpdateSkeleton(),i.liCollections=i.list.querySelectorAll("."+B.li),i.virtualItemCount=i.itemCount,i.list.querySelector(".e-virtual-ddl"))i.list.getElementsByClassName("e-virtual-ddl")[0].style=i.GetVirtualTrackHeight();else{var g=i.createElement("div",{id:i.element.id+"_popup",className:"e-virtual-ddl"});g.style.cssText=i.GetVirtualTrackHeight(),o.querySelector(".e-dropdownbase").appendChild(g)}}if(o.style.visibility="hidden",i.popupHeight!=="auto"){if(i.searchBoxHeight=0,!u(l.container)&&i.getModuleName()!=="combobox"&&i.getModuleName()!=="autocomplete"&&(i.searchBoxHeight=l.container.parentElement.getBoundingClientRect().height,i.listContainerHeight=(parseInt(i.listContainerHeight,10)-i.searchBoxHeight).toString()+"px"),i.headerTemplate){i.header=i.header?i.header:o.querySelector(".e-ddl-header");var y=Math.round(i.header.getBoundingClientRect().height);i.listContainerHeight=(parseInt(i.listContainerHeight,10)-(y+i.searchBoxHeight)).toString()+"px"}if(i.footerTemplate){i.footer=i.footer?i.footer:o.querySelector(".e-ddl-footer");var y=Math.round(i.footer.getBoundingClientRect().height);i.listContainerHeight=(parseInt(i.listContainerHeight,10)-(y+i.searchBoxHeight)).toString()+"px"}i.list.style.maxHeight=(parseInt(i.listContainerHeight,10)-2).toString()+"px",o.style.maxHeight=ve(i.popupHeight)}else o.style.height="auto";var b=0,C=void 0;if(i.isPreventScrollAction=!0,!u(i.selectedLI)&&!u(i.activeIndex)&&i.activeIndex>=0||i.enableVirtualization?i.setScrollPosition():i.list.scrollTop=0,E.isDevice&&i.isDeviceFullScreen&&!i.allowFiltering&&(i.getModuleName()==="dropdownlist"||i.isDropDownClick&&i.getModuleName()==="combobox")){b=i.getOffsetValue(o);var S=i.isEmptyList()?i.list:i.liCollections[0];u(i.inputElement)||(C=-(parseInt(getComputedStyle(S).textIndent,10)-parseInt(getComputedStyle(i.inputElement).paddingLeft,10)+parseInt(getComputedStyle(i.inputElement.parentElement).borderLeftWidth,10)))}i.createPopup(o,b,C),i.popupContentElement=i.popupObj.element.querySelector(".e-content"),i.getFocusElement(),i.checkCollision(o),E.isDevice&&(parseInt(i.popupWidth.toString(),10)>window.outerWidth&&!(i.getModuleName()==="dropdownlist"&&i.allowFiltering)&&i.popupObj.element.classList.add("e-wide-popup"),i.popupObj.element.classList.add(oe.device),(i.getModuleName()==="dropdownlist"||i.getModuleName()==="combobox"&&!i.allowFiltering&&i.isDropDownClick)&&(i.popupObj.collision={X:"fit",Y:"fit"}),i.isFilterLayout()&&i.isDeviceFullScreen&&(i.popupObj.element.classList.add(oe.mobileFilter),i.popupObj.position={X:0,Y:0},i.popupObj.dataBind(),G(i.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),x([document.body,i.popupObj.element],oe.popupFullScreen),i.setSearchBoxPosition(),i.backIconElement=l.container.querySelector(".e-back-icon"),i.clearIconElement=l.container.querySelector("."+oe.clearIcon),v.add(i.backIconElement,"click",i.clickOnBackIcon,i),v.add(i.clearIconElement,"click",i.clearText,i))),o.style.visibility="visible",x([o],"e-popup-close");for(var I=i.popupObj.getScrollableParent(i.inputWrapper.container),A=0,T=I;A<T.length;A++){var L=T[A];v.add(L,"scroll",i.scrollHandler,i)}u(i.list)||(i.unWireListEvents(),i.wireListEvents()),i.selectedElementID=i.selectedLI?i.selectedLI.id:null,i.enableVirtualization&&(i.notify("bindScrollEvent",{module:"VirtualScroll",component:i.getModuleName(),enable:i.enableVirtualization}),setTimeout(function(){(i.value||i.list.querySelector(".e-active"))&&(i.updateSelectionList(),i.viewPortInfo&&i.viewPortInfo.offsets.top?i.list.scrollTop=i.viewPortInfo.offsets.top:i.scrollBottom(!0,!0))},5)),G(i.targetElement(),{"aria-expanded":"true","aria-owns":i.element.id+"_popup","aria-controls":i.element.id}),i.getModuleName()!=="dropdownlist"&&i.list.classList.contains("e-nodata")&&(G(i.targetElement(),{"aria-activedescendant":"no-record"}),i.popupContentElement.setAttribute("role","status"),i.popupContentElement.setAttribute("id","no-record")),i.inputElement.setAttribute("aria-expanded","true"),i.inputElement.setAttribute("aria-controls",i.element.id+"_popup");var _=i.isFiltering()?i.filterInput.parentElement:i.inputWrapper.container;x([_],[oe.inputFocus]);var X={name:"FadeIn",duration:100};i.beforePopupOpen=!0;var re=i.popupObj,ye={popup:re,event:e,cancel:!1,animation:X};if(i.trigger("open",ye,function(ie){ie.cancel?(i.beforePopupOpen=!1,i.destroyPopup()):(u(i.inputWrapper)||x([i.inputWrapper.container],[oe.iconAnimation]),i.renderReactTemplates(),i.isReact&&i.isFiltering()&&i.dataSource instanceof N&&i.list.querySelector("ul")&&!i.isSecondClick&&i.executeCloneElements(),u(i.popupObj)||(i.popupObj.show(new It(ie.animation),i.zIndex===1e3?i.element:null),i.isPopupRender=!0),i.isReact&&setTimeout(function(){if(i.popupHeight&&i.list&&i.popupHeight!=="auto"&&!(i.getModuleName()==="dropdownlist"&&i.allowFiltering)){var J=typeof i.popupHeight=="string"?parseInt(i.popupHeight,10):i.popupHeight;if(!i.isUpdateHeaderHeight&&i.headerTemplate&&i.header){var K=i.list.style.maxHeight===""?J:parseInt(i.list.style.maxHeight,10);i.list.style.maxHeight=(K-i.header.offsetHeight).toString()+"px",i.isUpdateHeaderHeight=!0}if(!i.isUpdateFooterHeight&&i.footerTemplate&&i.footer){var K=i.list.style.maxHeight===""?J:parseInt(i.list.style.maxHeight,10);i.list.style.maxHeight=(K-i.footer.offsetHeight).toString()+"px",i.isUpdateFooterHeight=!0}}},15))}),i.allowResize&&(i.getModuleName()!=="dropdownlist"||!(E.isDevice&&i.isDeviceFullScreen&&i.allowFiltering))){var V=16;if(i.resizer=i.createElement("div",{id:i.element.id+"_resize-popup",className:oe.resizeIcon}),i.list&&i.list.parentElement){if(i.list.parentElement.classList.add("e-resize"),i.popupHeight.toString().toLowerCase()!=="auto"&&n>=parseInt(i.popupHeight.toString(),10)-2&&(i.list.parentElement.style.height="100%"),i.list.parentElement.style.paddingBottom=i.getModuleName()==="dropdownlist"&&i.allowFiltering&&i.searchBoxHeight?(i.searchBoxHeight+V).toString()+"px":V.toString()+"px",i.isReact&&i.footer){var q=i.list.style.maxHeight,z=i.list.parentElement.style.maxHeight,U=i.listContainerHeight;setTimeout(function(){i.footer=i.footer?i.footer:o.querySelector(".e-ddl-footer");var ie=Math.round(i.footer.getBoundingClientRect().height);ie>0&&(U=(parseInt(U,10)-ie).toString()+"px",q=(parseInt(U,10)-2).toString()+"px",i.list.parentElement.style.paddingBottom=(parseInt(z,10)-parseInt(q,10)+V).toString()+"px")},1)}else(i.header||i.footer||i.itemTemplate)&&(i.list.parentElement.style.paddingBottom=(parseInt(i.list.parentElement.style.maxHeight,10)-parseInt(i.list.style.maxHeight,10)+V).toString()+"px");i.list.parentElement.appendChild(i.resizer),i.list.parentElement.style.width=i.resizeWidth+"px",i.list.parentElement.style.height=i.resizeHeight+"px",i.list.parentElement.style.maxHeight=i.resizeHeight+"px",i.list.style.maxHeight=i.resizeHeight+"px"}v.add(i.resizer,"mousedown",i.startResizing,i),v.add(i.resizer,"touchstart",i.startResizing,i)}}})},t.prototype.checkCollision=function(e){if(!E.isDevice||E.isDevice&&!(this.getModuleName()==="dropdownlist"||this.isDropDownClick)){var i=es(e);i.length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision()}},t.prototype.getOffsetValue=function(e){var i=getComputedStyle(e),s=parseInt(i.borderTopWidth,10),r=parseInt(i.borderBottomWidth,10);return this.setPopupPosition(s+r)},t.prototype.createPopup=function(e,i,s){var r=this;this.popupObj=new as(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:s,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){r.isDocumentClick||r.focusDropDown(),r.isReact&&r.clearTemplate(["headerTemplate","footerTemplate"]),r.isNotSearchList=!1,r.isDocumentClick=!1,r.destroyPopup(),r.isFiltering()&&r.actionCompleteData.list&&r.actionCompleteData.list.length>0?(r.isActive=!0,r.isReactTemplateUpdate&&r.isReact&&r.itemTemplate&&!r.enableVirtualization&&(r.actionCompleteData.ulElement=r.renderItems(r.actionCompleteData.list,r.fields),r.isReactTemplateUpdate=!1),r.enableVirtualization?r.onActionComplete(r.ulElement,r.listData,null,!0):r.onActionComplete(r.actionCompleteData.ulElement,r.actionCompleteData.list,null,!0)):r.enableVirtualization&&r.focusIndexItem()},open:function(){v.add(document,"mousedown",r.onDocumentClick,r),r.isPopupOpen=!0;var n=r.actionCompleteData&&r.actionCompleteData.ulElement&&r.actionCompleteData.ulElement.querySelector("li"),o=r.list.querySelector("ul li");!u(r.ulElement)&&!u(r.ulElement.getElementsByClassName("e-item-focus")[0])?G(r.targetElement(),{"aria-activedescendant":r.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(r.ulElement)&&!u(r.ulElement.getElementsByClassName("e-active")[0])&&G(r.targetElement(),{"aria-activedescendant":r.ulElement.getElementsByClassName("e-active")[0].id}),r.isFiltering()&&r.itemTemplate&&r.element.tagName===r.getNgDirective()&&n&&o&&n.textContent!==o.textContent&&r.element.tagName!=="EJS-COMBOBOX"&&r.cloneElements(),r.isFilterLayout()&&(R([r.inputWrapper.container],[oe.inputFocus]),r.isFilterFocus=!0,r.filterInput.focus(),r.inputWrapper.clearButton&&x([r.inputWrapper.clearButton],oe.clearIconHide)),r.activeStateChange()},targetExitViewport:function(){E.isDevice||r.hidePopup()}})},t.prototype.isEmptyList=function(){return!u(this.liCollections)&&this.liCollections.length===0},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return this.getModuleName()==="dropdownlist"&&this.allowFiltering},t.prototype.scrollHandler=function(){E.isDevice&&(this.getModuleName()==="dropdownlist"&&!this.isFilterLayout()||this.getModuleName()==="combobox"&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},t.prototype.isElementInViewport=function(e){var i=e.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=window.innerHeight&&i.right<=window.innerWidth},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector("."+oe.clearIcon);Z(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},t.prototype.setPopupPosition=function(e){var i,s=e,r=this.list.querySelector("."+oe.focus)||this.selectedLI,n=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=n.getBoundingClientRect().height;this.listItemHeight=l+parseInt(window.getComputedStyle(n).marginBottom,10);var h=this.list.offsetHeight/2,p=u(r)?n.offsetTop:r.offsetTop,c=o.offsetTop;if(c-h<p&&!u(this.liCollections)&&this.liCollections.length>0&&!u(r)){var d=this.list.offsetHeight/l,f=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(d-(this.liCollections.length-this.activeIndex))*l-s+f,this.list.scrollTop=r.offsetTop}else p>h&&!this.enableVirtualization?(i=h-l/2,this.list.scrollTop=p-h+l/2):i=p;var g=this.inputWrapper.container.offsetHeight;return i=i+l+s-(l-g)/2,-i},t.prototype.setWidth=function(){var e=ve(this.popupWidth);if(e.indexOf("%")>-1){var i=this.inputWrapper.container.offsetWidth*parseFloat(e)/100;e=i.toString()+"px"}if(E.isDevice&&e.indexOf("px")>-1&&!this.allowFiltering&&(this.getModuleName()==="dropdownlist"||this.isDropDownClick&&this.getModuleName()==="combobox")){var s=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+(parseInt(getComputedStyle(s).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))*2+"px"}return e},t.prototype.scrollBottom=function(e,i,s){var r=this;if(i===void 0&&(i=!1),s===void 0&&(s=null),u(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+B.li),!u(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!u(this.selectedLI)){var n=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0;this.isUpwardScrolling=!1;var o=this.list.querySelectorAll(".e-virtual-list").length,l=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,h=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+n):this.selectedLI.offsetTop,p=this.list.offsetHeight,c=h-o*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop,d=this.list.scrollTop+c-p,f=!1;d=e?d+parseInt(getComputedStyle(this.list).paddingTop,10)*2:d+parseInt(getComputedStyle(this.list).paddingTop,10);var g=h-o*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop;if(g=this.fields.groupBy&&!u(this.fixedHeaderElement)?g-this.fixedHeaderElement.offsetHeight:g,this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0,f=this.isKeyBoardAction;else if(c>p||!(g>0&&this.list.offsetHeight>g)){var y=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,b=s==="pageDown"?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||i?this.isKeyBoardAction&&this.enableVirtualization&&l&&y===l&&s!=="end"&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=d:(this.enableVirtualization&&(b=s==="pageDown"?this.getPageCount()+1:b),this.list.scrollTop+=(this.selectedLI.offsetHeight+n)*b),this.isPreventKeyAction=this.IsScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&s==="end"?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(s==="pageDown"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=d):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?e&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+this.listItemHeight*2:this.virtualListInfo.startIndex*this.listItemHeight:0,f=this.isKeyBoardAction}this.isKeyBoardAction=f,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&s==="down"&&setTimeout(function(){r.scrollStop(null,!0)},100)}},t.prototype.scrollTop=function(e){if(e===void 0&&(e=null),!u(this.selectedLI)){var i=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0,s=this.list.querySelectorAll(".e-virtual-list").length,r=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+i):this.selectedLI.offsetTop,n=r-s*(this.selectedLI.offsetHeight+i)-this.list.scrollTop,o=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;n=this.fields.groupBy&&!u(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var l=r-s*(this.selectedLI.offsetHeight+i)+(this.selectedLI.offsetHeight+i)-this.list.scrollTop,h=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&n<=0;if(this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(n<0||h){var p=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,c=e==="pageUp"?this.getPageCount()-2:1;this.enableVirtualization&&(c=e==="pageUp"?this.getPageCount():c),this.enableVirtualization&&this.isKeyBoardAction&&o&&p===o&&e!=="home"&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=(this.selectedLI.offsetHeight+i)*c,this.isPreventKeyAction=this.list.scrollTop!==0?this.isPreventKeyAction:!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&e==="home"?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(e==="pageUp"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+n)}else l>0&&this.list.offsetHeight>l||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!u(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(this.isPreventScrollAction=!0,u(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,e.action);break;default:this.isKeyBoardAction=e.action==="up"||e.action==="pageUp"||e.action==="open",this.scrollTop(e.action);break}this.isKeyBoardAction=!1},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},t.prototype.setEleWidth=function(e){u(e)||(typeof e=="number"?this.inputWrapper.container.style.width=ve(e):typeof e=="string"&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:ve(e)))},t.prototype.closePopup=function(e,i){var s=this,r=!u(this.filterInput)&&!u(this.filterInput.value)&&this.filterInput.value!=="";if(this.getModuleName()==="combobox"&&this.typedString,this.isTyped=!1,this.isVirtualTrackHeight=!1,!!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen)){this.keyboardEvent=null,v.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var n=this.popupObj.getScrollableParent(this.inputWrapper.container),o=0,l=n;o<l.length;o++){var h=l[o];v.remove(h,"scroll",this.scrollHandler)}E.isDevice&&this.isFilterLayout()&&this.isDeviceFullScreen&&R([document.body,this.popupObj.element],oe.popupFullScreen),this.isFilterLayout()&&(E.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&v.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(v.remove(this.backIconElement,"click",this.clickOnBackIcon),v.remove(this.clearIconElement,"click",this.clearText)),u(this.filterInput)||(v.remove(this.filterInput,"input",this.onInput),v.remove(this.filterInput,"keyup",this.onFilterUp),v.remove(this.filterInput,"keydown",this.onFilterDown),v.remove(this.filterInput,"blur",this.onBlurHandler),v.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput.removeAttribute("aria-disabled"),this.filterInput.removeAttribute("role"),this.filterInput.removeAttribute("autocomplete"),this.filterInput.removeAttribute("autocapitalize"),this.filterInput.removeAttribute("spellcheck")),this.filterInput=null),G(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(oe.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(this.value==null||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,(this.getModuleName()==="autocomplete"||this.getModuleName()==="dropdownlist"&&!u(this.typedString)&&this.typedString!==""||this.getModuleName()==="combobox"&&this.allowFiltering&&!u(this.typedString)&&this.typedString!=="")&&this.checkAndResetCache()):this.getModuleName()==="autocomplete"&&this.checkAndResetCache(),(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.skeletonCount!==0&&this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var p={name:"FadeOut",duration:100,delay:e||0},c=this.popupObj,d={popup:c,cancel:!1,animation:p,event:i||null};this.trigger("close",d,function(g){if(s.getModuleName()==="dropdownlist"&&W.destroy({element:s.filterInput,floatLabelType:s.floatLabelType,properties:{placeholder:s.filterBarPlaceholder},buttons:s.clearIconElement},s.clearIconElement),s.filterInputObj=null,!u(s.popupObj)&&!u(s.popupObj.element.querySelector(".e-fixed-head"))){var y=s.popupObj.element.querySelector(".e-fixed-head");y.parentNode.removeChild(y),s.fixedHeaderElement=null}g.cancel||(s.getModuleName()==="autocomplete"&&s.rippleFun(),s.isPopupOpen?(s.isPopupRender=!1,s.popupObj.hide(new It(g.animation))):s.destroyPopup())}),E.isDevice&&!d.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup");var f;this.dataSource instanceof N?f=this.remoteDataCount:f=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.customFilterQuery=null,this.enableVirtualization&&this.isFiltering()&&r&&this.totalItemCount!==f&&(this.updateInitialData(),this.checkAndResetCache())}},t.prototype.updateInitialData=function(){var e=this.selectData;if(!u(e)){var i=this.renderItems(e,this.fields);if(this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.getModuleName()==="combobox"&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof N?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.list.parentElement){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});s.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(s)}this.getModuleName()!=="autocomplete"&&this.totalItemCount!==0&&this.totalItemCount>this.itemCount*2&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=e,this.updateActionCompleteDataValues(i,e),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.inputElement.removeAttribute("aria-controls"),this.popupObj&&(this.resizer&&(v.remove(this.resizer,"mousedown",this.startResizing),v.remove(this.resizer,"touchstart",this.startResizing)),this.popupObj.destroy(),Z(this.popupObj.element))},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){this.preselectedIndex=u(this.index)?null:this.index,this.element.tagName==="INPUT"?(this.inputElement=this.element,u(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),u(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(e=this.cssClass.replace(/\s+/g," ").trim()),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=W.createInput({element:this.inputElement,buttons:this.isPopupButton()?[oe.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:this.getModuleName()==="dropdownlist"?!0:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:oe.hiddenElement}}),Ot([this.hiddenElement],this.inputWrapper.container),this.hiddenElement.hasAttribute("aria-label")||this.hiddenElement.setAttribute("aria-label",this.getModuleName()),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=ve(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.floatLabelType!=="Never"&&W.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):at("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()):this.getModuleName()==="dropdownlist"&&(this.targetElement().hasAttribute("aria-label")||G(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false")),G(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),this.value!==null||this.activeIndex!==null||this.text!==null)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.index!==null&&(this.activeIndex=this.index+this.skeletonCount)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if(this.element.tagName==="SELECT"&&this.element.options[0]){var s=this.element;this.value=this.allowObjectBinding?this.getDataByValue(s.options[s.selectedIndex].value):s.options[s.selectedIndex].value,this.text=u(this.value)?null:s.options[s.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(n){n.stopImmediatePropagation()},this.inputElement.onchange=function(n){n.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),u(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var r=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!u(this.element.id)&&this.element.id!==""&&!u(r)&&(r.id="label_"+this.element.id.replace(/ /g,"_"),G(this.inputElement,{"aria-labelledby":r.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},t.prototype.getListHeight=function(){var e=this.createElement("div",{className:"e-dropdownbase"}),i=this.createElement("li",{className:"e-list-item"}),s=ve(this.popupHeight);e.style.height=parseInt(s,10).toString()+"px",e.appendChild(i),document.body.appendChild(e),this.virtualListHeight=e.getBoundingClientRect().height;var r=Math.ceil(i.getBoundingClientRect().height)+parseInt(window.getComputedStyle(i).marginBottom,10);return e.remove(),r},t.prototype.setFooterTemplate=function(e){var i;this.footer?this.isReact&&typeof this.footerTemplate=="function"?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),x([this.footer],oe.footer));var s=this.dropdownCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&s?i=qe(Me(this.footerTemplate,document).innerHTML.trim()):i=qe(this.footerTemplate);var r=i({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);r&&r.length>0&&Ie(r,this.footer),Ie([this.footer],e)},t.prototype.setHeaderTemplate=function(e){var i;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),x([this.header],oe.header));var s=this.dropdownCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&s?i=qe(Me(this.headerTemplate,document).innerHTML.trim()):i=qe(this.headerTemplate);var r=i({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);r&&r.length&&Ie(r,this.header);var n=e.querySelector("div.e-content");e.insertBefore(this.header,n)},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){!u(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&!(E.isDevice&&this.isFilterLayout())||this.getModuleName()==="autocomplete")&&(R([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(e){e.dataSource&&!u(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&e.dataSource instanceof N)&&(this.list&&!this.isReact?this.list.innerHTML="":this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var i=Object.keys(e).indexOf("value")!==-1&&u(e.value),s=Object.keys(e).indexOf("text")!==-1&&u(e.text);this.getModuleName()!=="autocomplete"&&this.allowFiltering&&(i||s)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!u(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!u(Object.keys(e.query))&&(this.actionCompleteData=this.getModuleName()==="combobox"?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},t.prototype.updateDataSource=function(e,i){(this.inputElement.value!==""||!u(e)&&(u(e.dataSource)||!(e.dataSource instanceof N)&&e.dataSource.length===0))&&this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&this.list&&(v.remove(this.list,"scroll",this.setFloatingHeader),v.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!u(e)&&(u(e.dataSource)||!(e.dataSource instanceof N)&&e.dataSource.length===0))||e.dataSource instanceof N||!u(e)&&Array.isArray(e.dataSource)&&!u(i)&&Array.isArray(i.dataSource)&&e.dataSource.length!==i.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},t.prototype.checkCustomValue=function(){var e=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(e);var i=this.getItemData(),s=this.allowObjectBinding?this.itemData:i.value,r=u(s)?null:this.index;u(r)&&e===s||this.isAngular?this.setProperties({text:i.text?i.text.toString():i.text,value:s}):this.setProperties({text:i.text?i.text.toString():i.text,index:r,value:s})},t.prototype.updateInputFields=function(){this.getModuleName()==="dropdownlist"&&W.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(e,i){var s=this;!u(e.dataSource)&&!this.isTouched&&u(e.value)&&u(e.index)&&!u(this.preselectedIndex)&&!u(this.index)&&(e.index=this.index),(!u(e.value)||!u(e.index))&&(this.isTouched=!0),this.getModuleName()==="dropdownlist"&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var r=function(c){switch(c){case"query":case"dataSource":n.getSkeletonCount(),n.checkAndResetCache();break;case"htmlAttributes":n.setHTMLAttributes();break;case"width":n.setEleWidth(e.width),W.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"placeholder":W.setPlaceholder(e.placeholder,n.inputElement);break;case"filterBarPlaceholder":n.filterInput&&W.setPlaceholder(e.filterBarPlaceholder,n.filterInput);break;case"readonly":n.getModuleName()!=="dropdownlist"&&W.setReadonly(e.readonly,n.inputElement),n.setReadOnly();break;case"cssClass":n.setCssClass(e.cssClass,i.cssClass),W.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"enableRtl":n.setEnableRtl();break;case"enabled":n.setEnable();break;case"text":if(n.fields.disabled&&(e.text=e.text&&!n.isDisabledItemByIndex(n.getIndexByValue(n.getValueByText(e.text)))?e.text:null),e.text===null){n.clearAll();break}if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(n.list||(n.dataSource instanceof N&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var d=n.getElementByText(e.text);if(!n.checkValidLi(d))if(n.liCollections&&n.liCollections.length===100&&n.getModuleName()==="autocomplete"&&n.listData.length>100)n.setSelectionData(e.text,i.text,"text");else if(e.text&&n.dataSource instanceof N){var f=n.getItems().length,g=u(n.fields.text)?n.fields.value:n.fields.text;n.typedString="",n.dataSource.executeQuery(n.getQuery(n.query).where(new we(g,"equal",e.text))).then(function(T){T.result.length>0?(s.addItem(T.result,f),s.updateValues()):s.setOldText(i.text)})}else n.getModuleName()==="autocomplete"?n.setInputValue(e,i):n.setOldText(i.text);n.updateInputFields()}break;case"value":if(n.fields.disabled&&(e.value=e.value!=null&&!n.isDisableItemValue(e.value)?e.value:null),e.value===null){n.clearAll();break}if(n.allowObjectBinding&&!u(e.value)&&!u(i.value)&&n.isObjectInArray(e.value,[i.value]))return{value:void 0};if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange;break}if(n.notify("beforeValueChange",{newProp:e}),n.list||(n.dataSource instanceof N&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var y=n.allowObjectBinding&&!u(e.value)?H(n.fields.value?n.fields.value:"",e.value):e.value,b=n.getElementByValue(y);if(!n.checkValidLi(b))if(n.liCollections&&n.liCollections.length===100&&n.getModuleName()==="autocomplete"&&n.listData.length>100)n.setSelectionData(e.value,i.value,"value");else if(e.value&&n.dataSource instanceof N){var C=n.getItems().length,g=u(n.fields.value)?n.fields.text:n.fields.value;n.typedString="";var S=n.allowObjectBinding&&!u(e.value)?H(g,e.value):e.value;n.dataSource.executeQuery(n.getQuery(n.query).where(new we(g,"equal",S))).then(function(L){L.result.length>0?(s.addItem(L.result,C),s.updateValues()):s.setOldValue(i.value)})}else n.getModuleName()==="autocomplete"?n.setInputValue(e,i):n.setOldValue(i.value);n.updateInputFields(),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange}break;case"index":if(n.fields.disabled&&(e.index=e.index!=null&&!n.isDisabledItemByIndex(e.index)?e.index:null),e.index===null){n.clearAll();break}if(n.list||(n.dataSource instanceof N&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender&&n.liCollections){var I=n.liCollections[e.index];n.checkValidLi(I)||(n.liCollections&&n.liCollections.length===100&&n.getModuleName()==="autocomplete"&&n.listData.length>100?n.setSelectionData(e.index,i.index,"index"):n.index=i.index),n.updateInputFields()}break;case"footerTemplate":n.popupObj&&n.setFooterTemplate(n.popupObj.element);break;case"headerTemplate":n.popupObj&&n.setHeaderTemplate(n.popupObj.element);break;case"valueTemplate":!u(n.itemData)&&n.valueTemplate!==null&&n.setValueTemplate();break;case"allowFiltering":n.allowFiltering&&(n.actionCompleteData={ulElement:n.ulElement,list:n.listData,isUpdated:!0},n.actionData=n.actionCompleteData,n.updateSelectElementData(n.allowFiltering));break;case"floatLabelType":W.removeFloating(n.inputWrapper),W.addFloating(n.inputElement,e.floatLabelType,n.placeholder,n.createElement),!u(n.inputWrapper.buttons[0])&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&n.floatLabelType!=="Never"&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":n.inputWrapper.clearButton||(W.setClearButton(e.showClearButton,n.inputElement,n.inputWrapper,null,n.createElement),n.bindClearEvent());break;default:{var A=n.getPropObject(c,e,i);a.prototype.onPropertyChanged.call(n,A.newProperty,A.oldProperty)}break}},n=this,o=0,l=Object.keys(e);o<l.length;o++){var h=l[o],p=r(h);if(typeof p=="object")return p.value}},t.prototype.checkValidLi=function(e){return this.isValidLI(e)?(this.setSelection(e,null),!0):!1},t.prototype.setSelectionData=function(e,i,s){var r=this,n;this.updateListValues=function(){if(s==="text")n=r.getElementByText(e),r.checkValidLi(n)||r.setOldText(i);else if(s==="value"){var o=r.fields.value?r.fields.value:"";r.allowObjectBinding&&!u(e)&&H(o,e),n=r.getElementByValue(e),r.checkValidLi(n)||r.setOldValue(i)}else s==="index"&&(n=r.liCollections[e],r.checkValidLi(n)||(r.index=i))}},t.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},t.prototype.setReadOnly=function(){this.readonly?x([this.inputWrapper.container],["e-readonly"]):R([this.inputWrapper.container],["e-readonly"])},t.prototype.setInputValue=function(e,i){},t.prototype.setCssClass=function(e,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(e)||(e=e.replace(/\s+/g," ").trim()),W.setCssClass(e,[this.inputWrapper.container],i),this.popupObj&&W.setCssClass(e,[this.popupObj.element],i)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(e){if(this.enabled){if(this.getModuleName()==="dropdownlist"&&this.beforePopupOpen&&!this.isPopupOpen&&(this.beforePopupOpen=!1),this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.isReact&&this.getModuleName()==="combobox"&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof N&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(u(this.list)||!Pt(this.list)&&(this.list.classList.contains(B.noData)||this.list.querySelectorAll("."+B.li).length<=0))&&(this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&(this.isSecondClick=!1),this.renderList(e)),this.enableVirtualization&&this.listData&&this.listData.length&&(!u(this.value)&&(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(e),this.enableVirtualization&&!this.allowFiltering&&this.selectedValueInfo!=null&&this.selectedValueInfo.startIndex>0&&this.value!=null&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),!this.isSecondClick&&!this.isDropDownClick&&this.executeCloneElements()}},t.prototype.executeCloneElements=function(){var e=this,i=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&setTimeout(function(){e.cloneElements(),e.isSecondClick=!(e.isReact&&e.isFiltering()&&e.dataSource instanceof N&&!e.list.querySelector("ul"))},i)},t.prototype.invokeRenderPopup=function(e){if(E.isDevice&&this.isFilterLayout()){var i=this;window.onpopstate=function(){i.hidePopup()},history.pushState({},"")}!u(this.list)&&(!u(this.list.children[0])||this.list.classList.contains(B.noData))&&this.renderPopup(e)},t.prototype.renderHightSearch=function(){},t.prototype.hidePopup=function(e){if(this.isEscapeKey&&this.getModuleName()==="dropdownlist")if(u(this.inputElement)||W.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,u(this.index))this.resetSelection();else{var i=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value):this.value,s=this.findListElement(this.ulElement,"li","data-value",i);this.selectedLI=this.liCollections[this.index]||s,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&this.itemData!==null&&this.setValueTemplate())}this.isVirtualTrackHeight=!1,this.customFilterQuery=null,this.closePopup(0,e);var r=this.getItemData(),n=!u(this.selectedLI);n&&this.enableVirtualization&&this.selectedLI.classList&&(n=this.selectedLI.classList.contains("e-active")),this.inputElement&&this.inputElement.value===""&&!this.isInteracted&&(this.isSelectCustom||n&&this.inputElement.value!==r.text)&&(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(oe.disable)){var i=!1;this.preventFocus&&E.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),x([this.inputWrapper.container],[oe.inputFocus]),this.onFocus(e),this.floatLabelType!=="Never"&&W.calculateWidth(this.inputElement,this.inputWrapper.container)}},t.prototype.focusOut=function(e){this.enabled&&(!this.enableVirtualization&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.isTyped=!0),this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),R([this.inputWrapper.container],[oe.inputFocus]),this.floatLabelType!=="Never"&&W.calculateWidth(this.inputElement,this.inputWrapper.container))},t.prototype.disableItem=function(e){if(this.fields.disabled){this.list||this.renderList();var i=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if(typeof e=="string")i=this.getIndexByValue(e);else if(typeof e=="object"){if(e instanceof HTMLLIElement){for(var s=0;s<this.liCollections.length;s++)if(this.liCollections[s]===e){i=this.getIndexByValue(e.getAttribute("data-value"));break}}else for(var r=JSON.parse(JSON.stringify(e))[this.fields.value],s=0;s<this.listData.length;s++)if(JSON.parse(JSON.stringify(this.listData[s]))[this.fields.value]===r){i=this.getIndexByValue(r);break}}else i=e;var n=i<this.liCollections.length&&i>-1;if(n&&!JSON.parse(JSON.stringify(this.listData[i]))[this.fields.disabled]){var o=this.liCollections[i];if(o){this.disableListItem(o);var l=JSON.parse(JSON.stringify(this.listData[i]));l[this.fields.disabled]=!0,this.listData[i]=l,this.dataSource=this.listData,o.classList.contains(oe.focus)&&this.removeFocus(),o.classList.contains(oe.selected)&&this.clear()}}}}},t.prototype.destroy=function(){if(this.isActive=!1,this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),_y(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&(this.isPopupRender=!1,this.popupObj.hide()),this.unWireEvent(),this.list&&this.unWireListEvents(),!(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))){if(this.inputElement){for(var e=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<e.length;i++)this.inputElement.removeAttribute(e[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),W.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.removeAttribute("tabindex"),this.element.style.display="block",this.inputWrapper.container&&this.inputWrapper.container.parentElement&&(this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?Z(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),Z(this.inputWrapper.container))),delete this.hiddenElement,this.filterInput=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.clearIconElement=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!u(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.inputElement&&!u(this.inputElement.onselect)&&(this.inputElement.onselect=null),W.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties,buttons:this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]},this.clearButton),this.clearButton=null,this.inputElement=null,this.inputWrapper=null,a.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof N&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?a.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(e){return a.prototype.getDataByValue.call(this,e)},t.prototype.clear=function(){this.value=null},Pe([m(null)],t.prototype,"cssClass",void 0),Pe([m("100%")],t.prototype,"width",void 0),Pe([m(!0)],t.prototype,"enabled",void 0),Pe([m(!1)],t.prototype,"enablePersistence",void 0),Pe([m("300px")],t.prototype,"popupHeight",void 0),Pe([m("100%")],t.prototype,"popupWidth",void 0),Pe([m(null)],t.prototype,"placeholder",void 0),Pe([m(null)],t.prototype,"filterBarPlaceholder",void 0),Pe([m({})],t.prototype,"htmlAttributes",void 0),Pe([m(null)],t.prototype,"query",void 0),Pe([m(null)],t.prototype,"valueTemplate",void 0),Pe([m(null)],t.prototype,"headerTemplate",void 0),Pe([m(null)],t.prototype,"footerTemplate",void 0),Pe([m(!1)],t.prototype,"allowFiltering",void 0),Pe([m(300)],t.prototype,"debounceDelay",void 0),Pe([m(!0)],t.prototype,"isDeviceFullScreen",void 0),Pe([m(!1)],t.prototype,"readonly",void 0),Pe([m(!1)],t.prototype,"enableVirtualization",void 0),Pe([m(!1)],t.prototype,"allowResize",void 0),Pe([m(null)],t.prototype,"text",void 0),Pe([m(null)],t.prototype,"value",void 0),Pe([m(!1)],t.prototype,"allowObjectBinding",void 0),Pe([m(null)],t.prototype,"index",void 0),Pe([m("Never")],t.prototype,"floatLabelType",void 0),Pe([m(!1)],t.prototype,"showClearButton",void 0),Pe([O()],t.prototype,"filtering",void 0),Pe([O()],t.prototype,"change",void 0),Pe([O()],t.prototype,"beforeOpen",void 0),Pe([O()],t.prototype,"open",void 0),Pe([O()],t.prototype,"close",void 0),Pe([O()],t.prototype,"blur",void 0),Pe([O()],t.prototype,"focus",void 0),Pe([O()],t.prototype,"resizeStop",void 0),Pe([O()],t.prototype,"resizing",void 0),Pe([O()],t.prototype,"resizeStart",void 0),t=Pe([pt],t),t})(Ld),ob=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),et=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},bp="e-atc-spinner-icon";oe.root="e-combobox";var lb={container:null,buttons:[]},hb=(function(a){ob(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.preRender=function(){a.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){this.getModuleName()==="combobox"&&(v.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),v.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),u(this.inputWrapper.buttons[0])||v.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),v.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(v.add(this.inputElement,"input",this.onInput,this),v.add(this.inputElement,"keyup",this.onFilterUp,this),v.add(this.inputElement,"keydown",this.onFilterDown,this),v.add(this.inputElement,"paste",this.pasteHandler,this),v.add(window,"resize",this.windowResize,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(oe.input)&&E.isDevice||!E.isDevice)&&e.preventDefault()},t.prototype.onBlurHandler=function(e){var i=this.inputElement&&this.inputElement.value===""?null:this.inputElement&&this.inputElement.value,s=u(this.text)?this.text:this.text.replace(/\r\n|\n|\r/g,"");!u(this.listData)&&!u(i)&&i!==s&&this.customValue(e),a.prototype.onBlurHandler.call(this,e)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){W.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.allowCustom?(this.selectedLI=this.getElementByValue(this.value),this.valueMuteChange(this.value)):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){e=this.allowObjectBinding&&!u(e)?H(this.fields.value?this.fields.value:"",e):e;var i=u(e)?null:e.toString();W.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton);var s={};if(this.allowObjectBinding&&(e=this.getDataByValue(e),u(e))){var r=this.fields,n=!1,o=!1;if(this.allowObjectBinding){var l=Object.keys(this.value);l.forEach(function(c){if(c===r.value){o=!0;return}}),l.forEach(function(c){if(c===r.text){n=!0;return}})}s={text:o?n?H(r.text,this.value):H(r.value,this.value):null,value:o?this.value:null,index:null}}this.allowObjectBinding?this.setProperties(s,!0):this.setProperties({value:e,text:e&&e.toString(),index:null},!0),this.activeIndex=this.index;var h=this.fields,p={};p[h.text]=u(e)?null:e.toString(),p[h.value]=u(e)?null:e.toString(),this.itemData=p,this.item=null,(!this.allowObjectBinding&&this.previousValue!==this.value||this.allowObjectBinding&&this.previousValue&&this.value&&!this.isObjectInArray(this.previousValue,[this.value]))&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){var e=this;if(this.fields.disabled&&(this.value!=null&&(this.value=this.isDisableItemValue(this.value)?null:this.value),this.text!=null&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),this.index!=null&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),u(this.value))if(this.text&&u(this.value)){var s=this.getElementByText(this.text);s?this.setSelection(s,null):(W.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else!u(this.activeIndex)&&!u(this.liCollections[this.activeIndex])&&this.setSelection(this.liCollections[this.activeIndex],null);else{var i=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value,s=this.getElementByValue(i),r=!u(s);if(this.enableVirtualization&&this.value){var n=this.fields.value?this.fields.value:"",o=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof N)this.dataSource.executeQuery(new se().where(new we(n,"equal",o))).then(function(c){if(c&&c.result&&c.result.length>0){e.itemData=c.result[0];var d=e.getItemData(),f=e.allowObjectBinding?e.itemData:d.value,g=e.allowObjectBinding&&!u(e.value)?H(e.fields.value?e.fields.value:"",e.value):e.value;(g===d.value&&e.text!==d.text.toString()||g!==d.value&&e.text===d.text.toString())&&e.setProperties({text:d.text?d.text.toString():d.text,value:f})}else e.allowCustom?(e.valueMuteChange(e.value),e.setHiddenValue(),W.setValue(e.text,e.inputElement,e.floatLabelType,e.showClearButton)):e.valueMuteChange(null)});else{var l=new N(this.dataSource).executeLocal(new se().where(new we(n,"equal",o)));if(l&&l.length>0){this.itemData=l[0],r=!0;var h=this.getItemData(),p=this.allowObjectBinding?this.getDataByValue(h.value):h.value;(this.value===h.value&&this.text!==h.text||this.value!==h.value&&this.text===h.text)&&(this.setProperties({text:h.text?h.text.toString():h.text,value:p}),u(s)&&(this.previousValue=this.value))}}}s?this.setSelection(s,null):!this.enableVirtualization&&this.allowCustom||this.allowCustom&&this.enableVirtualization&&!r&&!(this.dataSource instanceof N)?this.valueMuteChange(this.value):(!this.enableVirtualization||this.enableVirtualization&&!(this.dataSource instanceof N)&&!r)&&this.valueMuteChange(null)}this.setHiddenValue(),W.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&this.inputElement.value!==""&&!this.readonly?R([this.inputWrapper.clearButton],oe.clearIconHide):x([this.inputWrapper.clearButton],oe.clearIconHide))},t.prototype.getAriaAttributes=function(){var e={role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly?this.readonly.toString():"false",autocomplete:"off",autocapitalize:"off",spellcheck:"false"};return e},t.prototype.searchLists=function(e){this.isTyped=!0,this.isFiltering()?(a.prototype.searchLists.call(this,e),this.ulElement&&this.filterInput.value.trim()===""&&this.setHoverList(this.ulElement.querySelector("."+oe.li))):(this.ulElement&&this.inputElement.value===""&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+oe.li)),this.incrementalSearch(e))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){this.filterInput=this.inputElement;var e=this.isFiltering()||this.isReact&&this.getModuleName()==="combobox"?this.inputWrapper:lb;return e},t.prototype.onActionComplete=function(e,i,s,r){var n=this;a.prototype.onActionComplete.call(this,e,i,s),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&this.getModuleName()==="combobox"&&this.isTyped&&!this.enableVirtualization&&setTimeout(function(){n.inlineSearch()})},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),i=u(this.list)?this.list:this.list.querySelector("."+oe.selected),s=e.text&&e.text.toString()===this.inputElement.value&&!u(i);if(s)return i;if((E.isDevice&&!this.isDropDownClick||!E.isDevice)&&!u(this.liCollections)&&this.liCollections.length>0){var r=this.inputElement.value,n=this.sortedData,o=this.typeOfData(n).typeof,l=gi(r,this.liCollections,this.filterType,!0,n,this.fields,o,this.ignoreAccent);if(this.enableVirtualization&&r!==""&&this.getModuleName()!=="autocomplete"&&this.isTyped&&!this.allowFiltering){var h=!1,p=this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount,c=this.incrementalEndIndex===0;for((p||c)&&(h=!0,this.incrementalStartIndex=this.incrementalEndIndex,c?this.incrementalEndIndex=Math.min(100,this.totalItemCount):this.incrementalEndIndex=Math.min(this.incrementalEndIndex+100,this.totalItemCount),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),h=!0),(this.viewPortInfo.startIndex!==0||h)&&this.updateIncrementalView(0,this.itemCount),l=gi(r,this.incrementalLiCollections,this.filterType,!0,n,this.fields,o);u(l.item)&&this.incrementalEndIndex<this.totalItemCount;){if(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),h=!0,(this.viewPortInfo.startIndex!==0||h)&&this.updateIncrementalView(0,this.itemCount),l=gi(r,this.incrementalLiCollections,this.filterType,!0,n,this.fields,o),!u(l)){l.index=l.index+this.incrementalStartIndex;break}if(u(l)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}}var d=l.index-(this.itemCount/2-2)>0?l.index-(this.itemCount/2-2):0,f=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;if(d!==this.viewPortInfo.startIndex&&this.updateIncrementalView(d,f),u(l.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var g=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,y=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(g,y),l.item=this.getElementByValue(l.item.getAttribute("data-value"))}l&&l.item&&(l.item=this.getElementByValue(l.item.getAttribute("data-value")))}var b=l.item,C=this.getItemData();if(!u(b)&&!this.enableVirtualization||this.enableVirtualization&&this.isTyped&&u(C)&&u(C.value)&&C.value.toString()===b.getAttribute("data-value").toString()){var S=this.getIndexByValue(b.getAttribute("data-value"))-1,I=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(I)&&this.getModuleName()!=="autocomplete"){this.removeFocus();var A=this.fields.groupBy?this.liCollections[0].offsetHeight:0;if(!this.enableVirtualization)this.list.scrollTop=S*I+A;else{var T=this.list.getElementsByClassName("e-virtual-ddl-content")[0];if(T.style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var L=b.offsetTop,_=this.virtualListInfo&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex:0,X=b.offsetHeight,re=L+_*X,ye=this.list.querySelectorAll(".e-virtual-list").length,V=ye*X;this.list.scrollTop=re-V}}x([b],oe.focus)}}else this.isSelectCustom&&this.inputElement.value.trim()!==""&&(this.removeFocus(),this.enableVirtualization||(this.list.scrollTop=0));return b}else return null},t.prototype.setValue=function(e){return(e&&e.type==="keydown"&&e.action==="enter"||e&&e.type==="click")&&this.removeFillSelection(),this.autofill&&this.getModuleName()==="combobox"&&e&&e.type==="keydown"&&e.action!=="enter"?(this.preventAutoFill=!1,this.inlineSearch(e),!1):a.prototype.setValue.call(this,e)},t.prototype.checkCustomValue=function(){var e=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(e);var i=this.getItemData(),s=this.allowObjectBinding?this.itemData:i.value;this.allowCustom&&u(i.value)&&u(i.text)||this.setProperties({value:s},!this.allowCustom)},t.prototype.showSpinner=function(){u(this.spinnerElement)&&(this.spinnerElement=this.getModuleName()==="autocomplete"?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||W.appendSpan("e-input-group-icon "+bp,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,x([this.spinnerElement],oe.disableIcon),xr({target:this.spinnerElement,width:E.isDevice?"16px":"14px"},this.createElement),Is(this.spinnerElement))},t.prototype.hideSpinner=function(){u(this.spinnerElement)||(Er(this.spinnerElement),R([this.spinnerElement],oe.disableIcon),this.spinnerElement.classList.contains(bp)?Z(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,i){if(i||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var s=this.getTextByValue(e.getAttribute("data-value")).toString(),r=this.getFormattedValue(e.getAttribute("data-value"));this.getModuleName()==="combobox"&&(!this.isSelected&&!this.allowObjectBinding&&this.previousValue!==r||this.allowObjectBinding&&this.previousValue&&r&&!this.isObjectInArray(this.previousValue,[this.getDataByValue(r)])?(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(e.getAttribute("data-value"))):this.getFormattedValue(e.getAttribute("data-value"))):this.updateSelectedItem(e,null,!0)),this.isAndroidAutoFill(s)||this.setAutoFillSelection(s,i)}},t.prototype.isAndroidAutoFill=function(e){if(E.isAndroid){var i=this.getSelectionPoints(),s=this.prevSelectPoints.end,r=i.end,n=this.prevSelectPoints.start,o=i.start;return s!==0&&(s===e.length&&n===e.length||n>o&&s>r||s===r&&n===o)}else return!1},t.prototype.clearAll=function(e,i){(u(i)||!u(i)&&u(i.dataSource))&&a.prototype.clearAll.call(this,e),this.isFiltering()&&!u(e)&&e.target===this.inputWrapper.clearButton&&(this.typedString=this.filterInput.value,this.searchLists(e))},t.prototype.isSelectFocusItem=function(e){return!u(e)},t.prototype.inlineSearch=function(e){var i=e&&(e.action==="down"||e.action==="up"||e.action==="home"||e.action==="end"||e.action==="pageUp"||e.action==="pageDown"),s=i?this.liCollections[this.activeIndex]:this.getFocusElement();if(u(s))if(!u(this.inputElement)&&this.inputElement.value===""){if(this.activeIndex=null,!u(this.list)){this.enableVirtualization||(this.list.scrollTop=0);var n=this.list.querySelector("."+oe.li);this.setHoverList(n)}}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!i){var r=this.getFormattedValue(s.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(r),this.activeIndex=u(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=this.inputElement.value===""?!1:this.preventAutoFill,this.setAutoFill(s,i)}},t.prototype.incrementalSearch=function(e){this.showPopup(e),u(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e,i){i===void 0&&(i=!1);var s=this.getSelectionPoints(),r=this.inputElement.value.substr(0,s.start);if(r&&r.toLowerCase()===e.substr(0,s.start).toLowerCase()){var n=r+e.substr(r.length,e.length);W.setValue(n,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(s.start,this.inputElement.value.length)}else i&&(W.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},t.prototype.getValueByText=function(e){return a.prototype.getValueByText.call(this,e,this.ignoreCase,this.ignoreAccent)},t.prototype.unWireEvent=function(){this.getModuleName()==="combobox"&&(v.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),v.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),u(this.inputWrapper.buttons[0])||v.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(v.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(v.remove(this.inputElement,"input",this.onInput),v.remove(this.inputElement,"keyup",this.onFilterUp),v.remove(this.inputElement,"keydown",this.onFilterDown),v.remove(this.inputElement,"paste",this.pasteHandler),v.remove(window,"resize",this.windowResize))),this.unBindCommonEvent()},t.prototype.setSelection=function(e,i){a.prototype.setSelection.call(this,e,i),!u(e)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()},t.prototype.selectCurrentItem=function(e){var i;if(this.isPopupOpen){if(this.isSelected?i=this.list.querySelector("."+oe.selected):i=this.list.querySelector("."+oe.focus),this.isDisabledElement(i))return;i&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))}e.action==="enter"&&this.inputElement.value===""?this.clearAll(e):this.isTyped&&!this.isSelected&&u(i)&&this.customValue(e),this.hidePopup(e)},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(oe.selected)&&(this.removeFocus(),e.classList.add(oe.focus))},t.prototype.targetFocus=function(e){E.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e),W.calculateWidth(this.inputElement,this.inputWrapper.container)},t.prototype.dropDownClick=function(e){e.preventDefault(),E.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),a.prototype.dropDownClick.call(this,e)},t.prototype.customValue=function(e){var i=this,s=this.getValueByText(this.inputElement.value);if(!this.allowCustom&&this.inputElement.value!==""){var r=this.previousValue,n=this.value;s=this.allowObjectBinding?this.getDataByValue(s):s,this.setProperties({value:s}),u(this.value)&&W.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&(!this.allowObjectBinding&&r===this.value||this.allowObjectBinding&&r&&this.isObjectInArray(r,[this.value]))&&(!this.allowObjectBinding&&n!==this.value||this.allowObjectBinding&&n&&!this.isObjectInArray(n,[this.value]))&&this.onChangeEvent(null)}else if(this.inputElement.value!==""){var o=this.value;if(u(s)){var l=this.inputElement.value===""?null:this.inputElement.value,h={text:l,item:{}};this.isObjectCustomValue=!0,this.initial?this.updateCustomValueCallback(l,h,o):this.trigger("customValueSpecifier",h,function(p){i.updateCustomValueCallback(l,p,o,e)})}else this.isSelectCustom=!1,s=this.allowObjectBinding?this.getDataByValue(s):s,this.setProperties({value:s}),(!this.allowObjectBinding&&o!==this.value||this.allowObjectBinding&&o&&this.value&&!this.isObjectInArray(o,[this.value]))&&this.onChangeEvent(e)}else this.allowCustom&&this.isFocused&&(this.isSelectCustom=!0)},t.prototype.updateCustomValueCallback=function(e,i,s,r){var n=this,o=this.fields,l=i.item,h={};l&&H(o.text,l)&&H(o.value,l)?h=l:(We(o.text,e,h),We(o.value,e,h)),this.itemData=h;var p={};if(this.allowObjectBinding){var c=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):Object.keys(this.itemData);!(this.listData&&this.listData.length>0)&&(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox"&&this.allowFiltering)&&(c=this.firstItem?Object.keys(this.firstItem):Object.keys(this.itemData)),c.forEach(function(f){p[f]=f===o.value||f===o.text?H(o.value,n.itemData):null})}var d={text:H(o.text,this.itemData),value:this.allowObjectBinding?p:H(o.value,this.itemData),index:null};this.setProperties(d,!0),this.setSelection(null,null),this.isSelectCustom=!0,this.isObjectCustomValue=!1,(!this.allowObjectBinding&&s!==this.value||this.allowObjectBinding&&(s==null&&this.value!==null||s&&!this.isObjectInArray(s,[this.value])))&&this.onChangeEvent(r,!0)},t.prototype.onPropertyChanged=function(e,i){this.getModuleName()==="combobox"&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e,i));for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"readonly":W.setReadonly(this.readonly,this.inputElement),this.readonly?(v.remove(this.inputElement,"input",this.onInput),v.remove(this.inputElement,"keyup",this.onFilterUp),v.remove(this.inputElement,"keydown",this.onFilterDown)):(v.add(this.inputElement,"input",this.onInput,this),v.add(this.inputElement,"keyup",this.onFilterUp,this),v.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&this.getModuleName()==="combobox"&&u(this.list)&&a.prototype.renderList.call(this);break;case"allowCustom":break;default:{var o=this.getPropObject(n,e,i);a.prototype.onPropertyChanged.call(this,o.newProperty,o.oldProperty),this.isFiltering()&&n==="dataSource"&&u(this.list)&&this.itemTemplate&&this.getModuleName()==="combobox"&&a.prototype.renderList.call(this);break}}}},t.prototype.render=function(){a.prototype.render.call(this),this.setSearchBox(),this.renderComplete(),this.autoFill=this.autofill},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(e,i){a.prototype.addItem.call(this,e,i)},t.prototype.filter=function(e,i,s){a.prototype.filter.call(this,e,i,s)},t.prototype.showPopup=function(e){a.prototype.showPopup.call(this,e)},t.prototype.hidePopup=function(e){var i=this.inputElement&&this.inputElement.value===""?null:this.inputElement&&this.inputElement.value;if(!u(this.listData)){var s=this.isEscapeKey;this.isEscapeKey&&(W.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var r=this.isSelectCustom?{text:""}:this.getItemData(),n=u(r.text)?r.text:r.text.toString().replace(/\r\n|\n|\r/g,""),o=u(this.list)?null:this.list.querySelector("."+oe.selected);if(this.inputElement&&n===this.inputElement.value&&!u(o)){this.isSelected&&(this.onChangeEvent(e),this.isSelectCustom=!1),a.prototype.hidePopup.call(this,e);return}if(this.getModuleName()==="combobox"&&this.inputElement.value.trim()!==""){var l=this.sortedData,h=this.typeOfData(l).typeof,p=gi(this.inputElement.value,this.liCollections,"Equal",!0,l,this.fields,h);this.selectedLI=p.item,u(p.index)&&(p.index=gi(this.inputElement.value,this.liCollections,"StartsWith",!0,l,this.fields,h).index),this.activeIndex=p.index,u(this.selectedLI)?s&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(e)}var c=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value;u(this.listData)&&this.allowCustom&&!u(i)&&i!==c&&this.customValue(),a.prototype.hidePopup.call(this,e)},t.prototype.focusIn=function(){this.enabled&&(E.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),a.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(e){a.prototype.focusOut.call(this,e)},t.prototype.getItems=function(){return a.prototype.getItems.call(this)},t.prototype.getDataByValue=function(e){return a.prototype.getDataByValue.call(this,e)},t.prototype.renderHightSearch=function(){},et([m(!1)],t.prototype,"autofill",void 0),et([m(!0)],t.prototype,"allowCustom",void 0),et([m({})],t.prototype,"htmlAttributes",void 0),et([m(!1)],t.prototype,"allowFiltering",void 0),et([m(!0)],t.prototype,"isDeviceFullScreen",void 0),et([m(null)],t.prototype,"query",void 0),et([m(null)],t.prototype,"index",void 0),et([m(!0)],t.prototype,"showClearButton",void 0),et([O()],t.prototype,"customValueSpecifier",void 0),et([O()],t.prototype,"filtering",void 0),et([m(null)],t.prototype,"valueTemplate",void 0),et([m("Never")],t.prototype,"floatLabelType",void 0),et([m(null)],t.prototype,"filterBarPlaceholder",void 0),et([m(null)],t.prototype,"cssClass",void 0),et([m(null)],t.prototype,"headerTemplate",void 0),et([m(null)],t.prototype,"footerTemplate",void 0),et([m(null)],t.prototype,"placeholder",void 0),et([m("100%")],t.prototype,"width",void 0),et([m("300px")],t.prototype,"popupHeight",void 0),et([m("100%")],t.prototype,"popupWidth",void 0),et([m(!1)],t.prototype,"readonly",void 0),et([m(null)],t.prototype,"text",void 0),et([m(null)],t.prototype,"value",void 0),et([m(!1)],t.prototype,"allowObjectBinding",void 0),t=et([pt],t),t})(Fr),ub=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Mt=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r};oe.root="e-autocomplete";oe.icon="e-input-group-icon e-ddl-icon e-search-icon";var Rd=(function(a){ub(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.isFiltered=!1,s.searchList=!1,s}return t.prototype.preRender=function(){a.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"auto-complete"},t.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},t.prototype.getQuery=function(e){var i=e?e.clone():this.query?this.query.clone():new se,s=this.allowObjectBinding&&!u(this.value)?H(this.fields.value?this.fields.value:"",this.value):this.value,r=this.queryString===""&&!u(s)?"equal":this.filterType,n=this.queryString===""&&!u(s)?s:this.queryString;if(this.isFiltered){if(this.enableVirtualization&&!u(this.customFilterQuery))i=this.customFilterQuery.clone();else if(!this.enableVirtualization)return i}if(this.queryString!==null&&this.queryString!==""){var o=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof N)&&o==="string"||o==="number")i.where("",r,n,this.ignoreCase,this.ignoreAccent);else{var l=u(this.fields.value)?"":this.fields.value;i.where(l,r,n,this.ignoreCase,this.ignoreAccent)}}if(!u(this.suggestionCount)&&!this.enableVirtualization){if(this.suggestionCount!==20)for(var h=0;h<i.queries.length;h++)i.queries[h].fn==="onTake"&&i.queries.splice(h,1);i.take(this.suggestionCount)}if(this.enableVirtualization){var p=0,c=0,d=this.getTakeValue();if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++)i.queries[h].fn==="onSkip"&&(c=i.queries[h].e.nos),i.queries[h].fn==="onTake"&&(p=d<=i.queries[h].e.nos?i.queries[h].e.nos:d);if(p<=0&&this.query&&this.query.queries.length>0){for(var h=0;h<this.query.queries.length;h++)if(this.query.queries[h].fn==="onTake"){var f=this.query.queries[h].e.nos;p=d<=f?f:d}}if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++){if(i.queries[h].fn==="onSkip"){c=i.queries[h].e.nos,i.queries.splice(h,1),--h;continue}if(i.queries[h].fn==="onTake"){var g=i.queries[h].e.nos;p=g<=p?p:g,i.queries.splice(h,1),--h}}c>0&&this.virtualItemStartIndex<=c?i.skip(c):i.skip(this.virtualItemStartIndex),p>0&&d<=p?i.take(p):i.take(d),i.requiresCount()}return i},t.prototype.performFiltering=function(e){var i=this,s={preventDefaultAction:!1,text:this.filterInput?this.filterInput.value:null,updateData:function(r,n,o){s.cancel||(i.isFiltered=!0,i.customFilterQuery=n,i.filterAction(r,n,o))},cancel:!1};this.trigger("filtering",s,function(r){!r.cancel&&!i.isFiltered&&!r.preventDefaultAction&&(i.searchList=!0,i.filterAction(i.dataSource,null,i.fields,e))})},t.prototype.searchLists=function(e){if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.checkAndResetCache(),u(this.list)&&a.prototype.renderList.call(this,e,!0),this.queryString=this.filterInput.value,e.type!=="mousedown"&&(e.keyCode===40||e.keyCode===38)){this.queryString=this.queryString===""?null:this.queryString,this.beforePopupOpen=!0,this.resetList(this.dataSource,this.fields,null,e);return}this.isSelected=!1,this.activeIndex=null,this.isRequesting=!1,this.queryString!==""&&this.debounceDelay>0?this.debouncedFiltering(e,this.debounceDelay):this.performFiltering(e)},t.prototype.filter=function(e,i,s){this.isFiltered=!0,this.filterAction(e,i,s)},t.prototype.filterAction=function(e,i,s,r){this.beforePopupOpen=!0;var n=this.list.classList.contains("e-nodata");if(this.queryString!==""&&this.queryString.length>=this.minLength){if(this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(e,s,i,r),n=this.list.classList.contains("e-nodata"),this.enableVirtualization&&!n){if(!this.list.querySelector(".e-virtual-ddl-content")&&this.list.querySelector(".e-list-parent")){var o=this.createElement("div",{className:"e-virtual-ddl-content"});o.style.cssText=this.getTransformValues(),this.list.appendChild(o).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")&&this.list.parentElement){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});o.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(o)}}(this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof N)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof N&&this.totalItemCount!==0)&&this.getFilteringSkeletonCount()}else this.hidePopup(r),this.beforePopupOpen=!1;this.renderReactTemplates()},t.prototype.clearAll=function(e,i){(u(i)||!u(i)&&u(i.dataSource))&&(a.prototype.clearAll.call(this,e),this.checkAndResetCache()),this.beforePopupOpen&&this.hidePopup()},t.prototype.onActionComplete=function(e,i,s,r){this.enableVirtualization||(this.fixedHeaderElement=null),(this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof N)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof N&&this.totalItemCount!==0)&&this.getFilteringSkeletonCount(),a.prototype.onActionComplete.call(this,e,i,s);var n=this.list.querySelector("."+oe.li);u(n)||R([n],oe.focus),!u(this.itemData)&&!this.enableVirtualization&&this.focusIndexItem(),this.postBackAction()},t.prototype.postBackAction=function(){if(this.autofill&&!u(this.liCollections[0])&&this.searchList){var e=[this.liCollections[0]],i=this.listData,s=this.typeOfData(i).typeof,r=gi(this.inputElement.value,e,"StartsWith",this.ignoreCase,i,this.fields,s);this.searchList=!1,u(r.item)||a.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},t.prototype.setSelection=function(e,i){if(!this.isValidLI(e)){this.selectedLI=e;return}if(!u(i)&&i.type==="keydown"&&i.action!=="enter"&&i.action!=="tab"&&this.isValidLI(e)){var s=this.getFormattedValue(e.getAttribute("data-value"));if(this.activeIndex=this.getIndexByValue(s),this.setHoverList(e),this.selectedLI=e,this.setScrollPosition(i),this.autofill&&this.isPopupOpen){this.preventAutoFill=!1;var r=i&&i.action==="down"||i.action==="up"||i.action==="home"||i.action==="end"||i.action==="pageUp"||i.action==="pageDown";a.prototype.setAutoFill.call(this,e,r)}}else a.prototype.setSelection.call(this,e,i),this.isFiltered=!1},t.prototype.listOption=function(e,i){var s=this,r=a.prototype.listOption.call(this,e,i);if(u(r.itemCreated))r.itemCreated=function(o){s.highlight&&(s.element.tagName===s.getNgDirective()&&s.itemTemplate?setTimeout(function(){ia(o.item,s.queryString,s.ignoreCase,s.filterType)},0):ia(o.item,s.queryString,s.ignoreCase,s.filterType))};else{var n=r.itemCreated;r.itemCreated=function(o){s.highlight&&ia(o.item,s.queryString,s.ignoreCase,s.filterType),n.apply(s,[o])}}return r},t.prototype.isFiltering=function(){return!0},t.prototype.renderPopup=function(e){this.enableVirtualization||(this.list.scrollTop=0),a.prototype.renderPopup.call(this,e)},t.prototype.isEditTextBox=function(){return!1},t.prototype.isPopupButton=function(){return this.showPopupButton},t.prototype.isSelectFocusItem=function(e){return!1},t.prototype.setInputValue=function(e,i){var s=i&&i.text?i.text:i&&i.value,r=e&&e.text?e.text:e&&e.value?e.value:this.value;if(this.allowObjectBinding&&(s=u(s)?s:H(this.fields.value?this.fields.value:"",s),r=u(r)?r:H(this.fields.value?this.fields.value:"",r)),r&&this.typedString===""&&!this.allowCustom&&!(this.dataSource instanceof N)){var n=this.typeOfData(this.dataSource).typeof==="string"?"":this.fields.value,o=this.getItems().length,l=new se,h=this;new N(this.dataSource).executeQuery(l.where(new we(n,"equal",r))).then(function(p){p.result.length>0?(h.value=n!==""?h.allowObjectBinding?p.result[0]:p.result[0][h.fields.value].toString():p.result[0].toString(),h.addItem(p.result,o),h.updateValues()):e&&e.text?h.setOldText(s):e&&e.value?h.setOldValue(s):h.updateValues()})}else e&&(e.text?this.setOldText(s):this.setOldValue(s))},t.prototype.showPopup=function(e){if(this.enabled){if(this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.preventAutoFill=!0,u(this.list)?this.renderList(e):this.resetList(this.dataSource,this.fields,null,e)}},t.prototype.hidePopup=function(e){a.prototype.hidePopup.call(this,e),this.activeIndex=null,this.virtualListInfo=this.viewPortInfo,this.previousStartIndex=this.viewPortInfo.startIndex,this.startIndex=this.viewPortInfo.startIndex,this.previousEndIndex=this.viewPortInfo.endIndex},t.prototype.onPropertyChanged=function(e,i){this.getModuleName()==="autocomplete"&&this.setUpdateInitial(["fields","query","dataSource"],e);for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"showPopupButton":if(this.showPopupButton){var o=W.appendSpan(oe.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=o,W.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&v.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else Z(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:{var l=this.getPropObject(n,e,i);a.prototype.onPropertyChanged.call(this,l.newProperty,l.oldProperty);break}}}},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++){var i=this.ulElement.querySelector(".e-active");i||(Ky(this.liCollections[e]),ia(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType)),i=null}},t.prototype.getModuleName=function(){return"autocomplete"},t.prototype.render=function(){a.prototype.render.call(this)},Mt([dt({value:null,iconCss:null,groupBy:null,disabled:null},Th)],t.prototype,"fields",void 0),Mt([m(!0)],t.prototype,"ignoreCase",void 0),Mt([m(!1)],t.prototype,"showPopupButton",void 0),Mt([m(!1)],t.prototype,"highlight",void 0),Mt([m(20)],t.prototype,"suggestionCount",void 0),Mt([m({})],t.prototype,"htmlAttributes",void 0),Mt([m(null)],t.prototype,"query",void 0),Mt([m(1)],t.prototype,"minLength",void 0),Mt([m("Contains")],t.prototype,"filterType",void 0),Mt([O()],t.prototype,"filtering",void 0),Mt([m(null)],t.prototype,"index",void 0),Mt([m("Never")],t.prototype,"floatLabelType",void 0),Mt([m(null)],t.prototype,"valueTemplate",void 0),Mt([m(null)],t.prototype,"filterBarPlaceholder",void 0),Mt([m(!1)],t.prototype,"allowFiltering",void 0),Mt([m(null)],t.prototype,"text",void 0),t=Mt([pt],t),t})(hb),eh="e-float-line",vn="e-float-text",Mr="e-label-top",er="e-label-bottom";function Cp(a,t,e,i,s,r,n){var o=pe("span",{className:eh}),l=pe("label",{className:vn}),h=e.getAttribute("id")?e.getAttribute("id"):at("ej2_multiselect");e.id=h,!u(e.id)&&e.id!==""&&(l.id="label_"+e.id.replace(/ /g,"_"),l.setAttribute("for",e.id),G(i,{"aria-labelledby":l.id})),!u(i.placeholder)&&i.placeholder!==""&&(l.innerText=th(i.placeholder),i.removeAttribute("placeholder")),l.innerText=th(n),t.appendChild(o),t.appendChild(l),a.classList.add("e-float-input"),pb(s,l),r==="Always"&&(l.classList.contains(er)&&R([l],er),x([l],Mr))}function pb(a,t){a&&a.length>0?(x([t],Mr),R([t],er)):(R([t],Mr),x([t],er))}function cb(a,t,e,i,s,r,n){var o=t.querySelector("."+vn),l=t.querySelector("."+eh),h;u(o)?(h=n!==null?n:"",Sp(s,i,h)):(h=o.innerText,Z(e.querySelector("."+vn)),Sp(s,i,h),u(l)||Z(e.querySelector("."+eh))),a.classList.remove("e-float-input")}function Sp(a,t,e){a&&a.length?t.placeholder="":t.placeholder=e}function db(a,t){a.classList.add("e-input-focus");var e=t.querySelector("."+vn);u(e)||(x([e],Mr),e.classList.contains(er)&&R([e],er))}function fb(a,t,e,i,s){a.classList.remove("e-input-focus");var r=t.querySelector("."+vn);e&&e.length<=0&&i==="Auto"&&!u(r)&&(r.classList.contains(Mr)&&R([r],Mr),x([r],er))}function th(a){var t="";if(!u(a)&&a!==""){var e=document.createElement("span");e.innerHTML='<input  placeholder="'+a+'"/>';var i=e.children[0];t=i.placeholder}return t}var gb=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),ue=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},Ws="e-input-focus",Jr="e-disabled",mb="e-multiselect e-input-group e-control-wrapper",vb="e-multi-select-wrapper",yb="e-mob-wrapper",Ve="e-hide-listitem",bb="e-delim-view",Cb="e-chips-collection",js="e-chips",Sb="e-chipcontent",sa="e-chips-close",Qi="e-chip-selected",wb="e-searcher",wp="e-delimiter",ra="e-zero-size",Ib="e-remain",Ip="e-chips-close e-close-hooker",xp="e-delim-values",xb="e-ddl e-popup e-multi-select-list-wrapper",Eb="e-dropdownbase",Ep="e-rtl",il="e-close-icon-hide",Ab="e-mob-chip",Db="e-ddl-footer",kb="e-ddl-header",Ap="e-ddl-disable-icon",Dp="e-ms-spinner-icon",Tb="e-multi-hidden",Lb="destroy",kp="e-input-group-icon e-ddl-icon",Tp="e-icon-anim",na="e-delim-total",Rb="e-multiselect-box",Mb="e-filter-parent",Lp="e-search-custom-width",sl="e-input-filter",Fb="e-resizer-right e-icons",Or=(function(a){gb(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.clearIconWidth=0,s.previousFilterText="",s.storedSelectAllHeight=0,s.isUpdateHeaderHeight=!1,s.isUpdateFooterHeight=!1,s.isBlurDispatching=!1,s.isFilterPrevented=!1,s.isFilteringAction=!1,s.isValidKey=!1,s.selectAllEventData=[],s.selectAllEventEle=[],s.preventSetCurrentData=!1,s.isSelectAllLoop=!1,s.scrollFocusStatus=!1,s.keyDownStatus=!1,s}return t.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add(Ep):this.overAllWrapper.classList.remove(Ep),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},t.prototype.requiredModules=function(){var e=[];if(this.enableVirtualization&&e.push({args:[this],member:"VirtualScroll"}),this.mode==="CheckBox"){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=i}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},t.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];switch(s){case"class":{var r=this.htmlAttributes[""+s].replace(/\s+/g," ").trim();r!==""&&(x([this.overAllWrapper],r.split(" ")),x([this.popupWrapper],r.split(" ")));break}case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(s,this.htmlAttributes[""+s]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:{var n=["id"],o=["name","required","aria-required","form"],l=["title","role","style","class"];n.indexOf(s)>-1?this.element.setAttribute(s,this.htmlAttributes[""+s]):s.indexOf("data")===0||o.indexOf(s)>-1?this.hiddenElement.setAttribute(s,this.htmlAttributes[""+s]):l.indexOf(s)>-1?this.overAllWrapper.setAttribute(s,this.htmlAttributes[""+s]):s!=="size"&&!u(this.inputElement)&&this.inputElement.setAttribute(s,this.htmlAttributes[""+s]);break}}}},t.prototype.updateReadonly=function(e){u(this.inputElement)||(e||this.mode==="CheckBox"?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly"))},t.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(il)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(il))},t.prototype.updateCssClass=function(){if(!u(this.cssClass)&&this.cssClass!==""){var e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),e!==""&&(x([this.overAllWrapper],e.split(" ")),x([this.popupWrapper],e.split(" ")))}},t.prototype.updateOldPropCssClass=function(e){!u(e)&&e!==""&&(e=e.replace(/\s+/g," ").trim(),e!==""&&(R([this.overAllWrapper],e.split(" ")),R([this.popupWrapper],e.split(" "))))},t.prototype.onPopupShown=function(e){var i=this;if(E.isDevice&&this.mode==="CheckBox"&&this.allowFiltering){var s=this;window.onpopstate=function(){s.hidePopup(),s.inputElement.focus()},history.pushState({},"")}var r={name:"FadeIn",duration:100},n={popup:this.popupObj,event:e,cancel:!1,animation:r};this.trigger("open",n,function(o){o.cancel||(i.focusAtFirstListItem(!0),i.popupObj&&document.body.appendChild(i.popupObj.element),i.mode==="CheckBox"&&i.enableGroupCheckBox&&!u(i.fields.groupBy)&&i.updateListItems(i.list.querySelectorAll("li.e-list-item"),i.mainList.querySelectorAll("li.e-list-item")),(i.mode==="CheckBox"||i.showDropDownIcon)&&x([i.overAllWrapper],[Tp]),i.refreshPopup(),i.renderReactTemplates(),i.popupObj&&i.popupObj.show(o.animation,i.zIndex===1e3?i.element:null),i.isReact&&setTimeout(function(){if(i.popupHeight&&i.list&&i.popupHeight!=="auto"){var l=typeof i.popupHeight=="string"?parseInt(i.popupHeight,10):i.popupHeight;if(!i.isUpdateHeaderHeight&&i.headerTemplate&&i.header){var h=i.list.style.maxHeight===""?l:parseInt(i.list.style.maxHeight,10);i.list.style.maxHeight=(h-i.header.offsetHeight).toString()+"px",i.isUpdateHeaderHeight=!0}if(!i.isUpdateFooterHeight&&i.footerTemplate&&i.footer){var h=i.list.style.maxHeight===""?l:parseInt(i.list.style.maxHeight,10);i.list.style.maxHeight=(h-i.footer.offsetHeight).toString()+"px",i.isUpdateFooterHeight=!0}}},15),G(i.inputElement,{"aria-expanded":"true","aria-owns":i.element.id+"_popup","aria-controls":i.element.id}),i.updateAriaActiveDescendant(),i.isFirstClick&&(i.enableVirtualization||i.loadTemplate()),i.mode==="CheckBox"&&i.showSelectAll&&v.add(i.popupObj.element,"click",i.clickHandler,i))})},t.prototype.updateVirtualReOrderList=function(e){var i=this.getForQuery(this.value,!0).clone();if(this.isVirtualReorder=!0,this.enableVirtualization&&this.dataSource instanceof N?this.resetList(this.selectedListData,this.fields,i):this.resetList(this.dataSource,this.fields,i),this.UpdateSkeleton(),this.isVirtualReorder=!1,this.liCollections=this.list.querySelectorAll("."+B.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});s.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(s)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),e&&this.loadTemplate()},t.prototype.updateListItems=function(e,i){for(var s=0;s<e.length;s++)this.findGroupStart(e[s]),this.findGroupStart(i[s]);this.deselectHeader()},t.prototype.loadTemplate=function(){if(this.refreshListItems(null),this.enableVirtualization&&this.list&&this.mode==="CheckBox"){var e=this.list.querySelectorAll(".e-reorder")[0];this.list.querySelector(".e-virtual-ddl-content")&&e&&this.list.querySelector(".e-virtual-ddl-content").removeChild(e)}this.mode==="CheckBox"&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this}),this.isPreventScrollAction=!0},t.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&this.mode!=="CheckBox"||this.mode==="CheckBox"&&!this.enableSelectionOrder)&&!u(this.value)&&this.value.length>0){var e=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1],i=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",e);u(i)||this.scrollBottom(i,void 0,!1,null,!0)}if(this.enableVirtualization){var s=this.list.querySelector("."+B.focus);this.isKeyBoardAction=!1,this.scrollBottom(s,void 0,!1,null,!0)}},t.prototype.focusAtFirstListItem=function(e){if(this.ulElement&&this.ulElement.querySelector("li."+B.li)){var i=void 0;if(this.mode==="CheckBox"){this.removeFocus();return}else if(this.enableVirtualization){if(this.fields.disabled){if(i=this.ulElement.querySelector("li."+B.li+":not(.e-virtual-list):not(.e-hide-listitem):not(."+Jr+")"),e&&this.viewPortInfo&&this.viewPortInfo.startIndex!==0){var s=this.ulElement.querySelectorAll("li."+B.li+":not(.e-virtual-list):not(.e-hide-listitem)");i=s&&s.length>0?s[2]:i}}else if(i=this.ulElement.querySelector("li."+B.li+":not(.e-virtual-list):not(.e-hide-listitem)"),e&&this.viewPortInfo&&this.viewPortInfo.startIndex!==0){var s=this.ulElement.querySelectorAll("li."+B.li+":not(.e-virtual-list):not(.e-hide-listitem)");i=s&&s.length>0?s[2]:i}}else this.fields.disabled?i=this.ulElement.querySelector("li."+B.li+":not(."+Ve+"):not(."+Jr+")"):i=this.ulElement.querySelector("li."+B.li+":not(."+Ve+")");i!==null&&(this.removeFocus(),this.addListFocus(i))}},t.prototype.focusAtLastListItem=function(e){var i;if(e)i=gi(e,this.liCollections,"StartsWith",this.ignoreCase);else if(this.value&&this.value.length){var s=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];gi(s,this.liCollections,"StartsWith",this.ignoreCase)}else i=null;i&&i.item!==null&&(this.addListFocus(i.item),((this.allowCustomValue||this.allowFiltering)&&this.isPopupOpen()&&this.closePopupOnSelect&&!this.enableVirtualization||this.closePopupOnSelect&&!this.enableVirtualization)&&this.scrollBottom(i.item,i.index))},t.prototype.getAriaAttributes=function(){var e={"aria-disabled":"false",role:"combobox","aria-expanded":"false"};return e},t.prototype.updateListARIA=function(){u(this.ulElement)||G(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"list"});var e=!!(!u(this.inputElement)&&this.inputElement.disabled);!this.isPopupOpen()&&!u(this.inputElement)&&G(this.inputElement,this.getAriaAttributes()),e&&G(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},t.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var i=this.htmlAttributes;$(i,{"aria-disabled":e},i),this.setProperties({htmlAttributes:i},!0)}},t.prototype.removelastSelection=function(e){var i=this.chipCollectionWrapper.querySelector("span."+Qi);if(i!==null){this.removeSelectedChip(e);return}var s=this.chipCollectionWrapper.querySelectorAll("span."+js),r=s[s.length-1].getAttribute("data-value");u(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice());var n=this.allowObjectBinding?this.enableVirtualization?this.getVirtualDataByValue(this.getFormattedValue(r)):this.getDataByValue(this.getFormattedValue(r)):this.getFormattedValue(r);this.allowCustomValue&&(r!=="false"&&n===!1||!u(n)&&n.toString()==="NaN")&&(n=r),this.removeValue(n,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},t.prototype.onActionFailure=function(e){a.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},t.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,this.mode==="CheckBox"&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.targetInputElement?this.targetInputElement.value:null},t.prototype.getForQuery=function(e,i){var s,r=this.isPrimitiveData?"":this.fields.value;if(this.enableVirtualization&&e)if(i){for(var n=this.viewPortInfo.startIndex,o=n+this.viewPortInfo.endIndex<=e.length&&e[n+this.viewPortInfo.endIndex]?n+this.viewPortInfo.endIndex:e.length,l=n;l<o;l++){var h=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",e[l]):e[l];l===n?s=new we(r,"equal",h):s=s.or(r,"equal",h)}return new se().where(s)}else{for(var l=0;l<e.length;l++){var h=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",e[l]):e[l];this.isaddNonPresentItems?s=l===0?new we(r,"equal",e[l]):s.or(r,"equal",e[l]):s=l===0?s=new we(r,"notequal",h):s.and(r,"notequal",h)}return new se().where(s)}else for(var l=0;l<e.length;l++)l===0?s=new we(r,"equal",e[l]):s=s.or(r,"equal",e[l]);return this.dataSource instanceof N&&this.dataSource.adaptor instanceof ka?new se().where(s):this.getQuery(this.query).clone().where(s)},t.prototype.onActionComplete=function(e,i,s,r){var n=this;if(this.dataSource instanceof N&&!u(s)&&!this.virtualGroupDataSource&&(this.totalItemCount=s.count),this.value&&i&&i.length>0&&this.allowFiltering&&this.mode!=="CheckBox"&&!this.enableVirtualization&&!this.isFilterPrevented&&!this.allowCustomValue&&this.isFilteringAction){var o=i.every(function(y){var b=H(n.fields.value?n.fields.value:"",y);return n.value.some(function(C){var S=n.allowObjectBinding?H(n.fields.value?n.fields.value:"",C):C;return b===S})});o&&(e.innerHTML="",i=[])}a.prototype.onActionComplete.call(this,e,i,s),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering);var l=this;if(!u(this.value)&&!this.allowCustomValue&&!this.enableVirtualization&&this.listData&&this.listData.length>0)for(var h=0;h<this.value.length;h++){var p=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",l.value[h]):l.value[h],c=this.findListElement(this.allowFiltering&&!u(this.mainList)?this.mainList:e,"li","data-value",p);!c&&!(this.dataSource instanceof N)&&(this.value.splice(h,1),h-=1)}var d=[];u(this.value)||(d=this.presentItemValue(this.ulElement));var f=d.some(function(y){return y!==null});if(d.length>0&&this.dataSource instanceof N&&!u(this.value)&&this.listData!=null&&(!this.enableVirtualization||this.enableVirtualization&&this.valueTemplate)&&f?(this.isaddNonPresentItems=!0,this.addNonPresentItems(d,this.ulElement,this.listData),this.isaddNonPresentItems=!1):this.updateActionList(e,i,s),this.dataSource instanceof N&&this.allowCustomValue&&!this.isCustomRendered&&this.inputElement.value&&this.inputElement.value!==""){var g=new se;g=this.allowFiltering?g.where(this.fields.text,"startswith",this.inputElement.value,this.ignoreCase,this.ignoreAccent):g,this.checkForCustomValue(g,this.fields),this.isCustomRendered=!0,this.remoteCustomValue=this.enableVirtualization?!1:this.remoteCustomValue}this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)&&!u(this.fields.disabled)&&this.disableGroupHeader(),this.dataSource instanceof N&&this.mode==="CheckBox"&&this.allowFiltering&&this.removeFocus()},t.prototype.updateActionList=function(e,i,s,r){this.mode==="CheckBox"&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),!this.mainList&&!this.mainData?(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=i,this.mainListCollection=this.liCollections):(u(this.mainData)||this.mainData.length===0)&&(this.mainData=i),!((this.remoteCustomValue||i.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&this.inputElement.value!==""&&(this.checkForCustomValue(this.tempQuery,this.fields),this.isCustomRendered))&&(this.value&&this.value.length&&(this.mode!=="CheckBox"&&!u(this.inputElement)&&this.inputElement.value.trim()!==""||this.mode==="CheckBox"||(this.keyCode===8||this.keyCode===46)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof N&&this.inputElement.value==="")&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),u(this.setInitialValue)||this.setInitialValue(),u(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!u(this.text)&&(u(this.value)||this.value.length===0)&&this.initialTextUpdate(),this.enableVirtualization?this.dataSource instanceof N||this.initialValueUpdate():this.isRemoveSelection?this.initialValueUpdate():this.initialValueUpdate(this.listData,!0),this.initialUpdate(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(s)))},t.prototype.refreshSelection=function(){var e,i,s=this.hideSelectedItem?Ve:B.selected;if(!u(this.value)){for(var r=0;!u(this.value[r]);r++)if(e=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[r]):this.value[r],i=this.findListElement(this.list,"li","data-value",e),i){if(x([i],s),this.hideSelectedItem&&i.previousSibling&&i.previousElementSibling.classList.contains(B.group)&&(!i.nextElementSibling||i.nextElementSibling.classList.contains(B.group))&&x([i.previousElementSibling],s),this.hideSelectedItem&&this.fields.groupBy&&!i.previousElementSibling.classList.contains(Ve)&&this.hideGroupItem(e),this.hideSelectedItem&&i.classList.contains(B.focus)){R([i],B.focus);var n=i.parentElement.querySelectorAll("."+B.li+":not(."+Ve+"):not(."+Jr+")");n.length>0?(x([n[0]],B.focus),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+B.li).length>0||(this.l10nUpdate(),x([this.list],B.noData))}if(i.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&i.classList.contains("e-active")){var o=i.getElementsByClassName("e-check").length;if(o===0){var l={module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:i,e:null};this.notify("updatelist",l)}}}}this.checkSelectAll(),this.checkMaxSelection()},t.prototype.hideGroupItem=function(e){var i,s,r=this.hideSelectedItem?Ve:B.selected;s=i=this.findListElement(this.ulElement,"li","data-value",e);var n=0,o=0,l=!0,h=!0;do i&&i.previousElementSibling&&!i.previousElementSibling.classList.contains(Ve)&&i.previousElementSibling.classList.contains(B.li)&&(l=!1),!l||!i||i.previousElementSibling&&i.previousElementSibling.classList.contains(B.group)?n=10:i=i.previousElementSibling,s&&s.nextElementSibling&&!s.nextElementSibling.classList.contains(Ve)&&s.nextElementSibling.classList.contains(B.li)&&(h=!1),!h||!s||s.nextElementSibling&&s.nextElementSibling.classList.contains(B.group)?o=10:s=s.nextElementSibling;while(n<10||o<10);l&&h&&!i.previousElementSibling.classList.contains(Ve)?x([i.previousElementSibling],r):l&&h&&i.previousElementSibling.classList.contains(Ve)&&R([i.previousElementSibling],r)},t.prototype.getValidLi=function(){var e=this.ulElement.querySelector("li."+B.li+":not(."+Ve+")");return u(e)?this.liCollections[0]:e},t.prototype.checkSelectAll=function(){var e=u(this.fields.disabled)?this.list.querySelectorAll("li.e-list-group-item.e-active").length:this.list.querySelectorAll("li.e-list-group-item.e-active:not(.e-disabled)").length,i=this.list.querySelectorAll("li.e-list-item"),s=this.enableVirtualization?this.list.querySelectorAll("li."+B.li+":not(.e-virtual-list)").length:u(this.fields.disabled)?this.list.querySelectorAll("li."+B.li).length:this.list.querySelectorAll("li."+B.li+":not(.e-disabled)").length,r=this.list.querySelectorAll("li."+B.selected).length;if(this.enableGroupCheckBox&&!u(this.fields.groupBy)&&(r=r-e),!this.enableVirtualization&&(s===r||r===this.maximumSelectionLength)&&this.mode==="CheckBox"&&this.showSelectAll||this.enableVirtualization&&this.mode==="CheckBox"&&this.showSelectAll&&this.value&&this.value.length===this.totalItemCount?this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check"}):s!==r&&this.mode==="CheckBox"&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var n=0;n<i.length;n++)this.findGroupStart(i[n]);this.deselectHeader()}},t.prototype.openClick=function(e){!this.openOnClick&&this.mode!=="CheckBox"&&!this.isPopupOpen()?this.targetElement()!==""?this.showPopup():this.hidePopup(e):!this.openOnClick&&this.mode==="CheckBox"&&!this.isPopupOpen()&&this.showPopup()},t.prototype.keyUp=function(e){if(this.mode==="CheckBox"&&!this.openOnClick){var i=String.fromCharCode(e.keyCode),s=i.match(/\w/);u(s)||(this.isValidKey=!0)}if(this.isValidKey=this.isPopupOpen()&&e.keyCode===8||this.isValidKey,this.isValidKey=e.ctrlKey&&e.keyCode===86?!1:this.isValidKey,this.isValidKey&&this.inputElement)switch(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode){default:this.search(e)}},t.prototype.filter=function(e,i,s){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,i,s)},t.prototype.getQuery=function(e){var i=e?e.clone():this.query?this.query.clone():new se;if(this.isFiltered){if(this.enableVirtualization&&!u(this.customFilterQuery))return i=this.customFilterQuery.clone(),this.virtualFilterQuery(i);if(!this.enableVirtualization)return i}if(this.isFilterAction){if(this.targetElement()!==null&&!this.enableVirtualization||this.enableVirtualization&&this.targetElement()!==null&&this.targetElement().trim()!==""){var s=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof N)&&s==="string"||s==="number")i.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent);else if(this.enableVirtualization&&this.targetElement()!==""&&!this.isClearAllAction||!this.enableVirtualization){var r=this.fields;i.where(u(r.text)?"":r.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}}return this.enableVirtualization&&this.viewPortInfo.endIndex!==0&&!this.virtualSelectAll?this.virtualFilterQuery(i):this.virtualSelectAll?e?e.skip(0).take(this.maximumSelectionLength).requiresCount():this.query?this.query.skip(0).take(this.maximumSelectionLength).requiresCount():new se().skip(0).take(this.maximumSelectionLength).requiresCount():i}else return this.enableVirtualization&&this.viewPortInfo.endIndex!==0&&!this.virtualSelectAll?this.virtualFilterQuery(i):this.virtualSelectAll?e?e.skip(0).take(this.maximumSelectionLength).requiresCount():this.query?this.query.skip(0).take(this.maximumSelectionLength).requiresCount():new se().skip(0).take(this.maximumSelectionLength).requiresCount():e||(this.query?this.query:new se)},t.prototype.virtualFilterQuery=function(e){for(var i=this.getTakeValue(),s=!0,r=!0,n=0;n<e.queries.length;n++)this.getModuleName()==="multiselect"&&(e.queries[n].e&&e.queries[n].e.condition==="or"||e.queries[n].e&&e.queries[n].e.operator==="equal")&&(s=!1),e.queries[n].fn==="onSkip"&&(r=!1),e.queries[n].fn;var o=0;if(e&&e.queries.length>0)for(var n=0;n<e.queries.length;n++)e.queries[n].fn==="onTake"&&(o=i<=e.queries[n].e.nos?e.queries[n].e.nos:i);if(o<=0&&this.query&&this.query.queries.length>0)for(var n=0;n<this.query.queries.length;n++)this.query.queries[n].fn==="onTake"&&(o=i<=this.query.queries[n].e.nos?this.query.queries[n].e.nos:i);if(e&&e.queries.length>0)for(var n=0;n<e.queries.length;n++)e.queries[n].fn==="onTake"&&(o=e.queries[n].e.nos<=o?o:e.queries[n].e.nos,e.queries.splice(n,1),--n);return(this.allowFiltering&&r||!s||!this.allowFiltering&&r)&&!this.isVirtualReorder&&(s?e.skip(this.virtualItemStartIndex):e.skip(this.viewPortInfo.startIndex)),this.isIncrementalRequest?e.take(this.incrementalEndIndex):o>0?e.take(o):e.take(i),e.requiresCount(),this.customFilterQuery=null,e},t.prototype.getTakeValue=function(){return this.allowFiltering&&E.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},t.prototype.dataUpdater=function(e,i,s){this.isDataFetched=!1;var r=this.list.classList.contains(B.noData);if(this.targetElement().trim()===""&&(!this.allowCustomValue||this.mode==="CheckBox"||this.targetElement()==="")){var n=this.enableVirtualization?this.list.cloneNode(!0):this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.backCommand||this.enableVirtualization&&this.mode==="CheckBox"&&this.value&&this.value.length>0){this.remoteCustomValue=!1;var o=!1;if(this.allowCustomValue&&n.querySelectorAll("li").length===0&&this.mainData.length>0&&(this.mainData=[]),this.enableVirtualization){if(this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.value&&this.value.length>0&&this.mode==="CheckBox")this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"}),o=!0;else if(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(e,s,i),this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.UpdateSkeleton(),(r||this.allowCustomValue)&&!this.list.classList.contains(B.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var l=this.createElement("div",{className:"e-virtual-ddl-content"});l.style.cssText=this.getTransformValues(),this.list.appendChild(l).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var h=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});h.style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(h)}}}this.onActionComplete(n,this.mainData),this.value&&this.value.length&&this.refreshSelection(),this.keyCode!==8&&this.focusAtFirstListItem(),o||this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this})}}else{if(this.enableVirtualization&&this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null,this.list.querySelector(".e-list-parent.e-reorder")&&this.list.querySelector(".e-list-parent.e-reorder").remove()),this.resetList(e,s,i),this.enableVirtualization&&(r||this.allowCustomValue)&&!this.list.classList.contains(B.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var l=this.createElement("div",{className:"e-virtual-ddl-content"});l.style.cssText=this.getTransformValues(),this.list.appendChild(l).appendChild(this.list.querySelector(".e-list-parent"))}if(this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),!this.list.querySelector(".e-virtual-ddl")){var h=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});h.style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(h)}}this.allowCustomValue&&(e instanceof N?(this.remoteCustomValue=!0,this.tempQuery=i):this.checkForCustomValue(i,s))}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount(),this.refreshPopup(),this.allowResize&&this.setResize(),this.mode==="CheckBox"&&this.removeFocus()},t.prototype.secureRandom=function(){var e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/4294967296},t.prototype.checkForCustomValue=function(e,i){var s=!this.getValueByText(this.inputElement.value,this.ignoreCase),r=i||this.fields;if(this.isCustomReset=!0,this.allowCustomValue&&s){var n=this.inputElement.value,o=!u(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if(o&&typeof o!="string"&&typeof o!="number"&&typeof o!="boolean"){var l={};We(r.text,n,l),typeof H(this.fields.value?this.fields.value:"value",o)=="number"&&this.fields.value!==this.fields.text?We(r.value,this.secureRandom(),l):We(r.value,n,l);var h={};if(this.allowObjectBinding){var p=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):this.firstItem?Object.keys(this.firstItem):Object.keys(l),c=typeof H(this.fields.value?this.fields.value:"value",o)=="number"&&this.fields.value!==this.fields.text;p.forEach(function(b){h[b]=b===i.value||b===i.text?b===i.text&&c?H(i.text,l):H(i.value,l):null})}if(l=this.allowObjectBinding?h:l,this.enableVirtualization){this.virtualCustomData=l;var d=this.dataSource instanceof N?JSON.parse(JSON.stringify(this.listData)):JSON.parse(JSON.stringify(this.dataSource));this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&d.concat(this.virtualCustomSelectData),d.splice(0,0,l),this.isCustomDataUpdated=!0;var f=this.totalItemCount;this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.resetList(d,r,e),this.isCustomDataUpdated=!1,this.totalItemCount=this.enableVirtualization&&this.dataSource instanceof N?f:this.totalItemCount}else{this.dataSource instanceof N&&this.allowCustomValue&&this.allowFiltering&&(this.remoteCustomValue=!1);var d=JSON.parse(JSON.stringify(this.listData));d.splice(0,0,l),this.resetList(d,r,e),this.focusAtLastListItem(n)}}else if(this.listData){var d=JSON.parse(JSON.stringify(this.listData));d.splice(0,0,this.inputElement.value),d[0]=typeof o=="number"&&!isNaN(parseFloat(d[0]))?parseFloat(d[0]):d[0],d[0]=typeof o=="boolean"?d[0]==="true"?!0:d[0]==="false"?!1:d[0]:d[0],this.resetList(d,r),this.focusAtLastListItem(n)}}else if(this.listData&&this.mainData&&!s&&this.allowCustomValue){if(this.allowFiltering&&this.isRemoteSelection&&this.remoteCustomValue)this.isRemoteSelection=!1,this.enableVirtualization||this.resetList(this.listData,r,e);else if(!this.allowFiltering&&this.list){var g=this.list.querySelectorAll("li."+B.li+":not(.e-hide-listitem)"),y=gi(this.targetElement(),g,"StartsWith",this.ignoreCase);y&&y.item!==null&&this.addListFocus(y.item)}}this.isCustomReset=!1,this.value&&this.value.length&&this.refreshSelection()},t.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},t.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.keyboardEvent=null,this.isKeyBoardAction=!1,!!this.enabled){if(e.target===this.overAllClear){e.preventDefault();return}if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&e.target.classList.toString().indexOf(sa)!==-1){this.isPopupOpen()&&this.refreshPopup();return}!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===kp)?this.showPopup(e):(this.hidePopup(e),this.mode==="CheckBox"&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(Ws)||this.overAllWrapper.classList.add(Ws)))}this.targetElement()&&this.targetElement()!==""||e.preventDefault(),this.checkAndScrollParent(),this.maximumSelectionLength===0&&this.checkMaxSelection()}},t.prototype.checkAndScrollParent=function(){for(var e=this.overAllWrapper?this.overAllWrapper.parentElement:null;e;){var i=getComputedStyle(e),s=parseFloat(i.maxHeight)||parseFloat(i.height);if(!isNaN(s)&&this.isPopupOpen()){var r=i.overflowY,n=this.overAllWrapper.getBoundingClientRect().bottom,o=e.getBoundingClientRect().bottom;if((r==="auto"||r==="scroll")&&n>o){e.scrollTop+=n-o+10;return}}e=e.parentElement}},t.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove(Jr),this.inputElement.removeAttribute("disabled"),G(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(Jr),this.inputElement.setAttribute("disabled","true"),G(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},t.prototype.onBlurHandler=function(e,i){var s;if(this.isBlurDispatching&&this.isAngular){this.isBlurDispatching=!1;return}if(u(e)||(s=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(s)){this.mode!=="CheckBox"?this.inputElement.focus():this.floatLabelType==="Auto"&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&x([this.overAllWrapper],"e-valid-input");return}if(this.floatLabelType==="Auto"&&this.overAllWrapper.classList.contains("e-outline")&&this.mode==="CheckBox"&&(u(this.value)||this.value.length===0)&&R([this.overAllWrapper],"e-valid-input"),this.mode==="CheckBox"&&E.isIE&&!u(e)&&!i){this.inputFocus=!1,this.overAllWrapper.classList.remove(Ws);return}if(this.scrollFocusStatus){u(e)||e.preventDefault(),this.inputElement.focus(),this.scrollFocusStatus=!1;return}if(this.inputFocus=!1,this.overAllWrapper.classList.remove(Ws),this.addTagOnBlur){var r=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),n=this.findListElement(this.list,"li","data-value",r),o=this.hideSelectedItem?Ve:B.selected,l=!!(n&&!n.classList.contains(o));l&&(this.updateListSelection(n,e),this.mode==="Delimiter"&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.refreshListItems(null),this.mode!=="Box"&&this.mode!=="CheckBox"&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(e),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,E.isDevice&&this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),fb(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||this.enableSelectionOrder===!0&&this.mode==="CheckBox")&&!u(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&W.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!u(this.overAllWrapper)&&!u(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.isBlurDispatching=!0,this.isAngular&&this.dispatchEvent(this.inputElement,"blur")},t.prototype.calculateWidth=function(){var e;if(this.overAllWrapper){if(!this.showDropDownIcon||this.overAllWrapper.querySelector(".e-label-top"))e=this.overAllWrapper.clientWidth-2*parseInt(getComputedStyle(this.inputElement).paddingRight,10);else{var i=this.dropIcon.offsetWidth+parseInt(getComputedStyle(this.dropIcon).marginRight,10);e=this.overAllWrapper.clientWidth-(i+2*parseInt(getComputedStyle(this.inputElement).paddingRight,10))}this.floatLabelType!=="Never"&&W.calculateWidth(e,this.overAllWrapper,this.getModuleName())}},t.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else u(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},t.prototype.setPlaceholderSize=function(e){u(this.value)||this.value.length===0?this.dropIcon.offsetWidth!==0?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":x([this.searchWrapper],Lp):u(this.value)||(this.searchWrapper.removeAttribute("style"),R([this.searchWrapper],Lp))},t.prototype.refreshInputHight=function(){u(this.searchWrapper)||((!this.value||!this.value.length)&&(u(this.text)||this.text==="")?this.searchWrapper.classList.remove(ra):this.searchWrapper.classList.add(ra))},t.prototype.validateValues=function(e,i){return JSON.stringify(e.slice().sort())!==JSON.stringify(i.slice().sort())},t.prototype.updateValueState=function(e,i,s){var r=i||[],n=s||[];if(this.initStatus&&this.validateValues(r,n)){var o={e,oldValue:(this.allowObjectBinding,s),value:(this.allowObjectBinding,i),isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",o),this.enableVirtualization&&this.enableSelectionOrder&&this.mode==="CheckBox"&&(this.preventSetCurrentData=!1),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}this.selectedValueInfo=this.viewPortInfo},t.prototype.updateTempValue=function(){this.value?this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice():this.tempValues=this.value},t.prototype.updateAriaActiveDescendant=function(){!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])&&G(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},t.prototype.pageUpSelection=function(e,i){var s=this.list.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide)"),r=e>=0?s[e+1]:s[0];if(this.fields.disabled&&r&&!this.enableVirtualization){for(;r&&(r.classList.contains("e-disabled")||r.classList.contains(Ve)||r.classList.contains(".e-reorder-hide")||r.classList.contains("e-list-group-item"));)r=r.previousElementSibling;if(!r)return}this.enableVirtualization&&i&&(r=this.liCollections.length>=e&&e>=0?this.liCollections[e]:this.liCollections[this.skeletonCount]),!u(r)&&r.classList.contains("e-virtual-list")&&(r=this.liCollections[this.skeletonCount]),this.enableVirtualization?(!u(r)&&!r.classList.contains("e-item-focus")?(this.isKeyBoardAction=!0,this.addListFocus(r),this.scrollTop(r,this.getIndexByValue(r.getAttribute("data-value")),this.keyboardEvent.keyCode)):this.viewPortInfo.startIndex===0&&(this.isKeyBoardAction=!0,this.scrollTop(r,this.getIndexByValue(r.getAttribute("data-value")),this.keyboardEvent.keyCode)),this.previousFocusItem=r):(this.isKeyBoardAction=!0,this.addListFocus(r),this.scrollTop(r,this.getIndexByValue(r.getAttribute("data-value")),this.keyboardEvent.keyCode))},t.prototype.pageDownSelection=function(e,i){var s=this.getItems(),r=this.list.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide):not(.e-virtual-list-end)"),n=e<=r.length?r[e-1]:r[r.length-1];if(this.fields.disabled&&n&&!this.enableVirtualization){for(;n&&(n.classList.contains("e-disabled")||n.classList.contains(Ve)||n.classList.contains(".e-reorder-hide")||n.classList.contains("e-list-group-item"));)n=n.nextElementSibling;if(!n)return}this.enableVirtualization&&this.skeletonCount>0&&(n=e<s.length?this.liCollections[e]:this.liCollections[s.length-1]),this.enableVirtualization&&i&&(n=e<=s.length?this.liCollections[e]:this.liCollections[s.length-1]),this.enableVirtualization&&n&&n.classList.contains("e-virtual-list-end")&&(n=r[r.length-1]),this.isKeyBoardAction=!0,this.addListFocus(n),this.previousFocusItem=n,this.scrollBottom(n,this.getIndexByValue(n.getAttribute("data-value")),!1,this.keyboardEvent.keyCode)},t.prototype.getItems=function(){return this.list||a.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+B.li).length>0?this.ulElement.querySelectorAll("."+B.li+":not(."+Ve+")"):[]},t.prototype.focusInHandler=function(e){var i=this;if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&(this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.mode!=="CheckBox"&&(this.viewWrapper.style.display="none")),this.mode!=="CheckBox"&&this.searchWrapper.classList.remove(ra),this.checkPlaceholderSize(),this.focused){var s={isInteracted:!!e,event:e};this.trigger("focus",s),this.focused=!1}return this.overAllWrapper.classList.contains(Ws)||this.overAllWrapper.classList.add(Ws),db(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),setTimeout(function(){i.calculateWidth()},150),!0}else return!1},t.prototype.showDelimWrapper=function(){this.mode==="CheckBox"?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(wp)},t.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(wp)},t.prototype.expandTextbox=function(){var e=5;if(this.placeholder){var i=this.placeholder.charCodeAt(0),s=44032<=i&&i<=55215?1.5:19968<=i&&i<=40959?2:1;e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length*s}this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},t.prototype.isPopupOpen=function(){return this.popupWrapper!==null&&this.popupWrapper.parentElement!==null},t.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},t.prototype.checkTextLength=function(){return this.targetElement().length<1},t.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(e),e.preventDefault());break}},t.prototype.updatePopupPosition=function(){this.refreshPopup()},t.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+B.focus);if(!u(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var i=this.popupWrapper.querySelector("."+sl);i&&i.setAttribute("aria-activedescendant",e.id)}else this.mode==="CheckBox"&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)},t.prototype.homeNavigation=function(e,i){if(this.removeFocus(),this.enableVirtualization){if(e)this.enableVirtualization&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query));else if(this.enableVirtualization&&(!this.value&&this.viewPortInfo.endIndex!==this.totalItemCount||this.value&&this.value.length>0&&this.viewPortInfo.endIndex!==this.totalItemCount+this.value.length)){this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex();var s=new se().clone();this.value&&this.value.length>0&&(s=this.getForQuery(this.value).clone(),s=s.skip(this.totalItemCount-this.itemCount)),this.resetList(this.dataSource,this.fields,s)}}this.UpdateSkeleton();var r=this.ulElement.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide)");if(r.length>0){var n=r[e?0:r.length-1];this.enableVirtualization&&e&&(n=r[this.skeletonCount]),this.removeFocus(),n.classList.add(B.focus),this.enableVirtualization&&e?this.scrollTop(n,void 0,this.keyboardEvent.keyCode):i||this.scrollBottom(n,void 0,!1,this.keyboardEvent.keyCode),this.updateAriaActiveDescendant()}},t.prototype.updateSelectionList=function(){if(!u(this.value)&&this.value.length)for(var e=0;e<this.value.length;e++){var i=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[e]):this.value[e],s=this.getElementByValue(i);s&&!s.classList.contains(B.selected)&&s.classList.add("e-active")}},t.prototype.handleVirtualKeyboardActions=function(e,i){var s=this.list.querySelector("."+B.focus),r;switch(this.isKeyBoardAction=!0,e.keyCode){case 40:this.arrowDown(e,!0);break;case 38:this.arrowUp(e,!0);break;case 33:e.preventDefault(),s&&(r=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value"))-1,this.pageUpSelection(r,!0),this.updateAriaAttribute());break;case 34:e.preventDefault(),s&&(r=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value")),this.pageDownSelection(r,!0),this.updateAriaAttribute());break;case 35:case 36:this.isMouseScrollAction=!0,this.homeNavigation(e.keyCode===36,!0),this.isPreventScrollAction=!0;break}this.keyboardEvent=null,this.isScrollChanged=!0,this.isKeyBoardAction=!1},t.prototype.onKeyDown=function(e){if(!(this.readonly||!this.enabled&&this.mode!=="CheckBox")&&(this.preventSetCurrentData=!1,this.keyboardEvent=e,this.isPreventKeyAction&&this.enableVirtualization&&e.preventDefault(),this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey){this.popupKeyActions(e);return}else if(this.isPopupOpen()){var i=this.list.querySelector("."+B.focus),s=void 0;switch(e.keyCode){case 36:case 35:this.isMouseScrollAction=!0,this.isKeyBoardAction=!0,this.homeNavigation(e.keyCode===36);break;case 33:e.preventDefault(),i&&(s=this.getIndexByValue(i.getAttribute("data-value")),this.pageUpSelection(s-this.getPageCount()-1),this.updateAriaAttribute());return;case 34:e.preventDefault(),i&&(s=this.getIndexByValue(i.getAttribute("data-value")),this.pageDownSelection(s+this.getPageCount()),this.updateAriaAttribute());return;case 38:this.isKeyBoardAction=!0,this.arrowUp(e);break;case 40:this.isKeyBoardAction=!0,this.arrowDown(e);break;case 27:e.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus(),this.isKeyBoardAction=!1;return;case 13:e.preventDefault(),this.isKeyBoardAction=!0,this.mode!=="CheckBox"&&this.selectByKey(e),this.checkPlaceholderSize(),this.isKeyBoardAction=!1;return;case 32:this.isKeyBoardAction=!0,this.spaceKeySelection(e),this.isKeyBoardAction=!1;return;case 9:e.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(e),this.inputElement.focus(),this.overAllWrapper.classList.add(Ws)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:e.preventDefault(),this.escapeAction();return}this.checkTextLength()&&this.keyNavigation(e),this.mode==="CheckBox"&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(e)),this.expandTextbox(),this.mode==="CheckBox"&&this.showSelectAll||this.refreshPopup(),this.allowResize&&this.setResize(),this.isKeyBoardAction=!1}},t.prototype.arrowDown=function(e,i){e.preventDefault(),this.moveByList(1,i),this.keyAction=!0,(document.activeElement.classList.contains(sl)||this.mode==="CheckBox"&&!this.allowFiltering&&document.activeElement!==this.list)&&v.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},t.prototype.arrowUp=function(e,i){e.preventDefault(),this.keyAction=!0;var s=this.list.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&(s=this.list.querySelectorAll("li."+B.li+",li."+B.group+":not(."+Ve+"):not(.e-reorder-hide)"));var r=this.list.querySelector("li."+B.focus);if(this.focusFirstListItem=u(this.liCollections[0])?!1:this.liCollections[0].classList.contains("e-item-focus"),this.list&&this.list.querySelector(".e-list-parent.e-ul.e-reorder")){var n=this.list.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide):not(.e-virtual-list-end)");n.length>0&&(this.focusFirstListItem=u(n[0])?!1:n[0].classList.contains("e-item-focus"))}var o=Array.prototype.slice.call(s).indexOf(r);o<=0&&this.mode==="CheckBox"&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"focus"})),this.moveByList(-1,i),this.updateAriaAttribute()},t.prototype.spaceKeySelection=function(e){if(this.mode==="CheckBox"){var i=this.list.querySelector("li."+B.focus),s=document.getElementsByClassName("e-selectall-parent")[0];if((!u(i)||s&&s.classList.contains("e-item-focus"))&&(e.preventDefault(),this.keyAction=!0),this.selectByKey(e),this.keyAction){var r=this.list.querySelector("li."+B.focus);!u(r)&&s&&s.classList.contains("e-item-focus")&&r.classList.remove("e-item-focus")}}this.checkPlaceholderSize()},t.prototype.checkBackCommand=function(e){(e.keyCode===8&&this.allowFiltering?this.targetElement()!==this.previousFilterText:this.targetElement()==="")?this.backCommand=!1:this.backCommand=!0},t.prototype.keyNavigation=function(e){if(this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e);break}else if(e.keyCode===8&&this.mode==="Delimiter"&&this.value&&this.value.length){e.preventDefault();var i=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];this.removeValue(this.value[this.value.length-1],e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(i)}},t.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},t.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.allowObjectBinding&&(e=this.tempValues?this.tempValues.slice():[]),this.value&&this.validateValues(this.value,e)&&(this.mode!=="CheckBox"&&(this.value=e,(this.allowFiltering||this.allowCustomValue)&&this.refreshListItems(null),this.initialValueUpdate()),this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},t.prototype.scrollBottom=function(e,i,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=null),n===void 0&&(n=!1),(!u(e)&&e.classList.contains("e-virtual-list")||this.enableVirtualization&&u(e))&&(e=this.liCollections[this.skeletonCount]);var o=e&&!isNaN(parseInt(window.getComputedStyle(e).marginBottom,10))?parseInt(window.getComputedStyle(e).marginBottom,10):0;this.isUpwardScrolling=!1;var l=this.list.querySelectorAll(".e-virtual-list:not(.e-virtual-list-end)").length,h=this.list.querySelectorAll("li:not(.e-virtual-list-end)"),p=h&&h.length>0&&h[h.length-1]?h[h.length-1].getAttribute("data-value"):null,c=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*(e.offsetHeight+o):e.offsetTop,d=this.list.offsetHeight,f=c-l*(e.offsetHeight+o)+(e.offsetHeight+o)-this.list.scrollTop,g=this.list.scrollTop+f-d,y=!1,b=c-l*(e.offsetHeight+o)+(e.offsetHeight+o)-this.list.scrollTop;if(b=this.fields.groupBy&&!u(this.fixedHeaderElement)?b-this.fixedHeaderElement.offsetHeight:b,i===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(f>d||!(b>0&&this.list.offsetHeight>b)){var C=e?e.getAttribute("data-value"):null,S=r===34?this.getPageCount()-1:1;!this.enableVirtualization||this.isKeyBoardAction||s?this.isKeyBoardAction&&this.enableVirtualization&&p&&C===p&&r!==35&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.list.scrollTop+=(e.offsetHeight+o)*S,this.isPreventKeyAction=this.isScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&r===35?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(r===34&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=g):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?n&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+this.listItemHeight*2:this.virtualListInfo.startIndex*this.listItemHeight:0,y=this.isKeyBoardAction}this.isKeyBoardAction=y},t.prototype.scrollTop=function(e,i,s){s===void 0&&(s=null);var r=this.list.querySelectorAll(".e-virtual-list:not(.e-virtual-list-end)").length,n=e&&!isNaN(parseInt(window.getComputedStyle(e).marginBottom,10))?parseInt(window.getComputedStyle(e).marginBottom,10):0,o=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*(e.offsetHeight+n):e.offsetTop,l=o-r*(e.offsetHeight+n)-this.list.scrollTop,h=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;l=this.fields.groupBy&&!Pt(this.fixedHeaderElement)?l-this.fixedHeaderElement.offsetHeight:l;var p=o-r*(e.offsetHeight+n)+(e.offsetHeight+n)-this.list.scrollTop,c=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&l<=0;if(i===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(l<0||c){var d=e?e.getAttribute("data-value"):null,f=s===33?this.getPageCount()-2:1;this.enableVirtualization&&this.isKeyBoardAction&&h&&d===h&&s!==36&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTop-=(e.offsetHeight+n)*f,this.isPreventKeyAction=this.list.scrollTop!==0?this.isPreventKeyAction:!1,this.isPreventScrollAction=!1):this.enableVirtualization&&s===36?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(s===33&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+l)}else p>0&&this.list.offsetHeight>p||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!u(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.isScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},t.prototype.selectListByKey=function(e){var i=this.list.querySelector("li."+B.focus),s=this.value&&this.value.length?this.value.length:0,r;if(i!==null){if(e.preventDefault(),i.classList.contains("e-active")&&(s=s-1),this.isValidLI(i)&&s<this.maximumSelectionLength){this.updateListSelection(i,e),this.addListFocus(i),this.mode==="CheckBox"?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!u(this.fields.groupBy)&&(r=i.firstElementChild.lastElementChild,this.findGroupStart(r),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e);var n=this.targetElement().trim()!=="";this.makeTextBoxEmpty(),this.mode!=="CheckBox"&&this.refreshListItems(i.textContent,n),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()}else!this.isValidLI(i)&&s<this.maximumSelectionLength&&(r=i.firstElementChild.lastElementChild,r.classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i));this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(e)}var o=document.getElementsByClassName("e-selectall-parent")[0];if(o&&o.classList.contains("e-item-focus")){var l=o.childNodes[0];if(l.classList.contains("e-check")){l.classList.remove("e-check");var h={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",h),this.selectAllItem(!1,e,i)}else{l.classList.add("e-check");var h={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",h),this.selectAllItem(!0,e,i)}}this.refreshPlaceHolder()},t.prototype.refreshListItems=function(e,i){if((this.allowFiltering||this.mode==="CheckBox"&&this.enableSelectionOrder===!0||this.allowCustomValue)&&this.mainList&&this.listData){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.enableVirtualization)if(this.allowCustomValue&&this.virtualCustomData&&e==null&&this.virtualCustomData&&this.viewPortInfo&&this.viewPortInfo.startIndex===0&&this.viewPortInfo.endIndex===this.itemCount)this.virtualCustomData=null,this.renderItems(this.mainData,this.fields);else if(this.allowFiltering&&i){if(this.updateInitialData(),this.onActionComplete(s,this.mainData),this.isVirtualTrackHeight=!1,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});r.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(r)}}else this.onActionComplete(this.list,this.listData);else this.onActionComplete(s,this.mainData);this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}else!u(this.fields.groupBy)&&this.value&&this.value.length&&this.refreshSelection()},t.prototype.removeSelectedChip=function(e){var i=this.chipCollectionWrapper.querySelector("span."+Qi),s;if(i!==null){u(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice()),s=i.nextElementSibling,s!==null&&(this.removeChipSelection(),this.addChipSelection(s,e));var r=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(i.getAttribute("data-value"))):i.getAttribute("data-value");this.removeValue(r,e),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty()}this.closePopupOnSelect&&this.hidePopup(e),this.checkPlaceholderSize()},t.prototype.moveByTop=function(e){var i=this.list.querySelectorAll("li."+B.li),s;i.length>1&&(this.removeFocus(),s=e?0:i.length-1,this.addListFocus(i[s]),this.scrollBottom(i[s],s)),this.updateAriaAttribute()},t.prototype.clickHandler=function(e){var i=e.target,s=i.className,r=document.getElementsByClassName("e-selectall-parent")[0];(s==="e-input-filter e-input"||s==="e-input-group e-control-wrapper e-input-focus")&&r.classList.contains("e-item-focus")&&r.classList.remove("e-item-focus")},t.prototype.moveByList=function(e,i){if(this.list){var s=this.list.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide):not(.e-virtual-list-end)");this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)&&(s=this.list.querySelectorAll("li."+B.li+",li."+B.group+":not(."+Ve+"):not(.e-reorder-hide):not(.e-virtual-list-end)"));var r=this.list.querySelector("li."+B.focus);this.enableVirtualization&&i&&!u(this.currentFocuedListElement)&&(r=this.getElementByValue(this.getFormattedValue(this.currentFocuedListElement.getAttribute("data-value"))));var n=-1,o=document.getElementsByClassName("e-selectall-parent")[0];if(this.mode==="CheckBox"&&this.showSelectAll&&e===1&&!u(o)&&!o.classList.contains("e-item-focus")&&this.list.getElementsByClassName("e-item-focus").length===0&&this.liCollections.length>1)!this.focusFirstListItem&&o.classList.contains("e-item-focus")?o.classList.remove("e-item-focus"):o.classList.contains("e-item-focus")||o.classList.add("e-item-focus");else if(s.length){this.mode==="CheckBox"&&this.showSelectAll&&!u(o&&e===-1)&&((!this.focusFirstListItem||e===1)&&o.classList.contains("e-item-focus")?o.classList.remove("e-item-focus"):this.focusFirstListItem&&!o.classList.contains("e-item-focus")&&!(e===1&&this.list.querySelector(".e-item-focus"))&&o.classList.add("e-item-focus"));for(var l=0;l<s.length;l++)if(s[l]===r){n=l;break}if(e>0)n<s.length-1&&(this.removeFocus(),this.enableVirtualization&&i?this.addListFocus(s[n]):this.enableVirtualization&&s[n+1].classList.contains("e-virtual-list")?this.addListFocus(s[this.skeletonCount]):this.addListFocus(s[++n]),n>-1&&(this.updateCheck(s[n]),this.scrollBottom(s[n],n),this.currentFocuedListElement=s[n]));else if(n>0)if(this.enableVirtualization){var h=s[n-1].classList.contains("e-virtual-list"),p=i?n:n-1;(i||!h)&&this.removeFocus(),(i||!h)&&(this.addListFocus(s[p]),this.updateCheck(s[p]),this.scrollTop(s[p],n),this.currentFocuedListElement=s[p])}else this.removeFocus(),this.addListFocus(s[--n]),this.updateCheck(s[n]),this.scrollTop(s[n],n)}}var c=this.list?this.list.querySelector(".e-item-focus"):null;if(this.isDisabledElement(c)){if(this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem):not(.e-disabled)").length===0||this.keyCode===38&&this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)&&c===this.list.querySelector("li.e-list-group-item")){this.removeFocus();return}var l=this.getIndexByValue(c.getAttribute("data-value"));l===0&&(e=1),l===this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem)").length-1&&(e=-1),this.moveByList(e)}},t.prototype.getElementByValue=function(e){for(var i,s=this.getItems(),r=0,n=s;r<n.length;r++){var o=n[r];if(this.getFormattedValue(o.getAttribute("data-value"))===e){i=o;break}}return i},t.prototype.updateCheck=function(e){if(this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)){var i=e.firstElementChild.lastElementChild;i.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active")}},t.prototype.moveBy=function(e,i){var s,r=this.chipCollectionWrapper.querySelectorAll("span."+js),n=this.chipCollectionWrapper.querySelector("span."+Qi);n===null?e<0&&this.addChipSelection(r[r.length-1],i):e<0?(s=n.previousElementSibling,s!==null&&(this.removeChipSelection(),this.addChipSelection(s,i))):(s=n.nextElementSibling,this.removeChipSelection(),s!==null&&this.addChipSelection(s,i))},t.prototype.chipClick=function(e){if(this.enabled){var i=M(e.target,"."+js);this.removeChipSelection(),this.addChipSelection(i,e)}},t.prototype.removeChipSelection=function(){if(this.chipCollectionWrapper){var e=this.chipCollectionWrapper.querySelectorAll("span."+js+"."+Qi);if(e&&e.length>0)for(var i=0;i<e.length;i++)e[i].removeAttribute("aria-live");this.removeChipFocus()}},t.prototype.addChipSelection=function(e,i){x([e],Qi),e&&e.setAttribute("aria-live","polite"),this.trigger("chipSelection",i)},t.prototype.getVirtualDataByValue=function(e){if(!u(this.selectedListData)){var i=this.typeOfData(this.selectedListData).typeof;if(i==="string"||i==="number"||i==="boolean")for(var s=0,r=this.selectedListData;s<r.length;s++){var n=r[s];if(!u(n)&&n===e)return n}else for(var o=0,l=this.selectedListData;o<l.length;o++){var n=l[o];if(!u(n)&&H(this.fields.value?this.fields.value:"value",n)===e)return n}}return null},t.prototype.onChipRemove=function(e){if(!(e.which===3||e.button===2)&&this.enabled&&!this.readonly){var i=e.target.parentElement,s=i.getAttribute("data-value"),r=this.allowObjectBinding?this.enableVirtualization?this.getVirtualDataByValue(this.getFormattedValue(s)):this.getDataByValue(this.getFormattedValue(s)):this.getFormattedValue(s);if(this.allowCustomValue&&(s!=="false"&&r===!1||!u(r)&&r.toString()==="NaN")&&(r=s),this.isPopupOpen()&&this.mode!=="CheckBox"&&this.hidePopup(e),this.inputFocus||this.inputElement.focus(),this.removeValue(r,e),r=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",r):r,u(this.findListElement(this.list,"li","data-value",r))&&this.mainList&&this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&this.floatLabelType==="Never"?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},t.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},t.prototype.refreshPlaceHolder=function(){this.placeholder&&this.floatLabelType==="Never"?this.value&&this.value.length||!u(this.text)&&this.text!==""?this.inputElement.placeholder="":this.inputElement.placeholder=th(this.placeholder):(this.setFloatLabelType(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&W.createSpanElement(this.overAllWrapper,this.createElement)),this.expandTextbox()},t.prototype.removeAllItems=function(e,i,s,r,n){var o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e),l=this.value.slice(0);l.splice(o,1),this.setProperties({value:[].concat([],l)},!0),r.setAttribute("aria-selected","false");var h=this.hideSelectedItem?Ve:B.selected;R([r],h),this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:r,e:this,index:o}),this.invokeCheckboxSelection(r,i,s);var p=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",e):e;this.updateMainList(!0,p,n),this.updateChipStatus()},t.prototype.invokeCheckboxSelection=function(e,i,s){this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:i}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&this.mode==="CheckBox"&&this.showSelectAll&&!(this.isSelectAll||s)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"})},t.prototype.removeValue=function(e,i,s,r){var n=this,o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(this.getFormattedValue(e));o===-1&&this.allowCustomValue&&!u(e)&&(o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e.toString()));var l=i&&i.target;r=r||l&&l.classList.contains("e-close-hooker")?!0:null;var h=this.hideSelectedItem?Ve:B.selected;if(o!==-1){var p=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",e):e,c=this.virtualSelectAll?null:this.findListElement(this.list,"li","data-value",p),d=this.allowObjectBinding?e:this.getDataByValue(e),f={e:i,item:c,itemData:d,isInteracted:!!i,cancel:!1};this.trigger("removing",f,function(g){if(g.cancel)n.removeIndex++;else{n.isRemoveSelection=n.enableVirtualization?!0:n.isRemoveSelection,n.currentRemoveValue=n.allowObjectBinding?H(n.fields.value?n.fields.value:"",e):e,n.virtualSelectAll=!1;var y=n.value.slice(0);if(y.splice(o,1),n.enableVirtualization&&n.selectedListData&&n.selectedListData.splice(o,1),n.setProperties({value:[].concat([],y)},!0),n.enableVirtualization){var b=o===0&&n.text.split(n.delimiterChar)&&n.text.split(n.delimiterChar).length===1?n.text.replace(n.text.split(n.delimiterChar)[o],""):o===0?n.text.replace(n.text.split(n.delimiterChar)[o]+n.delimiterChar,""):n.text.replace(n.delimiterChar+n.text.split(n.delimiterChar)[o],"");n.setProperties({text:b.toString()},!0)}if(c!==null){var C=n.allowObjectBinding?H(n.fields.value?n.fields.value:"",e):e,S=n.findListElement(n.mainList,"li","data-value",C);c.setAttribute("aria-selected","false"),R([c],h),S&&(S.setAttribute("aria-selected","false"),R([c,S],h)),n.notify("activeList",{module:"CheckBoxSelection",enable:n.mode==="CheckBox",li:c,e:n,index:o}),n.invokeCheckboxSelection(c,i,r)}var I=n.allowObjectBinding?H(n.fields.value?n.fields.value:"",e):e;n.hideSelectedItem&&n.fields.groupBy&&c&&n.hideGroupItem(I),n.hideSelectedItem&&n.fixedHeaderElement&&n.fields.groupBy&&n.mode!=="CheckBox"&&n.isPopupOpen()&&a.prototype.scrollStop.call(n),n.updateMainList(!0,I),n.removeChip(I,r),n.updateChipStatus();var A=n.value&&n.value.length?n.value.length:0;if(A<n.maximumSelectionLength){var T=n.list.querySelectorAll("li."+B.li+":not(.e-active)");R(T,"e-disable");var L=n.mainList.querySelectorAll("li."+B.li+":not(.e-active)");R(L,"e-disable")}n.trigger("removed",g);var _=i&&i.currentTarget,X=_&&_.classList.contains("e-selectall-parent")?!0:null;if(!n.changeOnBlur&&!r&&i&&s&&!X&&n.isSelectAllTarget&&n.updateValueState(i,n.value,n.tempValues),s&&(n.selectAllEventData.push(d),n.selectAllEventEle.push(c)),s===1){n.changeOnBlur||n.updateValueState(i,n.value,n.tempValues);var re={event:i,items:n.selectAllEventEle,itemData:n.selectAllEventData,isInteracted:!!i,isChecked:!1};n.trigger("selectedAll",re),n.selectAllEventData=[],n.selectAllEventEle=[]}r&&(s===1||s===null)&&n.clearAllCallback(i,r),n.isPopupOpen()&&c&&c.parentElement.classList.contains("e-reorder")&&(n.hideSelectedItem&&n.value&&Array.isArray(n.value)&&n.value.length>0&&n.totalItemsCount(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}))}})}},t.prototype.updateMainList=function(e,i,s){if(this.allowFiltering||this.mode==="CheckBox"){var r=s||this.findListElement(this.mainList,"li","data-value",i);r&&(e?(r.setAttribute("aria-selected","false"),R([r],this.hideSelectedItem?Ve:B.selected),this.mode==="CheckBox"&&R([r.firstElementChild.lastElementChild],"e-check")):(r.setAttribute("aria-selected","true"),x([r],this.hideSelectedItem?Ve:B.selected),this.mode==="CheckBox"&&x([r.firstElementChild.lastElementChild],"e-check")))}},t.prototype.removeChip=function(e,i){if(this.chipCollectionWrapper&&!(this.enableVirtualization&&i)){var s=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);s&&ce(s)}},t.prototype.setWidth=function(e){u(e)||(typeof e=="number"?this.overAllWrapper.style.width=ve(e):typeof e=="string"&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:ve(e)))},t.prototype.updateChipStatus=function(){this.value&&this.value.length?(u(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper(),this.showOverAllClear()):(u(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),u(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},t.prototype.indexOfObjectInArray=function(e,i){for(var s=function(o){var l=i[o];if(Object.keys(e).every(function(h){return l.hasOwnProperty(h)&&l[h]===e[h]}))return{value:o}},r=0;r<i.length;r++){var n=s(r);if(typeof n=="object")return n.value}return-1},t.prototype.addValue=function(e,i,s){this.value||(this.value=[]);var r=this.allowObjectBinding?this.getDataByValue(e):e;if(this.allowObjectBinding&&!this.isObjectInArray(this.getDataByValue(e),this.value)||!this.allowObjectBinding&&this.value.indexOf(r)<0){if(this.setProperties({value:[].concat([],this.value,[r])},!0),this.enableVirtualization&&!this.isSelectAllLoop){var n=this.viewWrapper.innerHTML,o=void 0;n+=this.value.length===1?"":this.delimiterChar+" ",o=this.getOverflowVal(this.value.length-1),n+=o,o=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,n)}if(this.enableVirtualization&&this.mode==="CheckBox"){var l=[];this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];var o=i,h=this.text!=null&&this.text!==""?this.text+this.delimiterChar+o:o;l.push(h),this.setProperties({text:l.toString()},!0)}}var p=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),p&&(this.addListFocus(p),this.addListSelection(p)),this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.addChip(i,e,s),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},t.prototype.updateListItemsState=function(e){var i=e.querySelectorAll("li."+B.li+".e-active");R(i,"e-disable");var s=e.querySelectorAll("li."+B.li+":not(.e-active)");x(s,"e-disable")},t.prototype.checkMaxSelection=function(){var e=this.value&&this.value.length?this.value.length:0;if(this.maximumSelectionLength===0){this.updateListItemsState(this.list),this.mainList&&this.updateListItemsState(this.mainList);return}if(e===this.maximumSelectionLength){var i=this.list.querySelectorAll("li."+B.li+".e-active");R(i,"e-disable");var s=this.list.querySelectorAll("li."+B.li+":not(.e-active)");x(s,"e-disable")}if(e<this.maximumSelectionLength){var r=this.list.querySelectorAll("li."+B.li);R(r,"e-disable")}},t.prototype.dispatchSelect=function(e,i,s,r,n,o,l){var h=this,p=this.listData;if(this.initStatus&&!r&&(!this.allowObjectBinding||this.allowObjectBinding&&e)){e=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",e):e;var c=o||this.getDataByValue(e),d={e:i,item:s,itemData:c,isInteracted:!!i,cancel:!1};this.trigger("select",d,function(f){if(!f.cancel){if(n&&(h.selectAllEventData.push(c),h.selectAllEventEle.push(s)),n===1){var g={event:i,items:h.selectAllEventEle,itemData:h.selectAllEventData,isInteracted:!!i,isChecked:!0};h.trigger("selectedAll",g),h.selectAllEventData=[]}h.allowCustomValue&&h.isServerRendered&&h.listData!==p&&(h.listData=p),e=h.allowObjectBinding?h.getDataByValue(e):e,h.enableVirtualization&&(u(h.selectedListData)?h.selectedListData=h.allowObjectBinding?[e]:[h.getDataByValue(e)]:o?Array.isArray(h.selectedListData)?h.selectedListData.push(o):h.selectedListData=[h.selectedListData,o]:Array.isArray(h.selectedListData)?h.selectedListData.push(h.allowObjectBinding?e:h.getDataByValue(e)):h.selectedListData=[h.selectedListData,h.allowObjectBinding?e:h.getDataByValue(e)]),(h.enableVirtualization&&e||!h.enableVirtualization)&&h.updateListSelectEventCallback(e,s,i,l),h.hideSelectedItem&&h.fixedHeaderElement&&h.fields.groupBy&&h.mode!=="CheckBox"&&a.prototype.scrollStop.call(h)}})}},t.prototype.addChip=function(e,i,s){this.chipCollectionWrapper&&this.getChip(e,i,s)},t.prototype.removeChipFocus=function(){var e=this.chipCollectionWrapper.querySelectorAll("span."+js+"."+Qi);if(R(e,Qi),E.isDevice)for(var i=this.chipCollectionWrapper.querySelectorAll("span."+sa.split(" ")[0]),s=0;s<i.length;s++)i[s].style.display="none"},t.prototype.onMobileChipInteraction=function(e){var i=M(e.target,"."+js),s=i.querySelector("span."+sa.split(" ")[0]);this.enabled&&!this.readonly&&(i.classList.contains(Qi)||(this.removeChipFocus(),s.style.display="",i.classList.add(Qi)),this.refreshPopup(),e.preventDefault())},t.prototype.multiCompiler=function(e){var i=!1;if(typeof e!="function"&&e)try{i=!!Ke(e,document).length}catch{i=!1}return i},t.prototype.encodeHtmlEntities=function(e){return e.replace(/[\u00A0-\u9999<>&]/g,function(i){return"&#"+i.charCodeAt(0)+";"})},t.prototype.getChip=function(e,i,s){var r=this,n={text:i,value:i},o=this.createElement("span",{className:js,attrs:{"data-value":i,title:e,role:"option","aria-selected":"true"}}),l,h=this.createElement("span",{className:Sb}),p=this.createElement("span",{className:sa});if(this.mainData&&(n=this.getDataByValue(i)),this.valueTemplate&&!u(n)){var c=this.multiCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&c?l=qe(Me(this.valueTemplate,document).innerHTML.trim()):l=qe(this.valueTemplate);var d=l(n,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,h);d&&d.length>0&&Ie(d,h),this.renderReactTemplates()}else this.enableHtmlSanitizer?h.innerText=e:h.innerHTML=this.encodeHtmlEntities(e.toString());o.appendChild(h);var f={isInteracted:!!s,itemData:n,e:s,setClass:function(g){x([o],g)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",f,function(g){g.cancel||(E.isDevice?(o.classList.add(Ab),Ie([p],o),p.style.display="none",v.add(o,"click",r.onMobileChipInteraction,r)):(v.add(o,"mousedown",r.chipClick,r),r.showClearButton&&o.appendChild(p)),v.add(p,"mousedown",r.onChipRemove,r),r.chipCollectionWrapper.appendChild(o),!r.changeOnBlur&&s&&r.updateValueState(s,r.value,r.tempValues))})},t.prototype.calcPopupWidth=function(){var e=ve(this.popupWidth);if(e.indexOf("%")>-1){var i=this.componentWrapper.offsetWidth*parseFloat(e)/100;e=i.toString()+"px"}return this.allowResize&&this.resizeWidth?this.resizeWidth+"px":e},t.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},t.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},t.prototype.listOption=function(e,i){var s=!u(i.iconCss),r=u(i.properties)?i:i.properties;return this.listCurrentOptions=i.text!==null||i.value!==null?{fields:r,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},$(this.listCurrentOptions,this.listCurrentOptions,i,!0),this.mode==="CheckBox"&&this.notify("listoption",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",dataSource:e,fieldProperty:r}),this.listCurrentOptions},t.prototype.renderPopup=function(){var e=this;if(this.list||a.prototype.render.call(this),this.popupObj&&document.body.contains(this.popupObj.element)&&this.allowFiltering){this.refreshPopup();return}if(!this.popupObj&&!u(this.popupWrapper)){document.body.appendChild(this.popupWrapper);var i=this.popupWrapper.querySelector("."+Mb);this.mode==="CheckBox"&&!this.allowFiltering&&i&&this.filterParent&&(i.remove(),this.filterParent=null);var s=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),s-=this.header.offsetHeight,this.isUpdateHeaderHeight=this.header.offsetHeight!==0),Ie([this.list],this.popupWrapper),!this.list.classList.contains(B.noData)&&this.getItems()[1]&&(this.listItemHeight=this.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)),this.enableVirtualization&&!this.list.classList.contains(B.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")&&this.list.querySelector(".e-list-parent")){var r=this.createElement("div",{className:"e-virtual-ddl-content"});r.style.cssText=this.getTransformValues(),this.list.appendChild(r).appendChild(this.list.querySelector(".e-list-parent"))}else this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues());if(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+B.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&this.totalItemsCount(),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var n=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});n.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(n)}}if(this.footerTemplate&&(this.setFooterTemplate(),s-=this.footer.offsetHeight,this.isUpdateFooterHeight=this.footer.offsetHeight!==0),this.mode==="CheckBox"&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),s-=this.selectAllHeight):this.mode==="CheckBox"&&!this.showSelectAll&&!this.headerTemplate&&!this.footerTemplate?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),s=parseInt(this.popupHeight,10)):this.mode==="CheckBox"&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),s=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(s-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(s-=this.footer.offsetHeight)),this.mode==="CheckBox"){var o={module:"CheckBoxSelection",enable:this.mode==="CheckBox",popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",o),s-=this.searchBoxHeight),x([this.popupWrapper],"e-checkbox")}this.popupHeight!=="auto"?(this.list.style.maxHeight=ve(s),this.popupWrapper.style.maxHeight=ve(this.popupHeight)):this.list.style.maxHeight=ve(this.popupHeight),this.popupObj=new as(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(e.popupObj.element.parentElement){e.popupObj.unwireScrollEvents();var l=e.popupWrapper.querySelector("."+sl);e.mode==="CheckBox"&&l&&document.activeElement===l&&l.blur(),Z(e.popupObj.element)}},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var l=e.list.querySelector("ul");l&&(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&(e.targetElement().trim()!==""||e.targetElement()!==""&&e.allowCustomValue)||(e.mainList=l.cloneNode?l.cloneNode(!0):l)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),!(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&(e.targetElement().trim()!==""||e.targetElement()!==""&&e.allowCustomValue))&&!e.enableVirtualization&&(e.loadTemplate(),e.enableVirtualization&&e.mode==="CheckBox"&&e.UpdateSkeleton()),e.isPreventScrollAction=!0,e.setScrollPosition(),!e.list.classList.contains(B.noData)&&e.getItems()[1]&&e.getItems()[1].offsetHeight!==0&&(e.listItemHeight=e.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(e.getItems()[1]).marginBottom,10),e.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues())),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:e.mode==="CheckBox",value:"focus"}),e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){e.value?e.updateSelectionList():e.viewPortInfo&&e.viewPortInfo.offsets.top&&(e.list.scrollTop=e.viewPortInfo.offsets.top)},5))},targetExitViewport:function(){E.isDevice||e.hidePopup()}}),this.checkCollision(this.popupWrapper),this.popupContentElement=this.popupObj.element.querySelector(".e-content"),this.mode==="CheckBox"&&E.isDevice&&this.allowFiltering&&this.isDeviceFullScreen&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.allowResize&&this.setResize(),this.popupObj.close(),this.popupWrapper.style.visibility=""}},t.prototype.checkCollision=function(e){if(!(this.mode==="CheckBox"&&E.isDevice&&this.allowFiltering&&this.isDeviceFullScreen)){var i=es(e);i.length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision()}},t.prototype.setHeaderTemplate=function(){var e;this.header&&this.header.remove(),this.header=this.createElement("div"),x([this.header],kb);var i=this.multiCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&i?e=qe(Me(this.headerTemplate,document).innerHTML.trim()):e=qe(this.headerTemplate);var s=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);s&&s.length>0&&Ie(s,this.header),this.mode==="CheckBox"&&this.showSelectAll?Ot([this.header],this.popupWrapper):Ie([this.header],this.popupWrapper),v.add(this.header,"mousedown",this.onListMouseDown,this)},t.prototype.setFooterTemplate=function(){var e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),x([this.footer],Db);var i=this.multiCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&i?e=qe(Me(this.footerTemplate,document).innerHTML.trim()):e=qe(this.footerTemplate);var s=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);s&&s.length>0&&Ie(s,this.footer),Ie([this.footer],this.popupWrapper),v.add(this.footer,"mousedown",this.onListMouseDown,this)},t.prototype.updateInitialData=function(){var e=this.selectData;if(this.renderItems(e,this.fields,!1,this.isClearAllAction),this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.previousStartIndex=0,this.previousEndIndex=this.itemCount,this.dataSource instanceof N?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.getSkeletonCount(),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});i.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(i)}this.listData=e,this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),this.enableVirtualization&&this.notify("setGeneratedData",{module:"VirtualScroll"})},t.prototype.clearAll=function(e){if(this.enabled&&!this.readonly){var i=void 0;if(this.setDynValue=!1,this.isClearAllAction=!0,this.value&&this.value.length>0){this.allowFiltering&&(this.refreshListItems(null),this.mode==="CheckBox"&&this.targetInputElement&&(this.targetInputElement.value=""));var s=this.list&&this.list.querySelectorAll("li.e-list-item");if(s&&s.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,i=this.value[this.removeIndex];this.removeIndex<this.value.length;i=this.value[this.removeIndex])this.removeValue(i,e,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(e);this.checkAndResetCache(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&W.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!u(this.overAllWrapper)&&!u(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.enableVirtualization&&(this.updateInitialData(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.isCustomDataUpdated||this.notify("setGeneratedData",{module:"VirtualScroll"})),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=this.itemCount),this.isClearAllAction=!1}this.isClearAllItem=!0,v.add(document,"mouseup",this.preventSelection,this)},t.prototype.preventSelection=function(e){this.isClearAllItem&&e.stopPropagation(),this.isClearAllItem=!1,v.remove(document,"mouseup",this.preventSelection)},t.prototype.clearAllCallback=function(e,i){var s=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&this.mode!=="CheckBox"||this.allowCustomValue)){var r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(r,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),this.mode!=="Box"&&(!this.inputFocus||this.mode==="CheckBox")&&this.updateDelimView(),this.inputElement.value!==""&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,s),this.mode!=="CheckBox"&&this.inputElement.focus()),this.mode==="CheckBox"&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&i&&(u(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&i&&(u(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues),this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},t.prototype.windowResize=function(){this.refreshPopup(),(!this.inputFocus||this.mode==="CheckBox")&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},t.prototype.resetValueHandler=function(e){if(!u(this.inputElement)){var i=M(this.inputElement,"form");if(i&&e.target===i){var s=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=s}}},t.prototype.wireEvent=function(){v.add(this.componentWrapper,"mousedown",this.wrapperClick,this),v.add(window,"resize",this.windowResize,this),v.add(this.inputElement,"focus",this.focusInHandler,this),v.add(this.inputElement,"keydown",this.onKeyDown,this),v.add(this.inputElement,"keyup",this.keyUp,this),this.mode!=="CheckBox"&&v.add(this.inputElement,"input",this.onInput,this),v.add(this.inputElement,"blur",this.onBlurHandler,this),v.add(this.componentWrapper,"mouseover",this.mouseIn,this);var e=M(this.inputElement,"form");e&&v.add(e,"reset",this.resetValueHandler,this),v.add(this.componentWrapper,"mouseout",this.mouseOut,this),v.add(this.overAllClear,"mousedown",this.clearAll,this),v.add(this.inputElement,"paste",this.pasteHandler,this)},t.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,E.isDevice&&E.info.name==="mozilla"&&this.search(e)},t.prototype.pasteHandler=function(e){var i=this;setTimeout(function(){i.expandTextbox(),i.search(e)})},t.prototype.performFiltering=function(e){var i=this,s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(r,n,o){s.cancel||(i.isFiltered=!0,i.customFilterQuery=n,i.remoteFilterAction=!0,i.isCustomFiltering=!0,i.dataUpdater(r,n,o))},event:e,cancel:!1};this.trigger("filtering",s,function(r){i.isFilterPrevented=r.cancel,r.cancel||!i.isFiltered&&!r.preventDefaultAction&&(i.isFilterAction=!0,i.isFilteringAction=!0,i.dataSource instanceof N&&i.allowCustomValue&&(i.isCustomRendered=!1),i.dataUpdater(i.dataSource,null,i.fields),i.isFilteringAction=!1)})},t.prototype.search=function(e){if(this.preventSetCurrentData=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,u(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(e),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&!u(e)&&e.keyCode!==8)this.focusAtFirstListItem();else{var i=this.targetElement();if(this.allowFiltering)this.allowCustomValue&&(this.isRemoteSelection=!0),this.checkAndResetCache(),this.isRequesting=!1,this.targetElement()!==""&&this.debounceDelay>0?this.debouncedFiltering(e,this.debounceDelay):this.performFiltering(e);else if(this.allowCustomValue){var s=new se;s=this.allowFiltering&&i!==""?s.where(this.fields.text,"startswith",i,this.ignoreCase,this.ignoreAccent):s,this.enableVirtualization?this.dataUpdater(this.dataSource,s,this.fields):this.dataUpdater(this.mainData,s,this.fields),this.UpdateSkeleton()}else{var r=this.list.querySelectorAll("li."+B.li+":not(.e-hide-listitem)"),n=this.typeOfData(this.listData).typeof,o=gi(this.targetElement(),r,"StartsWith",this.ignoreCase);if(this.enableVirtualization&&this.targetElement().trim()!==""&&!this.allowFiltering){var l=!1;for((this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex===0)&&(l=!0,this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),l=!1),(this.viewPortInfo.startIndex!==0||l)&&this.updateIncrementalView(0,this.itemCount),o=gi(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,n);u(o)&&this.incrementalEndIndex<this.totalItemCount&&(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),l=!0,(this.viewPortInfo.startIndex!==0||l)&&this.updateIncrementalView(0,this.itemCount),o=gi(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,n),!!u(o));)if(u(o)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}if(o.index&&(!(this.viewPortInfo.startIndex>=o.index)||!(o.index>=this.viewPortInfo.endIndex))){var h=o.index-(this.itemCount/2-2)>0?o.index-(this.itemCount/2-2):0,p=h+this.itemCount>this.totalItemCount?this.totalItemCount:h+this.itemCount;h!==this.viewPortInfo.startIndex&&this.updateIncrementalView(h,p)}if(u(o.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var c=this.getIndexByValue(o.item.getAttribute("data-value"))-this.skeletonCount;if(c>this.itemCount/2){var h=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,p=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(h,p)}o.item=this.getElementByValue(o.item.getAttribute("data-value"))}o&&o.item&&(o.item=this.getElementByValue(o.item.getAttribute("data-value")))}o&&o.item?(this.addListFocus(o.item),this.list.scrollTop=o.item.offsetHeight*o.index):this.targetElement()!==""?this.removeFocus():this.focusAtFirstListItem()}}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount()},t.prototype.preRender=function(){this.allowFiltering===null&&(this.allowFiltering=this.mode==="CheckBox"),this.preventSetCurrentData=!1,this.initializeData(),this.updateDataAttribute(this.htmlAttributes),a.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"multi-select"},t.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.isFilterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0,this.isCustomRendered=!1,this.isRemoteSelection=!1,this.isSelectAllTarget=!0,this.isaddNonPresentItems=!1,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},t.prototype.updateData=function(e,i,s){var r="",n=this.mode==="Delimiter"||this.mode==="CheckBox",o=[],l,h=this.listData;if(this.enableVirtualization||(this.listData=this.mainData),!u(this.hiddenElement)&&!this.enableVirtualization&&(this.hiddenElement.innerHTML=""),!u(this.value)){for(var p=this.value.length,c="",d=function(A){var T=f.allowObjectBinding?H(f.fields.value?f.fields.value:"",f.value[A]):f.value[A],L=f.findListElement(u(f.mainList)?f.ulElement:f.mainList,"li","data-value",T);if(f.enableVirtualization&&(L=f.findListElement(u(f.list)?f.ulElement:f.list,"li","data-value",T)),u(L)&&!f.allowCustomValue&&!f.enableVirtualization&&f.listData&&f.listData.length>0)f.value.splice(A,1),A-=1,p-=1;else{if(f.listData)if(f.enableVirtualization){n&&!f.isDynamicRemoteVirtualData&&!s&&(r=f.delimiterWrapper&&f.delimiterWrapper.innerHTML===""?r:f.delimiterWrapper.innerHTML);var _=f.allowObjectBinding?H(f.fields.value?f.fields.value:"",f.value[f.value.length-1]):f.value[f.value.length-1];if(f.isRemoveSelection)r=f.text.replace(/,/g,e+" ")+e+" ",o=f.text.split(e);else{l=s&&n?f.text.replace(/,/g,e+" "):f.getTextByValue(_);var X=f.isDynamicRemoteVirtualData&&_!=null&&_!==""&&!s?f.getTextByValue(_):s?f.text:f.text&&f.text!==""?f.text+f.delimiterChar+l:l;r+=l+e+" ",o.push(X),c=f.hiddenElement.innerHTML}if(i&&i.currentTarget&&i.currentTarget.classList.contains("e-chips-close")||i&&i.key==="Backspace"){var re=i.target.parentElement.getAttribute("data-value");if(i.key==="Backspace"){var ye=f.hiddenElement.lastChild;ye&&f.hiddenElement.removeChild(ye)}else f.hiddenElement.childNodes.forEach(function(V){V.value===re&&V.parentNode.removeChild(V)});c=f.hiddenElement.innerHTML}else c+="<option selected value='"+_+"'>"+A+"</option>";return g=A,"break"}else l=f.getTextByValue(T);else l=T;r+=l+e+" ",o.push(l)}c+='<option selected value="'+T+'">'+A+"</option>",g=A},f=this,g,y=0;y<p;y++){var b=d(y);if(y=g,b==="break")break}u(this.hiddenElement)||(this.isRemoveSelection?(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)&&this.hiddenElement.removeChild(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)),this.isRemoveSelection=!1):this.hiddenElement.innerHTML=c)}var C=i&&i.target&&i.target.classList.contains("e-chips-close");(!this.enableVirtualization||this.enableVirtualization&&this.mode!=="CheckBox"&&!C)&&this.setProperties({text:o.toString()},!0),n&&(this.updateWrapperText(this.delimiterWrapper,r),this.delimiterWrapper.setAttribute("id",at("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var S=i&&i.target,I=S&&S.classList.contains("e-close-hooker")?!0:null;(!this.changeOnBlur&&i&&!I||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(i,this.value,this.tempValues)),this.listData=h,this.addValidInputClass()},t.prototype.initialTextUpdate=function(){if(u(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),i=[],s=0;e.length>s;s++){var r=this.getValueByText(e[s]);u(r)?this.allowCustomValue&&i.push(e[s]):i.push(r)}if(i&&i.length){var n=this.allowObjectBinding?this.getDataByValue(i):i;this.setProperties({value:n},!0)}}},t.prototype.renderList=function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&this.list.querySelector(".e-ul").childElementCount===0)&&(e=!0),a.prototype.render.call(this,null,e),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.unwireListEvents(),this.wireListEvents()},t.prototype.initialValueUpdate=function(e,i){if(this.list){var s=void 0,r=void 0,n=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!u(this.value))for(var o=0;!u(this.value[o]);o++){n=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[o]):this.value[o],r=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n);var l=!1;if(this.enableVirtualization){if(s=null,e!=null&&e.length>0){for(var h=0;h<e.length;h++)if(this.isPrimitiveData&&e[h]===n||!this.isPrimitiveData&&H(this.fields.value?this.fields.value:"value",e[h])===n){s=this.isPrimitiveData?e[h]:H(this.fields.text,e[h]),this.enableVirtualization&&(u(this.selectedListData)?this.selectedListData=[e[h]]:(this.allowObjectBinding&&!this.isObjectInArray(e[h],this.selectedListData)||!this.allowObjectBinding)&&(Array.isArray(this.selectedListData)?this.selectedListData.push(e[h]):this.selectedListData=[this.selectedListData,e[h]]));break}}u(s)&&this.allowCustomValue&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&i)?(s=this.getTextByValue(n),l=!0):u(s)&&!this.allowCustomValue&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&i)&&(this.value.splice(o,1),o-=1)}else s=this.getTextByValue(n);if(r&&r.getAttribute("aria-selected")!=="true"||r&&r.getAttribute("aria-selected")==="true"&&this.hideSelectedItem&&(this.mode==="Box"||this.mode==="Default")||this.enableVirtualization&&n!=null&&s!=null&&!l){var p=[],c=this.isDynamicRemoteVirtualData&&s!=null&&s!==""&&o===0?s:this.text!=null&&this.text!==""&&!this.text.includes(s)?this.text+this.delimiterChar+s:s;p.push(c),this.setProperties({text:p.toString()},!0),this.addChip(s,n),this.addListSelection(r)}else if(!this.enableVirtualization&&n&&this.allowCustomValue||this.enableVirtualization&&n&&this.allowCustomValue&&(!(this.dataSource instanceof N)||this.dataSource instanceof N&&i)){var d=this.listData.length,f={};We(this.fields.text,n,f),We(this.fields.value,n,f);var g=this.popupWrapper.querySelector("."+B.noData);this.enableVirtualization||this.addItem(f,d),this.enableVirtualization&&(this.virtualCustomSelectData&&this.virtualCustomSelectData.length>=0?this.virtualCustomSelectData.push(f):this.virtualCustomSelectData=[f]),r=r||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n),this.popupWrapper.contains(g)&&(this.list.setAttribute("style",g.getAttribute("style")),this.popupWrapper.replaceChild(this.list,g),this.wireListEvents());var p=[],c=this.text!=null&&this.text!==""?this.text+this.delimiterChar+s:s;p.push(c),this.setProperties({text:p.toString()},!0),this.addChip(s,n),this.addListSelection(r)}}this.mode==="CheckBox"?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,null,i),this.mode==="CheckBox"&&this.showSelectAll&&(u(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.mode==="Box"||this.mode==="Default"&&this.inputFocus?this.chipCollectionWrapper.style.display="":(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper()}},t.prototype.updateActionCompleteData=function(e,i){this.value&&(!this.allowObjectBinding&&this.value.indexOf(e.getAttribute("data-value"))>-1||this.allowObjectBinding&&this.isObjectInArray(this.getDataByValue(e.getAttribute("data-value")),this.value))&&(this.mainList=this.ulElement,this.hideSelectedItem&&x([e],Ve))},t.prototype.updateAddItemList=function(e,i){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+B.noData)&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),ce(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))},t.prototype.updateDataList=function(){if(this.mainList&&this.ulElement&&!(this.isFiltered||this.isFilterAction||this.targetElement().trim())){var e=this.mainList.childElementCount<this.ulElement.childElementCount,i=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0]&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,s=this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(e||i||s)&&(this.mainList=this.ulElement)}},t.prototype.isValidLI=function(e){return e&&!e.classList.contains(B.disabled)&&!e.classList.contains(B.group)&&e.classList.contains(B.li)},t.prototype.updateListSelection=function(e,i,s){var r=e.getAttribute("data-value"),n=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(r)):this.getFormattedValue(r);this.allowCustomValue&&(r!=="false"&&n===!1||!u(n)&&n.toString()==="NaN")&&(n=r),this.removeHover(),!this.value||!this.allowObjectBinding&&this.value.indexOf(n)===-1||this.allowObjectBinding&&this.indexOfObjectInArray(n,this.value)===-1?this.dispatchSelect(n,i,e,e.getAttribute("aria-selected")==="true",s):this.removeValue(n,i,s),this.checkAndScrollParent()},t.prototype.updateListSelectEventCallback=function(e,i,s,r){var n=this;e=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",e):e;var o=r||this.getTextByValue(e);if((this.allowCustomValue||this.allowFiltering)&&!this.findListElement(this.mainList,"li","data-value",e)&&(!this.enableVirtualization||this.enableVirtualization&&this.virtualCustomData)){var l=i&&i.cloneNode(!0),h=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&typeof H(h,this.mainData[0])=="number"&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var p=this.getDataByValue(e),c={newData:p,cancel:!1};this.trigger("customValueSelection",c,function(d){d.cancel||(n.enableVirtualization&&n.virtualCustomData?(n.virtualCustomSelectData&&n.virtualCustomSelectData.length>=0?n.virtualCustomSelectData.push(p):n.virtualCustomSelectData=[p],n.remoteCustomValue=!1,n.addValue(e,o,s)):(Ie([l],n.mainList),n.mainData.push(p),n.remoteCustomValue=!1,n.addValue(e,o,s)))})}else this.remoteCustomValue=!1,this.addValue(e,o,s)},t.prototype.removeListSelection=function(){var e=this.hideSelectedItem?Ve:B.selected,i=this.list.querySelectorAll("."+e),s=i.length;if(i&&i.length)for(R(i,e);s>0;)i[s-1].setAttribute("aria-selected","false"),this.mode==="CheckBox"&&i&&i.length>s-1&&R([i[s-1].firstElementChild.lastElementChild],"e-check"),s--;if(!u(this.mainList)){var r=this.mainList.querySelectorAll("."+e),n=r.length;if(r&&r.length)for(R(r,e);n>0;)r[n-1].setAttribute("aria-selected","false"),this.mode==="CheckBox"&&(i&&i.length>n-1&&R([i[n-1].firstElementChild.lastElementChild],"e-check"),R([r[n-1].firstElementChild.lastElementChild],"e-check")),n--}},t.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+B.hover);e&&e.length&&R(e,B.hover)},t.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+B.focus),i=this.mainList.querySelectorAll("."+B.focus);e&&e.length&&(R(e,B.focus),R(i,B.focus))}},t.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)?(this.removeHover(),x([e],B.hover)):e!==null&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&(this.removeHover(),x([e],B.hover))},t.prototype.addListFocus=function(e){this.enabled&&(this.isValidLI(e)||this.fields.disabled&&this.isDisabledElement(e))?(this.removeFocus(),x([e],B.focus),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&(x([e],B.focus),this.updateAriaActiveDescendant())},t.prototype.addListSelection=function(e,i){var s=this.hideSelectedItem?Ve:B.selected;if(this.isValidLI(e)&&!e.classList.contains(B.hover)){if(x([e],s),this.updateMainList(!1,e.getAttribute("data-value"),i),e.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&e.classList.contains("e-active")){var r=e.getElementsByClassName("e-check").length;r===0&&this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=e.id}},t.prototype.updateDelimeter=function(e,i,s){this.updateData(e,i,s)},t.prototype.onMouseClick=function(e){var i=this;if(!this.isClearAllItem){this.keyCode=null,this.scrollFocusStatus=!1,this.keyboardEvent=null;var s=e.target,r=M(s,"."+B.li);if(this.enableVirtualization&&r&&r.classList.contains("e-virtual-list"))return;var n=M(s,"."+B.group);if(n&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&this.fields.groupBy)s=s.classList.contains("e-list-group-item")?s.firstElementChild.lastElementChild:e.target,s.classList.contains("e-check")?(this.selectAllItem(!1,e),s.classList.remove("e-check"),s.classList.remove("e-stop"),M(s,".e-list-group-item").classList.remove("e-active"),s.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),s.classList.remove("e-stop"),s.classList.add("e-check"),M(s,".e-list-group-item").classList.add("e-active"),s.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(r)){var o=this.value&&this.value.length?this.value.length:0;r.classList.contains("e-active")&&(o=o-1),o<this.maximumSelectionLength&&(this.updateListSelection(r,e),this.checkPlaceholderSize(),this.addListFocus(r),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?this.mode!=="CheckBox"&&(this.focusAtLastListItem(r.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),this.mode==="CheckBox"?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){i.updateDelimeter(i.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.allowResize&&this.setResize(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(e):e.preventDefault();var l=this.targetElement().trim()!=="";this.makeTextBoxEmpty(),this.findGroupStart(s),this.mode!=="CheckBox"&&this.refreshListItems(u(r)?null:r.textContent,l)}else e.preventDefault();if(this.enableVirtualization&&this.hideSelectedItem){var h=this.list.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide):not(.e-virtual-list)");if(h.length){var p=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(h.length<p+2){var c=this.getForQuery(this.value).clone();if(c=c.skip(this.virtualItemStartIndex),this.resetList(this.dataSource,this.fields,c),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+B.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var d=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});d.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(d)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}}}this.refreshPlaceHolder(),this.deselectHeader()}}},t.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)){var i=0,s=0,r=0,n=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),n=this.findGroupAttrtibutes(e,s,r,i,0),n=this.findGroupAttrtibutes(e,n[0],n[1],n[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e=e.previousElementSibling,e!=null););this.updateCheckBox(e,n[0],n[1],n[2])}},t.prototype.findGroupAttrtibutes=function(e,i,s,r,n){for(;!e.classList.contains("e-list-group-item")&&(this.fields.disabled&&this.isDisabledElement(e)||(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?i++:e.classList.contains("e-list-item")&&s++,r++),e=n?e.nextElementSibling:e.previousElementSibling,e!=null););return[i,s,r]},t.prototype.updateCheckBox=function(e,i,s,r){if(!(e===null||!u(this.fields.disabled)&&r===0)){var n=e.getElementsByClassName("e-frame")[0];r===i?(n.classList.remove("e-stop"),n.classList.add("e-check"),M(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):r===s?(n.classList.remove("e-check"),n.classList.remove("e-stop"),M(n,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===i-1?(n.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),M(n,".e-list-group-item").classList.add("e-active"),n.classList.add("e-check")):(n.classList.remove("e-check"),n.classList.add("e-stop"),M(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},t.prototype.disableGroupHeader=function(){var e=this.list.querySelectorAll("li.e-list-group-item");if(e)for(var i=0;i<e.length;i++){for(var s=!0,r=e[i].nextElementSibling;!r.classList.contains("e-list-group-item");){if(!this.isDisabledElement(r)){s=!1;break}if(r=r.nextElementSibling,r==null)break}s&&this.disableListItem(e[i])}},t.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,i=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&R(i,"e-disable"),e===this.maximumSelectionLength&&x(i,"e-disable")},t.prototype.onMouseOver=function(e){var i=M(e.target,"."+B.li);i===null&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&this.enableGroupCheckBox&&(i=M(e.target,"."+B.group)),this.addListHover(i)},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},t.prototype.onDocumentClick=function(e){if(this.mode!=="CheckBox"){var i=e.target;!(!u(this.popupObj)&&M(i,'[id="'+this.popupObj.element.id+'"]'))&&!this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=!1:this.scrollFocusStatus=(E.isIE||E.info.name==="edge")&&document.activeElement===this.inputElement}},t.prototype.wireListEvents=function(){u(this.list)||(v.add(document,"mousedown",this.onDocumentClick,this),v.add(this.list,"mousedown",this.onListMouseDown,this),v.add(this.list,"mouseup",this.onMouseClick,this),v.add(this.list,"mouseover",this.onMouseOver,this),v.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.unwireListEvents=function(){v.remove(document,"mousedown",this.onDocumentClick),this.list&&(v.remove(this.list,"mousedown",this.onListMouseDown),v.remove(this.list,"mouseup",this.onMouseClick),v.remove(this.list,"mouseover",this.onMouseOver),v.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.hideOverAllClear=function(){(!this.value||!this.value.length||this.inputElement.value==="")&&(this.overAllClear.style.display="none")},t.prototype.showOverAllClear=function(){(this.value&&this.value.length||this.inputElement.value!=="")&&this.showClearButton&&this.readonly!==!0?this.overAllClear.style.display="":this.overAllClear.style.display="none"},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},t.prototype.showSpinner=function(){if(u(this.spinnerElement)){var e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");this.overAllClear.style.display!=="none"||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:Ip+" "+Dp}),this.componentWrapper.appendChild(this.spinnerElement)),xr({target:this.spinnerElement,width:E.isDevice?"16px":"14px"},this.createElement),x([this.spinnerElement],Ap),Is(this.spinnerElement)}},t.prototype.hideSpinner=function(){u(this.spinnerElement)||(Er(this.spinnerElement),R([this.spinnerElement],Ap),this.spinnerElement.classList.contains(Dp)?Z(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.updateWrapperText=function(e,i){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=this.encodeHtmlEntities(i):e.innerText=i},t.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),u(this.viewWrapper)||(this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(na)),this.value&&this.value.length){var e="",i=void 0,s=void 0,r=1,n=void 0,o=void 0,l=0,h=void 0;this.enableVirtualization||this.updateWrapperText(this.viewWrapper,e);var p={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},c=new zt(this.getLocaleName(),p,this.locale);c.getConstant("actionFailureTemplate")===""&&(c=new zt("dropdowns",p,this.locale)),c.getConstant("noRecordsTemplate")===""&&(c=new zt("dropdowns",p,this.locale));var d=c.getConstant("overflowCountTemplate"),f=c.getConstant("totalCountTemplate"),g=this.createElement("span",{className:Ib}),y=d.replace("${count}",this.value.length.toString());g.innerText=y,this.viewWrapper.appendChild(g),this.renderReactTemplates();var b=g.offsetWidth;if(ce(g),this.showDropDownIcon&&(l=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!u(this.value)&&(this.allowCustomValue||this.listData&&this.listData.length>0))for(var C=0;!u(this.value[C]);C++){var S=this.text&&this.text.split(this.delimiterChar);if(this.enableVirtualization?S&&(e+=C===0?"":this.delimiterChar+" ",i=S[C],e+=i,i=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)):(e+=C===0?"":this.delimiterChar+" ",i=this.getOverflowVal(C),e+=i,i=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)),n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10),h=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),n+l+this.clearIconWidth>h){for(s!==void 0&&s!==""&&(i=s,C=r+1),this.updateWrapperText(this.viewWrapper,i),o=this.value.length-C,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10);n+b+l+this.clearIconWidth>h&&n!==0&&this.viewWrapper.innerHTML!=="";){var I=[];this.viewWrapper.innerHTML=I.join(this.delimiterChar),o=this.value.length,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10)}break}else n+b+l+this.clearIconWidth<=h?(s=e,r=C):C===0&&(s="",r=-1)}if(o>0){var A=h-l-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(g,this.viewWrapper,o,d,f,A)),this.updateRemainWidth(this.viewWrapper,A),this.updateRemainingText(g,l,o,d,f)}}else u(this.viewWrapper)||(this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none")},t.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=parseInt(window.getComputedStyle(this.overAllClear).width,10)||this.overAllClear.offsetWidth)},t.prototype.updateRemainWidth=function(e,i){e.classList.contains(na)&&i<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingRight,10)&&(e.style.width=i+"px")},t.prototype.updateRemainTemplate=function(e,i,s,r,n,o){i.firstChild&&i.firstChild.nodeType===3&&i.firstChild.nodeValue===""&&i.removeChild(i.firstChild),e.innerHTML="";var l=r.replace("${count}",s.toString()),h=n.replace("${count}",s.toString());return e.innerText=i.firstChild&&i.firstChild.nodeType===3?l:h,i.firstChild&&i.firstChild.nodeType===3?i.classList.remove(na):(i.classList.add(na),this.updateRemainWidth(i,o)),e},t.prototype.updateRemainingText=function(e,i,s,r,n){var o=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),l=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(l+i>=o&&l!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3){for(;l+i>o&&l!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3;){var h=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);h.pop(),this.viewWrapper.firstChild.nodeValue=h.join(this.delimiterChar),this.viewWrapper.firstChild.nodeValue===""&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),s++,l=this.viewWrapper.offsetWidth}var p=o-i;this.updateRemainTemplate(e,this.viewWrapper,s,r,n,p)}},t.prototype.getOverflowVal=function(e){var i;if(this.mainData&&this.mainData.length){var s=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];if(this.mode==="CheckBox"){var r=this.listData;this.listData=this.mainData,i=this.getTextByValue(s),this.listData=r}else i=this.getTextByValue(s)}else i=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];return i},t.prototype.unWireEvent=function(){if(u(this.componentWrapper)||v.remove(this.componentWrapper,"mousedown",this.wrapperClick),v.remove(window,"resize",this.windowResize),!u(this.inputElement)){v.remove(this.inputElement,"focus",this.focusInHandler),v.remove(this.inputElement,"keydown",this.onKeyDown),this.mode!=="CheckBox"&&v.remove(this.inputElement,"input",this.onInput),v.remove(this.inputElement,"keyup",this.keyUp);var e=M(this.inputElement,"form");e&&v.remove(e,"reset",this.resetValueHandler),v.remove(this.inputElement,"blur",this.onBlurHandler)}u(this.componentWrapper)||(v.remove(this.componentWrapper,"mouseover",this.mouseIn),v.remove(this.componentWrapper,"mouseout",this.mouseOut)),u(this.overAllClear)||v.remove(this.overAllClear,"mousedown",this.clearAll),u(this.inputElement)||v.remove(this.inputElement,"paste",this.pasteHandler)},t.prototype.resizingWireEvent=function(){v.add(document,"mousemove",this.resizePopup,this),v.add(document,"mouseup",this.stopResizing,this),v.add(document,"touchmove",this.resizePopup,this),v.add(document,"touchend",this.stopResizing,this)},t.prototype.resizingUnWireEvent=function(){v.remove(document,"mousemove",this.resizePopup),v.remove(document,"mouseup",this.stopResizing),v.remove(document,"touchmove",this.resizePopup),v.remove(document,"touchend",this.stopResizing)},t.prototype.selectAllItem=function(e,i,s){var r;if(u(this.list)||(r=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.value&&this.value.length&&i&&i.target&&M(i.target,".e-close-hooker")&&this.allowFiltering&&(r=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)){var n=i?this.groupTemplate?M(i.target,".e-list-group-item"):i.target:null;if(n=i&&i.keyCode===32?s:n,n=n&&n.classList.contains("e-frame")?n.parentElement.parentElement:n,n&&n.classList.contains("e-list-group-item")){var o=n.nextElementSibling;if(u(o))return;for(;o.classList.contains("e-list-item");){if(!(this.fields.disabled&&this.isDisabledElement(o)))if(e){if(!o.firstElementChild.lastElementChild.classList.contains("e-check")){var l=this.value&&this.value.length?this.value.length:0;o.classList.contains("e-active")&&(l-=1),l<this.maximumSelectionLength&&this.updateListSelection(o,i)}}else o.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(o,i);if(o=o.nextElementSibling,o==null)break}if(n.classList.contains("e-list-group-item")){var h=this.list.getElementsByClassName("e-item-focus")[0];h&&h.classList.remove("e-item-focus"),e?n.classList.add("e-active"):n.classList.remove("e-active"),n.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&i&&this.updateValueState(i,this.value,this.tempValues)}else this.updateValue(i,r,e)}else this.updateValue(i,r,e);this.addValidInputClass()},t.prototype.virtualSelectionAll=function(e,i,s){var r=this,n=0,o=i.length,l=this.maximumSelectionLength;if(e){this.virtualSelectAll=!0,o=this.virtualSelectAllData&&this.virtualSelectAllData.length!==0?this.virtualSelectAllData.length:o,this.listData=this.virtualSelectAllData;var h=this.createListItems(this.virtualSelectAllData.slice(0,30),this.fields),p=h.querySelectorAll("li"),c=document.createDocumentFragment();p.forEach(function(b){c.appendChild(b.cloneNode(!0))}),i.forEach(function(b){c.appendChild(b.cloneNode(!0))});var d=c.childNodes;if(this.virtualSelectAllData instanceof Array){for(;n<o&&n<=50&&n<l;){if(this.isSelectAllTarget=o===n+1,d[n]){var f=this.allowObjectBinding?this.getDataByValue(d[n].getAttribute("data-value")):this.getFormattedValue(d[n].getAttribute("data-value"));if(!this.allowObjectBinding&&this.value&&this.value.indexOf(f)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(f,this.value)>=0){n++;continue}this.updateListSelection(d[n],s,o-n)}else{var f=H(this.fields.value?this.fields.value:"",this.virtualSelectAllData[n]);if(f=this.allowObjectBinding?this.getDataByValue(f):f,!this.allowObjectBinding&&this.value&&this.value.indexOf(f)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(f,this.value)>=0){n++;continue}this.value&&f!=null&&Array.isArray(this.value)&&(!this.allowObjectBinding&&this.value.indexOf(f)<0||this.allowObjectBinding&&!this.isObjectInArray(f,this.value))&&this.dispatchSelect(f,s,null,!1,o)}n++}o>50&&setTimeout(function(){if(r.virtualSelectAllData&&r.virtualSelectAllData.length>0&&r.virtualSelectAllData.map(function(C){if(r.value&&C[r.fields.value]!=null&&Array.isArray(r.value)&&(!r.allowObjectBinding&&r.value.indexOf(C[r.fields.value])<0||r.allowObjectBinding&&!r.isObjectInArray(C[r.fields.value],r.value))){var S=C[r.fields.value],I=C[r.fields.text].toString();r.dispatchSelect(S,s,null,!1,o,C,I)}}),r.updatedataValueItems(s),r.isSelectAllLoop=!1,r.changeOnBlur||(r.updateValueState(s,r.value,r.tempValues),r.isSelectAll=r.isSelectAll?!r.isSelectAll:r.isSelectAll),r.updateHiddenElement(!0),r.popupWrapper&&i[n-1]&&i[n-1].classList.contains("e-item-focus")){var b=document.getElementsByClassName("e-selectall-parent")[0];b&&b.classList.contains("e-item-focus")&&i[n-1].classList.remove("e-item-focus")}r.checkSelectAll()},0)}}else this.virtualSelectAllData&&this.virtualSelectAllData.length>0&&this.virtualSelectAllData.map(function(b){r.virtualSelectAll=!0,r.removeValue(r.value[n],s,r.value.length-n)}),this.updatedataValueItems(s),this.changeOnBlur||(this.updateValueState(s,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement(),this.setProperties({value:[]},!0),this.selectedListData=[],this.virtualSelectAll=!1,!u(this.viewPortInfo.startIndex)&&!u(this.viewPortInfo.endIndex)&&this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"});this.checkSelectAll();var g=this.list.getElementsByClassName("e-virtual-ddl")[0];g&&(g.style=this.GetVirtualTrackHeight()),this.UpdateSkeleton();var y=this.list.getElementsByClassName("e-virtual-ddl-content")[0];y&&(y.style=this.getTransformValues())},t.prototype.updateValue=function(e,i,s){var r=this,n=i.length,o={event:e,items:s?i:[],itemData:s?this.listData:[],isInteracted:!!e,isChecked:s,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",o),i&&i.length||this.enableVirtualization&&!s){var l=0,h=0;if(this.enableGroupCheckBox?h=s?this.maximumSelectionLength-(this.value?this.value.length:0):i.length:h=s?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,o.preventSelectEvent){for(var p=0;p<i.length&&p<h;p++){this.removeHover();var c=i[p].getAttribute("data-value"),d=this.getFormattedValue(c);d=this.allowObjectBinding?this.getDataByValue(d):d;var f=this.mainList?this.mainList.querySelectorAll(s?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[p]:null;s?(this.value=this.value?this.value:[],(!this.allowObjectBinding&&this.value.indexOf(d)<0||this.allowObjectBinding&&!this.isObjectInArray(d,this.value))&&this.setProperties({value:[].concat([],this.value,[d])},!0),this.removeFocus(),this.addListSelection(i[p],f),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(d,e,!1,i[p],f),this.enableGroupCheckBox&&this.findGroupStart(i[p])}if(!s){var g=this.value&&this.value.length?this.value.length:0;if(g<this.maximumSelectionLength){var y=this.list.querySelectorAll("li."+B.li+":not(.e-active)");R(y,"e-disable")}}var b={event:e,items:s?i:[],itemData:s?this.listData:[],isInteracted:!!e,isChecked:s};this.trigger("selectedAll",b)}else if(this.enableVirtualization)this.virtualSelectAllState=s,this.virtualSelectAll=!0,this.CurrentEvent=e,this.virtualSelectAllData||this.resetList(this.dataSource,this.fields,new se),this.virtualSelectAllData&&this.virtualSelectionAll(s,i,e);else{for(;l<n&&l<=50&&l<h;)this.isSelectAllTarget=n===l+1,this.updateListSelection(i[l],e,n-l),this.enableGroupCheckBox&&this.findGroupStart(i[l]),l++;n>50&&setTimeout(function(){for(;l<n&&l<h;)r.isSelectAllTarget=n===l+1,r.updateListSelection(i[l],e,n-l),r.enableGroupCheckBox&&r.findGroupStart(i[l]),l++;if(r.updatedataValueItems(e),r.changeOnBlur||(r.updateValueState(e,r.value,r.tempValues),r.isSelectAll=r.isSelectAll?!r.isSelectAll:r.isSelectAll),r.updateHiddenElement(),r.popupWrapper&&i[l-1].classList.contains("e-item-focus")){var C=document.getElementsByClassName("e-selectall-parent")[0];C&&C.classList.contains("e-item-focus")&&i[l-1].classList.remove("e-item-focus")}},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),n<=50&&!o.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),(this.enableVirtualization&&this.value&&this.value.length>0||!this.enableVirtualization)&&this.updateHiddenElement())},t.prototype.updateHiddenElement=function(e){var i=this,s="",r="",n="",o=[];this.mode==="CheckBox"&&(this.value.map(function(l,h){s+='<option selected value ="'+l+'">'+h+"</option>",e||(i.listData?n=i.getTextByValue(l):n=l,r+=n+i.delimiterChar+" ",o.push(n))}),this.hiddenElement.innerHTML=s,e||(this.updateWrapperText(this.delimiterWrapper,r),this.setProperties({text:o.toString()},!0)),this.delimiterWrapper.setAttribute("id",at("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.refreshInputHight(),this.refreshPlaceHolder())},t.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},t.prototype.textboxValueUpdate=function(e){var i=e&&e.target&&(M(e.target,".e-selectall-parent")||M(e.target,".e-close-hooker"));this.mode!=="Box"&&!this.isPopupOpen()&&!(this.mode==="CheckBox"&&(this.isSelectAll||i))?this.updateDelimView():this.searchWrapper.classList.remove(ra),this.mode==="CheckBox"?(this.updateDelimView(),(!(i||this.isSelectAll)&&this.isSelectAllTarget||this.isSelectAll&&this.isSelectAllTarget)&&this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.updateDataSource=function(e){this.checkAndResetCache(),u(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},t.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},t.prototype.selectAllItems=function(e,i){var s=this;if(u(this.list))this.selectAllAction=function(){if(s.mode==="CheckBox"&&s.showSelectAll){var n={module:"CheckBoxSelection",enable:s.mode==="CheckBox",value:e?"check":"uncheck"};s.notify("checkSelectAll",n)}s.selectAllItem(e,i),s.selectAllAction=null},a.prototype.render.call(this);else{if(this.selectAllAction=null,this.mode==="CheckBox"&&this.showSelectAll){var r={value:e?"check":"uncheck",enable:this.mode==="CheckBox",module:"CheckBoxSelection"};this.notify("checkSelectAll",r)}this.selectAllItem(e,i)}(!(this.dataSource instanceof N)||this.dataSource instanceof N&&this.virtualSelectAllData)&&(this.virtualSelectAll=!1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){(e.dataSource&&!u(Object.keys(e.dataSource))||e.query&&!u(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),this.getModuleName()==="multiselect"&&(this.isFilterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"query":case"dataSource":this.mode==="CheckBox"&&this.showSelectAll&&(u(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),this.updateVal(this.value,this.value,"text");break;case"value":if(this.fields.disabled&&this.removeDisabledItemsValue(this.value),this.updateVal(this.value,i.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.isPopupOpen()&&this.mode==="CheckBox"&&this.list&&this.list.querySelector(".e-active.e-disable")){var o=this.list.querySelectorAll("li."+B.li+".e-active.e-disable");R(o,"e-disable")}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":this.mode!=="Box"&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(i.cssClass),this.updateCssClass(),this.calculateWidth();break;case"enableRtl":this.enableRTL(e.enableRtl),a.prototype.onPropertyChanged.call(this,e,i);break;case"allowResize":if(this.allowResize=e.allowResize,!this.allowResize&&this.popupObj){var l=parseInt(this.popupHeight,10);this.popupHeight!=="auto"?(this.list.style.maxHeight=ve(l),this.popupWrapper.style.height=ve(this.popupHeight),this.popupWrapper.style.maxHeight=ve(this.popupHeight)):this.list.style.maxHeight=ve(this.popupHeight)}break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&W.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!u(this.overAllWrapper)&&!u(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){var l=parseInt(this.popupHeight,10);this.popupHeight!=="auto"?(this.list.style.maxHeight=ve(l),this.popupWrapper.style.maxHeight=ve(this.popupHeight)):this.list.style.maxHeight=ve(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":this.mode==="CheckBox"&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;case"fields":u(this.fields.groupBy)&&this.removeScrollEvent();break;default:{var h=this.getPropObject(n,e,i);a.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty)}break}}},t.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},t.prototype.totalItemsCount=function(){var e;if(this.dataSource instanceof N?this.remoteDataCount>=0?e=this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):e=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode==="CheckBox")this.totalItemCount=e!==0?e:this.totalItemCount;else if(this.hideSelectedItem){if(this.totalItemCount=e!==0&&this.value?e-this.value.length:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0)for(var i=0;i<this.virtualCustomSelectData.length;i++)for(var s=0;s<this.value.length;s++){var r=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[s]):this.value[s],n=H(this.fields.value?this.fields.value:"",this.virtualCustomSelectData[i]);r===n&&(this.totalItemCount+=1)}}else this.totalItemCount=e!==0?e:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&(this.totalItemCount+=this.virtualCustomSelectData.length)},t.prototype.presentItemValue=function(e){for(var i=[],s=0;s<this.value.length;s++){var r=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[s]):this.value[s],n=this.findListElement(this.allowFiltering&&!u(this.mainList)?this.mainList:e,"li","data-value",r);if(!n){var o=this.allowObjectBinding?this.getDataByValue(this.value[s]):this.value[s];i.push(o)}}return i},t.prototype.addNonPresentItems=function(e,i,s,r){var n=this;this.dataSource.executeQuery(this.getForQuery(e)).then(function(o){o.result.length>0&&n.addItem(o.result,s.length),n.updateActionList(i,s,r)})},t.prototype.updateVal=function(e,i,s){var r=this;if(!this.list)this.onLoadSelect(),this.enableVirtualization&&(this.setProperties({text:""},!0),this.selectedListData=[],this.checkInitialValue());else if(this.dataSource instanceof N&&(!this.listData||!(this.mainList&&this.mainData)))this.onLoadSelect();else{var n=[];!u(this.value)&&!this.allowCustomValue&&(n=this.presentItemValue(this.ulElement));var o=n.some(function(f){return f!==null});if(s==="value"&&n.length>0&&this.dataSource instanceof N&&!u(this.value)&&this.listData!=null&&(!this.enableVirtualization||this.enableVirtualization&&this.valueTemplate)&&o)this.mainData=null,this.setDynValue=!0,this.isaddNonPresentItems=!0,this.addNonPresentItems(n,this.ulElement,this.listData),this.isaddNonPresentItems=!1;else{if(this.selectedListData=[],s==="text"&&(this.initialTextUpdate(),e=this.value),(u(this.value)||this.value.length===0)&&(this.tempValues=i),this.allowCustomValue&&(this.mode==="Default"||this.mode==="Box")&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var l=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(l,this.mainData)}if(!this.enableVirtualization)this.initialValueUpdate();else if(this.enableVirtualization&&!(this.dataSource instanceof N))this.initialValueUpdate(this.dataSource,!0);else if(!this.isInitRemoteVirtualData)if(this.allowObjectBinding&&!o&&this.value&&this.value.length){for(var h=this.isPrimitiveData?"":this.fields.value,p=void 0,c=0;c<this.value.length;c++){var d=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[c]):this.value[c];c===0?p=new we(h,"equal",d):p=p.or(h,"equal",d)}this.dataSource instanceof N&&this.dataSource.executeQuery(new se().where(p)).then(function(f){if(f.result.length>0){var g=f.result;r.isDynamicRemoteVirtualData=!0,setTimeout(function(){r.initialValueUpdate(g,!0),r.isDynamicRemoteVirtualData=!1,(!r.inputFocus||r.inputFocus&&r.mode!=="Default")&&r.initialUpdate()},100)}})}else this.isDynamicRemoteVirtualData=!0,this.initialValueUpdate(this.listData,!0),this.isDynamicRemoteVirtualData=!1,this.initialUpdate();this.mode!=="Box"&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,e,i),this.checkPlaceholderSize()}}this.changeOnBlur||this.updateValueState(null,e,i)},t.prototype.addItem=function(e,i){a.prototype.addItem.call(this,e,i)},t.prototype.hidePopup=function(e){var i=this,s=100;if(this.isPopupOpen()){var r={name:"FadeOut",duration:100,delay:s};this.customFilterQuery=null;var n={popup:this.popupObj,cancel:!1,animation:r,event:e||null};this.trigger("close",n,function(o){if(!o.cancel){i.fields.groupBy&&i.mode!=="CheckBox"&&i.fixedHeaderElement&&(ce(i.fixedHeaderElement),i.fixedHeaderElement=null),i.beforePopupOpen=!1,i.overAllWrapper.classList.remove(Tp);var l=i.mode==="CheckBox"?i.targetElement():null;if(i.popupObj.hide(new It(o.animation)),G(i.inputElement,{"aria-expanded":"false"}),i.inputElement.removeAttribute("aria-owns"),i.inputElement.removeAttribute("aria-activedescendant"),i.allowFiltering&&i.notify("inputFocus",{module:"CheckBoxSelection",enable:i.mode==="CheckBox",value:"clear"}),i.popupObj.hide(),R([document.body,i.popupObj.element],"e-popup-full-page"),v.remove(i.list,"keydown",i.onKeyDown),i.mode==="CheckBox"&&i.showSelectAll&&v.remove(i.popupObj.element,"click",i.clickHandler),i.list&&i.list.parentElement&&i.allowResize){i.resizer&&i.list.parentElement.contains(i.resizer)&&i.list.parentElement.removeChild(i.resizer),i.list.parentElement.classList.contains("e-resize")&&i.list.parentElement.classList.remove("e-resize"),i.list.parentElement.style.boxSizing="",i.list.parentElement.style.paddingBottom="";var h=parseInt(i.popupHeight,10);i.list.style.maxHeight=ve(h),i.popupHeight.toString().toLowerCase()!=="auto"&&i.initialPopupHeight>=parseInt(i.popupHeight.toString(),10)-2&&(i.list.parentElement.style.height=ve(i.popupHeight)),i.list.parentElement.style.maxHeight=ve(i.popupHeight)}i.resizer&&(v.remove(i.resizer,"mousedown",i.startResizing),i.resizer.remove()),i.enableVirtualization&&i.mode==="CheckBox"&&i.value&&i.value.length>0&&i.enableSelectionOrder&&(i.viewPortInfo.startIndex=i.virtualItemStartIndex=0,i.viewPortInfo.endIndex=i.virtualItemEndIndex=i.viewPortInfo.startIndex>0?i.viewPortInfo.endIndex:i.itemCount,i.virtualListInfo=i.viewPortInfo,i.previousStartIndex=0,i.previousEndIndex=i.itemCount);var p=void 0;i.dataSource instanceof N?i.remoteDataCount>=0?i.totalItemCount=i.dataCount=i.remoteDataCount:i.resetList(i.dataSource):p=i.dataSource&&i.dataSource.length?i.dataSource.length:0,i.enableVirtualization&&(i.allowFiltering||i.allowCustomValue)&&(i.targetElement()||l)&&i.totalItemCount!==p&&(i.checkAndResetCache(),i.updateInitialData()),i.virtualCustomData&&i.viewPortInfo&&i.viewPortInfo.startIndex===0&&i.viewPortInfo.endIndex===i.itemCount&&i.renderItems(i.mainData,i.fields),i.virtualCustomData=null,i.isVirtualTrackHeight=!1}})}},t.prototype.showPopup=function(e){var i=this;if(this.enabled){this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null;var s={cancel:!1};this.trigger("beforeOpen",s,function(r){if(!r.cancel){if(!i.ulElement){i.beforePopupOpen=!0,i.mode==="CheckBox"&&E.isDevice&&i.allowFiltering&&i.isDeviceFullScreen&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:i.mode==="CheckBox"}),a.prototype.render.call(i,e);return}i.mode==="CheckBox"&&E.isDevice&&i.allowFiltering&&i.isDeviceFullScreen&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:i.mode==="CheckBox"});var n=i.ulElement.querySelectorAll("li.e-list-item").length,o=i.ulElement.querySelectorAll("li."+B.li+"."+Ve).length;if(n>0&&n===o&&o===i.mainData.length&&!(i.targetElement()!==""&&i.allowCustomValue)){i.beforePopupOpen=!1;return}if(i.onPopupShown(e),i.enableVirtualization&&i.listData&&i.listData.length&&(!u(i.value)&&(i.getModuleName()==="dropdownlist"||i.getModuleName()==="combobox")&&i.removeHover(),i.beforePopupOpen||(i.hideSelectedItem&&i.value&&Array.isArray(i.value)&&i.value.length>0&&i.totalItemsCount(),!i.preventSetCurrentData&&!u(i.viewPortInfo.startIndex)&&!u(i.viewPortInfo.endIndex)&&i.notify("setCurrentViewDataAsync",{component:i.getModuleName(),module:"VirtualScroll"}))),i.enableVirtualization&&!i.allowFiltering&&i.selectedValueInfo!=null&&i.selectedValueInfo.startIndex>0&&i.value!=null&&i.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),i.enableVirtualization)i.updatevirtualizationList();else if(i.value&&i.value.length){var l=void 0;i.getItems();for(var h=0,p=i.value;h<p.length;h++){var c=p[h],d=i.allowObjectBinding?H(i.fields.value?i.fields.value:"",c):c;l=i.getElementByValue(d),l&&i.addListSelection(l)}}i.allowResize&&i.setResize(),i.preventSetCurrentData=!0}})}},t.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},t.prototype.getModuleName=function(){return"multiselect"},t.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0),this.checkAndResetCache(),this.enableVirtualization&&(this.updateInitialData(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.isCustomDataUpdated||this.notify("setGeneratedData",{module:"VirtualScroll"}),this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=this.itemCount)},t.prototype.render=function(){!u(this.value)&&this.value.length>0&&(this.value=this.value.slice()),this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.selectAllEventEle=[],this.searchWrapper=this.createElement("span",{className:wb+" "+(this.mode==="Box"?Rb:"")}),this.viewWrapper=this.createElement("span",{className:bb+" "+xp}),this.viewWrapper.style.display="none",this.overAllClear=this.createElement("span",{className:Ip}),this.overAllClear.style.display="none",this.componentWrapper=this.createElement("div",{className:vb}),this.overAllWrapper=this.createElement("div",{className:mb}),this.mode==="CheckBox"&&x([this.overAllWrapper],"e-checkbox"),E.isDevice&&this.componentWrapper.classList.add(yb),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:xb}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),this.mode==="Delimiter"||this.mode==="CheckBox"?(this.delimiterWrapper=this.createElement("span",{className:xp}),this.delimiterWrapper.style.display="none",this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:Cb}),this.chipCollectionWrapper.style.display="none",this.mode==="Default"?this.chipCollectionWrapper.setAttribute("id",at("chip_default")):this.mode==="Box"&&this.chipCollectionWrapper.setAttribute("id",at("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),this.mode!=="Box"&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!E.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(il),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:Eb,attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),(this.mode==="Default"||this.mode==="Box")&&this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),u(this.inputElement)||(G(this.inputElement,{"aria-expanded":"false"}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName())),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),this.floatLabelType!=="Never"?Cp(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):this.floatLabelType==="Never"&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):at("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:Tb,tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),this.mode!=="CheckBox"&&this.hideOverAllClear(),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering,this.mode==="CheckBox"),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount,this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&W.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!u(this.overAllWrapper)&&!u(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},t.prototype.setResize=function(){var e=this,i=16;if(this.list&&this.list.parentElement&&u(this.list.parentElement.querySelector(".e-resizer-right.e-icons"))&&(this.resizer=this.createElement("div",{id:this.element.id+"_resize-popup",className:Fb})),this.mode==="CheckBox"&&this.showSelectAll&&this.selectAllHeight&&this.selectAllHeight!==0&&(this.storedSelectAllHeight=this.selectAllHeight),this.list&&this.list.parentElement){this.list.parentElement.classList.add("e-resize"),this.initialPopupHeight=this.list.parentElement.clientHeight,this.popupHeight.toString().toLowerCase()!=="auto"&&this.initialPopupHeight>=parseInt(this.popupHeight.toString(),10)-2&&(this.list.parentElement.style.height="100%"),this.list.parentElement.style.boxSizing="border-box";var s=this.mode==="CheckBox"&&this.searchBoxHeight?this.searchBoxHeight+i+(this.showSelectAll?this.storedSelectAllHeight:0):i;if(this.footer){var r=this.list.style.maxHeight,n=this.list.parentElement.style.maxHeight;setTimeout(function(){var l=Math.round(e.footer.getBoundingClientRect().height),h=(parseInt(n,10)-l).toString()+"px";r=(parseInt(h,10)-2).toString()+"px",l>0&&(e.list.parentElement.style.paddingBottom=(parseInt(n,10)-parseInt(r,10)+s).toString()+"px")},1)}else this.list.parentElement.style.paddingBottom=s+"px";if(this.list.parentElement.appendChild(this.resizer),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.headerTemplate){var o=this.list.parentElement.querySelector(".e-ddl-header");o&&o.offsetHeight&&(this.headerTemplateHeight=o.offsetHeight),this.resizeHeight?this.list.style.maxHeight=this.resizeHeight-this.headerTemplateHeight-16+"px":this.list.style.maxHeight=parseInt(this.list.style.maxHeight,10)-16+"px"}}this.resizer&&(v.add(this.resizer,"mousedown",this.startResizing,this),v.add(this.resizer,"touchstart",this.startResizing,this))},t.prototype.startResizing=function(e){this.isResizing=!0,this.trigger("resizeStart",e);var i=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=i,this.originalMouseY=s),this.resizingWireEvent(),e&&e.preventDefault()},t.prototype.resizePopup=function(e){if(this.isResizing){this.trigger("resizing",e);var i=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=i-this.originalMouseX,n=s-this.originalMouseY,o=100,l=130;if(this.resizeWidth=Math.max(this.originalWidth+r,o),this.resizeHeight=Math.max(this.originalHeight+n,l),this.list&&this.list.parentElement){var h=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),p=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);h=h||100,p=p||120,this.resizeWidth=Math.max(this.originalWidth+r,h),this.resizeHeight=Math.max(this.originalHeight+n,p),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.headerTemplate&&(this.list.style.maxHeight=this.resizeHeight-this.headerTemplateHeight-16+"px"),this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}e&&e.preventDefault()}},t.prototype.stopResizing=function(e){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",e),this.resizingUnWireEvent()),e&&e.preventDefault()},t.prototype.getListHeight=function(){var e=this.createElement("div",{className:"e-dropdownbase"}),i=this.createElement("li",{className:"e-list-item"}),s=ve(this.popupHeight);e.style.height=parseInt(s,10).toString()+"px",e.appendChild(i),document.body.appendChild(e),this.virtualListHeight=e.getBoundingClientRect().height;var r=Math.ceil(i.getBoundingClientRect().height)+parseInt(window.getComputedStyle(i).marginBottom,10);return e.remove(),r},t.prototype.removeDisabledItemsValue=function(e){if(e){for(var i=[],s=0,r=0;r<e.length;r++){var n=e[r];typeof n=="object"&&(n=JSON.parse(JSON.stringify(n))[this.fields.value]),n!=null&&!this.isDisabledItemByIndex(this.getIndexByValue(n))&&(i[s++]=e[r])}this.value=i.length>0?i:null}},t.prototype.checkInitialValue=function(){var e=this;this.fields.disabled&&this.removeDisabledItemsValue(this.value);var i=this.dataSource instanceof Array?this.dataSource.length>0:!u(this.dataSource);if(!(this.value&&this.value.length)&&u(this.text)&&!i&&this.element.tagName==="SELECT"&&this.element.options.length>0){for(var s=this.element.options,r=[],n="",o=0,l=s.length;o<l;o++){var h=s[o];if(!u(h.getAttribute("selected")))if(h.getAttribute("value")){var p=this.allowObjectBinding?this.getDataByValue(h.getAttribute("value")):h.getAttribute("value");r.push(p)}else n+=h.text+this.delimiterChar}r.length>0?this.setProperties({value:r},!0):n!==""&&this.setProperties({text:n},!0),(r.length>0||n!=="")&&(this.refreshInputHight(),this.refreshPlaceHolder())}if((this.value&&this.value.length||!u(this.text))&&(this.list||a.prototype.render.call(this)),this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),!u(this.text)&&(u(this.value)||this.value.length===0)&&this.initialTextUpdate(),this.value&&this.value.length){var c;if(this.enableVirtualization){for(var d=this.isPrimitiveData?"":this.fields.value,f=void 0,g=0;g<this.value.length;g++){var p=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",this.value[g]):this.value[g];g===0?f=new we(d,"equal",p):f=f.or(d,"equal",p)}this.dataSource instanceof N?this.dataSource.executeQuery(new se().where(f)).then(function(y){y.result.length>0&&(c=y.result,e.initStatus=!1,e.isInitRemoteVirtualData=!0,setTimeout(function(){e.initialValueUpdate(c,!0),e.initialUpdate(),e.isInitRemoteVirtualData=!1},100),e.initStatus=!0)}):c=new N(this.dataSource).executeLocal(new se().where(f))}this.dataSource instanceof N?this.setInitialValue=function(){e.initStatus=!1,(!e.enableVirtualization||e.enableVirtualization&&!(e.dataSource instanceof N))&&e.initialValueUpdate(c),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(c,!0),this.initialUpdate()),this.updateTempValue()}else this.initialUpdate();this.initStatus=!0,this.checkAutoFocus(),u(this.text)||this.element.setAttribute("data-initial-value",this.text)},t.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},t.prototype.updatevirtualizationList=function(){if(this.value&&this.value.length){for(var e=void 0,i=0,s=this.value;i<s.length;i++){var r=s[i],n=this.allowObjectBinding?H(this.fields.value?this.fields.value:"",r):r;e=this.getElementByValue(n),e&&this.addListSelection(e)}if(this.enableVirtualization&&this.hideSelectedItem){var o=this.list.querySelectorAll("li."+B.li+":not(."+Ve+"):not(.e-reorder-hide):not(.e-virtual-list)");if(o.length){var l=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(o.length<l+2){var h=this.getForQuery(this.value).clone();h=h.skip(this.viewPortInfo.startIndex),this.resetList(this.dataSource,this.fields,h)}}}}},t.prototype.setFloatLabelType=function(){cb(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),this.floatLabelType!=="Never"&&Cp(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},t.prototype.addValidInputClass=function(){u(this.overAllWrapper)||(!u(this.value)&&this.value.length||this.floatLabelType==="Always"?x([this.overAllWrapper],"e-valid-input"):R([this.overAllWrapper],"e-valid-input"))},t.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:kp}),this.componentWrapper.appendChild(this.dropIcon),x([this.componentWrapper],["e-down-icon"])):u(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),R([this.componentWrapper],["e-down-icon"]))},t.prototype.initialUpdate=function(){this.mode!=="Box"&&!(this.setDynValue&&this.mode==="Default"&&this.inputFocus)&&this.updateDelimView(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},t.prototype.disableItem=function(e){if(this.fields.disabled){this.list||this.renderList();var i=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if(typeof e=="string")i=this.getIndexByValue(e);else if(typeof e=="object"){if(e instanceof HTMLLIElement){for(var s=0;s<this.liCollections.length;s++)if(this.liCollections[s]===e){i=this.getIndexByValue(e.getAttribute("data-value"));break}}else for(var r=JSON.parse(JSON.stringify(e))[this.fields.value],s=0;s<this.listData.length;s++)if(JSON.parse(JSON.stringify(this.listData[s]))[this.fields.value]===r){i=this.getIndexByValue(r);break}}else i=e;var n=i<this.liCollections.length&&i>-1;if(n&&!JSON.parse(JSON.stringify(this.listData[i]))[this.fields.disabled]){var o=this.liCollections[i];if(o){this.disableListItem(o);var l=JSON.parse(JSON.stringify(this.listData[i]));if(l[this.fields.disabled]=!0,this.listData[i]=l,o.classList.contains(B.focus)&&this.removeFocus(),o.classList.contains(Ve)||o.classList.contains(B.selected)){var h=this.value;this.removeDisabledItemsValue(this.value),this.updateVal(this.value,h,"value")}this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)&&this.disableGroupHeader()}}}}},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),u(this.popupObj)||(this.popupObj.hide(),this.popupObj.destroy()),this.notify(Lb,{}),this.unwireListEvents(),this.unWireEvent();var e=["readonly","aria-disabled","placeholder","aria-label","aria-expanded"],i=e.length;if(!u(this.inputElement))for(;i>0;)this.inputElement.removeAttribute(e[i-1]),i--;for(u(this.element)||(this.element.removeAttribute("data-initial-value"),this.element.style.display="block"),this.overAllWrapper&&this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?ce(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),ce(this.overAllWrapper))),this.popupWrapper&&this.popupWrapper.parentElement&&this.popupWrapper.parentElement.remove();this.searchWrapper&&this.searchWrapper.firstChild;)this.searchWrapper.removeChild(this.searchWrapper.firstChild);this.searchWrapper&&this.searchWrapper.parentElement&&this.searchWrapper.parentElement.remove(),this.viewWrapper&&this.viewWrapper.parentElement&&this.viewWrapper.parentElement.remove(),this.overAllClear&&this.overAllClear.parentElement&&this.overAllClear.parentElement.remove(),this.delimiterWrapper&&this.delimiterWrapper.parentElement&&this.delimiterWrapper.parentElement.remove();var s=this.overAllWrapper.querySelector("select.e-multi-hidden");for(s&&s.parentElement&&s.parentElement.remove();this.componentWrapper&&this.componentWrapper.firstChild;)this.componentWrapper.removeChild(this.componentWrapper.firstChild);for(this.componentWrapper&&this.componentWrapper.parentElement&&(this.componentWrapper.removeAttribute("class"),this.componentWrapper.parentElement.remove());this.popupWrapper&&this.popupWrapper.firstChild;)this.popupWrapper.removeChild(this.popupWrapper.firstChild);if(this.inputElement)for(var r=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-label","aria-hidden","tabindex","aria-controls","aria-describedby","size","role","type","class"],n=0;n<r.length;n++)this.inputElement.removeAttribute(r[n]);this.inputElement&&this.inputElement.remove(),this.list=null,this.popupObj=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.componentWrapper=null,this.overAllClear=null,this.overAllWrapper=null,this.hiddenElement=null,this.searchWrapper=null,this.viewWrapper=null,this.chipCollectionWrapper=null,this.targetInputElement=null,this.popupWrapper=null,this.inputElement=null,this.delimiterWrapper=null,this.liCollections=null,this.popupContentElement=null,this.header=null,this.mainList=null,this.mainListCollection=null,this.footer=null,this.selectAllEventEle=null,a.prototype.destroy.call(this)},ue([dt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},Th)],t.prototype,"fields",void 0),ue([m(!1)],t.prototype,"enablePersistence",void 0),ue([m(null)],t.prototype,"groupTemplate",void 0),ue([m("No records found")],t.prototype,"noRecordsTemplate",void 0),ue([m("Request failed")],t.prototype,"actionFailureTemplate",void 0),ue([m("None")],t.prototype,"sortOrder",void 0),ue([m(!0)],t.prototype,"enabled",void 0),ue([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),ue([m(!1)],t.prototype,"enableVirtualization",void 0),ue([m([])],t.prototype,"dataSource",void 0),ue([m(null)],t.prototype,"query",void 0),ue([m("StartsWith")],t.prototype,"filterType",void 0),ue([m(1e3)],t.prototype,"zIndex",void 0),ue([m(!1)],t.prototype,"ignoreAccent",void 0),ue([m()],t.prototype,"locale",void 0),ue([m(!1)],t.prototype,"enableGroupCheckBox",void 0),ue([m(null)],t.prototype,"cssClass",void 0),ue([m("100%")],t.prototype,"width",void 0),ue([m("300px")],t.prototype,"popupHeight",void 0),ue([m("100%")],t.prototype,"popupWidth",void 0),ue([m(null)],t.prototype,"placeholder",void 0),ue([m(null)],t.prototype,"filterBarPlaceholder",void 0),ue([m({})],t.prototype,"htmlAttributes",void 0),ue([m(null)],t.prototype,"valueTemplate",void 0),ue([m(null)],t.prototype,"headerTemplate",void 0),ue([m(null)],t.prototype,"footerTemplate",void 0),ue([m(null)],t.prototype,"itemTemplate",void 0),ue([m(null)],t.prototype,"allowFiltering",void 0),ue([m(300)],t.prototype,"debounceDelay",void 0),ue([m(!0)],t.prototype,"isDeviceFullScreen",void 0),ue([m(!0)],t.prototype,"changeOnBlur",void 0),ue([m(!1)],t.prototype,"allowCustomValue",void 0),ue([m(!0)],t.prototype,"showClearButton",void 0),ue([m(1e3)],t.prototype,"maximumSelectionLength",void 0),ue([m(!1)],t.prototype,"readonly",void 0),ue([m(!1)],t.prototype,"allowResize",void 0),ue([m(null)],t.prototype,"text",void 0),ue([m(null)],t.prototype,"value",void 0),ue([m(!1)],t.prototype,"allowObjectBinding",void 0),ue([m(!0)],t.prototype,"hideSelectedItem",void 0),ue([m(!0)],t.prototype,"closePopupOnSelect",void 0),ue([m("Default")],t.prototype,"mode",void 0),ue([m(",")],t.prototype,"delimiterChar",void 0),ue([m(!0)],t.prototype,"ignoreCase",void 0),ue([m(!1)],t.prototype,"showDropDownIcon",void 0),ue([m("Never")],t.prototype,"floatLabelType",void 0),ue([m(!1)],t.prototype,"showSelectAll",void 0),ue([m("Select All")],t.prototype,"selectAllText",void 0),ue([m("Unselect All")],t.prototype,"unSelectAllText",void 0),ue([m(!0)],t.prototype,"enableSelectionOrder",void 0),ue([m(!0)],t.prototype,"openOnClick",void 0),ue([m(!1)],t.prototype,"addTagOnBlur",void 0),ue([O()],t.prototype,"change",void 0),ue([O()],t.prototype,"removing",void 0),ue([O()],t.prototype,"removed",void 0),ue([O()],t.prototype,"beforeSelectAll",void 0),ue([O()],t.prototype,"selectedAll",void 0),ue([O()],t.prototype,"beforeOpen",void 0),ue([O()],t.prototype,"open",void 0),ue([O()],t.prototype,"close",void 0),ue([O()],t.prototype,"blur",void 0),ue([O()],t.prototype,"focus",void 0),ue([O()],t.prototype,"chipSelection",void 0),ue([O()],t.prototype,"resizeStop",void 0),ue([O()],t.prototype,"resizing",void 0),ue([O()],t.prototype,"resizeStart",void 0),ue([O()],t.prototype,"filtering",void 0),ue([O()],t.prototype,"tagging",void 0),ue([O()],t.prototype,"customValueSelection",void 0),t=ue([pt],t),t})(Ld),Ob="e-icons",aa="e-frame",Us="e-check",Rp="e-checkbox-wrapper",Zr="e-stop",Bb="e-selectall-parent",Pb="e-input-group-icon e-back-icon e-icons",Mp="e-input-group-icon e-clear-icon e-icons",Nb="e-input-filter",Hb="e-filter-parent",Vb="e-ddl-device-filter",rl="e-clear-icon",Fp="e-popup-full-page",zb="e-ddl-device",Op="e-input-focus",Lh=(function(){function a(t){this.activeLi=[],this.activeEle=[],this.parent=t,this.removeEventListener(),this.addEventListener()}return a.prototype.getModuleName=function(){return"CheckBoxSelection"},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlurHandler,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),v.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlurHandler),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),this.parent.off("popupFullScreen",this.setPopupFullScreen))},a.prototype.listOption=function(t){var e=this;if(u(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(s){e.checboxCreate(s)};else{var i=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(s){e.checboxCreate(s),i.apply(e,[s])}}},a.prototype.setPlaceholder=function(t){W.setPlaceholder(t.filterBarPlaceholder,this.filterInput)},a.prototype.checboxCreate=function(t){var e;if(u(t.item)?e=t:e=t.item,this.parent.enableGroupCheckBox||e.className!=="e-list-group-item "&&e.className!=="e-list-group-item"){var i=wr(this.parent.createElement,!0),s=Me("div."+Ob,e);return e.insertBefore(i,e.childNodes[u(s)?0:1]),Me("."+aa,i),this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),e}else return e},a.prototype.setSelectAll=function(){this.parent.showSelectAll?(u(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:Bb}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(u(this.parent.filterParent)?Ie([this.checkAllParent],this.parent.popupWrapper):Ie([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(u(this.parent.filterParent)?Ot([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),v.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&!this.parent.enableVirtualization&&!this.parent.isDynamicDataChange||this.parent.isDynamicDataChange&&this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):u(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},a.prototype.destroy=function(){this.removeEventListener(),v.remove(document,"mousedown",this.onDocumentClick),this.checkAllParent=null,this.clearIconElement=null,this.filterInput=null,this.filterInputObj=null,this.checkWrapper=null,this.selectAllSpan=null},a.prototype.listSelection=function(t){var e;if(!u(t.e))t.li.querySelector(".e-checkbox-wrapper .e-frame"),e=u(t.e.target)?t.li.querySelector(".e-checkbox-wrapper").childNodes[1]:t.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(t.e.target))?t.e.target:t.li.querySelector(".e-checkbox-wrapper").childNodes[1];else{var i=t.li.querySelector(".e-checkbox-wrapper");e=i?i.childNodes[1]:t.li.lastElementChild.childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(e=t.li.firstElementChild.childNodes[1]),u(e)||(this.checkWrapper=M(e,"."+Rp)),!u(this.checkWrapper)){var s=Me("."+aa,this.checkWrapper),r=!1;this.validateCheckNode(this.checkWrapper,s.classList.contains(Us),t.li,t.e,r)}},a.prototype.validateCheckNode=function(t,e,i,s,r){this.changeState(t,e?"uncheck":"check",s,!0,r)},a.prototype.clickHandler=function(t){var e;t.currentTarget.classList.contains(this.checkAllParent.className)||t.currentTarget.classList.value===this.checkAllParent.className?e=t.currentTarget.firstElementChild.lastElementChild:e=t.currentTarget,this.checkWrapper=M(e,"."+Rp);var i=!0;if(!u(this.checkWrapper)){var s=Me("."+aa,this.checkWrapper);this.validateCheckNode(this.checkWrapper,s.classList.contains(Us),null,t,i)}t.preventDefault()},a.prototype.changeState=function(t,e,i,s,r){var n=t.getElementsByClassName(aa)[0];e==="check"&&!n.classList.contains(Us)?(n.classList.remove(Zr),n.classList.add(Us),r&&(this.parent.selectAllItems(!0,i),this.setLocale(!0))):e==="uncheck"&&(n.classList.contains(Us)||n.classList.contains(Zr))?(R([n],[Us,Zr]),r&&(this.parent.selectAllItems(!1,i),this.setLocale())):e==="indeterminate"&&!n.classList.contains(Zr)&&(R([n],[Us]),n.classList.add(Zr),r&&(this.parent.selectAllItems(!1,i),this.setLocale()))},a.prototype.setSearchBox=function(t){if(u(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:Hb}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:Nb}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var e=!1;return E.isDevice&&this.parent.isDeviceFullScreen&&(e=!0,this.parent.mobFilter=!1),this.filterInputObj=W.createInput({element:this.filterInput,buttons:e?[Pb,Mp]:[Mp],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),u(this.parent.cssClass)||(this.parent.cssClass.split(" ").indexOf("e-outline")!==-1?x([this.filterInputObj.container],"e-outline"):this.parent.cssClass.split(" ").indexOf("e-filled")!==-1&&x([this.filterInputObj.container],"e-filled")),Ie([this.filterInputObj.container],this.parent.filterParent),Ot([this.parent.filterParent],t.popupElement),G(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-label":"multiselect","aria-expanded":"true","aria-controls":t.popupElement.id}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+rl),!E.isDevice&&this.clearIconElement&&(v.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),v.add(this.filterInput,"input",this.parent.onInput,this.parent),v.add(this.filterInput,"keyup",this.parent.keyUp,this.parent),v.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),v.add(this.filterInput,"blur",this.onBlurHandler,this),v.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},a.prototype.clickOnBackIcon=function(t){this.parent.hidePopup(),R([document.body,this.parent.popupObj.element],Fp),this.parent.inputElement.focus()},a.prototype.clearText=function(t){this.parent.targetInputElement.value="",this.parent.allowFiltering&&this.parent.targetInputElement.value===""&&this.parent.search(null),this.parent.refreshListItems(null),this.parent.refreshPopup(),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),(!this.parent.enableVirtualization||this.parent.enableVirtualization&&(u(this.parent.value)||this.parent.value&&this.parent.value.length===0))&&this.setReorder(t),this.boundPreventListSelection=this.preventListSelection.bind(this),this.parent.popupWrapper.addEventListener("mouseup",this.boundPreventListSelection,!0),t.preventDefault()},a.prototype.preventListSelection=function(t){t.stopPropagation(),this.parent.popupWrapper.removeEventListener("mouseup",this.boundPreventListSelection,!0),this.boundPreventListSelection=null},a.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add(zb),this.parent.popupObj.element.classList.add(Vb),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector("."+rl),this.clearIconElement.style.visibility="hidden",v.add(this.backIconElement,"click",this.clickOnBackIcon,this),v.add(this.clearIconElement,"click",this.clearText,this)},a.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height,e=0,i=0,s=0;this.checkAllParent&&(e=this.checkAllParent.getBoundingClientRect().height),this.parent.header&&(s=this.parent.header.getBoundingClientRect().height),this.parent.footer&&(i=this.parent.footer.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-t-e-s-i+"px",this.parent.list.style.height=window.innerHeight-t-e-s-i+"px";var r=this.filterInput.parentElement.querySelector("."+rl);Z(this.filterInput),r.parentElement.insertBefore(this.filterInput,r)},a.prototype.setPopupFullScreen=function(){this.parent&&this.parent.popupObj&&(G(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),x([document.body,this.parent.popupObj.element],Fp),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%")},a.prototype.targetElement=function(){return u(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=this.parent.targetInputElement.value===""?"hidden":"visible"),this.parent.targetInputElement.value},a.prototype.onBlurHandler=function(t){if(!this.parent.element.classList.contains("e-listbox")){var e=void 0;if(this.parent.keyAction)return;if(E.isIE&&(e=!u(t)&&t.target),E.isIE||(e=!u(t)&&t.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(e)&&!E.isIE&&this.filterInput){this.filterInput.focus();return}if(this.parent.scrollFocusStatus&&this.filterInput){t.preventDefault(),this.filterInput.focus(),this.parent.scrollFocusStatus=!1;return}this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(t,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove(Op),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!E.isDevice&&this.parent.hidePopup()}},a.prototype.onDocumentClick=function(t){if(this.parent.getLocaleName()!=="listbox"){var e=t.target;!u(this.parent.popupObj)&&M(e,'[id="'+this.parent.popupObj.element.id+'"]')&&(this.filterInput&&this.filterInput.value!==""||t.preventDefault()),!(!u(this.parent.popupObj)&&M(e,'[id="'+this.parent.popupObj.element.id+'"]'))&&!u(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(t.target)?(this.parent.overAllWrapper.classList.contains(B.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlurHandler(t,!0),this.parent.focused=!0):this.parent.scrollFocusStatus=(E.isIE||E.info.name==="edge")&&document.activeElement===this.filterInput,!u(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(t.target)&&this.parent.overAllWrapper.classList.contains("e-input-focus")&&!this.parent.isPopupOpen()&&(E.isIE?this.parent.onBlurHandler():this.parent.onBlurHandler(t)),this.filterInput===e&&this.filterInput.focus()}},a.prototype.getFocus=function(t){if(this.parent.overAllWrapper.classList.remove(Op),this.parent.keyAction&&t.value!=="clear"&&t.value!=="focus"){this.parent.keyAction=!1;return}t.value==="focus"&&(this.filterInput.focus(),this.parent.removeFocus(),v.remove(this.parent.list,"keydown",this.parent.onKeyDown)),t.value==="clear"&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden")},a.prototype.checkSelectAll=function(t){t.value==="check"&&(this.changeState(this.checkAllParent,t.value,null,null,!1),this.setLocale(!0)),t.value==="uncheck"&&(this.changeState(this.checkAllParent,t.value,null,null,!1),this.setLocale()),t.value==="indeterminate"&&(this.changeState(this.checkAllParent,t.value,null,null,!1),this.setLocale())},a.prototype.setLocale=function(t){if(this.parent.selectAllText!=="Select All"||this.parent.unSelectAllText!=="Unselect All"){var e=t?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var i=qe(e),s=t?"unSelectAllText":"selectAllText",r=0,n=i({},this.parent,s,null,!this.parent.isStringTemplate);r<n.length;r++){var o=n[r];this.selectAllSpan.textContent=o.textContent}}else{var l={selectAllText:"Select All",unSelectAllText:"Unselect All"},h=new zt(this.parent.getLocaleName(),{},this.parent.locale);h.getConstant("selectAllText")===""&&(h=new zt("dropdowns",l,this.parent.locale)),u(this.selectAllSpan)||(this.selectAllSpan.textContent=t?h.getConstant("unSelectAllText"):h.getConstant("selectAllText"))}},a.prototype.getActiveList=function(t){t.li.classList.contains("e-active")?this.activeLi.push(t.li.cloneNode(!0)):this.activeLi.splice(t.index,1)},a.prototype.setReorder=function(t){if(this.parent.enableSelectionOrder&&!u(this.parent.value)){var e=this.parent.ulElement.querySelectorAll("li.e-active").length,i=void 0,s=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});if(e>0){var r=this.parent.ulElement.querySelectorAll("li.e-active");if(r.forEach(function(o){s.appendChild(o)}),i=this.parent.ulElement.querySelectorAll("li.e-active"),x(i,"e-reorder-hide"),this.parent.enableVirtualization){var n=this.parent.list.querySelector(".e-virtual-ddl-content");Ot([s],n)}else Ot([s],this.parent.list)}this.parent.focusAtFirstListItem()}},a})(),Md=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),tt=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},fi="e-other-month",nl="e-other-year",en="e-calendar",Bp="e-device",qb="e-header",Pp="e-rtl",Wb="e-content",jb="e-calendar-content-table",al="e-year",ol="e-month",Np="e-decade",Hp="e-icons",Ub="e-prev",Gb="e-next",_b="e-date-icon-prev",Kb="e-date-icon-next ",Yb="e-icon-container",Qe="e-disabled",gs="e-overlay",Xb="e-weekend",tn="e-week-number",kt="e-selected",_t="e-focused-date",Gs="e-focused-cell",oa="e-month-hide",Vp="e-today",Qb="e-title",zp="e-day",qp="e-cell",$b="e-week-header",la="e-zoomin",Jb="e-footer-container",Zb="e-btn",eC="e-flat",tC="e-css",iC="e-primary",Wp="e-calendar-day-header-lg",ll=864e5,sC=6e4,rC=(function(a){Md(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.effect="",s.isPopupClicked=!1,s.isDateSelected=!0,s.isTodayClicked=!1,s.preventChange=!1,s.previousDates=!1,s}return t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),this.calendarMode==="Islamic"&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1941,12,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2068,2,4))),this.globalize=new ft(this.locale),(u(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date(new Date().setHours(0,0,0,0)),this.getModuleName()==="calendar"?(this.element.classList.add(en),this.enableRtl&&this.element.classList.add(Pp),E.isDevice&&this.element.classList.add(Bp),G(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(en),this.enableRtl&&this.calendarElement.classList.add(Pp),E.isDevice&&this.calendarElement.classList.add(Bp),G(this.calendarElement,{"data-role":"calendar"})),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,i){u(e)&&this.setProperties({min:new Date(1900,0,1)},!0),u(i)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date(new Date().setHours(0,0,0,0)),!u(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,i,s,r){if(r&&!u(i)&&!u(s)&&!u(e)){var n=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;s.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}},t.prototype.minMaxUpdate=function(e){this.min=u(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=u(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max?R([this.element],gs):(this.setProperties({min:this.min},!0),x([this.element],gs)),+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){var e={"aria-disabled":"false","aria-label":"previous month"},i={"aria-disabled":"false","aria-label":"next month"},s={"aria-atomic":"true","aria-live":"assertive"},r={tabindex:"0"};this.headerElement=this.createElement("div",{className:qb});var n=this.createElement("div",{className:Yb});this.previousIcon=this.createElement("button",{className:""+Ub,attrs:{type:"button"}}),ts(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),G(this.previousIcon,e),G(this.previousIcon,r),this.nextIcon=this.createElement("button",{className:""+Gb,attrs:{type:"button"}}),ts(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.getModuleName()==="daterangepicker"&&(G(this.previousIcon,{tabIndex:"-1"}),G(this.nextIcon,{tabIndex:"-1"})),G(this.nextIcon,i),G(this.nextIcon,r),this.headerTitleElement=this.createElement("div",{className:""+zp+" "+Qb}),G(this.headerTitleElement,s),G(this.headerTitleElement,r),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:""+_b+" "+Hp})),this.nextIcon.appendChild(this.createElement("span",{className:""+Kb+" "+Hp})),n.appendChild(this.previousIcon),n.appendChild(this.nextIcon),this.headerElement.appendChild(n),this.getModuleName()==="calendar"?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:Wb}),this.table=this.createElement("table",{attrs:{class:jb,tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),this.getModuleName()==="calendar"?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter(),this.getModuleName()!=="daterangepicker"&&(v.add(this.table,"focus",this.addContentFocus,this),v.add(this.table,"blur",this.removeContentFocus,this))},t.prototype.addContentFocus=function(e){var i=this.tableBodyElement.querySelector("tr td.e-focused-date"),s=this.tableBodyElement.querySelector("tr td.e-selected");u(s)?u(i)||i.classList.add(Gs):s.classList.add(Gs)},t.prototype.removeContentFocus=function(e){var i=u(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-focused-date"),s=u(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-selected");u(s)?u(i)||i.classList.remove(Gs):s.classList.remove(Gs)},t.prototype.getCultureValues=function(){var e=[],i,s=u(this.dayHeaderFormat)?null:"days.stand-alone."+this.dayHeaderFormat.toLowerCase();if((this.locale==="en"||this.locale==="en-US")&&!u(s)?i=H(s,Cs()):i=this.getCultureObjects(Ss,""+this.locale),!u(i))for(var r=0,n=Object.keys(i);r<n.length;r++){var o=n[r];e.push(H(o,i))}return e},t.prototype.toCapitalize=function(e){return!u(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content .e-week-header")[0])||Z(this.element.querySelectorAll(".e-content .e-week-header")[0]):u(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||Z(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e=6,i="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:$b}),this.weekNumber&&(i+='<th class="e-week-number" aria-hidden="true"></th>',this.getModuleName()==="calendar"?x([this.element],""+tn):x([this.calendarElement],""+tn));var s=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!u(s))for(var r=0;r<=e;r++)i+='<th  class="">'+this.toCapitalize(s[r])+"</th>";i="<tr>"+i+"</tr>",this.tableHeadElement.innerHTML=i,this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch(this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content tbody")[0])||Z(this.element.querySelectorAll(".e-content tbody")[0]):u(this.calendarElement.querySelectorAll(".e-content tbody")[0])||Z(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today")),this.todayElement.setAttribute("tabindex","0")},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),i=new Date(+this.max),s={today:"Today"};this.globalize=new ft(this.locale),this.l10=new zt(this.getModuleName(),s,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),ts(this.todayElement),this.updateFooter(),x([this.todayElement],[Zb,Vp,eC,iC,tC]),(!(+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(i.setHours(0,0,0,0)))||this.todayDisabled)&&x([this.todayElement],Qe),this.footer=this.createElement("div",{className:Jb}),this.footer.appendChild(this.todayElement),this.getModuleName()==="calendar"&&this.element.appendChild(this.footer),this.getModuleName()==="datepicker"&&this.calendarElement.appendChild(this.footer),this.getModuleName()==="datetimepicker"&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(Qe)||v.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,i,s,r){v.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.getModuleName()==="calendar"?this.keyboardModule=new Gt(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new Gt(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,i,s,r){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=$(this.defaultKeyConfigs,s),this.serverModuleName=r},t.prototype.todayButtonClick=function(e,i,s){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(i)),s):this.navigateTo("Month",new Date(this.checkValue(i)),s))},t.prototype.resetCalendar=function(){this.calendarElement&&Z(this.calendarElement),this.tableBodyElement&&Z(this.tableBodyElement),this.table&&Z(this.table),this.tableHeadElement&&Z(this.tableHeadElement),this.nextIcon&&Z(this.nextIcon),this.previousIcon&&Z(this.previousIcon),this.footer&&Z(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},t.prototype.keyActionHandle=function(e,i,s){if(!(this.calendarElement===null&&e.action==="escape")){var r=this.tableBodyElement.querySelector("tr td.e-focused-date"),n;s?!u(r)&&+i===parseInt(r.getAttribute("id").split("_")[0],10)?n=r:n=this.tableBodyElement.querySelector("tr td.e-selected"):n=this.tableBodyElement.querySelector("tr td.e-selected");var o=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=o===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.getModuleName()!=="daterangepicker"&&!u(e.target)&&(this.keyboardNavigate(-1,o,e,this.max,this.min),e.preventDefault());break;case"moveRight":this.getModuleName()!=="daterangepicker"&&!u(e.target)&&(this.keyboardNavigate(1,o,e,this.max,this.min),e.preventDefault());break;case"moveUp":this.getModuleName()!=="daterangepicker"&&!u(e.target)&&(o===0?this.keyboardNavigate(-7,o,e,this.max,this.min):this.keyboardNavigate(-4,o,e,this.max,this.min),e.preventDefault());break;case"moveDown":this.getModuleName()!=="daterangepicker"&&!u(e.target)&&(o===0?this.keyboardNavigate(7,o,e,this.max,this.min):this.keyboardNavigate(4,o,e,this.max,this.min),e.preventDefault());break;case"select":if(e.target===this.headerTitleElement)this.navigateTitle(e);else if(e.target===this.previousIcon&&!e.target.className.includes(Qe))this.navigatePrevious(e);else if(e.target===this.nextIcon&&!e.target.className.includes(Qe))this.navigateNext(e);else if(e.target===this.todayElement&&!e.target.className.includes(Qe))this.todayButtonClick(e,i),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(this.isAngular?this.inputElement.focus():this.element.focus());else{var p=u(r)?n:r;if(!u(p)&&!p.classList.contains(Qe))if(h){var c=new Date(parseInt(""+p.id,0));this.selectDate(e,c,p),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(this.isAngular?this.inputElement.focus():this.element.focus())}else e.target.className.includes(Qe)||this.contentClick(null,--o,p,i)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(!u(r)&&!h||!u(n)&&!h)&&this.contentClick(null,--o,r||n,i),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),Z(this.tableBodyElement),o===0?this.renderMonths(e):o===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,o),Z(this.tableBodyElement),o===0?this.renderMonths(e):o===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault();break;case"tab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.todayElement&&(e.preventDefault(),this.isAngular?this.inputElement.focus():this.element.focus(),this.hide());break;case"shiftTab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.headerTitleElement&&(e.preventDefault(),this.isAngular?this.inputElement.focus():this.element.focus(),this.hide());break;case"escape":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(e.target===this.headerTitleElement||e.target===this.previousIcon||e.target===this.nextIcon||e.target===this.todayElement)&&this.hide();break}}},t.prototype.keyboardNavigate=function(e,i,s,r,n){var o=new Date(this.checkValue(this.currentDate));switch(i){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Z(this.tableBodyElement),this.renderDecades(s)):this.currentDate=o;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode==="Gregorian"?this.isMonthYearRange(this.currentDate)?(Z(this.tableBodyElement),this.renderYears(s)):this.currentDate=o:this.isMonthYearRange(this.currentDate)?(Z(this.tableBodyElement),this.renderYears(s)):this.currentDate=o;break;case 0:this.addDay(this.currentDate,e,s,r,n),this.isMinMaxRange(this.currentDate)?(Z(this.tableBodyElement),this.renderMonths(s)):this.currentDate=o;break}},t.prototype.preRender=function(e){var i=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(s){i.triggerNavigate(s)}},t.prototype.minMaxDate=function(e){var i=new Date(new Date(+e).setHours(0,0,0,0)),s=new Date(new Date(+this.min).setHours(0,0,0,0)),r=new Date(new Date(+this.max).setHours(0,0,0,0));return(+i==+s||+i==+r)&&(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,i,s){var r=this.weekNumber?8:7,n;this.calendarMode==="Gregorian"?n=this.renderDays(this.currentDate,i,null,null,s,e):n=u(this.islamicModule)?null:this.islamicModule.islamicRenderDays(this.currentDate,i),this.createContentHeader(),this.calendarMode==="Gregorian"?this.renderTemplate(n,r,ol,e,i):u(this.islamicModule)||this.islamicModule.islamicRenderTemplate(n,r,ol,e,i)},t.prototype.renderDays=function(e,i,s,r,n,o){var l=[],h=42,p=n?new Date(+e):this.getDate(new Date,this.timezone),c=new Date(this.checkValue(e)),d,f=c.getMonth();this.titleUpdate(e,"days");var g=c;for(c=new Date(g.getFullYear(),g.getMonth(),0,g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds());c.getDay()!==this.firstDayOfWeek;)this.setStartDate(c,-1*ll);for(var y=0;y<h;++y){var b=this.createElement("td",{className:qp}),C=this.createElement("span");if(y%7===0&&this.weekNumber){var S=this.weekRule==="FirstDay"?6:this.weekRule==="FirstFourDayWeek"?3:0,I=new Date(c.getFullYear(),c.getMonth(),c.getDate()+S);C.textContent=""+this.getWeek(I),b.appendChild(C),x([b],""+tn),l.push(b)}d=new Date(+c),c=this.minMaxDate(c);var A={type:"dateTime",skeleton:"full"},T=this.globalize.parseDate(this.globalize.formatDate(c,A),A),L=this.dayCell(c),_=this.globalize.formatDate(c,{type:"date",skeleton:"full"}),X=this.createElement("span");X.textContent=this.globalize.formatDate(c,{format:"d",type:"date",skeleton:"yMd"});var re=this.min>c||this.max<c;re?(x([L],Qe),x([L],gs)):X.setAttribute("title",""+_),f!==c.getMonth()&&(x([L],fi),X.setAttribute("aria-disabled","true")),(c.getDay()===0||c.getDay()===6)&&x([L],Xb),L.appendChild(X),this.renderDayCellArgs={date:c,isDisabled:!1,element:L,isOutOfRange:re};var ye=this.renderDayCellArgs;if(this.renderDayCellEvent(ye),ye.isDisabled){var V=new Date(this.checkValue(i)),q=new Date(this.checkValue(ye.date));if(s){if(!u(r)&&r.length>0)for(var z=0;z<r.length;z++){var U=+new Date(this.globalize.formatDate(ye.date,{type:"date",skeleton:"yMd"})),ie=+new Date(this.globalize.formatDate(r[z],{type:"date",skeleton:"yMd"}));U===ie&&(r.splice(z,1),z=-1)}}else V&&+V==+q&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!L.classList.contains(kt)&&(x([L],Qe),x([L],gs),X.setAttribute("aria-disabled","true"),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var J=L.classList.contains(fi),K=L.classList.contains(Qe);K||v.add(L,"click",this.clickHandler,this);var Y=void 0;if(!u(o)&&o.type==="click"&&(Y=o.currentTarget),s&&!u(r)&&!K){for(var ne=0;ne<r.length;ne++){var de=this.calendarMode==="Gregorian"?"gregorian":"islamic",Ae={format:null,type:"date",skeleton:"short",calendar:de},U=this.globalize.formatDate(c,Ae),ie=this.globalize.formatDate(r[ne],Ae);if((U===ie&&this.getDateVal(c,r[ne])||this.getDateVal(c,i))&&x([L],kt),!u(Y)&&Y.innerText===L.innerText&&this.previousDates&&L.classList.contains(kt)&&Y.classList.contains(kt)){R([L],kt),this.previousDates=!1;for(var xe=this.copyValues(r),ge=0;ge<xe.length;ge++){var Ee=this.calendarMode==="Gregorian"?"gregorian":"islamic",De={format:null,type:"date",skeleton:"short",calendar:Ee},ee=this.globalize.formatDate(T,De),be=this.globalize.formatDate(xe[ge],De);if(ee===be){var z=xe.indexOf(xe[ge]);xe.splice(z,1),r.splice(z,1)}}this.setProperties({values:xe},!0)}else this.updateFocus(J,K,c,L,e)}r.length<=0&&this.updateFocus(J,K,c,L,e)}else!K&&this.getDateVal(c,i)&&x([L],kt);this.updateFocus(J,K,c,L,e),!u(T)&&T.getFullYear()===p.getFullYear()&&T.getMonth()===p.getMonth()&&T.getDate()===p.getDate()&&x([L],Vp),l.push(this.renderDayCellArgs.element),c=new Date(+d),this.addDay(c,1,null,this.max,this.min)}return l},t.prototype.updateFocus=function(e,i,s,r,n){n.getDate()===s.getDate()&&!e&&!i?x([r],_t):(n>=this.max&&parseInt(r.id,0)===+this.max&&!e&&!i&&x([r],_t),n<=this.min&&parseInt(r.id,0)===+this.min&&!e&&!i&&x([r],_t))},t.prototype.renderYears=function(e,i){this.removeTableHeadElement();var s=4,r=[],n=u(i),o=new Date(this.checkValue(this.currentDate)),l=o.getMonth(),h=o.getFullYear(),p=o,c=p.getFullYear(),d=new Date(this.checkValue(this.min)).getFullYear(),f=new Date(this.checkValue(this.min)).getMonth(),g=new Date(this.checkValue(this.max)).getFullYear(),y=new Date(this.checkValue(this.max)).getMonth();p.setMonth(0),this.titleUpdate(this.currentDate,"months"),p.setDate(1);for(var b=0;b<12;++b){var C=this.dayCell(p),S=this.createElement("span"),I=i&&i.getMonth()===p.getMonth(),A=i&&i.getFullYear()===h&&I,T=this.globalize.formatDate(p,{type:"date",format:"MMM y"});S.textContent=this.toCapitalize(this.globalize.formatDate(p,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(c<d||b<f&&c===d)||this.max&&(c>g||b>y&&c>=g)?x([C],Qe):!n&&A?x([C],kt):p.getMonth()===l&&this.currentDate.getMonth()===l&&x([C],_t),p.setDate(1),p.setMonth(p.getMonth()+1),C.classList.contains(Qe)||(v.add(C,"click",this.clickHandler,this),S.setAttribute("title",""+T)),C.appendChild(S),r.push(C)}this.renderTemplate(r,s,al,e,i)},t.prototype.renderDecades=function(e,i){this.removeTableHeadElement();var s=4,r=12,n=[],o=new Date(this.checkValue(this.currentDate));o.setMonth(0),o.setDate(1);var l=o.getFullYear(),h=new Date(o.setFullYear(l-l%10)),p=new Date(o.setFullYear(l-l%10+9)),c=h.getFullYear(),d=p.getFullYear(),f=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),g=this.globalize.formatDate(p,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=f+" - "+g;for(var y=new Date(l-l%10-1,0,1),b=y.getFullYear(),C=0;C<r;++C){var S=b+C;o.setFullYear(S);var I=this.dayCell(o),A=this.createElement("span");A.textContent=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"}),S<c||S>d?(x([I],nl),A.setAttribute("aria-disabled","true"),!u(i)&&o.getFullYear()===i.getFullYear()&&x([I],kt),(S<new Date(this.checkValue(this.min)).getFullYear()||S>new Date(this.checkValue(this.max)).getFullYear())&&x([I],Qe)):S<new Date(this.checkValue(this.min)).getFullYear()||S>new Date(this.checkValue(this.max)).getFullYear()?x([I],Qe):!u(i)&&o.getFullYear()===i.getFullYear()?x([I],kt):o.getFullYear()===this.currentDate.getFullYear()&&!I.classList.contains(Qe)&&x([I],_t),I.classList.contains(Qe)||(v.add(I,"click",this.clickHandler,this),A.setAttribute("title",""+A.textContent)),I.appendChild(A),n.push(I)}this.renderTemplate(n,s,"e-decade",e,i)},t.prototype.dayCell=function(e){var i=this.calendarMode==="Gregorian"?"gregorian":"islamic",s={skeleton:"full",type:"dateTime",calendar:i},r=this.globalize.parseDate(this.globalize.formatDate(e,s),s),n;u(r)||(n=r.valueOf());var o={className:qp,attrs:{id:""+at(""+n)}};return this.createElement("td",o)},t.prototype.firstDay=function(e){var i=this.currentView()!=="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+fi+"):not(."+tn+")"):this.tableBodyElement.querySelectorAll("td:not(."+nl);if(i.length){for(var s=0;s<i.length;s++)if(!i[s].classList.contains(Qe)){e=new Date(parseInt(i[s].id,0));break}}return e},t.prototype.lastDay=function(e,i){var s=new Date(e.getFullYear(),e.getMonth()+1,0);if(i!==2){var r=Math.abs(s.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return r&&s.setHours(this.firstDay(e).getHours()+r/60),this.findLastDay(s)}else return this.findLastDay(this.firstDay(s))},t.prototype.checkDateValue=function(e){return!u(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var i=this.currentView()==="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+nl):this.tableBodyElement.querySelectorAll("td:not(."+fi+"):not(."+tn+")");if(i.length){for(var s=i.length-1;s>=0;s--)if(!i[s].classList.contains(Qe)){e=new Date(parseInt(i[s].id,0));break}}return e},t.prototype.removeTableHeadElement=function(){this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content table thead")[0])||Z(this.tableHeadElement):u(this.calendarElement.querySelectorAll(".e-content table thead")[0])||Z(this.tableHeadElement)},t.prototype.renderTemplate=function(e,i,s,r,n){var o=this.getViewNumber(this.currentView()),l;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),R([this.contentElement,this.headerElement],[ol,Np,al]),x([this.contentElement,this.headerElement],[s]);for(var h=41,p=35,c=6,d=i,f=0,g=0;g<e.length/i;++g){for(l=this.createElement("tr"),f=0+f;f<d;f++)!e[f].classList.contains("e-week-number")&&!u(e[f].children[0])&&(x([e[f].children[0]],[zp]),ts(e[f].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(e[f]),this.weekNumber&&f===c+1&&e[c+1].classList.contains(fi)&&x([l],oa),!this.weekNumber&&f===c&&e[c].classList.contains(fi)&&x([l],oa),this.weekNumber?f===h&&e[h].classList.contains(fi)&&x([l],oa):f===p&&e[p].classList.contains(fi)&&x([l],oa);d=d+i,f=f+0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,this.calendarMode==="Gregorian"?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||o===0&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(r),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,i){this.clickEventEmitter(e);var s=e.currentTarget,r=this.getViewNumber(this.currentView());s.classList.contains(fi)?this.contentClick(e,0,null,i):r===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.contentClick(e,1,null,i):r===2?this.contentClick(e,1,null,i):!s.classList.contains(fi)&&r===0?this.selectDate(e,this.getIdValue(e,null),null):this.contentClick(e,0,s,i),this.getModuleName()==="calendar"&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,i,s,r){var n=this.getViewNumber(this.currentView()),o=this.getIdValue(e,s);switch(i){case 0:n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(Z(this.tableBodyElement),this.currentDate=o,this.effect=la,this.renderMonths(e)):(this.calendarMode==="Gregorian"?(this.currentDate.setMonth(o.getMonth()),o.getMonth()>0&&this.currentDate.getMonth()!==o.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(o.getFullYear())):this.currentDate=o,this.effect=la,Z(this.tableBodyElement),this.renderMonths(e));break;case 1:if(n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,o,null);else{if(this.calendarMode==="Gregorian")this.currentDate.setFullYear(o.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(o);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=la,Z(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,i,s,r){switch(e){case 0:Z(this.tableBodyElement),this.renderMonths(i,null,r);break;case 1:Z(this.tableBodyElement),this.renderYears(i);break;case 2:Z(this.tableBodyElement),this.renderDecades(i)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),e},t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.onPropertyChanged=function(e,i,s,r){this.effect="";for(var n=0,o=Object.keys(e);n<o.length;n++){var l=o[n];switch(l){case"enableRtl":e.enableRtl?this.getModuleName()==="calendar"?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):this.getModuleName()==="calendar"?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.getModuleName()!=="datepicker"?this.createContentHeader():this.calendarElement&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),l==="min"?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&Z(this.tableBodyElement),this.minMaxUpdate(),s&&this.validateValues(s,r),this.getModuleName()!=="datepicker"?this.createContentBody():this.calendarElement&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(Z(this.todayElement),Z(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(R([this.todayElement],Qe),Z(this.todayElement),Z(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody());break;case"locale":if(this.globalize=new ft(this.locale),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody()),this.getModuleName()==="calendar"){var h={today:"Today"};this.l10=new zt(this.getModuleName(),h,this.locale)}this.l10.setLocale(this.locale),this.showTodayButton&&this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():!u(this.todayElement)&&!u(this.footer)&&(Z(this.todayElement),Z(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0);break}}},t.prototype.validateValues=function(e,i){if(e&&!u(i)&&i.length>0){for(var s=this.copyValues(i),r=0;r<s.length;r++){var n=s[r],o=this.calendarMode==="Gregorian"?"gregorian":"islamic",l=void 0,h=void 0,p=void 0;this.calendarMode==="Gregorian"?(l={type:"date",skeleton:"yMd"},h=this.globalize.formatDate(n,l),p=this.globalize.parseDate(h,l)):(l={type:"date",skeleton:"yMd",calendar:"islamic"},h=this.globalize.formatDate(n,l),p=this.globalize.parseDate(h,l));var c={type:"date",skeleton:"yMd",calendar:o},d=this.globalize.formatDate(this.min,c),f=d,g={type:"date",skeleton:"yMd",calendar:o},y=this.globalize.formatDate(this.max,g),b=y,C=this.globalize.parseDate(f,c),S=this.globalize.parseDate(b,g);(+p<+C||+p>+S)&&(s.splice(r,1),r=-1)}this.setProperties({values:s},!0)}},t.prototype.setValueUpdate=function(){u(this.tableBodyElement)||(Z(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var i=[];if(!u(e)&&e.length>0)for(var s=0;s<e.length;s++)i.push(new Date(+e[s]));return i},t.prototype.titleUpdate=function(e,i){var s=new ft(this.locale),r,n,o=this.calendarMode==="Gregorian"?"gregorian":"islamic";switch(this.calendarMode==="Gregorian"?(r=s.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:o}),n=s.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:o})):(r=s.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:o}),n=s.formatDate(e,{type:"dateTime",format:"y",calendar:o})),i){case"days":this.headerTitleElement.textContent=this.toCapitalize(r);break;case"months":this.headerTitleElement.textContent=n}},t.prototype.setActiveDescendant=function(){var e,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),s=this.tableBodyElement.querySelector("tr td.e-selected"),r=this.calendarMode==="Gregorian"?"gregorian":"islamic",n,o=this.currentView();return o==="Month"?n=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"full",calendar:r}):o==="Year"?r!=="islamic"?n=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"yMMMM",calendar:r}):n=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:r}):n=this.globalize.formatDate(this.currentDate,{format:null,type:"date",skeleton:"y",calendar:r}),(s||i)&&(u(s)||s.setAttribute("aria-selected","true"),(i||s).setAttribute("aria-label",n),e=(i||s).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){this.getModuleName()==="calendar"&&this.element?R([this.element],[en]):this.calendarElement&&this.element&&R([this.element],[en]),this.getModuleName()==="calendar"&&this.element&&(u(this.headerTitleElement)||v.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&v.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),u(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.todayButtonEvent=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,a.prototype.destroy.call(this)},t.prototype.title=function(e){var i=this.getViewNumber(this.currentView());this.effect=la,this.switchView(++i,e)},t.prototype.getViewNumber=function(e){return e==="Month"?0:e==="Year"?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e)},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e);break}},t.prototype.navigatePrevious=function(e){!E.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e)},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e);break}},t.prototype.navigateNext=function(e){!E.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e)},t.prototype.navigateTo=function(e,i,s){+i>=+this.min&&+i<=+this.max&&(this.currentDate=i),+i<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+i>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,s)},t.prototype.currentView=function(){return!u(this.contentElement)&&this.contentElement.classList.contains(al)?"Year":!u(this.contentElement)&&this.contentElement.classList.contains(Np)?"Decade":"Month"},t.prototype.getDateVal=function(e,i){return!u(i)&&e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()},t.prototype.getCultureObjects=function(e,i){var s=u(this.dayHeaderFormat)?null:".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),r=u(this.dayHeaderFormat)?null:".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase(),n="main.";return this.calendarMode==="Gregorian"?H(n+""+this.locale+s,e):H("main."+this.locale+r,e)},t.prototype.getWeek=function(e){var i=new Date(this.checkValue(e)).valueOf(),s=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((i-s+ll)/ll/7)},t.prototype.setStartDate=function(e,i){var s=e.getTimezoneOffset(),r=new Date(e.getTime()+i),n=r.getTimezoneOffset()-s;e.setTime(r.getTime()+n*sC)},t.prototype.addMonths=function(e,i){if(this.calendarMode==="Gregorian"){var s=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(s,this.getMaxDays(e)))}else{var r=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(r.year,r.month+i,1)}},t.prototype.addYears=function(e,i){if(this.calendarMode==="Gregorian"){var s=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+i),e.setDate(Math.min(s,this.getMaxDays(e)))}else{var r=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(r.year+i,r.month,1)}},t.prototype.getIdValue=function(e,i){var s;e?s=e.currentTarget:s=i;var r=this.calendarMode==="Gregorian"?"gregorian":"islamic",n={type:"dateTime",skeleton:"full",calendar:r},o=this.globalize.formatDate(new Date(parseInt(""+s.getAttribute("id"),0)),n),l=this.globalize.parseDate(o,n),h=l.valueOf()-l.valueOf()%1e3;return new Date(h)},t.prototype.adjustLongHeaderSize=function(){R([this.element],Wp),this.dayHeaderFormat==="Wide"&&x([this.getModuleName()==="calendar"?this.element:this.calendarElement],Wp)},t.prototype.selectDate=function(e,i,s,r,n){var o=s||e.currentTarget;if(this.isDateSelected=!1,this.currentView()==="Decade")this.setDateDecade(this.currentDate,i.getFullYear());else if(this.currentView()==="Year")this.setDateYear(this.currentDate,i);else{if(r&&!this.checkPresentDate(i,n)){var l=this.copyValues(n);!u(n)&&l.length>0?(l.push(new Date(this.checkValue(i))),this.setProperties({values:l},!0),this.setProperties({value:n[n.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(i))]},!0)}else this.setProperties({value:new Date(this.checkValue(i))},!0);this.currentDate=new Date(this.checkValue(i))}var h=M(o,"."+en);if(u(h)&&(h=this.tableBodyElement),!r&&!u(h.querySelector("."+kt))&&R([h.querySelector("."+kt)],kt),!r&&!u(h.querySelector("."+_t))&&R([h.querySelector("."+_t)],_t),!r&&!u(h.querySelector("."+Gs))&&R([h.querySelector("."+Gs)],Gs),r){for(var l=this.copyValues(n),p=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),c=0;c<p.length;c++){var d=h.querySelectorAll("td."+_t)[0],f=h.querySelectorAll("td."+kt)[0];p[c]===d&&R([p[c]],_t),p[c]===f&&!this.checkPresentDate(new Date(parseInt(f.getAttribute("id").split("_")[0],10)),n)&&R([p[c]],kt)}if(o.classList.contains(kt)){R([o],kt);for(var g=0;g<l.length;g++){var y=this.calendarMode==="Gregorian"?"gregorian":"islamic",b={format:null,type:"date",skeleton:"short",calendar:y},C=this.globalize.formatDate(i,b),S=this.globalize.formatDate(l[g],b);if(C===S){var c=l.indexOf(l[g]);l.splice(c,1),x([o],_t)}}this.setProperties({values:l},!0)}else x([o],kt)}else x([o],kt);this.isDateSelected=!0},t.prototype.checkPresentDate=function(e,i){var s=!1;if(!u(i))for(var r=0;r<i.length;r++){var n=this.calendarMode==="Gregorian"?"gregorian":"islamic",o=this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:n}),l=this.globalize.formatDate(i[r],{format:null,type:"date",skeleton:"short",calendar:n});o===l&&(s=!0)}return s},t.prototype.setAriaActiveDescendant=function(){G(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?u(this.previousIcon)||(v.remove(this.previousIcon,"click",this.navigatePreviousHandler),x([this.previousIcon],""+Qe),x([this.previousIcon],""+gs),this.previousIcon.setAttribute("aria-disabled","true")):(v.add(this.previousIcon,"click",this.navigatePreviousHandler),R([this.previousIcon],""+Qe),R([this.previousIcon],""+gs),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){$(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){$(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?u(this.previousIcon)||(v.remove(this.nextIcon,"click",this.navigateNextHandler),x([this.nextIcon],Qe),x([this.nextIcon],gs),this.nextIcon.setAttribute("aria-disabled","true")):(v.add(this.nextIcon,"click",this.navigateNextHandler),R([this.nextIcon],Qe),R([this.nextIcon],gs),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,i,s){var r=i.getFullYear(),n,o;return n=r,o=0,s&&(r=r-r%s,n=r-r%s+s-1),e.getFullYear()>n?o=1:e.getFullYear()<r&&(o=-1),o},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if(this.calendarMode==="Gregorian")return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var i=this.islamicModule.getIslamicDate(e);return i.month>=this.islamicModule.getIslamicDate(new Date(1941,12,18)).month&&i.year>=this.islamicModule.getIslamicDate(new Date(1941,12,18)).year&&i.month<=this.islamicModule.getIslamicDate(new Date(2068,2,4)).month&&i.year<=this.islamicModule.getIslamicDate(new Date(2068,2,4)).year},t.prototype.compareYear=function(e,i){return this.compare(e,i,0)},t.prototype.compareDecade=function(e,i){return this.compare(e,i,10)},t.prototype.shiftArray=function(e,i){return e.slice(i).concat(e.slice(0,i))},t.prototype.addDay=function(e,i,s,r,n){var o=i,l=new Date(+e);if(!u(this.tableBodyElement)&&!u(s)){for(;this.findNextTD(new Date(+e),o,r,n);)o+=i;var h=new Date(l.setDate(l.getDate()+o));o=+h>+r||+h<+n?o===i?i-i:i:o}e.setDate(e.getDate()+o)},t.prototype.findNextTD=function(e,i,s,r){var n=new Date(e.setDate(e.getDate()+i)),o=[],l=!1;if((!u(n)&&n.getMonth())===(!u(this.currentDate)&&this.currentDate.getMonth())){var h=void 0;this.calendarMode==="Gregorian"?h=this.renderDays(n):h=this.islamicModule.islamicRenderDays(this.currentDate,n),o=h.filter(function(c){return c.classList.contains(Qe)})}else o=this.tableBodyElement.querySelectorAll("td."+Qe);if(+n<=+s&&+n>=+r&&o.length)for(var p=0;p<o.length&&(l=+n==+new Date(parseInt(o[p].id,0)),!l);p++);return l},t.prototype.getMaxDays=function(e){var i,s=new Date(this.checkValue(e));i=28;for(var r=s.getMonth();s.getMonth()===r;)++i,s.setDate(i);return i-1},t.prototype.setDateDecade=function(e,i){e.setFullYear(i),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,i){e.setFullYear(i.getFullYear(),i.getMonth(),e.getDate()),i.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(i))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,i){var s;return e.getFullYear()>i.getFullYear()?s=1:e.getFullYear()<i.getFullYear()?s=-1:s=e.getMonth()===i.getMonth()?0:e.getMonth()>i.getMonth()?1:-1,s},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){this.start!=="Decade"&&this.start!=="Year"&&this.setProperties({start:"Month"},!0),this.depth!=="Decade"&&this.depth!=="Year"&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},t.prototype.getDate=function(e,i){return i&&(e=new Date(e.toLocaleString("en-US",{timeZone:i}))),e},tt([m(new Date(1900,0,1))],t.prototype,"min",void 0),tt([m(!0)],t.prototype,"enabled",void 0),tt([m(null)],t.prototype,"cssClass",void 0),tt([m(new Date(2099,11,31))],t.prototype,"max",void 0),tt([m(null)],t.prototype,"firstDayOfWeek",void 0),tt([m("Gregorian")],t.prototype,"calendarMode",void 0),tt([m("Month")],t.prototype,"start",void 0),tt([m("Month")],t.prototype,"depth",void 0),tt([m(!1)],t.prototype,"weekNumber",void 0),tt([m("FirstDay")],t.prototype,"weekRule",void 0),tt([m(!0)],t.prototype,"showTodayButton",void 0),tt([m("Short")],t.prototype,"dayHeaderFormat",void 0),tt([m(!1)],t.prototype,"enablePersistence",void 0),tt([m(null)],t.prototype,"keyConfigs",void 0),tt([m(null)],t.prototype,"serverTimezoneOffset",void 0),tt([O()],t.prototype,"created",void 0),tt([O()],t.prototype,"destroyed",void 0),tt([O()],t.prototype,"navigated",void 0),tt([O()],t.prototype,"renderDayCell",void 0),t=tt([pt],t),t})(Vt),nC=(function(a){Md(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.render=function(){if(this.calendarMode==="Islamic"&&this.islamicModule===void 0&&Ud("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&typeof this.values=="object"&&!u(this.values)&&this.values.length>0){for(var e=[],i=[],s=0;s<this.values.length;s++)e.indexOf(+this.values[s])===-1&&(e.push(+this.values[s]),i.push(this.values[s]));this.setProperties({values:i},!0);for(var r=0;r<this.values.length;r++)if(!this.checkDateValue(this.values[r]))if(typeof this.values[r]=="string"&&this.checkDateValue(new Date(this.checkValue(this.values[r])))){var n=new Date(this.checkValue(this.values[r]));this.values.splice(r,1),this.values.splice(r,0,n)}else this.values.splice(r,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),this.getModuleName()==="calendar"&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),a.prototype.render.call(this),this.getModuleName()==="calendar"){var o=M(this.element,"form");o&&v.add(o,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.setEnable=function(e){e?R([this.element],Qe):x([this.element],Qe)},t.prototype.setClass=function(e,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(e)||(e=e.replace(/\s+/g," ").trim()),!u(i)&&i!==""&&R([this.element],i.split(" ")),u(e)||x([this.element],e.split(" "))},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(i,e)},t.prototype.setTimeZone=function(e){if(!u(this.serverTimezoneOffset)&&this.value){var i=e,s=new Date().getTimezoneOffset()/60,r=i+s;r=this.isDayLightSaving()?r--:r,this.value=new Date(this.value.getTime()+r*60*60*1e3)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){typeof this.value=="string"&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),a.prototype.validateDate.call(this,this.value),!u(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){this.getModuleName()==="calendar"&&(!u(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!u(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),this.getModuleName()!=="calendar"&&!u(this.value)?!u(this.value)&&this.value<this.min&&this.min<=this.max?a.prototype.minMaxUpdate.call(this,this.min):!u(this.value)&&this.value>this.max&&this.min<=this.max&&a.prototype.minMaxUpdate.call(this,this.max):a.prototype.minMaxUpdate.call(this,this.value)},t.prototype.generateTodayVal=function(e){var i=new Date;return u(this.timezone)||(i=a.prototype.getDate.call(this,i,this.timezone)),e&&u(this.timezone)?(i.setHours(e.getHours()),i.setMinutes(e.getMinutes()),i.setSeconds(e.getSeconds()),i.setMilliseconds(e.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},t.prototype.todayButtonClick=function(e){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){var s=this.copyValues(this.values);a.prototype.checkPresentDate.call(this,i,this.values)||(s.push(i),this.setProperties({values:s}))}a.prototype.todayButtonClick.call(this,e,new Date(+this.value))}},t.prototype.keyActionHandle=function(e){a.prototype.keyActionHandle.call(this,e,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var e=this;this.changeHandler=function(i){e.triggerChange(i)},this.checkView(),a.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,a.prototype.createContent.call(this)},t.prototype.minMaxDate=function(e){return a.prototype.minMaxDate.call(this,e)},t.prototype.renderMonths=function(e,i,s){a.prototype.renderMonths.call(this,e,this.value,s)},t.prototype.renderDays=function(e,i,s,r,n,o){var l=a.prototype.renderDays.call(this,e,this.value,this.isMultiSelection,this.values,n,o);return this.isMultiSelection&&a.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},t.prototype.renderYears=function(e){this.calendarMode==="Gregorian"?a.prototype.renderYears.call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)},t.prototype.renderDecades=function(e){this.calendarMode==="Gregorian"?a.prototype.renderDecades.call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)},t.prototype.renderTemplate=function(e,i,s,r){this.calendarMode==="Gregorian"?a.prototype.renderTemplate.call(this,e,i,s,r,this.value):this.islamicModule.islamicRenderTemplate(e,i,s,r,this.value),this.changedArgs={value:this.value,values:this.values},r&&r.type==="click"&&r.currentTarget.classList.contains(fi)?this.changeHandler(r):this.changeHandler()},t.prototype.clickHandler=function(e){var i=e.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(fi))if(this.isMultiSelection){var s=this.copyValues(this.values);s.toString().indexOf(this.getIdValue(e,null).toString())===-1?(s.push(this.getIdValue(e,null)),this.setProperties({values:s},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(e,null)},!0);var r=this.currentView();a.prototype.clickHandler.call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!u(this.tableBodyElement.querySelectorAll("."+_t)[0])&&r==="Year"&&this.tableBodyElement.querySelectorAll("."+_t)[0].classList.remove(_t)},t.prototype.switchView=function(e,i,s,r){a.prototype.switchView.call(this,e,i,this.isMultiSelection,r)},t.prototype.getModuleName=function(){return a.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){a.prototype.getPersistData.call(this);var e=["value","values"];return this.addOnPersist(e)},t.prototype.onPropertyChanged=function(e,i){this.effect="",this.rangeValidation(this.min,this.max);for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"value":this.isDateSelected&&(typeof e.value=="string"?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if(typeof e.values=="string"||typeof e.values=="number")this.setProperties({values:null},!0);else{for(var o=this.copyValues(this.values),l=0;l<o.length;l++){var h=o[l];this.checkDateValue(h)&&!a.prototype.checkPresentDate.call(this,h,o)&&o.push(h)}this.setProperties({values:o},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":this.getModuleName()==="calendar"&&this.setClass(e.cssClass,i.cssClass);break;default:a.prototype.onPropertyChanged.call(this,e,i,this.isMultiSelection,this.values)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.destroy=function(){if(a.prototype.destroy.call(this),this.getModuleName()==="calendar"){this.changedArgs=null;var e=M(this.element,"form");e&&v.remove(e,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(e,i,s){this.minMaxUpdate(),a.prototype.navigateTo.call(this,e,i,s)},t.prototype.currentView=function(){return a.prototype.currentView.call(this)},t.prototype.addDate=function(e){if(typeof e!="string"&&typeof e!="number"){var i=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var s=e,r=0;r<s.length;r++)this.checkDateValue(s[r])&&!a.prototype.checkPresentDate.call(this,s[r],i)&&(!u(i)&&i.length>0?i.push(s[r]):i=[new Date(+s[r])]);else this.checkDateValue(e)&&!a.prototype.checkPresentDate.call(this,e,i)&&(!u(i)&&i.length>0?i.push(e):i=[new Date(+e)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if(typeof e!="string"&&typeof e!="number"&&!u(this.values)&&this.values.length>0){var i=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var s=e,r=0;r<s.length;r++)for(var n=0;n<i.length;n++)+i[n]==+s[r]&&i.splice(n,1);else for(var n=0;n<i.length;n++)+i[n]==+e&&i.splice(n,1);this.setProperties({values:i},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.setTodayDate=function(e){var i=new Date(+e);this.setProperties({value:i},!0),a.prototype.todayButtonClick.call(this,null,i,!0)},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),a.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(e,i,s){a.prototype.selectDate.call(this,e,i,s,this.isMultiSelection,this.values),this.isMultiSelection&&!u(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!u(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!u(e),u(this.value)||this.setProperties({value:this.value},!0),!this.isMultiSelection&&+this.value!==Number.NaN&&(!u(this.value)&&!u(this.previousDate)||this.previousDate===null&&!isNaN(+this.value))?this.changeEvent(e):!u(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(e),this.previousValues=this.values.length)},tt([m(null)],t.prototype,"value",void 0),tt([m(null)],t.prototype,"values",void 0),tt([m(!1)],t.prototype,"isMultiSelection",void 0),tt([O()],t.prototype,"change",void 0),t=tt([pt],t),t})(rC),aC=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Ge=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},oC="e-date-wrapper",ha="e-datepicker",lC="e-lib",hC="e-control",jp="e-popup-wrapper",uC="e-input-group-icon",pC="e-popup",cC="e-input-group",hl="e-input-focus",dC="e-input",Up="e-error",ua="e-active",Gp="e-date-overflow",fC="e-date-icon",gC="e-icons",mC=300,vC=4,pa="e-selected",yC="e-focused-date",ul="e-non-edit",_p=["title","class","style"],Rh=(function(a){aC(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.isDateIconClicked=!1,s.isAltKeyPressed=!1,s.isInteracted=!0,s.invalidValueString=null,s.checkPreviousValue=null,s.maskedDateValue="",s.preventChange=!1,s.isIconClicked=!1,s.isDynamicValueChanged=!1,s.moduleName=s.getModuleName(),s.isFocused=!1,s.isBlur=!1,s.isKeyAction=!1,s.datepickerOptions=e,s}return t.prototype.render=function(){this.initialize(),this.bindEvents(),this.floatLabelType!=="Never"&&W.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!u(this.serverTimezoneOffset)&&this.value){var i=new Date().getTimezoneOffset()/60,s=e,r=s+i;r=this.isDayLightSaving()?r--:r,this.value=new Date(this.value.getTime()+r*60*60*1e3),this.updateInput(),this.changeTrigger(null)}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,i)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):G(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?R([this.inputWrapper.container],[ul]):x([this.inputWrapper.container],[ul]):this.inputWrapper&&R([this.inputWrapper.container],[ul])},t.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)?(this.updateInput(!0),this.updateInputValue(this.maskedDateValue)):this.enableMask||this.updateInput(!0),this.previousElementValue=this.inputElement.value,this.previousDate=u(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){var e={"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if(this.getModuleName()==="datepicker"){var i={placeholder:this.placeholder};this.globalize=new ft(this.locale),this.l10n=new zt("datepicker",i,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.fullScreenMode&&E.isDevice&&(this.cssClass+=" e-popup-expand");var s=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(s=this.cssClass.replace(/\s+/g," ").trim());var r=!this.enableMask;this.inputWrapper=W.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:r,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:s,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[uC+" "+fC+" "+gC]},this.createElement),this.setWidth(this.width),this.inputElement.name!==""?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),G(this.inputElement,e),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),W.addAttributes({"aria-label":"select",role:"button"},this.inputWrapper.buttons[0]),x([this.inputWrapper.container],oC)},t.prototype.updateInput=function(e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var s;if(this.value&&!this.isCalendar()&&this.disabledDates(e,i),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(a.prototype.validateDate.call(this),this.minMaxUpdates(),a.prototype.minMaxUpdate.call(this)),!u(this.value)){var r=this.value,n=void 0,o=u(this.formatString)?this.dateTimeFormat:this.formatString;if(this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?n=this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd"}):n=this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(this.calendarMode==="Gregorian"?s={format:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.formatDate(this.value,s)),+r<=+this.max&&+r>=+this.min)this.updateInputValue(n);else{var l=+r>=+this.max||!+this.value||!+this.value||+r<=+this.min;!this.strictMode&&l&&this.updateInputValue(n)}}u(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&u(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!u(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!u(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},t.prototype.checkStringValue=function(e){var i=null,s=null,r=null;if(this.getModuleName()==="datetimepicker"){var n=new ft(this.locale);this.calendarMode==="Gregorian"?(s={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},r={format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(s={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r={format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else this.calendarMode==="Gregorian"?s={format:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return i=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(e),s)),u(i)&&this.getModuleName()==="datetimepicker"&&(i=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(e),r))),i},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date)&&!u(e)){var i=null,s=e;if(typeof e=="number"&&(s=e.toString()),this.getModuleName()==="datetimepicker"){var r=new ft(this.locale);this.calendarMode==="Gregorian"?(this.dateTimeFormat,r.getDatePattern({skeleton:"yMd"})):(this.dateTimeFormat,r.getDatePattern({skeleton:"yMd"}))}else this.calendarMode==="Gregorian"?this.formatString:this.formatString;var n=!1;if(typeof s!="string")s=null,n=!0;else if(typeof s=="string"&&(s=s.trim()),i=this.checkStringValue(s),!i){var o=null,l=null;o=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,l=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!o.test(s)&&!l.test(s)||/^[a-zA-Z0-9- ]*$/.test(s)||isNaN(+new Date(this.checkValue(s)))?n=!0:i=new Date(s)}n?(this.strictMode||(this.invalidValueString=s),this.setProperties({value:null},!0)):this.setProperties({value:i},!0)}},t.prototype.bindInputEvent=function(){(!u(this.formatString)||this.enableMask)&&(this.enableMask||this.formatString.indexOf("y")===-1?v.add(this.inputElement,"input",this.inputHandler,this):v.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){v.add(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler,this),v.add(this.inputElement,"mouseup",this.mouseUpHandler,this),v.add(this.inputElement,"focus",this.inputFocusHandler,this),v.add(this.inputElement,"blur",this.inputBlurHandler,this),v.add(this.inputElement,"keyup",this.keyupHandler,this),this.enableMask&&v.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),v.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&v.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&v.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Gt(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Backspace":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&(e.code!=="Delete"&&e.code!=="Backspace"&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}));break}},t.prototype.unBindEvents=function(){u(this.inputWrapper)||v.remove(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler),v.remove(this.inputElement,"mouseup",this.mouseUpHandler),v.remove(this.inputElement,"focus",this.inputFocusHandler),v.remove(this.inputElement,"blur",this.inputBlurHandler),v.remove(this.inputElement,"change",this.inputChangeHandler),v.remove(this.inputElement,"keyup",this.keyupHandler),this.enableMask&&v.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&v.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&v.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=u(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},t.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&v.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){this.enabled&&(e.preventDefault(),this.clear(e))},t.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.clear=function(e){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),u(this.value)&&(this.currentDate=new Date(new Date().setHours(0,0,0,0)));var i={event:e};if(this.trigger("cleared",i),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),M(this.element,"form")){var s=this.element,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),s.dispatchEvent(r)}},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){W.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){this.enabled&&(this.isIconClicked=!0,E.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus(),this.inputElement.focus(),x([this.inputWrapper.container],[hl]),x(this.inputWrapper.buttons,ua))),this.isIconClicked=!1)},t.prototype.updateHtmlAttributeToWrapper=function(){if(!u(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if(!u(this.htmlAttributes[""+s])&&_p.indexOf(s)>-1)if(s==="class"){var r=this.htmlAttributes[""+s].replace(/\s+/g," ").trim();r!==""&&x([this.inputWrapper.container],r.split(" "))}else if(s==="style"){var n=this.inputWrapper.container.getAttribute(s);u(n)?n=this.htmlAttributes[""+s]:n.charAt(n.length-1)===";"?n=n+this.htmlAttributes[""+s]:n=n+";"+this.htmlAttributes[""+s],this.inputWrapper.container.setAttribute(s,n)}else this.inputWrapper.container.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateHtmlAttributeToElement=function(){if(!u(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];_p.indexOf(s)<0&&this.inputElement.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateCssClass=function(e,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(e)||(e=e.replace(/\s+/g," ").trim()),W.setCssClass(e,[this.inputWrapper.container],i),this.popupWrapper&&W.setCssClass(e,[this.popupWrapper],i)},t.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus();break}},t.prototype.inputFocusHandler=function(){if(this.isFocused=!0,!!this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide");var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},t.prototype.inputHandler=function(e){this.isPopupClicked=!1,this.enableMask&&(!u(e)&&!u(e.inputType)&&e.inputType==="insertFromPaste"?this.notify("maskPasteInputHandler",{module:"MaskedDateTime"}):this.notify("inputHandler",{module:"MaskedDateTime"}))},t.prototype.inputBlurHandler=function(e){var i=this.inputElement.value===this.previousElementValue,s=this.value&&this.previousDate?this.value.getTime()===this.previousDate.getTime():this.value===this.previousDate;if(!(!this.enabled||i&&s)){if(this.strictModeUpdate(),this.inputElement.value===""&&u(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.isBlur=!0,this.updateInput(!1,!0),this.isBlur=!1,this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.getModuleName()==="datepicker"){var r={model:this};this.trigger("blur",r)}this.isCalendar()&&(this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Gt(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},t.prototype.documentHandler=function(e){!u(this.popupObj)&&!u(this.inputWrapper)&&(this.inputWrapper.container.contains(e.target)&&e.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(e.target))&&e.type!=="touchstart"&&e.preventDefault();var i=e.target;!M(i,".e-datepicker.e-popup-wrapper")&&!u(this.inputWrapper)&&M(i,"."+cC)!==this.inputWrapper.container&&!i.classList.contains("e-day")?(this.hide(e),i.classList.contains("e-dlg-overlay")?e.preventDefault():this.focusOut()):M(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!u(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&M(i,".e-content")&&M(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())?this.hide(e):M(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+a.prototype.generateTodayVal.call(this,this.value)&&this.hide(e))},t.prototype.inputKeyActionHandle=function(e){var i=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),this.getModuleName()==="datepicker"&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":{var s=this.inputElement.value===this.previousElementValue,r=this.value instanceof Date&&this.previousDate instanceof Date?this.value.getTime()===this.previousDate.getTime():this.value===this.previousDate;s&&r||(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break}case"tab":case"shiftTab":{var n=this.inputElement.selectionStart,o=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var l=this.inputElement.value.length;(n===0&&o===l||o!==l&&e.action==="tab"||n!==0&&e.action==="shiftTab")&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}),n=this.inputElement.selectionStart,o=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=n,this.inputElement.selectionEnd=o),e.action==="tab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&(e.preventDefault(),this.headerTitleElement.focus()),e.action==="shiftTab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e);break}default:this.defaultAction(e),e.action==="select"&&i===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(e){this.previousDate=!u(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(a.prototype.keyActionHandle.call(this,e),this.isCalendar()&&G(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((u(this.value)&&!u(this.previousDate)||this.getModuleName()!=="datetimepicker"&&+this.value!=+this.previousDate||this.getModuleName()==="datetimepicker"&&+this.value!=+this.previousDateTime)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+pa).length>0&&R(this.popupObj.element.querySelectorAll("."+pa),[pa]),!u(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));a.prototype.navigateTo.call(this,"Month",e)}},t.prototype.strictModeUpdate=function(){var e,i=/^y/,s=/[^a-zA-Z]/,r;if(this.getModuleName()==="datetimepicker"?e=u(this.formatString)?this.dateTimeFormat:this.formatString:(!i.test(this.formatString)||s.test(this.formatString))&&(e=u(this.formatString)?this.formatString:this.formatString.replace("dd","d")),u(e))e=this.formatString;else{var n=e.split("M").length-1;n<3&&(e=e.replace("MM","M"))}var o;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?o={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:o={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(this.calendarMode==="Gregorian"?r={format:e,type:"dateTime",skeleton:"yMd"}:r={format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},o=r);var l;if(typeof this.inputElement.value=="string"&&(this.inputElement.value=this.inputElement.value.trim()),this.getModuleName()==="datetimepicker"){if(this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),o))?l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),o):(this.calendarMode==="Gregorian"?r={format:e,type:"dateTime",skeleton:"yMd"}:r={format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),r)),(u(l)||typeof l=="object"&&isNaN(l.getTime()))&&!u(this.inputFormatsString))for(var h=0,p=this.inputFormatsString;h<p.length;h++){var c=p[h],d=void 0;if(this.calendarMode==="Gregorian"?d={format:c,type:"dateTime",skeleton:"yMd"}:d={format:c,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),d),!u(l)&&l instanceof Date&&!isNaN(l.getTime()))break}}else{if(l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),o),(u(l)||typeof l=="object"&&isNaN(l.getTime()))&&!u(this.inputFormatsString))for(var f=0,g=this.inputFormatsString;f<g.length;f++){var y=g[f],d=void 0;if(this.calendarMode==="Gregorian"?d={format:y,type:"dateTime",skeleton:"yMd"}:d={format:y,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),d),!u(l)&&l instanceof Date&&!isNaN(l.getTime()))break}l=!u(l)&&isNaN(+l)?null:l,!u(this.formatString)&&this.inputElement.value!==""&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&this.formatString.indexOf("y")===-1&&l.setFullYear(this.value.getFullYear())}this.getModuleName()==="datepicker"&&this.value&&!isNaN(+this.value)&&l&&l.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&l?(this.updateInputValue(this.globalize.formatDate(l,o)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:l},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:l},!0),this.strictMode&&!l&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),u(this.value)&&(this.currentDate=new Date(new Date().setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:""+ha+" "+jp,id:this.inputElement.id+"_options"}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),u(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),E.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=""+ha+" e-date-modal",document.body.className+=" "+Gp,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new as(this.popupWrapper,{content:this.calendarElement,relateTo:E.isDevice?document.body:this.inputWrapper.container,position:E.isDevice?{X:"center",Y:"center"}:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},offsetY:vC,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:E.isDevice?{X:"fit",Y:"fit"}:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},open:function(){E.isDevice&&e.fullScreenMode&&(e.iconRight=parseInt(window.getComputedStyle(e.calendarElement.querySelector(".e-header.e-month .e-prev")).marginRight,10)>16,e.touchModule=new ks(e.calendarElement.querySelector(".e-content.e-month"),{swipe:e.CalendarSwipeHandler.bind(e)}),v.add(e.calendarElement.querySelector(".e-content.e-month"),"touchstart",e.TouchStartHandler,e)),e.getModuleName()!=="datetimepicker"&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=$(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new Gt(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new Gt(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),Z(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){E.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},t.prototype.getAmPmValue=function(e){try{return typeof e=="string"&&e.trim()!==""?e.replace(/(am|pm|Am|aM|pM|Pm)/g,function(i){return i.toLocaleUpperCase()}):""}catch(i){return console.error("Error occurred while processing date:",i),""}},t.prototype.CalendarSwipeHandler=function(e){var i=0;if(this.iconRight)switch(e.swipeDirection){case"Left":i=1;break;case"Right":i=-1;break}else switch(e.swipeDirection){case"Up":i=1;break;case"Down":i=-1;break}this.touchStart&&(i===1?this.navigateNext(e):i===-1&&this.navigatePrevious(e),this.touchStart=!1)},t.prototype.TouchStartHandler=function(e){this.touchStart=!0},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,i=this.createElement("div",{className:"e-model-header"}),s=this.createElement("h1",{className:"e-model-year"}),r=this.createElement("div"),n=this.createElement("span",{className:"e-model-day"}),o=this.createElement("span",{className:"e-model-month"});if(this.calendarMode==="Gregorian"?e={format:"y",skeleton:"dateTime"}:e={format:"y",skeleton:"dateTime",calendar:"islamic"},s.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.calendarMode==="Gregorian"?e={format:"E",skeleton:"dateTime"}:e={format:"E",skeleton:"dateTime",calendar:"islamic"},n.textContent=""+this.globalize.formatDate(this.value||new Date,e)+", ",this.calendarMode==="Gregorian"?e={format:"MMM d",skeleton:"dateTime"}:e={format:"MMM d",skeleton:"dateTime",calendar:"islamic"},o.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.fullScreenMode){var l=this.createElement("span",{className:"e-popup-close"});v.add(l,"mousedown touchstart",this.modelCloseHandler,this);var h=this.calendarElement.querySelector("button.e-today");r.classList.add("e-day-wrapper"),h.classList.add("e-outline"),i.appendChild(l),i.appendChild(h)}this.fullScreenMode||i.appendChild(s),r.appendChild(n),r.appendChild(o),i.appendChild(r),this.calendarElement.insertBefore(i,this.calendarElement.firstElementChild)},t.prototype.modelCloseHandler=function(e){this.hide()},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!u(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0),this.isKeyAction=!1},t.prototype.navigatedEvent=function(e){$(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.keyupHandler=function(e){this.isKeyAction=this.inputElement.value!==this.previousElementValue,this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide")},t.prototype.changeEvent=function(e){!this.isIconClicked&&!(this.isBlur||this.isKeyAction)&&this.selectCalendar(e),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||(this.isAngular&&(this.previousDate=this.value&&new Date(+this.value)),this.trigger("change",this.changedArgs)),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass()):e&&this.hide(e),this.isKeyAction=!1},t.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.selectCalendar=function(e){var i,s,r;this.getModuleName()==="datetimepicker"?s=u(this.formatString)?this.dateTimeFormat:this.formatString:s=this.formatString,this.value&&(this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?r={format:s,type:"dateTime",skeleton:"yMd"}:r={format:s,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=this.globalize.formatDate(this.changedArgs.value,r)):(this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=this.globalize.formatDate(this.changedArgs.value,r)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),u(i)||(this.updateInputValue(i),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.isCalendar=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+jp))},t.prototype.setWidth=function(e){typeof e=="number"?this.inputWrapper.container.style.width=ve(this.width):typeof e=="string"?this.inputWrapper.container.style.width=e.match(/px|%|em/)?this.width:ve(this.width):this.inputWrapper.container.style.width="100%"},t.prototype.show=function(e,i){var s=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var r=!0,n=void 0;!u(this.value)&&!(+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max)))?(n=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)):n=this.value||null,this.isCalendar()||(a.prototype.render.call(this),this.setProperties({value:n||null},!0),this.previousDate=n,this.createCalendar()),E.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){r=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:E.isDevice?this.mobilePopupWrapper:document.body};var o=this.preventArgs;this.trigger("open",o,function(l){if(s.preventArgs=l,r&&!s.preventArgs.cancel){x(s.inputWrapper.buttons,ua),s.preventArgs.appendTo.appendChild(s.popupWrapper),s.popupObj.refreshPosition(s.inputElement);var h={name:"FadeIn",duration:E.isDevice?0:mC};if(s.zIndex===1e3?s.popupObj.show(new It(h),s.element):s.popupObj.show(new It(h),null),a.prototype.setOverlayIndex.call(s,s.mobilePopupWrapper,s.popupObj.element,s.modal,E.isDevice),s.setAriaAttributes(),E.isDevice){var p=s.createElement("div",{className:"e-dlg-overlay"});p.style.zIndex=(s.zIndex-1).toString(),s.mobilePopupWrapper.appendChild(p)}}else s.popupObj.destroy(),s.popupWrapper=s.popupObj=null;!u(s.inputElement)&&s.inputElement.value===""&&!u(s.tableBodyElement)&&s.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(x([s.tableBodyElement.querySelector("td.e-selected")],yC),R(s.tableBodyElement.querySelectorAll("td.e-selected"),pa)),v.add(document,"mousedown touchstart",s.documentHandler,s)})}},t.prototype.hide=function(e){var i=this;if(u(this.popupWrapper))E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var s=!0;this.preventArgs={preventDefault:function(){s=!1},popup:this.popupObj,event:e||null,cancel:!1},R(this.inputWrapper.buttons,ua),R([document.body],Gp);var r=this.preventArgs;this.isCalendar()?this.trigger("close",r,function(n){i.closeEventCallback(s,n)}):this.closeEventCallback(s,r)}},t.prototype.closeEventCallback=function(e,i){this.preventArgs=i,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),R(this.inputWrapper.buttons,ua)),this.setAriaAttributes(),E.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),E.isDevice&&!u(this.mobilePopupWrapper)&&e&&(u(this.preventArgs)||!this.preventArgs.cancel)&&(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null),v.remove(document,"mousedown touchstart",this.documentHandler),E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),x([this.inputWrapper.container],[hl]))},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(R([this.inputWrapper.container],[hl]),this.inputElement.blur())},t.prototype.currentView=function(){var e;return this.calendarElement&&(e=a.prototype.currentView.call(this)),e},t.prototype.navigateTo=function(e,i){this.calendarElement&&a.prototype.navigateTo.call(this,e,i)},t.prototype.destroy=function(){this.unBindEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),a.prototype.destroy.call(this),W.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),u(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains(pC)&&a.prototype.destroy.call(this);var e={"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"};this.inputElement.hasAttribute("aria-label")&&this.inputElement.removeAttribute("aria-label"),this.inputElement&&(W.removeAttributes(e,this.inputElement),u(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),v.remove(this.inputElement,"blur",this.inputBlurHandler),v.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&Z(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),this.ngTag===null&&(this.inputElement&&(u(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),R([this.inputElement],[dC])),R([this.element],[ha]),u(this.inputWrapper)||Z(this.inputWrapper.container)),this.formElement&&v.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},t.prototype.ensureInputAttribute=function(){for(var e=[],i=0;i<this.inputElement.attributes.length;i++)e[i]=this.inputElement.attributes[i].name;for(var i=0;i<e.length;i++)u(this.inputElementCopy.getAttribute(e[i]))?(e[i].toLowerCase()==="value"&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[i])):(e[i].toLowerCase()==="value"&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[i])),this.inputElement.setAttribute(e[i],this.inputElementCopy.getAttribute(e[i])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),R([this.inputElementCopy],[ha,hC,lC]),this.inputElement=this.element,this.formElement=M(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?this.ngTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):this.getModuleName()==="datetimepicker"?(this.element.id=at("ej2-datetimepicker"),this.ngTag!==null&&G(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=at("ej2-datepicker"),this.ngTag!==null&&G(this.inputElement,{id:this.element.id+"_input"})),this.ngTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.inputFormats&&this.checkInputFormats(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),a.prototype.preRender.call(this)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,i){var s=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",s),e.removeAttribute("name");for(var r=["required","aria-required","form"],n=0;n<r.length;n++)if(!u(e.getAttribute(r[n]))){var o=e.getAttribute(r[n]);i.setAttribute(r[n],o),e.removeAttribute(r[n])}},t.prototype.checkFormat=function(){var e=new ft(this.locale);if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(this.format.skeleton!==""&&!u(this.format.skeleton)){var i=this.format.skeleton;this.getModuleName()==="datetimepicker"?this.formatString=e.getDatePattern({skeleton:i,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:i,type:"date"})}else this.getModuleName()==="datetimepicker"?this.formatString=this.dateTimeFormat:this.formatString=null;else this.formatString=null},t.prototype.checkInputFormats=function(){var e=new ft(this.locale);if(this.inputFormatsString=[],this.inputFormats){for(var i=0,s=this.inputFormats;i<s.length;i++){var r=s[i],n="";if(typeof r=="string")n=r;else if(r.skeleton!==""&&!u(r.skeleton)){var o=r.skeleton;this.getModuleName()==="datetimepicker"?n=e.getDatePattern({skeleton:o,type:"dateTime"}):n=e.getDatePattern({skeleton:o,type:"date"})}n&&this.inputFormatsString.push(n)}this.inputFormatsString.length===0&&(this.inputFormatsString=null)}else this.inputFormatsString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new ft(this.locale),this.checkFormat(),this.checkView();var i=e?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"],s;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?s={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:this.calendarMode==="Gregorian"?s={format:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var r=0,n=i;r<n.length;r++){var o=n[r];if(!u(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(u(this.datepickerOptions)||this.datepickerOptions.enabled===void 0||e){var l=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true");this.setProperties({enabled:l},!e)}break;case"readonly":if(u(this.datepickerOptions)||this.datepickerOptions.readonly===void 0||e){var h=this.inputElement.getAttribute(o)==="readonly"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:h},!e)}break;case"placeholder":(u(this.datepickerOptions)||this.datepickerOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(o));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(o));break;case"value":if(u(this.datepickerOptions)||this.datepickerOptions.value===void 0||e){var p=this.inputElement.getAttribute(o);this.setProperties(We(o,this.globalize.parseDate(this.getAmPmValue(p),s),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var c=this.inputElement.getAttribute(o);this.setProperties(We(o,this.globalize.parseDate(this.getAmPmValue(c),s),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var d=this.inputElement.getAttribute(o);this.setProperties(We(o,this.globalize.parseDate(this.getAmPmValue(d),s),{}),!e)}break;case"type":this.inputElement.getAttribute(o)!=="text"&&this.inputElement.setAttribute("type","text");break}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var s,r,n=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),o=this.previousDate;this.minMaxUpdates(),(!e||e&&!u(this.renderDayCell))&&a.prototype.render.call(this),this.previousDate=o;var l=n&&+n,h='*[id^="/id"]'.replace("/id",""+l);this.strictMode||(typeof this.value=="string"||typeof this.value=="object"&&+this.value!=+n)&&this.setProperties({value:n},!0),!u(this.calendarElement)&&!u(this.calendarElement.querySelectorAll(h)[0])&&this.calendarElement.querySelectorAll(h)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date(new Date().setHours(0,0,0,0))));var p;this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?r=this.globalize.formatDate(n,{format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}):r=this.globalize.formatDate(n,{format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),p=r):(this.calendarMode==="Gregorian"?s={format:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},p=this.globalize.formatDate(n,s)),this.popupObj||(this.updateInputValue(p),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime",isBlur:i})))},t.prototype.setAriaAttributes=function(){this.isCalendar()?(W.addAttributes({"aria-expanded":"true"},this.inputElement),G(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),G(this.inputElement,{"aria-controls":this.inputElement.id}),this.value&&G(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(W.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),this.inputElement.removeAttribute("aria-activedescendant"))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),i=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!u(this.value)&&!u(this.min)&&!u(this.max)&&!(new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&this.inputElement.value!==""&&this.inputElement.value!==this.maskedDateValue&&u(this.value)||i||!this.isValidTime(this.value)?(x([this.inputWrapper.container],Up),G(this.inputElement,{"aria-invalid":"true"})):u(this.inputWrapper)||(R([this.inputWrapper.container],Up),G(this.inputElement,{"aria-invalid":"false"}))},t.prototype.isValidTime=function(e){return!0},t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s],o=["blur","change","cleared","close","created","destroyed","focus","navigated","open","renderDayCell"];switch(o.indexOf(n)>0&&this.isReact&&(this.isDynamicValueChanged=!0),n){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,u(this.value)&&(this.enableMask?this.updateInputValue(this.maskedDateValue):this.updateInputValue(""),this.currentDate=new Date(new Date().setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"inputFormats":this.checkInputFormats();break;case"allowEdit":this.setAllowEdit();break;case"placeholder":W.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":W.setReadonly(this.readonly,this.inputElement);break;case"enabled":W.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new ft(this.locale),this.l10n.setLocale(this.locale),this.datepickerOptions&&this.datepickerOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),W.setPlaceholder(this.placeholder,this.inputElement)),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":W.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&a.prototype.onPropertyChanged.call(this,e,i);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"showClearButton":W.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),W.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=e.floatLabelType,W.removeFloating(this.inputWrapper),W.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&a.prototype.onPropertyChanged.call(this,e,i),n==="min"&&u(this.min)&&(this.min=new Date(1900,0,1)),n==="max"&&u(this.max)&&(this.max=new Date(2099,11,31));break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},t.prototype.addDate=function(e){},Ge([m(null)],t.prototype,"width",void 0),Ge([m(null)],t.prototype,"value",void 0),Ge([m(null)],t.prototype,"cssClass",void 0),Ge([m(!1)],t.prototype,"strictMode",void 0),Ge([m(null)],t.prototype,"format",void 0),Ge([m(null)],t.prototype,"inputFormats",void 0),Ge([m(!0)],t.prototype,"enabled",void 0),Ge([m(!1)],t.prototype,"fullScreenMode",void 0),Ge([m({})],t.prototype,"htmlAttributes",void 0),Ge([m(null)],t.prototype,"values",void 0),Ge([m(!1)],t.prototype,"isMultiSelection",void 0),Ge([m(!0)],t.prototype,"showClearButton",void 0),Ge([m(!0)],t.prototype,"allowEdit",void 0),Ge([m(null)],t.prototype,"keyConfigs",void 0),Ge([m(!1)],t.prototype,"enablePersistence",void 0),Ge([m(1e3)],t.prototype,"zIndex",void 0),Ge([m(!1)],t.prototype,"readonly",void 0),Ge([m(null)],t.prototype,"placeholder",void 0),Ge([m("Never")],t.prototype,"floatLabelType",void 0),Ge([m(null)],t.prototype,"serverTimezoneOffset",void 0),Ge([m(!1)],t.prototype,"openOnFocus",void 0),Ge([m(!1)],t.prototype,"enableMask",void 0),Ge([m({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Ge([O()],t.prototype,"open",void 0),Ge([O()],t.prototype,"cleared",void 0),Ge([O()],t.prototype,"close",void 0),Ge([O()],t.prototype,"blur",void 0),Ge([O()],t.prototype,"focus",void 0),Ge([O()],t.prototype,"created",void 0),Ge([O()],t.prototype,"destroyed",void 0),t=Ge([pt],t),t})(nC),Fd=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Re=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},bC="e-time-wrapper",CC="e-popup",Kp="e-error",Yp="240px",Xp=new Date().getDate(),Qp=new Date().getMonth(),$p=new Date().getFullYear(),ca="e-timepicker",SC="e-lib",wC="e-control",IC="e-content",_s="e-active",pl="e-hover",cl="e-navigation",xi="e-disabled",xC="e-icon-anim",dl="e-input-focus",$i="e-list-item",Jp=2,Zp=50,ec="e-time-overflow",EC=4,fl="e-non-edit",tc=["title","class","style"],ih;(function(a){function t(e,i,s,r,n,o){this.calendarMode;var l,h=o*6e4,p=[],c=[];l=+i.setMilliseconds(0);for(var d=+s.setMilliseconds(0);d>=l;)c.push(l),p.push(r.formatDate(new Date(l),{format:n,type:"time"})),l+=h;var f=St.createList(e,p,null,!0);return{collection:c,list:f}}a.createListItems=t})(ih||(ih={}));(function(a){Fd(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Re([m("day")],t.prototype,"day",void 0),Re([m("month")],t.prototype,"month",void 0),Re([m("year")],t.prototype,"year",void 0),Re([m("day of the week")],t.prototype,"dayOfTheWeek",void 0),Re([m("hour")],t.prototype,"hour",void 0),Re([m("minute")],t.prototype,"minute",void 0),Re([m("second")],t.prototype,"second",void 0),t})(Je);(function(a){Fd(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.liCollections=[],s.timeCollections=[],s.disableItemCollection=[],s.invalidValueString=null,s.preventChange=!1,s.maskedDateValue="",s.moduleName=s.getModuleName(),s.timeOptions=e,s}return t.prototype.preRender=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.cloneElement=this.element.cloneNode(!0),R([this.cloneElement],[ca,wC,SC]),this.inputElement=this.element,this.angularTag=null,this.formElement=M(this.element,"form"),this.element.tagName==="EJS-TIMEPICKER"&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.openPopupEventArgs={appendTo:document.body}},t.prototype.render=function(){this.initialize(),this.createInputElement(),this.updateHtmlAttributeToWrapper(),this.setTimeAllowEdit(),this.setEnable(),this.validateInterval(),this.bindEvents(),this.validateDisable(),this.setTimeZone(),this.setValue(this.getFormattedValue(this.value)),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.anchor=this.inputElement,this.inputElement.setAttribute("value",this.inputElement.value),this.inputEleValue=this.getDateObject(this.inputElement.value),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.setTimeZone=function(){if(!u(this.serverTimezoneOffset)&&this.value){var e=new Date().getTimezoneOffset()/60,i=this.serverTimezoneOffset,s=i+e;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+s*60*60*1e3)}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,i)},t.prototype.setTimeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):G(this.inputElement,{readonly:""}),this.clearIconState()},t.prototype.clearIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?R([this.inputWrapper.container],[fl]):x([this.inputWrapper.container],[fl]):this.inputWrapper&&R([this.inputWrapper.container],[fl])},t.prototype.validateDisable=function(){this.setMinMax(this.initMin,this.initMax),u(this.value)||(this.popupCreation(),this.popupObj.destroy(),this.popupWrapper=this.popupObj=null),!isNaN(+this.value)&&this.value!==null&&(this.valueIsDisable(this.value)||(this.strictMode&&this.resetState(),this.initValue=null,this.initMax=this.getDateObject(this.initMax),this.initMin=this.getDateObject(this.initMin),this.timeCollections=this.liCollections=[],this.setMinMax(this.initMin,this.initMax)))},t.prototype.validationAttribute=function(e,i){var s=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",s),e.removeAttribute("name");for(var r=["required","aria-required","form"],n=0;n<r.length;n++)if(!u(e.getAttribute(r[n]))){var o=e.getAttribute(r[n]);i.setAttribute(r[n],o),e.removeAttribute(r[n])}},t.prototype.initialize=function(){this.globalize=new ft(this.locale),this.defaultCulture=new ft("en"),this.checkTimeFormat(),this.checkInvalidValue(this.value),this.setProperties({value:this.checkDateValue(new Date(this.checkInValue(this.value)))},!0),this.setProperties({min:this.checkDateValue(new Date(this.checkInValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkInValue(this.max)))},!0),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(this.scrollTo)))},!0),this.angularTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.checkAttributes(!1);var e={placeholder:this.placeholder};this.l10n=new zt("timepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.initValue=this.checkDateValue(this.value),this.initMin=this.checkDateValue(this.min),this.initMax=this.checkDateValue(this.max),this.isNavigate=this.isPreventBlur=this.isTextSelected=!1,this.activeIndex=this.valueWithMinutes=this.prevDate=null,u(this.element.getAttribute("id"))?(this.element.id=at("ej2_timepicker"),this.angularTag!==null&&G(this.inputElement,{id:this.element.id+"_input"})):this.angularTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"),u(this.inputElement.getAttribute("name"))&&G(this.inputElement,{name:this.element.id}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.checkTimeFormat=function(){if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(!u(this.format.skeleton)&&this.format.skeleton!==""){var e=this.format.skeleton;this.formatString=this.globalize.getDatePattern({type:"time",skeleton:e})}else this.formatString=this.globalize.getDatePattern({type:"time",skeleton:"short"});else this.formatString=null},t.prototype.checkDateValue=function(e){return!u(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.createInputElement=function(){this.fullScreenMode&&E.isDevice&&(this.cssClass+=" e-popup-expand");var e=this.cssClass,i=!this.enableMask;!u(this.cssClass)&&this.cssClass!==""&&(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=W.createInput({element:this.inputElement,bindClearAction:i,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[" e-input-group-icon e-time-icon e-icons"]},this.createElement),this.inputWrapper.container.style.width=this.setWidth(this.width),G(this.inputElement,{"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"false","aria-invalid":"false"}),this.isNullOrEmpty(this.inputStyle)||W.addAttributes({style:this.inputStyle},this.inputElement),x([this.inputWrapper.container],bC)},t.prototype.getCldrDateTimeFormat=function(){var e=new ft(this.locale),i,s=e.getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?i=s+" "+this.cldrFormat("time"):i=this.formatString,i},t.prototype.checkInvalidValue=function(e){var i=!1;if(typeof e!="object"&&!u(e)){var s=e;typeof s=="string"&&(s=s.trim());var r=null,n=null;if(typeof e=="number"?s=e.toString():typeof e=="string"&&(/^[a-zA-Z0-9- ]*$/.test(e)||(r=this.setCurrentDate(this.getDateObject(e)),u(r)&&(r=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(s),{format:this.getCldrDateTimeFormat(),type:"datetime"})),u(r)&&(r=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(s),{format:this.formatString,type:"dateTime",skeleton:"yMd"})))))),n=this.globalize.parseDate(this.getAmPmValue(s),{format:this.getCldrDateTimeFormat(),type:"datetime"}),r=!u(n)&&n instanceof Date&&!isNaN(+n)?n:null,u(r)&&s.replace(/\s/g,"").length){var o=null,l=null;o=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,l=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!o.test(s)&&!l.test(s)||/^[a-zA-Z0-9- ]*$/.test(e)||isNaN(+new Date(""+s))?i=!0:r=new Date(""+s)}i?(this.strictMode||(this.invalidValueString=s),this.setProperties({value:null},!0),this.initValue=null):(this.setProperties({value:r},!0),this.initValue=this.value)}},t.prototype.requiredModules=function(){var e=[];return this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.getAmPmValue=function(e){try{return typeof e=="string"&&e.trim()!==""?e.replace(/(am|pm|Am|aM|pM|Pm)/g,function(i){return i.toLocaleUpperCase()}):""}catch(i){return console.error("Error occurred while processing date:",i),""}},t.prototype.cldrFormat=function(e){var i;return this.locale==="en"||this.locale==="en-US"?i=H("timeFormats.short",Cs()):i=this.getCultureTimeObject(Ss,""+this.locale),i},t.prototype.destroy=function(){this.hide(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.unBindEvents();var e={"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"true","aria-invalid":"false"};this.inputElement&&(W.removeAttributes(e,this.inputElement),this.angularTag===null&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),u(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.enableElement([this.inputElement]),this.inputElement.classList.remove("e-input"),u(this.cloneElement.getAttribute("disabled"))&&W.setEnabled(!0,this.inputElement,this.floatLabelType)),this.inputWrapper.container&&Z(this.inputWrapper.container),this.inputWrapper=this.popupWrapper=this.cloneElement=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],u(this.rippleFn)||this.rippleFn(),W.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),a.prototype.destroy.call(this),this.formElement&&v.remove(this.formElement,"reset",this.formResetHandler),this.rippleFn=null,this.openPopupEventArgs=null,this.selectedElement=null,this.listTag=null,this.liCollections=null},t.prototype.ensureInputAttribute=function(){for(var e=[],i=0;i<this.inputElement.attributes.length;i++)e[i]=this.inputElement.attributes[i].name;for(var i=0;i<e.length;i++)u(this.cloneElement.getAttribute(e[i]))?(this.inputElement.removeAttribute(e[i]),e[i].toLowerCase()==="value"&&(this.inputElement.value="")):(this.inputElement.setAttribute(e[i],this.cloneElement.getAttribute(e[i])),e[i].toLowerCase()==="value"&&(this.inputElement.value=this.cloneElement.getAttribute(e[i])))},t.prototype.popupCreation=function(){this.popupWrapper=this.createElement("div",{className:ca+" "+CC,attrs:{id:this.element.id+"_popup"}}),this.popupWrapper.style.visibility="hidden",this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),u(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),!u(this.step)&&this.step>0&&(this.generateList(),Ie([this.listWrapper],this.popupWrapper)),this.addSelection(),this.renderPopup(),Z(this.popupWrapper)},t.prototype.getPopupHeight=function(){var e=parseInt(Yp,10),i=this.popupWrapper.getBoundingClientRect().height;return i>e?e:i},t.prototype.generateList=function(){this.createListItems(),this.wireListEvents();var e={duration:300,selector:"."+$i};this.rippleFn=ts(this.listWrapper,e),this.liCollections=this.listWrapper.querySelectorAll("."+$i)},t.prototype.renderPopup=function(){var e=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),this.popupObj=new as(this.popupWrapper,{width:this.setPopupWidth(this.width),zIndex:this.zIndex,targetType:"relative",position:E.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:E.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},enableRtl:this.enableRtl,relateTo:E.isDevice?document.body:this.inputWrapper.container,offsetY:EC,open:function(){e.popupWrapper.style.visibility="visible",x([e.inputWrapper.buttons[0]],_s)},close:function(){R([e.inputWrapper.buttons[0]],_s),e.unWireListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),ce(e.popupObj.element),e.popupObj.destroy(),e.popupWrapper.innerHTML="",e.listWrapper=e.popupWrapper=e.listTag=void 0},targetExitViewport:function(){E.isDevice||e.hide()}}),E.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),E.isDevice&&this.fullScreenMode?(this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%"):this.popupObj.element.style.maxHeight=Yp,E.isDevice&&this.fullScreenMode){var i=this.createElement("div",{className:"e-model-header"}),s=this.createElement("span",{className:"e-model-title"});s.textContent="Select time";var r=this.createElement("span",{className:"e-popup-close"});v.add(r,"mousedown touchstart",this.timePopupCloseHandler,this),i.appendChild(r),i.appendChild(s),this.popupWrapper.insertBefore(i,this.popupWrapper.firstElementChild)}},t.prototype.timePopupCloseHandler=function(e){this.hide()},t.prototype.getFormattedValue=function(e){return u(this.checkDateValue(e))?null:this.globalize.formatDate(e,{skeleton:"medium",type:"time"})},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var i=this.createDateObj(e),s=!this.isNullOrEmpty(this.initValue);if(this.checkDateValue(i)){var r=s?this.initValue.getDate():Xp,n=s?this.initValue.getMonth():Qp,o=s?this.initValue.getFullYear():$p;return new Date(o,n,r,i.getHours(),i.getMinutes(),i.getSeconds())}}return null},t.prototype.updateHtmlAttributeToWrapper=function(){if(!u(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if(tc.indexOf(s)>-1)if(s==="class"){var r=this.htmlAttributes[""+s].replace(/\s+/g," ").trim();r!==""&&x([this.inputWrapper.container],r.split(" "))}else if(s==="style"){var n=this.inputWrapper.container.getAttribute(s);n=u(n)?this.htmlAttributes[""+s]:n+this.htmlAttributes[""+s],this.inputWrapper.container.setAttribute(s,n)}else this.inputWrapper.container.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateHtmlAttributeToElement=function(){if(!u(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];tc.indexOf(s)<0&&this.inputElement.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateCssClass=function(e,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(e)||(e=e.replace(/\s+/g," ").trim()),W.setCssClass(e,[this.inputWrapper.container],i),this.popupWrapper&&W.setCssClass(e,[this.popupWrapper],i)},t.prototype.removeErrorClass=function(){R([this.inputWrapper.container],Kp),G(this.inputElement,{"aria-invalid":"false"})},t.prototype.checkErrorState=function(e){var i=this.getDateObject(e);this.validateState(i)&&!this.invalidValueString||this.enableMask&&this.inputElement.value===this.maskedDateValue?this.removeErrorClass():(x([this.inputWrapper.container],Kp),G(this.inputElement,{"aria-invalid":"true"}))},t.prototype.validateInterval=function(){!u(this.step)&&this.step>0?this.enableElement([this.inputWrapper.buttons[0]]):this.disableTimeIcon()},t.prototype.disableTimeIcon=function(){this.disableElement([this.inputWrapper.buttons[0]]),this.hide()},t.prototype.disableElement=function(e){x(e,xi)},t.prototype.enableElement=function(e){R(e,xi)},t.prototype.selectInputText=function(){this.inputElement.setSelectionRange(0,this.inputElement.value.length)},t.prototype.setCursorToEnd=function(){this.inputElement.setSelectionRange(this.inputElement.value.length,this.inputElement.value.length)},t.prototype.getMeridianText=function(){var e;if(this.locale==="en"||this.locale==="en-US")e=H("dayPeriods.format.wide",Cs());else{var i=".dates.calendars.gregorian.dayPeriods.format.abbreviated",s="main.";e=H(s+""+this.locale+i,Ss)}return e},t.prototype.getCursorSelection=function(){var e=this.inputElement,i=0,s=0;return isNaN(e.selectionStart)||(i=e.selectionStart,s=e.selectionEnd),{start:Math.abs(i),end:Math.abs(s)}},t.prototype.getActiveElement=function(){return u(this.popupWrapper)?null:this.popupWrapper.querySelectorAll("."+_s)},t.prototype.isNullOrEmpty=function(e){return!!(u(e)||typeof e=="string"&&e.trim()==="")},t.prototype.setWidth=function(e){return typeof e=="number"?e=ve(e):typeof e=="string"?e=e.match(/px|%|em/)?e:ve(e):e="100%",e},t.prototype.setPopupWidth=function(e){if(e=this.setWidth(e),e.indexOf("%")>-1){var i=this.containerStyle.width*parseFloat(e)/100;e=i.toString()+"px"}return e},t.prototype.setScrollPosition=function(){var e=this.selectedElement;u(e)?this.popupWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var i=this.getPopupHeight(),s=e.nextElementSibling,r=s?s.offsetTop:e.offsetTop,n=e.getBoundingClientRect().height;r+e.offsetTop>i?this.popupWrapper.scrollTop=s?r-(i/Jp+n/Jp):r:this.popupWrapper.scrollTop=0},t.prototype.setScrollTo=function(){var e;if(u(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var i=this.popupWrapper.querySelectorAll("."+$i);if(i.length){var s=this.timeCollections[0],r=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=i[Math.round((r-s)/(this.step*6e4))]}}u(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.getText=function(){return u(this.checkDateValue(this.value))?"":this.getValue(this.value)},t.prototype.getValue=function(e){return u(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.cldrDateFormat=function(){var e;return this.locale==="en"||this.locale==="en-US"?e=H("dateFormats.short",Cs()):e=this.getCultureDateObject(Ss,""+this.locale),e},t.prototype.cldrTimeFormat=function(){var e;return this.isNullOrEmpty(this.formatString)?this.locale==="en"||this.locale==="en-US"?e=H("timeFormats.short",Cs()):e=this.getCultureTimeObject(Ss,""+this.locale):e=this.formatString,e},t.prototype.dateToNumeric=function(){var e;return this.locale==="en"||this.locale==="en-US"?e=H("timeFormats.medium",Cs()):e=H("main."+this.locale+".dates.calendars.gregorian.timeFormats.medium",Ss),e},t.prototype.getExactDateTime=function(e){return u(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.dateToNumeric(),type:"time"})},t.prototype.setValue=function(e){var i=this.checkValue(e);!this.strictMode&&!this.validateState(i)?(this.checkDateValue(this.valueWithMinutes)===null&&(this.initValue=this.valueWithMinutes=null),this.validateMinMax(this.value,this.min,this.max)):this.isNullOrEmpty(i)?(this.initValue=null,this.validateMinMax(this.value,this.min,this.max)):this.initValue=this.compareFormatChange(i),this.updateInput(!0,this.initValue)},t.prototype.compareFormatChange=function(e){return u(e)?null:e!==this.getText()?this.getDateObject(e):this.getDateObject(this.value)},t.prototype.updatePlaceHolder=function(){W.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)},t.prototype.updateInputValue=function(e){W.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnTimeIconClick")},t.prototype.popupHandler=function(e){this.enabled&&(E.isDevice&&this.inputElement.setAttribute("readonly",""),e.preventDefault(),this.isPopupOpen()?this.closePopup(0,e):(this.inputElement.focus(),this.show(e)))},t.prototype.mouseDownHandler=function(){this.enabled&&(this.readonly||(this.inputElement.setSelectionRange(0,0),v.add(this.inputElement,"mouseup",this.mouseUpHandler,this)))},t.prototype.mouseUpHandler=function(e){if(!this.readonly)if(e.preventDefault(),this.enableMask){e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"});return}else{v.remove(this.inputElement,"mouseup",this.mouseUpHandler);var i=this.getCursorSelection();i.start===0&&i.end===this.inputElement.value.length||(this.inputElement.value.length>0&&(this.cursorDetails=this.focusSelection()),this.inputElement.setSelectionRange(this.cursorDetails.start,this.cursorDetails.end))}},t.prototype.focusSelection=function(){var e=new RegExp("^[a-zA-Z0-9]+$"),i=this.inputElement.value.split("");i.push(" ");var s=this.getCursorSelection(),r=0,n=0,o=!1;if(this.isTextSelected)r=s.start,n=s.end,this.isTextSelected=!1;else for(var l=0;l<i.length;l++)if(e.test(i[l])||(n=l,o=!0),o)if(s.start>=r&&s.end<=n){n=n,this.isTextSelected=!0;break}else r=l+1,o=!1;return{start:r,end:n}},t.prototype.inputHandler=function(e){if(!this.readonly&&this.enabled)switch(e.action==="right"||e.action==="left"||e.action==="tab"||(e.action==="home"||e.action==="end"||e.action==="up"||e.action==="down")&&!this.isPopupOpen()&&!this.enableMask||e.preventDefault(),e.action){case"home":case"end":case"up":case"down":this.isPopupOpen()||(this.popupCreation(),this.popupObj.destroy(),this.popupObj=this.popupWrapper=null),this.enableMask&&!this.readonly&&!this.isPopupOpen()&&(e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e})),this.isPopupOpen()&&this.keyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.updateValue(this.valueWithMinutes,e)):this.updateValue(this.inputElement.value,e),this.hide(),this.isNavigate=!1,this.isPopupOpen()&&e.stopPropagation();break;case"open":this.show(e);break;case"escape":this.updateInputValue(this.objToString(this.value)),this.enableMask&&(this.value||this.updateInputValue(this.maskedDateValue),this.createMask()),this.previousState(this.value),this.hide();break;case"close":this.hide();break;case"right":case"left":case"tab":case"shiftTab":!this.isPopupOpen()&&this.enableMask&&!this.readonly&&((this.inputElement.selectionStart===0&&this.inputElement.selectionEnd===this.inputElement.value.length||this.inputElement.selectionEnd!==this.inputElement.value.length&&e.action==="tab"||this.inputElement.selectionStart!==0&&e.action==="shiftTab"||e.action==="left"||e.action==="right")&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}));break;default:this.isNavigate=!1;break}},t.prototype.onMouseClick=function(e){var i=e.target,s=this.selectedElement=M(i,"."+$i);this.setSelection(s,e),s&&s.classList.contains($i)&&this.hide()},t.prototype.closePopup=function(e,i){var s=this;if(this.isPopupOpen()&&this.popupWrapper){var r={popup:this.popupObj,event:i||null,cancel:!1,name:"open"};R([document.body],ec),this.trigger("close",r,function(n){if(!n.cancel){var o={name:"FadeOut",duration:Zp,delay:e||0};s.popupObj.hide(new It(o)),R([s.inputWrapper.container],[xC]),G(s.inputElement,{"aria-expanded":"false"}),s.inputElement.removeAttribute("aria-owns"),s.inputElement.removeAttribute("aria-controls"),s.inputElement.removeAttribute("aria-activedescendant"),v.remove(document,"mousedown touchstart",s.documentClickHandler)}E.isDevice&&s.modal&&(s.modal.style.display="none",s.modal.outerHTML="",s.modal=null),E.isDevice&&(u(s.mobileTimePopupWrap)||(s.mobileTimePopupWrap.remove(),s.mobileTimePopupWrap=null)),E.isDevice&&s.allowEdit&&!s.readonly&&s.inputElement.removeAttribute("readonly")})}else E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},t.prototype.disposeServerPopup=function(){this.popupWrapper&&(this.popupWrapper.style.visibility="hidden",this.popupWrapper.style.top="-9999px",this.popupWrapper.style.left="-9999px",this.popupWrapper.style.width="0px",this.popupWrapper.style.height="0px")},t.prototype.checkValueChange=function(e,i){if(!this.strictMode&&!this.validateState(this.valueWithMinutes))this.checkDateValue(this.valueWithMinutes)===null&&(this.initValue=this.valueWithMinutes=null),this.setProperties({value:this.compareFormatChange(this.inputElement.value)},!0),this.initValue=this.valueWithMinutes=this.compareFormatChange(this.inputElement.value),this.prevValue=this.inputElement.value,+this.prevDate!=+this.value&&this.changeEvent(e);else if(i){var s=this.getDateObject(new Date(this.timeCollections[this.activeIndex]));+this.prevDate!=+s&&this.valueProcess(e,s)}else{var s=this.compareFormatChange(this.inputElement.value);(+this.prevDate!=+s||u(this.checkDateValue(this.value)))&&this.valueProcess(e,s)}},t.prototype.onMouseOver=function(e){var i=M(e.target,"."+$i);this.setHover(i,pl)},t.prototype.setHover=function(e,i){this.enabled&&this.isValidLI(e)&&!e.classList.contains(i)&&(this.removeHover(i),x([e],i),i===cl&&e.setAttribute("aria-selected","true"))},t.prototype.setSelection=function(e,i){this.isValidLI(e)&&(this.checkValue(e.getAttribute("data-value")),this.enableMask&&this.createMask(),this.selectedElement=e,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),x([this.selectedElement],_s),this.selectedElement.setAttribute("aria-selected","true"),this.checkValueChange(i,!0))},t.prototype.onMouseLeave=function(){this.removeHover(pl)},t.prototype.scrollHandler=function(){this.getModuleName()==="timepicker"&&E.isDevice||this.hide()},t.prototype.setMinMax=function(e,i){u(this.checkDateValue(e))&&(this.initMin=this.getDateObject("12:00:00 AM")),u(this.checkDateValue(i))&&(this.initMax=this.getDateObject("11:59:59 PM"))},t.prototype.validateMinMax=function(e,i,s){var r=e instanceof Date?e:this.getDateObject(e);return u(this.checkDateValue(r))?+this.createDateObj(this.getFormattedValue(this.initMin))>+this.createDateObj(this.getFormattedValue(this.initMax))&&this.disableTimeIcon():e=this.strictOperation(this.initMin,this.initMax,e,r),this.strictMode&&(e=this.valueIsDisable(e)?e:null),this.checkErrorState(e),e},t.prototype.valueIsDisable=function(e){if(!u(this.disableItemCollection)&&this.disableItemCollection.length>0){if(this.disableItemCollection.length===this.timeCollections.length)return!1;for(var i=e instanceof Date?this.objToString(e):e,s=0;s<this.disableItemCollection.length;s++)if(i===this.disableItemCollection[s])return!1}return!0},t.prototype.validateState=function(e){if(!this.strictMode)if(this.valueIsDisable(e)){var i=typeof e=="string"?this.setCurrentDate(this.getDateObject(e)):this.setCurrentDate(this.getDateObject(e)),s=this.setCurrentDate(this.getDateObject(this.initMax)),r=this.setCurrentDate(this.getDateObject(this.initMin));if(u(this.checkDateValue(i))){if(+s<+r||this.inputElement.value!=="")return!1}else if(+i>+s||+i<+r)return!1}else return!1;return!0},t.prototype.strictOperation=function(e,i,s,r){var n=this.createDateObj(this.getFormattedValue(i)),o=this.createDateObj(this.getFormattedValue(e)),l=this.createDateObj(this.getFormattedValue(r));if(this.strictMode){if(+o>+n)return this.disableTimeIcon(),this.initValue=this.getDateObject(n),this.updateInputValue(this.getValue(this.initValue)),this.enableMask&&this.createMask(),this.inputElement.value;if(+o>=+l)return this.getDateObject(o);if(+l>=+n||+o==+n)return this.getDateObject(n)}else if(+o>+n&&(this.disableTimeIcon(),!isNaN(+this.createDateObj(s))))return s;return s},t.prototype.bindEvents=function(){v.add(this.inputWrapper.buttons[0],"mousedown",this.popupHandler,this),v.add(this.inputElement,"blur",this.inputBlurHandler,this),v.add(this.inputElement,"focus",this.inputFocusHandler,this),v.add(this.inputElement,"change",this.inputChangeHandler,this),v.add(this.inputElement,"input",this.inputEventHandler,this),this.enableMask&&(v.add(this.inputElement,"keydown",this.keydownHandler,this),v.add(this.inputElement,"keyup",this.keyupHandler,this)),this.showClearButton&&this.inputWrapper.clearButton&&v.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this),this.formElement&&v.add(this.formElement,"reset",this.formResetHandler,this),E.isDevice||(this.keyConfigure=$(this.keyConfigure,this.keyConfigs),this.inputEvent=new Gt(this.inputWrapper.container,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.inputElement&&(this.showClearButton||this.enableMask)&&v.add(this.inputElement,"mousedown",this.mouseDownHandler,this))},t.prototype.keydownHandler=function(e){switch(e.code){case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&this.notify("keyDownHandler",{module:"MaskedDateTime",e});break}},t.prototype.keyupHandler=function(e){(e.code==="Backspace"||e.code==="Delete")&&this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide")},t.prototype.formResetHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value"),i=this.checkDateValue(this.inputEleValue);this.element.tagName==="EJS-TIMEPICKER"&&(i=null,e="",this.inputElement.setAttribute("value","")),this.setProperties({value:i},!0),this.prevDate=this.value,this.valueWithMinutes=this.value,this.initValue=this.value,this.inputElement&&(this.updateInputValue(e),this.enableMask&&(e||this.updateInputValue(this.maskedDateValue),this.createMask()),this.checkErrorState(e),this.prevValue=this.inputElement.value)}},t.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},t.prototype.inputEventHandler=function(){this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.unBindEvents=function(){this.inputWrapper&&v.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.popupHandler),v.remove(this.inputElement,"blur",this.inputBlurHandler),v.remove(this.inputElement,"focus",this.inputFocusHandler),v.remove(this.inputElement,"change",this.inputChangeHandler),v.remove(this.inputElement,"input",this.inputEventHandler),this.enableMask&&v.remove(this.inputElement,"keyup",this.keyupHandler),this.inputEvent&&this.inputEvent.destroy(),v.remove(this.inputElement,"mousedown touchstart",this.mouseDownHandler),this.showClearButton&&!u(this.inputWrapper)&&!u(this.inputWrapper.clearButton)&&v.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.clearHandler),this.formElement&&v.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&v.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this)},t.prototype.raiseClearedEvent=function(e){var i={event:e};this.trigger("cleared",i)},t.prototype.clearHandler=function(e){if(this.enabled&&(e.preventDefault(),u(this.value)?(this.resetState(),this.raiseClearedEvent(e)):this.clear(e),this.popupWrapper&&(this.popupWrapper.scrollTop=0),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),M(this.element,"form"))){var i=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),i.dispatchEvent(s)}},t.prototype.clear=function(e){this.setProperties({value:null},!0),this.initValue=null,this.resetState(),this.raiseClearedEvent(e),this.changeEvent(e)},t.prototype.setZIndex=function(){this.popupObj&&(this.popupObj.zIndex=this.zIndex,this.popupObj.dataBind())},t.prototype.checkAttributes=function(e){for(var i=e?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["step","disabled","readonly","style","name","value","min","max","placeholder"],s,r=0,n=i;r<n.length;r++){var o=n[r];if(!u(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(u(this.timeOptions)||this.timeOptions.enabled===void 0||e){var l=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true");this.setProperties({enabled:l},!e)}break;case"style":this.inputStyle=this.inputElement.getAttribute(o);break;case"readonly":if(u(this.timeOptions)||this.timeOptions.readonly===void 0||e){var h=this.inputElement.getAttribute(o)==="readonly"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:h},!e)}break;case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"placeholder":(u(this.timeOptions)||this.timeOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"min":(u(this.timeOptions)||this.timeOptions.min===void 0||e)&&(s=new Date(this.inputElement.getAttribute(o)),u(this.checkDateValue(s))||this.setProperties({min:s},!e));break;case"max":(u(this.timeOptions)||this.timeOptions.max===void 0||e)&&(s=new Date(this.inputElement.getAttribute(o)),u(this.checkDateValue(s))||this.setProperties({max:s},!e));break;case"value":(u(this.timeOptions)||this.timeOptions.value===void 0||e)&&(s=new Date(this.inputElement.getAttribute(o)),u(this.checkDateValue(s))||(this.initValue=s,this.updateInput(!1,this.initValue),this.setProperties({value:s},!e)));break}}},t.prototype.setCurrentDate=function(e){return u(this.checkDateValue(e))?null:new Date($p,Qp,Xp,e.getHours(),e.getMinutes(),e.getSeconds())},t.prototype.getTextFormat=function(){var e=0;if(this.cldrTimeFormat().split(" ")[0]==="a"||this.cldrTimeFormat().indexOf("a")===0)e=1;else if(this.cldrTimeFormat().indexOf("a")<0){for(var i=this.cldrTimeFormat().split(" "),s=0;s<i.length;s++)if(i[s].toLowerCase().indexOf("h")>=0){e=s;break}}return e},t.prototype.updateValue=function(e,i){var s;if(this.isNullOrEmpty(e))this.resetState();else if(s=this.checkValue(e),this.strictMode){var r=s===null&&e.trim().length>0?this.previousState(this.prevDate):this.inputElement.value;this.updateInputValue(r),this.enableMask&&(r||this.updateInputValue(this.maskedDateValue),u(s)&&e!==this.maskedDateValue&&this.createMask(),u(s)&&e===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue))}this.checkValueChange(i,typeof e!="string")},t.prototype.previousState=function(e){for(var i=this.getDateObject(e),s=0;s<this.timeCollections.length;s++)if(+i===this.timeCollections[s]){this.activeIndex=s,this.selectedElement=this.liCollections[s],this.valueWithMinutes=new Date(this.timeCollections[s]);break}return this.getValue(e)},t.prototype.resetState=function(){this.removeSelection(),W.setValue("",this.inputElement,this.floatLabelType,!1),this.valueWithMinutes=this.activeIndex=null,this.strictMode||this.checkErrorState(null)},t.prototype.objToString=function(e){return u(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.checkValue=function(e){if(!this.isNullOrEmpty(e)){var i=e instanceof Date?e:this.getDateObject(e);return this.validateValue(i,e)}return this.resetState(),this.valueWithMinutes=null},t.prototype.validateValue=function(e,i){var s,r=this.validateMinMax(i,this.min,this.max),n=this.getDateObject(r);if(this.getFormattedValue(n)!==this.getFormattedValue(this.value)?(this.valueWithMinutes=u(n)?null:n,s=this.objToString(this.valueWithMinutes)):(this.strictMode&&(e=n),this.valueWithMinutes=this.checkDateValue(e),s=this.objToString(this.valueWithMinutes)),!this.strictMode&&u(s)){var o=r.trim().length>0?r:"";this.updateInputValue(o),this.enableMask&&(o||this.updateInputValue(this.maskedDateValue))}else this.updateInputValue(s),this.enableMask&&(s===""&&this.updateInputValue(this.maskedDateValue),u(s)&&i!==this.maskedDateValue&&this.createMask(),u(s)&&i===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue));return s},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.findNextElement=function(e){var i=this.inputElement.value,s=u(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),r=null,n=this.liCollections.length,o=this.timeCollections;if(!u(this.checkDateValue(s))||!u(this.activeIndex)){if(e.action==="home"){var l=this.validLiElement(0);r=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l}else if(e.action==="end"){var l=this.validLiElement(o.length-1,!0);r=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l}else if(e.action==="down"){for(var h=0;h<n;h++)if(+s<this.timeCollections[h]){var l=this.validLiElement(h);r=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}else if(h===n-1){var l=this.validLiElement(0);r=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}}else for(var h=n-1;h>=0;h--)if(+s>this.timeCollections[h]){var l=this.validLiElement(h,!0);r=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}else if(h===0){var l=this.validLiElement(n-1);r=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(u(r)?null:new Date(r))}else this.selectNextItem(e)},t.prototype.selectNextItem=function(e){var i=this.validLiElement(0,e.action!=="down");this.activeIndex=i,this.selectedElement=this.liCollections[i],this.elementValue(new Date(this.timeCollections[i]))},t.prototype.elementValue=function(e){u(this.checkDateValue(e))||this.checkValue(e)},t.prototype.validLiElement=function(e,i){var s=null,r=u(this.popupWrapper)?this.liCollections:this.popupWrapper.querySelectorAll("."+$i),n=!0;if(r.length)if(i)for(var o=e;o>=0;o--)if(r[o].classList.contains(xi))o===0&&n&&(e=o=r.length,n=!1);else{s=o;break}else for(var o=e;o<=r.length-1;o++)if(r[o].classList.contains(xi))o===r.length-1&&n&&(e=o=-1,n=!1);else{s=o;break}return s},t.prototype.keyHandler=function(e){if(!(u(this.step)||this.step<=0||!u(this.inputWrapper)&&this.inputWrapper.buttons[0].classList.contains(xi))){var i=this.timeCollections.length;if(u(this.getActiveElement())||this.getActiveElement().length===0)if(this.liCollections.length>0)if(u(this.value)&&u(this.activeIndex)){var s=this.validLiElement(0,e.action!=="down");this.activeIndex=s,this.selectedElement=this.liCollections[s],this.elementValue(new Date(this.timeCollections[s]))}else this.findNextElement(e);else this.findNextElement(e);else{var r=void 0;if(e.keyCode>=37&&e.keyCode<=40){var s=e.keyCode===40||e.keyCode===39?++this.activeIndex:--this.activeIndex;this.activeIndex=s=this.activeIndex===i?0:this.activeIndex,this.activeIndex=s=this.activeIndex<0?i-1:this.activeIndex,this.activeIndex=s=this.validLiElement(this.activeIndex,!(e.keyCode===40||e.keyCode===39)),r=u(this.timeCollections[s])?this.timeCollections[0]:this.timeCollections[s]}else if(e.action==="home"){var s=this.validLiElement(0);this.activeIndex=s,r=this.timeCollections[s]}else if(e.action==="end"){var s=this.validLiElement(i-1,!0);this.activeIndex=s,r=this.timeCollections[s]}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(new Date(r))}this.isNavigate=!0,this.setHover(this.selectedElement,cl),this.setActiveDescendant(),this.enableMask&&this.selectInputText(),this.isPopupOpen()&&this.selectedElement!==null&&(!e||e.type!=="click")&&this.setScrollPosition()}},t.prototype.getCultureTimeObject=function(e,i){return H("main."+i+".dates.calendars.gregorian.timeFormats.short",e)},t.prototype.getCultureDateObject=function(e,i){return H("main."+i+".dates.calendars.gregorian.dateFormats.short",e)},t.prototype.wireListEvents=function(){v.add(this.listWrapper,"click",this.onMouseClick,this),E.isDevice||(v.add(this.listWrapper,"mouseover",this.onMouseOver,this),v.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireListEvents=function(){this.listWrapper&&(v.remove(this.listWrapper,"click",this.onMouseClick),E.isDevice||(v.remove(this.listWrapper,"mouseover",this.onMouseOver),v.remove(this.listWrapper,"mouseout",this.onMouseLeave)))},t.prototype.valueProcess=function(e,i){var s=u(this.checkDateValue(i))?null:i;+this.prevDate!=+s&&(this.initValue=s,this.changeEvent(e))},t.prototype.changeEvent=function(e){this.addSelection(),this.updateInput(!0,this.initValue);var i={event:e||null,value:this.value,text:this.inputElement.value,isInteracted:!u(e),element:this.element};i.value=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.prevDate=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",i),this.invalidValueString=null,this.checkErrorState(this.value)},t.prototype.updateInput=function(e,i){e&&(this.prevValue=this.getValue(this.prevDate)),this.prevDate=this.valueWithMinutes=i,(typeof i!="number"||(this.value&&+new Date(+this.value).setMilliseconds(0))!==+i)&&(this.setProperties({value:i},!0),this.enableMask&&this.value&&this.createMask()),!this.strictMode&&u(this.value)&&this.invalidValueString&&(this.checkErrorState(this.invalidValueString),this.updateInputValue(this.invalidValueString)),this.clearIconState()},t.prototype.setActiveDescendant=function(){!u(this.selectedElement)&&this.value?G(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.removeSelection=function(){if(this.removeHover(pl),!u(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+_s);e.length&&(R(e,_s),e[0].removeAttribute("aria-selected"))}},t.prototype.removeHover=function(e){var i=this.getHoverItem(e);i&&i.length&&(R(i,e),e===cl&&i[0].removeAttribute("aria-selected"))},t.prototype.getHoverItem=function(e){var i;return u(this.popupWrapper)||(i=this.popupWrapper.querySelectorAll("."+e)),i},t.prototype.setActiveClass=function(){if(!u(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+$i);if(e.length){for(var i=0;i<e.length;i++)if(this.timeCollections[i]===+this.getDateObject(this.valueWithMinutes)){e[i].setAttribute("aria-selected","true"),this.selectedElement=e[i],this.activeIndex=i;break}}}},t.prototype.addSelection=function(){this.selectedElement=null,this.removeSelection(),this.setActiveClass(),u(this.selectedElement)||(x([this.selectedElement],_s),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.isValidLI=function(e){return e&&e.classList.contains($i)&&!e.classList.contains(xi)},t.prototype.createDateObj=function(e){var i=null,s=this.globalize.formatDate(new Date,{format:i,skeleton:"short",type:"date"}),r=null;return typeof e=="string"&&!(this.enableMask&&this.maskedDateValue&&this.inputElement.value===this.maskedDateValue&&!this.value)?e.toUpperCase().indexOf("AM")>-1||e.toUpperCase().indexOf("PM")>-1?(s=this.defaultCulture.formatDate(new Date,{format:i,skeleton:"short",type:"date"}),r=isNaN(+new Date(s+" "+e))?null:new Date(new Date(s+" "+e).setMilliseconds(0)),u(r)&&(r=this.timeParse(s,e))):r=this.timeParse(s,e):e instanceof Date&&(r=e),r},t.prototype.timeParse=function(e,i){var s;return s=this.globalize.parseDate(this.getAmPmValue(e+" "+i),{format:this.cldrDateFormat()+" "+this.cldrTimeFormat(),type:"datetime"}),s=u(s)?this.globalize.parseDate(this.getAmPmValue(e+" "+i),{format:this.cldrDateFormat()+" "+this.dateToNumeric(),type:"datetime"}):s,s=u(s)?s:new Date(s.setMilliseconds(0)),s},t.prototype.createListItems=function(){var e=this;this.listWrapper=this.createElement("div",{className:IC,attrs:{tabindex:"-1"}});var i,s=this.step*6e4,r=[];this.timeCollections=[],this.disableItemCollection=[],i=+this.getDateObject(this.initMin).setMilliseconds(0);for(var n=+this.getDateObject(this.initMax).setMilliseconds(0);n>=i;)this.timeCollections.push(i),r.push(this.globalize.formatDate(new Date(i),{format:this.cldrTimeFormat(),type:"time"})),i+=s;var o={itemCreated:function(l){var h={element:l.item,text:l.text,value:e.getDateObject(l.text),isDisabled:!1};e.trigger("itemRender",h,function(p){p.isDisabled&&p.element.classList.add(xi),p.element.classList.contains(xi)&&e.disableItemCollection.push(p.element.getAttribute("data-value"))})}};this.listTag=St.createList(this.createElement,r,o,!0),G(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options",tabindex:"0"}),Ie([this.listTag],this.listWrapper)},t.prototype.documentClickHandler=function(e){var i=e.target;!u(this.popupObj)&&!u(this.inputWrapper)&&(this.inputWrapper.container.contains(i)&&e.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(i))&&e.type!=="touchstart"&&e.preventDefault(),!M(i,'[id="'+this.popupObj.element.id+'"]')&&i!==this.inputElement&&i!==(this.inputWrapper&&this.inputWrapper.buttons[0])&&i!==(this.inputWrapper&&this.inputWrapper.clearButton)&&i!==(this.inputWrapper&&this.inputWrapper.container)?this.isPopupOpen()&&(this.hide(),i.classList.contains("e-dlg-overlay")?e.preventDefault():this.focusOut()):i!==this.inputElement&&(E.isDevice||(this.isPreventBlur=(E.isIE||E.info.name==="edge")&&document.activeElement===this.inputElement&&i===this.popupWrapper))},t.prototype.setEnableRtl=function(){W.setEnableRtl(this.enableRtl,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){W.setEnabled(this.enabled,this.inputElement,this.floatLabelType),this.enabled?(R([this.inputWrapper.container],xi),G(this.inputElement,{"aria-disabled":"false"}),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.hide(),x([this.inputWrapper.container],xi),G(this.inputElement,{"aria-disabled":"true"}),this.inputElement.tabIndex=-1)},t.prototype.getProperty=function(e,i){i==="min"?(this.initMin=this.checkDateValue(new Date(this.checkInValue(e.min))),this.setProperties({min:this.initMin},!0)):(this.initMax=this.checkDateValue(new Date(this.checkInValue(e.max))),this.setProperties({max:this.initMax},!0)),this.inputElement.value===""?this.validateMinMax(this.value,this.min,this.max):this.checkValue(this.inputElement.value),this.checkValueChange(null,!1)},t.prototype.inputBlurHandler=function(e){if(this.enabled){if(this.isPreventBlur&&this.isPopupOpen()){this.inputElement.focus();return}this.closePopup(0,e),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),R([this.inputWrapper.container],[dl]),this.getText()!==this.inputElement.value?this.updateValue(this.inputElement.value,e):this.inputElement.value.trim().length===0&&this.resetState(),this.cursorDetails=null,this.isNavigate=!1,this.inputElement.value===""&&(this.invalidValueString=null);var i={model:this};this.trigger("blur",i)}},t.prototype.focusOut=function(){if(document.activeElement===this.inputElement){this.inputElement.blur(),R([this.inputWrapper.container],[dl]);var e={model:this};this.trigger("blur",e)}},t.prototype.isPopupOpen=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+ca))},t.prototype.inputFocusHandler=function(){if(this.enabled){var e={model:this};!this.readonly&&!E.isDevice&&!this.enableMask&&this.selectInputText(),this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide"),this.trigger("focus",e),this.clearIconState(),this.openOnFocus&&this.show()}},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.hide=function(){this.closePopup(100,null),this.clearIconState()},t.prototype.show=function(e){var i=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupWrapper)){this.popupCreation(),E.isDevice&&this.listWrapper&&(this.modal=this.createElement("div"),this.modal.className=""+ca+" e-time-modal",document.body.className+=" "+ec,document.body.appendChild(this.modal)),E.isDevice&&(this.mobileTimePopupWrap=this.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobileTimePopupWrap)),this.openPopupEventArgs={popup:this.popupObj||null,cancel:!1,event:e||null,name:"open",appendTo:E.isDevice?this.mobileTimePopupWrap:document.body};var s=this.openPopupEventArgs;this.trigger("open",s,function(r){if(i.openPopupEventArgs=r,!i.openPopupEventArgs.cancel&&!i.inputWrapper.buttons[0].classList.contains(xi)){i.openPopupEventArgs.appendTo.appendChild(i.popupWrapper),i.popupAlignment(i.openPopupEventArgs),i.setScrollPosition(),E.isDevice||i.inputElement.focus();var n={name:"FadeIn",duration:Zp};if(i.popupObj.refreshPosition(i.anchor),i.zIndex===1e3?i.popupObj.show(new It(n),i.element):i.popupObj.show(new It(n),null),i.setActiveDescendant(),G(i.inputElement,{"aria-expanded":"true"}),G(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),G(i.inputElement,{"aria-controls":i.inputElement.id}),x([i.inputWrapper.container],dl),v.add(document,"mousedown touchstart",i.documentClickHandler,i),i.setOverlayIndex(i.mobileTimePopupWrap,i.popupObj.element,i.modal,E.isDevice),E.isDevice){var o=i.createElement("div",{className:"e-dlg-overlay"});o.style.zIndex=(i.zIndex-1).toString(),i.mobileTimePopupWrap.appendChild(o)}}else i.popupObj.destroy(),i.popupWrapper=i.listTag=void 0,i.liCollections=i.timeCollections=i.disableItemCollection=[],i.popupObj=null})}},t.prototype.setOverlayIndex=function(e,i,s,r){if(r&&!u(i)&&!u(s)&&!u(e)){var n=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;s.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}},t.prototype.formatValues=function(e){var i;return typeof e=="number"?i=ve(e):typeof e=="string"&&(i=e.match(/px|%|em/)||isNaN(parseInt(e,10))?e:ve(e)),i},t.prototype.popupAlignment=function(e){if(e.popup.position.X=this.formatValues(e.popup.position.X),e.popup.position.Y=this.formatValues(e.popup.position.Y),(!isNaN(parseFloat(e.popup.position.X))||!isNaN(parseFloat(e.popup.position.Y)))&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.targetType="container"),isNaN(parseFloat(e.popup.position.X))||(this.popupObj.offsetX=parseFloat(e.popup.position.X)),isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.offsetY=parseFloat(e.popup.position.Y)),E.isDevice)e.popup.position.X==="center"&&e.popup.position.Y==="center"&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.offsetY=0,this.popupObj.targetType="container",this.popupObj.collision={X:"fit",Y:"fit"});else{switch(e.popup.position.X){case"left":break;case"right":e.popup.offsetX=this.containerStyle.width;break;case"center":e.popup.offsetX=-(this.containerStyle.width/2);break}switch(e.popup.position.Y){case"top":break;case"bottom":break;case"center":e.popup.offsetY=-(this.containerStyle.height/2);break}e.popup.position.X==="center"&&e.popup.position.Y==="center"&&(this.popupObj.relateTo=this.inputWrapper.container,this.anchor=this.inputElement,this.popupObj.targetType="relative")}},t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.getModuleName=function(){return"timepicker"},t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"placeholder":W.setPlaceholder(e.placeholder,this.inputElement);break;case"readonly":W.setReadonly(this.readonly,this.inputElement,this.floatLabelType),this.readonly&&this.hide(),this.setTimeAllowEdit();break;case"enabled":this.setProperties({enabled:e.enabled},!0),this.setEnable();break;case"allowEdit":this.setTimeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"min":case"max":this.getProperty(e,n);break;case"showClearButton":W.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"locale":this.setProperties({locale:e.locale},!0),this.globalize=new ft(this.locale),this.l10n.setLocale(this.locale),this.timeOptions&&this.timeOptions.placeholder==null&&this.updatePlaceHolder(),this.setValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"width":At(this.inputWrapper.container,{width:this.setWidth(e.width)}),this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),W.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"format":this.setProperties({format:e.format},!0),this.checkTimeFormat(),this.setValue(this.value),this.enableMask&&(this.createMask(),this.value||this.updateInputValue(this.maskedDateValue));break;case"value":this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.invalidValueString?(this.updateInputValue(this.invalidValueString),this.checkErrorState(this.invalidValueString)):(typeof e.value=="string"?(this.setProperties({value:this.checkDateValue(new Date(e.value))},!0),e.value=this.value):(e.value&&+new Date(+e.value).setMilliseconds(0))!==+this.value&&(e.value=this.checkDateValue(new Date(""+e.value))),this.initValue=e.value,e.value=this.compareFormatChange(this.checkValue(e.value))),this.enableMask&&u(e.value)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.checkValueChange(null,!1),this.isPopupOpen()&&this.setScrollPosition(),this.isAngular&&this.preventChange&&(this.preventChange=!1),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"floatLabelType":this.floatLabelType=e.floatLabelType,W.removeFloating(this.inputWrapper),W.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"strictMode":this.invalidValueString=null,e.strictMode&&this.checkErrorState(null),this.setProperties({strictMode:e.strictMode},!0),this.checkValue(this.inputElement.value),this.checkValueChange(null,!1);break;case"scrollTo":this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))?(this.popupWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue)):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break}}},t.prototype.checkInValue=function(e){return e instanceof Date?e.toUTCString():""+e},Re([m(null)],t.prototype,"width",void 0),Re([m(null)],t.prototype,"cssClass",void 0),Re([m(!1)],t.prototype,"strictMode",void 0),Re([m(null)],t.prototype,"keyConfigs",void 0),Re([m(null)],t.prototype,"format",void 0),Re([m(!0)],t.prototype,"enabled",void 0),Re([m(!1)],t.prototype,"fullScreenMode",void 0),Re([m(!1)],t.prototype,"readonly",void 0),Re([m({})],t.prototype,"htmlAttributes",void 0),Re([m("Never")],t.prototype,"floatLabelType",void 0),Re([m(null)],t.prototype,"placeholder",void 0),Re([m(1e3)],t.prototype,"zIndex",void 0),Re([m(!1)],t.prototype,"enablePersistence",void 0),Re([m(!0)],t.prototype,"showClearButton",void 0),Re([m(30)],t.prototype,"step",void 0),Re([m(null)],t.prototype,"scrollTo",void 0),Re([m(null)],t.prototype,"value",void 0),Re([m(null)],t.prototype,"min",void 0),Re([m(null)],t.prototype,"max",void 0),Re([m(!0)],t.prototype,"allowEdit",void 0),Re([m(!1)],t.prototype,"openOnFocus",void 0),Re([m(!1)],t.prototype,"enableMask",void 0),Re([m({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Re([m(null)],t.prototype,"serverTimezoneOffset",void 0),Re([O()],t.prototype,"change",void 0),Re([O()],t.prototype,"created",void 0),Re([O()],t.prototype,"destroyed",void 0),Re([O()],t.prototype,"open",void 0),Re([O()],t.prototype,"itemRender",void 0),Re([O()],t.prototype,"close",void 0),Re([O()],t.prototype,"cleared",void 0),Re([O()],t.prototype,"blur",void 0),Re([O()],t.prototype,"focus",void 0),t=Re([pt],t),t})(Vt);var AC=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),Oe=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},DC="e-date-wrapper",kC="e-datepicker",TC="e-datetime-wrapper",LC=new Date().getDate(),RC=new Date().getMonth(),MC=new Date().getFullYear(),FC=new Date().getHours(),OC=new Date().getMinutes(),BC=new Date().getSeconds(),PC=new Date().getMilliseconds(),sn="e-datetimepicker",ic="e-datetimepopup-wrapper",NC="e-input-group-icon",sc="e-popup",HC="e-time-icon",rn="e-input-focus",rc="250px",nc="e-icon-anim",gl="e-disabled",ac="e-error",VC="e-content",zC="e-navigation",ms="e-active",ml="e-hover",qC="e-icons",da=2,vs="e-list-item",oc=100,lc="e-time-overflow",Od=(function(a){AC(t,a);function t(e,i){var s=a.call(this,e,i)||this;return s.valueWithMinutes=null,s.scrollInvoked=!1,s.moduleName=s.getModuleName(),s.formatRegex=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yyy|yy|y|'[^']*'|'[^']*'/g,s.dateFormatString="",s.dateTimeOptions=e,s}return t.prototype.focusHandler=function(){this.enabled&&x([this.inputWrapper.container],rn)},t.prototype.focusIn=function(){a.prototype.focusIn.call(this)},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),R([this.inputWrapper.container],[rn]))},t.prototype.blurHandler=function(e){if(this.enabled){if(this.isTimePopupOpen()&&this.isPreventBlur){this.inputElement.focus();return}R([this.inputWrapper.container],rn);var i={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",i)}},t.prototype.destroy=function(){this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.popupObject&&this.popupObject.element.classList.contains(sc)&&(this.popupObject.destroy(),Z(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],u(this.rippleFn)||this.rippleFn());var e={"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"};this.inputElement&&W.removeAttributes(e,this.inputElement),this.isCalendar()&&(this.popupWrapper&&Z(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),this.liCollections=null,this.rippleFn=null,this.selectedElement=null,this.listTag=null,this.timeIcon=null,this.popupObject=null,this.preventArgs=null,this.keyboardModule=null,W.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),a.prototype.destroy.call(this)},t.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,typeof this.min=="string"&&(this.min=this.checkDateValue(new Date(this.min))),typeof this.max=="string"&&(this.max=this.checkDateValue(new Date(this.max))),typeof this.minTime=="string"&&(this.minTime=this.checkDateValue(new Date(this.minTime))),typeof this.maxTime=="string"&&(this.maxTime=this.checkDateValue(new Date(this.maxTime))),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),a.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1);var e={placeholder:this.placeholder};this.l10n=new zt("datetimepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),a.prototype.render.call(this),this.createInputElement(),a.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(!0),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)&&W.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),this.element.tagName==="EJS-DATETIMEPICKER"&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.floatLabelType!=="Never"&&W.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},t.prototype.setValue=function(e){if(e===void 0&&(e=!1),this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var i=this.validateMinMaxRange(this.initValue);W.setValue(this.getFormattedValue(i),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:i},!0)}else u(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,a.prototype.updateInput.call(this,e)},t.prototype.validateMinMaxRange=function(e){var i=e;return this.isDateObject(e)?i=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(i),i},t.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min||!this.isValidTime(e))&&(this.isValidState=!1),this.checkErrorState()},t.prototype.checkErrorState=function(){this.isValidState?R([this.inputWrapper.container],ac):x([this.inputWrapper.container],ac),G(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.isValidTime=function(e){if(e!=null&&(this.minTime||this.maxTime)){var i=void 0,s=void 0,r=void 0,n=void 0,o=e.getHours()*36e5+e.getMinutes()*6e4+e.getSeconds()*1e3+e.getMilliseconds();if(this.minTime&&(i=this.minTime.getHours()*36e5+this.minTime.getMinutes()*6e4+this.minTime.getSeconds()*1e3+this.minTime.getMilliseconds()),this.maxTime&&(s=this.maxTime.getHours()*36e5+this.maxTime.getMinutes()*6e4+this.maxTime.getSeconds()*1e3+this.maxTime.getMilliseconds()),this.min&&+e.getDate()==+this.min.getDate()&&+e.getMonth()==+this.min.getMonth()&&+e.getFullYear()==+this.min.getFullYear()&&(n=this.min.getHours()*36e5+this.min.getMinutes()*6e4+this.min.getSeconds()*1e3+this.min.getMilliseconds(),i=i<n?n:i),this.max&&+e.getDate()==+this.max.getDate()&&+e.getMonth()==+this.max.getMonth()&&+this.max.getFullYear()==+this.max.getFullYear()&&(r=this.max.getHours()*36e5+this.max.getMinutes()*6e4+this.max.getSeconds()*1e3+this.max.getMilliseconds(),s=s>r?r:s),this.strictMode){var l=void 0;return i&&o<i?(l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),this.minTime.getHours(),this.minTime.getMinutes(),this.minTime.getSeconds(),this.minTime.getMilliseconds()),this.setProperties({value:l},!0),this.changedArgs={value:this.value}):s&&o>s&&(l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),this.maxTime.getHours(),this.maxTime.getMinutes(),this.maxTime.getSeconds(),this.maxTime.getMilliseconds()),this.setProperties({value:l},!0),this.changedArgs={value:this.value}),!0}else return!(i&&o<i||s&&o>s)}return!0},t.prototype.validateValue=function(e){var i=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),i=this.max):+e<+this.min?i=this.min:+e>+this.max&&(i=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),i=e),i},t.prototype.disablePopupButton=function(e){e?(x([this.inputWrapper.buttons[0],this.timeIcon],gl),this.hide()):R([this.inputWrapper.buttons[0],this.timeIcon],gl)},t.prototype.getFormattedValue=function(e){var i;return u(e)?null:(this.calendarMode==="Gregorian"?i={format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:i={format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,i))},t.prototype.isDateObject=function(e){return!u(e)&&!isNaN(+e)},t.prototype.createInputElement=function(){R([this.inputElement],kC),R([this.inputWrapper.container],DC),x([this.inputWrapper.container],TC),x([this.inputElement],sn),this.renderTimeIcon()},t.prototype.renderTimeIcon=function(){this.timeIcon=W.appendSpan(NC+" "+HC+" "+qC,this.inputWrapper.container)},t.prototype.bindInputEvents=function(){v.add(this.timeIcon,"mousedown",this.timeHandler,this),v.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),v.add(this.inputElement,"blur",this.blurHandler,this),v.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new Gt(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.unBindInputEvents=function(){v.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),v.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(v.remove(this.inputElement,"blur",this.blurHandler),v.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},t.prototype.cldrTimeFormat=function(){var e;return this.isNullOrEmpty(this.timeFormat)?this.locale==="en"||this.locale==="en-US"?e=H("timeFormats.short",Cs()):e=this.getCultureTimeObject(Ss,""+this.locale):e=this.timeFormat,e},t.prototype.cldrDateTimeFormat=function(){var e,i=new ft(this.locale),s=i.getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?e=s+" "+this.getCldrFormat("time"):e=this.formatString,e},t.prototype.getCldrFormat=function(e){var i;return this.locale==="en"||this.locale==="en-US"?i=H("timeFormats.short",Cs()):i=this.getCultureTimeObject(Ss,""+this.locale),i},t.prototype.isNullOrEmpty=function(e){return!!(u(e)||typeof e=="string"&&e.trim()==="")},t.prototype.getCultureTimeObject=function(e,i){return this.calendarMode==="Gregorian"?H("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",e):H("main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},t.prototype.timeHandler=function(e){this.enabled&&(this.isIconClicked=!0,E.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&a.prototype.hide.call(this,e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),x([this.inputWrapper.container],[rn]))),this.isIconClicked=!1)},t.prototype.dateHandler=function(e){this.enabled&&(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),u(this.popupWrapper)||this.popupCreation("date",e)))},t.prototype.show=function(e,i){this.enabled&&this.readonly||!this.enabled||(e==="time"&&!this.dateTimeWrapper?(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)):this.popupObj||(this.isTimePopupOpen()&&this.hide(i),a.prototype.show.call(this),this.popupCreation("date",i)))},t.prototype.toggle=function(e){this.isDatePopupOpen()?(a.prototype.hide.call(this,e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),a.prototype.show.call(this,null,e),this.popupCreation("date",null)):this.show(null,e)},t.prototype.listCreation=function(){var e;this.calendarMode==="Gregorian"?(this.cldrDateTimeFormat().replace(this.formatRegex,this.TimePopupFormat()),this.dateFormatString===""&&(this.dateFormatString=this.cldrDateTimeFormat()),e=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),{format:this.dateFormatString,type:"datetime"})):e=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var i=u(this.value)?this.inputElement.value!==""?e:new Date:this.value;this.valueWithMinutes=i,this.listWrapper=pe("div",{className:VC,attrs:{tabindex:"0"}});var s=this.startTime(i),r=this.endTime(i),n=ih.createListItems(this.createElement,s,r,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=n.collection,this.listTag=n.list,G(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),Ie([n.list],this.listWrapper),this.wireTimeListEvents();var o={duration:300,selector:"."+vs};this.rippleFn=ts(this.listWrapper,o),this.liCollections=this.listWrapper.querySelectorAll("."+vs)},t.prototype.popupCreation=function(e,i){if(E.isDevice&&this.element.setAttribute("readonly","readonly"),e==="date")!this.readonly&&this.popupWrapper&&(x([this.popupWrapper],ic),G(this.popupWrapper,{id:this.element.id+"_options"}));else if(!this.readonly){var s=pe("div",{className:sn+" "+sc,attrs:{id:this.element.id+"_timepopup"}});s.style.cssText="visibility: hidden; display: block;",this.dateTimeWrapper=s,u(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!u(this.step)&&this.step>0&&(this.listCreation(),Ie([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(i),(!E.isDevice||E.isDevice&&!this.fullScreenMode)&&this.popupObject.refreshPosition(this.inputElement),E.isDevice&&(this.modelWrapper.style.zIndex=(this.popupObject.zIndex-1).toString(),this.fullScreenMode&&(this.dateTimeWrapper.style.left="0px"))}},t.prototype.openPopup=function(e){var i=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null};var s=this.preventArgs;this.trigger("open",s,function(r){if(i.preventArgs=r,!i.preventArgs.cancel&&!i.readonly){var n={name:"FadeIn",duration:oc};i.zIndex===1e3?i.popupObject.show(new It(n),i.element):i.popupObject.show(new It(n),null),x([i.inputWrapper.container],[nc]),G(i.inputElement,{"aria-expanded":"true"}),G(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),G(i.inputElement,{"aria-controls":i.inputElement.id}),v.add(document,"mousedown touchstart",i.documentClickHandler,i)}})},t.prototype.documentClickHandler=function(e){var i=e.target;!u(this.popupObject)&&(this.inputWrapper.container.contains(i)&&e.type!=="mousedown"||this.popupObject.element&&this.popupObject.element.contains(i))&&e.type!=="touchstart"&&e.preventDefault(),!M(i,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))&&i!==this.inputElement&&i!==this.timeIcon&&!u(this.inputWrapper)&&i!==this.inputWrapper.container?this.isTimePopupOpen()&&(this.hide(e),i.classList.contains("e-dlg-overlay")?e.preventDefault():this.focusOut()):i!==this.inputElement&&(E.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(E.isIE||E.info.name==="edge")&&i===this.popupObject.element))},t.prototype.isTimePopupOpen=function(){return!!(this.dateTimeWrapper&&this.dateTimeWrapper.classList.contains(""+sn))},t.prototype.isDatePopupOpen=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+ic))},t.prototype.renderPopup=function(){var e=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),E.isDevice&&(this.timeModal=pe("div"),this.timeModal.className=""+sn+" e-time-modal",document.body.className+=" "+lc,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),E.isDevice){this.modelWrapper=pe("div",{className:"e-datetime-mob-popup-wrap"}),this.modelWrapper.appendChild(this.dateTimeWrapper);var i=pe("div",{className:"e-dlg-overlay"});i.style.zIndex=(this.zIndex-1).toString(),this.modelWrapper.appendChild(i),document.body.appendChild(this.modelWrapper)}var s=4;if(this.popupObject=new as(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:E.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:E.isDevice?document.body:this.inputWrapper.container,position:E.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:s,open:function(){e.dateTimeWrapper.style.visibility="visible",x([e.timeIcon],ms),E.isDevice||(e.timekeyConfigure=$(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new Gt(e.inputWrapper.container,{keyAction:e.timeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){R([e.timeIcon],ms),e.unWireTimeListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),ce(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.modelWrapper&&ce(e.modelWrapper),e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){E.isDevice||e.hide()}}),E.isDevice&&this.fullScreenMode?(this.popupObject.element.style.maxHeight="100%",this.popupObject.element.style.width="100%"):this.popupObject.element.style.maxHeight=rc,E.isDevice&&this.fullScreenMode){var r=this.createElement("div",{className:"e-model-header"}),n=this.createElement("span",{className:"e-model-title"});n.textContent="Select time";var o=this.createElement("span",{className:"e-popup-close"});v.add(o,"mousedown touchstart",this.dateTimeCloseHandler,this),r.appendChild(o),r.appendChild(n),this.dateTimeWrapper.insertBefore(r,this.dateTimeWrapper.firstElementChild)}},t.prototype.dateTimeCloseHandler=function(e){this.hide()},t.prototype.setDimension=function(e){return typeof e=="number"?e=ve(e):typeof e=="string"?e=e:e="100%",e},t.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);if(e.indexOf("%")>-1){var i=this.containerStyle.width*parseFloat(e)/100;e=i.toString()+"px"}return e},t.prototype.wireTimeListEvents=function(){v.add(this.listWrapper,"click",this.onMouseClick,this),E.isDevice||(v.add(this.listWrapper,"mouseover",this.onMouseOver,this),v.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireTimeListEvents=function(){this.listWrapper&&(v.remove(this.listWrapper,"click",this.onMouseClick),v.remove(document,"mousedown touchstart",this.documentClickHandler),E.isDevice||(v.add(this.listWrapper,"mouseover",this.onMouseOver,this),v.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},t.prototype.onMouseOver=function(e){var i=M(e.target,"."+vs);this.setTimeHover(i,ml)},t.prototype.onMouseLeave=function(){this.removeTimeHover(ml)},t.prototype.setTimeHover=function(e,i){this.enabled&&this.isValidLI(e)&&!e.classList.contains(i)&&(this.removeTimeHover(i),x([e],i))},t.prototype.getPopupHeight=function(){var e=parseInt(rc,10),i=this.dateTimeWrapper.getBoundingClientRect().height;return E.isDevice&&this.fullScreenMode?i:i>e?e:i},t.prototype.changeEvent=function(e){a.prototype.changeEvent.call(this,e),(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},t.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!u(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},t.prototype.setTimeScrollPosition=function(){var e=this.selectedElement;u(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var i=this.getPopupHeight(),s=e.nextElementSibling,r=s?s.offsetTop:e.offsetTop,n=e.getBoundingClientRect().height;if(r+e.offsetTop>i)if(E.isDevice&&this.fullScreenMode){var o=this.dateTimeWrapper.querySelector(".e-content");o.scrollTop=s?r-(i/da+n/da):r}else this.dateTimeWrapper.scrollTop=s?r-(i/da+n/da):r;else this.dateTimeWrapper.scrollTop=0},t.prototype.setScrollTo=function(){var e,i=this.dateTimeWrapper.querySelectorAll("."+vs);if(i.length>=0){this.scrollInvoked=!0;var s=this.timeCollections[0],r=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=i[Math.round((r-s)/(this.step*6e4))]}else this.dateTimeWrapper.scrollTop=0;u(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.setInputValue=function(e){if(e==="date")this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var i=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));W.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},t.prototype.getFullDateTime=function(){var e=null;return this.isDateObject(this.valueWithMinutes)?e=this.combineDateTime(this.valueWithMinutes):e=this.previousDate,this.validateMinMaxRange(e)},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var i=this.previousDate.getDate(),s=this.previousDate.getMonth(),r=this.previousDate.getFullYear(),n=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return new Date(r,s,i,n,o,l)}else return this.previousDate},t.prototype.onMouseClick=function(e){var i=e.target,s=this.selectedElement=M(i,"."+vs);s&&s.classList.contains(vs)&&(this.timeValue=s.getAttribute("data-value"),this.hide(e)),this.setSelection(s,e)},t.prototype.setSelection=function(e,i){if(this.isValidLI(e)&&!e.classList.contains(ms)){this.selectedElement=e;var s=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=s,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),x([this.selectedElement],ms),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(i)}},t.prototype.setTimeActiveClass=function(){var e=u(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!u(e)){var i=e.querySelectorAll("."+vs);if(i.length){for(var s=0;s<i.length;s++)if(this.timeCollections[s]===+this.valueWithMinutes){i[s].setAttribute("aria-selected","true"),this.selectedElement=i[s],this.activeIndex=s,this.setTimeActiveDescendant();break}}}},t.prototype.setTimeActiveDescendant=function(){!u(this.selectedElement)&&this.value?G(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),u(this.selectedElement)||(x([this.selectedElement],ms),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.removeTimeSelection=function(){if(this.removeTimeHover(ml),!u(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll("."+ms);e.length&&(R(e,ms),e[0].removeAttribute("aria-selected"))}},t.prototype.removeTimeHover=function(e){var i=this.getTimeHoverItem(e);i&&i.length&&R(i,e)},t.prototype.getTimeHoverItem=function(e){var i=u(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper,s;return u(i)||(s=i.querySelectorAll("."+e)),s},t.prototype.isValidLI=function(e){return e&&e.classList.contains(vs)&&!e.classList.contains(gl)},t.prototype.calculateStartEnd=function(e,i,s){var r=e.getDate(),n=e.getMonth(),o=e.getFullYear(),l=e.getHours(),h=e.getMinutes(),p=e.getSeconds(),c=e.getMilliseconds();return i?s==="starttime"?new Date(o,n,r,0,0,0):new Date(o,n,r,23,59,59):new Date(o,n,r,l,h,p,c)},t.prototype.startTime=function(e){var i,s,r=this.min,n=this.max,o=e===null?new Date:e,l=!1,h;return this.minTime?(h=new Date(o.getFullYear(),o.getMonth(),o.getDate(),this.minTime.getHours(),this.minTime.getMinutes(),this.minTime.getSeconds(),this.minTime.getMilliseconds()),l=!0):h=o,+h.getDate()==+r.getDate()&&+h.getMonth()==+r.getMonth()&&+h.getFullYear()==+r.getFullYear()||+new Date(h.getFullYear(),h.getMonth(),h.getDate())<=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(s=!1,i=r,l&&+new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds())>=+new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())&&i.setHours(h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds())):+h<+n&&+h>+r?(s=!l,i=h):+h>=+n&&(s=!0,i=n),this.calculateStartEnd(i,s,"starttime")},t.prototype.TimePopupFormat=function(){var e="",i=0,s=this;function r(n){switch(n){case"d":case"dd":case"ddd":case"dddd":case"M":case"MM":case"MMM":case"MMMM":case"y":case"yy":case"yyy":case"yyyy":e===""?e=e+n:e=e+"/"+n,i=i+1;break}return i>2&&(s.dateFormatString=e),e}return r},t.prototype.endTime=function(e){var i,s,r=this.max,n=e===null?new Date:e,o=!1,l;return this.maxTime?(l=new Date(n.getFullYear(),n.getMonth(),n.getDate(),this.maxTime.getHours(),this.maxTime.getMinutes(),this.maxTime.getSeconds(),this.maxTime.getMilliseconds()),o=!0):l=n,+l.getDate()==+r.getDate()&&+l.getMonth()==+r.getMonth()&&+l.getFullYear()==+r.getFullYear()||+new Date(l.getUTCFullYear(),l.getMonth(),l.getDate())>=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(s=!1,i=this.max,o&&+new Date(l.getUTCFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())<=+new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())&&i.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())):+l<+this.max&&+l>+this.min?(s=!o,i=l):+l<=+this.min&&(s=!0,i=this.min),this.calculateStartEnd(i,s,"endtime")},t.prototype.hide=function(e){var i=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var s=this.preventArgs;u(this.popupObj)?this.trigger("close",s,function(r){i.dateTimeCloseEventCallback(e,r)}):this.dateTimeCloseEventCallback(e,s)}else E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.dateTimeCloseEventCallback=function(e,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?a.prototype.hide.call(this,e):this.isTimePopupOpen()&&(this.closePopup(e),R([document.body],lc),E.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.closePopup=function(e){if(this.isTimePopupOpen()&&this.popupObject){var i={name:"FadeOut",duration:oc,delay:0};this.popupObject.hide(new It(i)),this.inputWrapper.container.classList.remove(nc),G(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),v.remove(document,"mousedown touchstart",this.documentClickHandler)}},t.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),a.prototype.preRender.call(this),R([this.inputElementCopy],[sn])},t.prototype.getProperty=function(e,i){i==="min"?this.setProperties({min:this.validateValue(e.min)},!0):this.setProperties({max:this.validateValue(e.max)},!0)},t.prototype.checkAttributes=function(e){for(var i=e?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"],s,r=0,n=i;r<n.length;r++){var o=n[r];if(!u(this.inputElement.getAttribute(o)))switch(o){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"readonly":if(u(this.dateTimeOptions)||this.dateTimeOptions.readonly===void 0||e){var l=this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(u(this.dateTimeOptions)||this.dateTimeOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"min":(u(this.dateTimeOptions)||this.dateTimeOptions.min===void 0||e)&&(s=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(s)&&!isNaN(+s)&&this.setProperties({min:s},!e));break;case"disabled":if(u(this.dateTimeOptions)||this.dateTimeOptions.enabled===void 0||e){var h=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)==="true"||this.inputElement.getAttribute(o)==="");this.setProperties({enabled:h},!e)}break;case"value":(u(this.dateTimeOptions)||this.dateTimeOptions.value===void 0||e)&&(s=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(s)&&!isNaN(+s)&&this.setProperties({value:s},!e));break;case"max":(u(this.dateTimeOptions)||this.dateTimeOptions.max===void 0||e)&&(s=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(s)&&!isNaN(+s)&&this.setProperties({max:s},!e));break}}},t.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e},t.prototype.maskedDateModule=function(){var e={args:[this],member:"MaskedDateTime"};return e},t.prototype.getTimeActiveElement=function(){return u(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+ms)},t.prototype.createDateObj=function(e){return e instanceof Date?e:null},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var i=this.createDateObj(e),s=this.valueWithMinutes,r=!u(s);if(this.checkDateValue(i)){var n=r?s.getDate():LC,o=r?s.getMonth():RC,l=r?s.getFullYear():MC,h=r?s.getHours():FC,p=r?s.getMinutes():OC,c=r?s.getSeconds():BC,d=r?s.getMilliseconds():PC;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(l,o,n,i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(l,o,n,h,p,c,d)}}return null},t.prototype.findNextTimeElement=function(e){var i=this.inputElement.value,s=u(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),r=null,n=this.liCollections.length;if(!u(this.activeIndex)||!u(this.checkDateValue(s))){if(e.action==="home")r=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if(e.action==="end")r=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if(e.action==="down"){for(var o=0;o<n;o++)if(+s<this.timeCollections[o]){r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}}else for(var o=n-1;o>=0;o--)if(+s>this.timeCollections[o]){r=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(u(r)?null:new Date(r))}},t.prototype.setTimeValue=function(e,i){var s,r,n=this.validateMinMaxRange(i),o=this.createDateObj(n);return this.getFormattedValue(o)!==(u(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=u(o)?null:o,r=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=o),this.valueWithMinutes=this.checkDateValue(e),r=new Date(+this.valueWithMinutes)),this.calendarMode==="Gregorian"?s=this.globalize.formatDate(r,{format:u(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}):s=this.globalize.formatDate(r,{format:u(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&u(r)?W.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton):W.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),r},t.prototype.timeElementValue=function(e){if(!u(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var i=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(i,e)}return null},t.prototype.timeKeyHandler=function(e){if(!(u(this.step)||this.step<=0)){var i=this.timeCollections.length;if(u(this.getTimeActiveElement())||this.getTimeActiveElement().length===0)this.liCollections.length>0&&(u(this.value)&&u(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var s=void 0;if(e.keyCode>=37&&e.keyCode<=40){var r=e.keyCode===40||e.keyCode===39?++this.activeIndex:--this.activeIndex;this.activeIndex=r=this.activeIndex===i?0:this.activeIndex,this.activeIndex=r=this.activeIndex<0?i-1:this.activeIndex,s=u(this.timeCollections[r])?this.timeCollections[0]:this.timeCollections[r]}else e.action==="home"?(this.activeIndex=0,s=this.timeCollections[0]):e.action==="end"&&(this.activeIndex=i-1,s=this.timeCollections[i-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(s))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,zC),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&this.selectedElement!==null&&(!e||e.type!=="click")&&this.setTimeScrollPosition()}},t.prototype.timeKeyActionHandle=function(e){if(this.enabled)switch(e.action!=="right"&&e.action!=="left"&&e.action!=="tab"&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),x([this.inputWrapper.container],rn),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1;break}},t.prototype.inputKeyAction=function(e){switch(e.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(e);break}},t.prototype.onPropertyChanged=function(e,i){for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s],o=["blur","change","cleared","close","created","destroyed","focus","navigated","open","renderDayCell"];switch(o.indexOf(n)>0&&this.isReact&&(this.isDynamicValueChanged=!0),n){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),this.enableMask?W.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton):W.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(e,n),this.updateInput();break;case"enableRtl":W.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":u(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),u(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),W.setCssClass(e.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&W.setCssClass(e.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new ft(this.locale),this.l10n.setLocale(this.locale),this.dateTimeOptions&&this.dateTimeOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),W.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)),this.dateTimeFormat=this.cldrDateTimeFormat(),a.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||W.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":W.setPlaceholder(e.placeholder,this.inputElement);break;case"enabled":W.setEnabled(this.enabled,this.inputElement),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),W.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":W.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,W.removeFloating(this.inputWrapper),W.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),W.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",W.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:a.prototype.onPropertyChanged.call(this,e,i);break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},t.prototype.getModuleName=function(){return"datetimepicker"},t.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=u(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},Oe([m(null)],t.prototype,"timeFormat",void 0),Oe([m(30)],t.prototype,"step",void 0),Oe([m(null)],t.prototype,"scrollTo",void 0),Oe([m(1e3)],t.prototype,"zIndex",void 0),Oe([m(null)],t.prototype,"value",void 0),Oe([m(null)],t.prototype,"keyConfigs",void 0),Oe([m({})],t.prototype,"htmlAttributes",void 0),Oe([m(!1)],t.prototype,"enablePersistence",void 0),Oe([m(!0)],t.prototype,"allowEdit",void 0),Oe([m(!1)],t.prototype,"isMultiSelection",void 0),Oe([m(null)],t.prototype,"values",void 0),Oe([m(!0)],t.prototype,"showClearButton",void 0),Oe([m(null)],t.prototype,"placeholder",void 0),Oe([m(!1)],t.prototype,"strictMode",void 0),Oe([m(!1)],t.prototype,"fullScreenMode",void 0),Oe([m(null)],t.prototype,"serverTimezoneOffset",void 0),Oe([m(new Date(1900,0,1))],t.prototype,"min",void 0),Oe([m(new Date(2099,11,31))],t.prototype,"max",void 0),Oe([m(null)],t.prototype,"minTime",void 0),Oe([m(null)],t.prototype,"maxTime",void 0),Oe([m(null)],t.prototype,"firstDayOfWeek",void 0),Oe([m("Gregorian")],t.prototype,"calendarMode",void 0),Oe([m("Month")],t.prototype,"start",void 0),Oe([m("Month")],t.prototype,"depth",void 0),Oe([m(!1)],t.prototype,"weekNumber",void 0),Oe([m(!0)],t.prototype,"showTodayButton",void 0),Oe([m("Short")],t.prototype,"dayHeaderFormat",void 0),Oe([m(!1)],t.prototype,"openOnFocus",void 0),Oe([m(!1)],t.prototype,"enableMask",void 0),Oe([m({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Oe([O()],t.prototype,"open",void 0),Oe([O()],t.prototype,"close",void 0),Oe([O()],t.prototype,"cleared",void 0),Oe([O()],t.prototype,"blur",void 0),Oe([O()],t.prototype,"focus",void 0),Oe([O()],t.prototype,"created",void 0),Oe([O()],t.prototype,"destroyed",void 0),t=Oe([pt],t),t})(Rh),WC=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),jC=(function(a){WC(t,a);function t(e,i){var s=a.call(this,e)||this;return s.childRefs=[],s.eventHandlers={},s.isDevice=!1,s.focusedMenuItem=null,s.customFilterOperators=i,s.isExcel=!0,s}return t.prototype.getCMenuDS=function(e,i){var s={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","NotContains","","CustomFilter"]};s.date=s.number,s.datetime=s.number,s.dateonly=s.number;for(var r=[],n=0;n<s[""+e].length;n++)s[""+e][parseInt(n.toString(),10)].length?i?r.push({text:this.getLocalizedLabel(s[""+e][parseInt(n.toString(),10)])+"...",iconCss:"e-icons e-icon-check "+(i===s[""+e][parseInt(n.toString(),10)].toLowerCase()?"":"e-emptyicon")}):r.push({text:this.getLocalizedLabel(s[""+e][parseInt(n.toString(),10)])+"..."}):r.push({separator:!0});return r},t.prototype.destroy=function(){if(this.dlg&&(this.unwireExEvents(),a.prototype.closeDialog.call(this)),!this.isDevice&&this.menuObj){var e=this.menuObj.element.querySelector("li.e-focused");e&&F(e,"e-excel-menu")||this.destroyCMenu()}this.dlgObj&&!this.dlgObj.isDestroyed&&this.removeDialog()},t.prototype.createMenu=function(e,i,s,r){var n={string:"TextFilter",date:"DateFilter",dateonly:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"};this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl"),this.parent.cssClass&&this.menu.classList.add(this.parent.cssClass);var o=this.parent.createElement("ul"),l=i?"e-excl-filter-icon e-filtered":"e-excl-filter-icon";if(this.parent.allowSorting&&this.parent.getModuleName()==="grid"&&!this.options.isResponsiveFilter){var h=this.parent.getColumnHeaderByUid(r.uid).getAttribute("aria-sort"),p=this.parent.getColumnByField(r.field).allowSorting,c=!p||h==="ascending"?"e-disabled e-excel-ascending":"e-excel-ascending",d=!p||h==="descending"?"e-disabled e-excel-descending":"e-excel-descending",f=e==="string"?this.getLocalizedLabel("SortAtoZ"):e==="datetime"||e==="date"?this.getLocalizedLabel("SortByOldest"):this.getLocalizedLabel("SortSmallestToLargest"),g=e==="string"?this.getLocalizedLabel("SortZtoA"):e==="datetime"||e==="date"?this.getLocalizedLabel("SortByNewest"):this.getLocalizedLabel("SortLargestToSmallest");o.appendChild(this.createMenuElem(f,c,"e-sortascending")),o.appendChild(this.createMenuElem(g,d,"e-sortdescending"));var y=this.parent.createElement("li",{className:"e-separator e-menu-item e-excel-separator"});o.appendChild(y)}this.options.isResponsiveFilter||o.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),i?"":"e-disabled",l)),e!=="boolean"&&o.appendChild(this.createMenuElem(this.getLocalizedLabel(n[""+e]),"e-submenu",s&&this.ensureTextFilter()?"e-icon-check":l+" e-emptyicon",!0)),this.menu.appendChild(o),this.parent.notify(Tm,{element:this.menu}),this.parent.notify(nd,{isFiltered:i})},t.prototype.createMenuElem=function(e,i,s,r){var n=this.parent.createElement("li",{className:i+" e-menu-item"});return n.innerHTML=e,n.tabIndex=n.classList.contains("e-disabled")?-1:0,n.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+s,attrs:{"aria-hidden":"true"}}),n.firstChild),r&&n.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),n},t.prototype.wireExEvents=function(){E.isDevice||v.add(this.dlg,"mouseover",this.hoverHandler,this),v.add(this.dlg,"click",this.clickExHandler,this),v.add(this.dlg,"keyup",this.keyUp,this),v.add(this.dlg,"keydown",this.keyDown,this)},t.prototype.unwireExEvents=function(){E.isDevice||v.remove(this.dlg,"mouseover",this.hoverHandler),v.remove(this.dlg,"click",this.clickExHandler),v.remove(this.dlg,"keyup",this.keyUp),v.remove(this.dlg,"keydown",this.keyDown)},t.prototype.clickExHandler=function(e){var i={string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"},s=F(e.target,"e-menu-item");s&&(this.getLocalizedLabel("ClearFilter")===s.innerText.trim()?(this.clearFilter(),this.closeDialog()):(this.options.isResponsiveFilter||E.isDevice)&&this.getLocalizedLabel(i[this.options.type])===s.innerText.trim()&&this.hoverHandler(e))},t.prototype.focusNextOrPrevElement=function(e,i,s){var r=e.key==="ArrowUp"||e.key==="Tab"&&e.shiftKey?i.indexOf(document.activeElement)-1:i.indexOf(document.activeElement)+1,n=i[(r+i.length)%i.length];if(n){n.focus();var o=n.classList.contains("e-chk-hidden")?"e-chkfocus":s,l=n.classList.contains("e-chk-hidden")?F(n,"e-ftrchk"):F(n,"e-menu-item");this.excelSetFocus(l,o)}},t.prototype.keyUp=function(e){if(e.key==="Tab"&&e.shiftKey||e.key==="Tab"){var i=e.target.classList.contains("e-chk-hidden")?"e-chkfocus":"e-menufocus",s=e.target.classList.contains("e-menu-item")?F(e.target,"e-menu-item"):F(e.target,"e-ftrchk");this.excelSetFocus(s,i)}else if((e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey){e.preventDefault();var r=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)'));this.focusNextOrPrevElement(e,r,"e-menufocus")}else(e.key==="Enter"||e.code==="ArrowRight")&&e.target.classList.contains("e-menu-item")&&(e.preventDefault(),e.target.click(),e.target.classList.contains("e-submenu")&&(this.hoverHandler(e),this.menuObj.element.querySelector(".e-menu-item").focus(),this.excelSetFocus(F(this.menuObj.element.querySelector(".e-menu-item"),"e-menu-item"),"e-focused"),this.focusedMenuItem=this.menuObj.element.querySelector(".e-menu-item")))},t.prototype.keyDown=function(e){(e.key==="ArrowUp"||e.key==="ArrowDown")&&e.preventDefault()},t.prototype.excelSetFocus=function(e,i){var s=this.cmenu.querySelector("."+i),r=this.menu.querySelector("."+i);s&&s.classList.remove(i),r&&r.classList.contains("e-menufocus")&&r.classList.remove(i),e&&e.classList.add(i)},t.prototype.destroyCMenu=function(){this.isCMenuOpen=!1,this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),v.remove(this.menuObj.element,"keydown",this.contextKeyDownHandler),ce(this.cmenu),this.parent.notify(ql,{target:null,header:"",isOpen:!1,col:this.options.column}))},t.prototype.hoverHandler=function(e){if(!(this.options.isResponsiveFilter&&e.type==="mouseover")){var i=e.target.querySelector(".e-contextmenu"),s=F(e.target,"e-menu-item"),r=this.menu.querySelector(".e-focused"),n;if(r&&r.classList.remove("e-focused"),s&&(s.classList.add("e-focused"),n=s.classList.contains("e-submenu")),!i){if(!n){var o=this.menu.querySelector(".e-submenu");u(o)||o.classList.remove("e-selected"),this.destroyCMenu()}var l=this.ensureTextFilter();if(!this.isCMenuOpen&&n){s.classList.add("e-selected"),this.isCMenuOpen=!0;var h={items:this.getCMenuDS(this.options.type,l?l.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,animationSettings:{effect:E.isDevice?"ZoomIn":"None"},beforeClose:this.preventClose.bind(this),cssClass:this.options.isResponsiveFilter&&this.parent.cssClass?"e-res-contextmenu-wrapper "+this.parent.cssClass:this.options.isResponsiveFilter?"e-res-contextmenu-wrapper":this.parent.cssClass?this.parent.cssClass:""};this.parent.element.appendChild(this.cmenu),this.menuObj=new Og(h,this.cmenu),v.add(this.menuObj.element,"keydown",this.contextKeyDownHandler,this);var p=this.menu.querySelector(".e-submenu").getBoundingClientRect(),c={top:0,left:0};if(this.options.isResponsiveFilter){var d={string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"},f=document.querySelector(".e-responsive-dialog > .e-dlg-header-content"),g=f.offsetHeight+4;this.menuObj.element.style.height="calc(100% - "+g+"px)",this.menuObj.open(g,0,document.body);var y=this.getLocalizedLabel(d[this.options.type]);this.parent.notify(ql,{target:this.menuObj.element.parentElement,header:y,isOpen:!0})}else{if(E.isDevice){this.isDevice=!0;var b=this.getContextBounds();c.top=(window.innerHeight-b.height)/2,c.left=(window.innerWidth-b.width)/2,this.closeDialog(),this.isDevice=!1}else c.top=E.isIE?window.pageYOffset+p.top:window.scrollY+p.top,c.left=this.getCMenuYPosition(this.dlg);this.menuObj.open(c.top,c.left,e.target)}up(this.parent.element,this.menuObj.element.parentElement)}}}},t.prototype.contextKeyDownHandler=function(e){if(e.key==="Tab"&&e.shiftKey||e.key==="Tab"){e.preventDefault();var i=Array.from(this.menuObj.element.querySelectorAll('[tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)'));this.focusNextOrPrevElement(e,i,"e-focused")}else(e.key==="ArrowLeft"||e.key==="Escape")&&(e.preventDefault(),this.menuObj.close(),this.focusedMenuItem=null,document.querySelector(".e-submenu.e-menu-item").classList.remove("e-selected"),document.querySelector(".e-submenu.e-menu-item").focus())},t.prototype.ensureTextFilter=function(){var e,i=this.existingPredicate[this.options.field];return i&&i.length===2?i[0].operator==="greaterthanorequal"&&i[1].operator==="lessthanorequal"?e="between":e="customfilter":i&&i.length===1&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],e=i[0].operator),e},t.prototype.preventClose=function(e){if(this.options&&this.options.isResponsiveFilter&&e.event){var i=e.event.target,s=i.classList&&(i.classList.contains("e-resfilterback")||i.classList.contains("e-res-back-btn")||i.classList.contains("e-menu-item"));e.cancel=!s}else e.event instanceof MouseEvent&&e.event.target&&e.event.target.classList&&e.event.target.classList.contains("e-submenu")&&(e.cancel=!0)},t.prototype.getContextBounds=function(){return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},t.prototype.getCMenuYPosition=function(e){var i=this.getContextBounds().width,s=e.getBoundingClientRect(),r=this.parent.element.getBoundingClientRect(),n=s.left-i-r.left,o=s.right+i-r.right,l=e.offsetWidth-e.clientWidth;l=l?l+1:0;var h=this.parent.enableRtl?n:o;return h<1?s.right+1-l:s.left-i-1+l},t.prototype.openDialog=function(e){var i=this;if(this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e),!e.cancel){this.dialogObj.dataBind();var s=this.existingPredicate[e.field]&&this.existingPredicate[e.field].length||this.options.filteredColumns.filter(function(n){return i.options.field===n.field}).length;this.createMenu(e.type,s>0,s===1||s===2,e),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent&&!u(this.parent.getContent)&&this.parent.getContent()&&this.parent.getContent().firstElementChild.offsetHeight<this.dlg.offsetHeight&&!F(this.parent.element,"e-gantt-dialog")&&Dh(this.parent,this.dialogObj),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"});var r=this.dlg.querySelectorAll(".e-menu-item");r.forEach(function(n){n.scrollWidth>n.clientWidth&&n.setAttribute("title",n.textContent)}),e.column.showColumnMenu&&this.parent.notify(Ch,{}),this.wireExEvents()}},t.prototype.closeDialog=function(){this.destroy()},t.prototype.selectHandler=function(e){e.item&&(this.parent.notify(ad,{}),this.menuItem=e.item,this.closeDialog(),this.renderDialogue(e))},t.prototype.renderDialogue=function(e){var i=this,s=e?e.element:void 0,r=this.options.field,n=!u(r)&&Mi(r),o=!u(r)&&ds(r),l=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:n?o+"-xlflmenu":r+"-xlflmenu"});if(this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:n?o+"-xlfldlg":r+"-xlfldlg"}),this.options.isResponsiveFilter){var h=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv");h.appendChild(this.dlgDiv)}else this.parent.element.appendChild(this.dlgDiv);this.dlgObj=new bn({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,locale:this.parent.locale,closeOnEscape:!0,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:function(){for(var c=[].slice.call(i.dlgObj.element.querySelectorAll("table.e-xlfl-table tr.e-xlfl-fields")),d=0;d<c.length;d++){var f=c[d].children[1].querySelector(".e-control"),g=c[d].querySelector(".e-dropdownlist.e-control").ej2_instances[0];g.value==="isempty"||g.value==="isnotempty"||g.value==="isnull"||g.value==="isnotnull"?f.ej2_instances[0].enabled=!1:f&&!u(f.getAttribute("disabled"))&&(f.ej2_instances[0].enabled=!0)}var y=i.dlgObj.element.querySelector("table.e-xlfl-table>tr");if(i.options.column.filterTemplate){var b=Mi(i.options.column.field)?ds(i.options.column.field):i.options.column.field,C=i.parent.isReact&&typeof i.options.column.filterTemplate!="string"&&!(i.options.column.filterTemplate.prototype&&i.options.column.filterTemplate.prototype.CSPTemplate),S=i.parent.parentDetails&&i.parent.parentDetails.parentInstObj&&i.parent.parentDetails.parentInstObj.isReact;C||S?i.parent.renderTemplates(function(){y.querySelector("#"+b+"-xlfl-frstvalue").focus()}):y.querySelector("#"+b+"-xlfl-frstvalue").focus()}},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,s,r),buttons:[{click:this.filterBtnClick.bind(this,r),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-xlfl-okbtn "+this.parent.cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:this.parent.cssClass?"e-xlfl-cancelbtn "+this.parent.cssClass:"e-xlfl-cancelbtn"}}],content:l,width:430,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""});var p="isStringTemplate";this.dlgObj[""+p]=!0,this.renderResponsiveDialog(),this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA")),this.childRefs.unshift(this.dlgObj),this.dlgObj.appendTo(this.dlgDiv)},t.prototype.renderResponsiveDialog=function(){if(this.options.isResponsiveFilter){var e=document.querySelector(".e-row-responsive-filter");e&&e.classList.remove("e-row-responsive-filter"),this.dlgObj.buttons=[{}],this.dlgObj.header=void 0,this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.showCloseIcon=!1}},t.prototype.removeDialog=function(){this.parent.notify(od,{}),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&Zs(this.parent,["filterTemplate"]),this.removeObjects(this.childRefs),ce(this.dlgDiv),this.parent.notify(Qa,{})},t.prototype.createdDialog=function(e,i){if(this.renderCustomFilter(e,i),this.dlgObj.element.style.left="0px",!this.options.isResponsiveFilter)this.dlgObj.element.style.top="0px";else{var s=document.querySelector(".e-responsive-dialog > .e-dlg-header-content"),r=s.offsetHeight+4;this.dlgObj.element.style.top=r+"px"}!this.options.isResponsiveFilter&&E.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify(Dm,{column:i,dialog:this.dialogObj});var n={column:i,dialogInstance:this.dialogObj,cancel:!1,target:e};if(this.parent.trigger(Am,n),n.cancel){(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&Zs(this.parent,["filterTemplate"]),this.removeObjects(this.childRefs),ce(this.dlgDiv);return}this.dlgObj.show(),up(this.parent.element,this.dlgObj.element.parentElement)},t.prototype.renderCustomFilter=function(e,i){var s=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),r=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"});s.appendChild(r);var n=this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"});s.appendChild(n),this.renderFilterUI(i,s)},t.prototype.filterBtnClick=function(e){var i=!u(e)&&Mi(e),s=!u(e)&&ds(e),r=i?s:e,n=this.dlgDiv.querySelector("#"+r+"-xlfl-frstvalue").ej2_instances[0],o=this.dlgDiv.querySelector("#"+r+"-xlfl-frstoptr").ej2_instances[0],l=this.dlgDiv.querySelector("#"+r+"-xlfl-secndvalue").ej2_instances[0],h=this.dlgDiv.querySelector("#"+r+"-xlfl-secndoptr").ej2_instances[0],p;if(this.options.type==="string"){var c=this.dlgDiv.querySelector("#"+r+"-xlflmtcase").ej2_instances[0];p=c.checked}var d=this.dlgDiv.querySelector("#"+r+"e-xlfl-frstpredicate").ej2_instances[0],f=d.checked?"and":"or";this.filterByColumn(this.options.field,o.value,n.value,f,p,this.options.ignoreAccent,h.value,l.value),this.removeDialog()},t.prototype.filterByColumn=function(e,i,s,r,n,o,l,h){var p=this.parent.getColumnByField?this.parent.getColumnByField(e):this.options.column,c=this.isForeignColumn(p)?p.foreignKeyValue:e,d=[],f,g={instance:this,handler:this.filterByColumn,arg1:e,arg2:i,arg3:s,arg4:r,arg5:n,arg6:o,arg7:l,arg8:h,cancel:!1};if(this.parent.notify(cn,g),!g.cancel){d.push({field:c,predicate:r,matchCase:n,ignoreAccent:o,operator:i,value:g.arg3,type:this.options.type}),f=new we(c,i.toLowerCase(),g.arg3,!n,o),u(l)||(d.push({field:c,predicate:r,matchCase:n,ignoreAccent:o,operator:l,value:g.arg8,type:this.options.type}),f=f[""+r](c,l.toLowerCase(),h,!n,o));var y={action:"filtering",filterCollection:d,field:this.options.field,ejpredicate:f,actualPredicate:d};this.isForeignColumn(p)?this.foreignKeyFilter(y,d,f):this.options.handler(y)}},t.prototype.renderOperatorUI=function(e,i,s,r,n){var o=this.parent.createElement("tr",{className:"e-xlfl-fields",attrs:{role:"row"}});i.appendChild(o);var l=this.parent.createElement("td",{className:"e-xlfl-optr"});o.appendChild(l);var h=this.parent.createElement("div",{className:"e-xlfl-optrdiv"}),p=!u(e)&&Mi(e),c=!u(e)&&ds(e),d=this.parent.createElement("input",{id:p?c+s:e+s});h.appendChild(d),l.appendChild(h);var f=this.options.type+"Operator",g=this.customFilterOperators[""+f];this.optrData=g;var y=this.dropSelectedVal(this.options.column,r,n),b="";this.menuItem&&(b=this.menuItem.text.slice(0,-3),b!==this.getLocalizedLabel("CustomFilter")&&(y=n?b:void 0),b===this.getLocalizedLabel("Between")&&(y=this.getLocalizedLabel(n?"GreaterThanOrEqual":"LessThanOrEqual")));var C=this.options.column,S=new Fr(dr({dataSource:g,fields:{text:"text",value:"value"},text:y,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:null},C.filter.params));this.childRefs.unshift(S);var I={open:this.dropDownOpen.bind(this),change:this.dropDownValueChange.bind(this)};dp(d.id,[Lt,Qn],I,this),S.addEventListener(Lt,this.eventHandlers[d.id][Lt]),S.addEventListener(Qn,this.eventHandlers[d.id][Qn]),S.appendTo(d);var A=this.getSelectedValue(y);return{fieldElement:o,operator:A}},t.prototype.removeHandlersFromComponent=function(e){e.element.classList.contains("e-dropdownlist")?fp(e,[Lt,Qn],this):e.element.classList.contains("e-autocomplete")&&fp(e,[Fe,gr],this)},t.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},t.prototype.dropDownValueChange=function(e){e.element.id.includes("-xlfl-frstoptr")?this.firstOperator=e.value.toString():this.secondOperator=e.value.toString();var i=e.element.closest(".e-xlfl-fields").children[1].querySelector(".e-control"),s=e.element.ej2_instances[0];s.value==="isempty"||s.value==="isnotempty"||s.value==="isnull"||s.value==="isnotnull"?i.ej2_instances[0].enabled=!1:u(i.getAttribute("disabled"))||(i.ej2_instances[0].enabled=!0)},t.prototype.getFilterUIInfo=function(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}},t.prototype.getSelectedValue=function(e){var i=new N(this.optrData).executeLocal(new se().where("text","equal",e));return u(i[0])?"":i[0].value},t.prototype.dropSelectedVal=function(e,i,s){var r;return i&&i.length>0?r=i.length===2?s?i[0].operator:i[1].operator:s?i[0].operator:void 0:s&&e.type==="string"&&!e.filter.operator?r="startswith":r=s?e.filter.operator||"equal":void 0,this.getSelectedText(r)},t.prototype.getSelectedText=function(e){var i=new N(this.optrData).executeLocal(new se().where("value","equal",e));return u(i[0])?"":i[0].text},t.prototype.renderFilterUI=function(e,i){var s=this.existingPredicate[""+e],r=this.parent.createElement("table",{className:"e-xlfl-table",attrs:{role:"grid"}});i.appendChild(r);var n=this.parent.createElement(li);n.innerHTML='<col style="width: 50%"></col><col style="width: 50%"></col>',r.appendChild(n);var o=this.renderOperatorUI(e,r,"-xlfl-frstoptr",s,!0);this.firstOperator=o.operator,this.renderFlValueUI(e,o,"-xlfl-frstvalue",s,!0);var l=this.parent.createElement("tr",{className:"e-xlfl-predicate",attrs:{role:"row"}});r.appendChild(l),this.renderRadioButton(e,l,s),o=this.renderOperatorUI(e,r,"-xlfl-secndoptr",s,!1),this.secondOperator=o.operator,this.renderFlValueUI(e,o,"-xlfl-secndvalue",s,!1)},t.prototype.renderRadioButton=function(e,i,s){var r=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}});i.appendChild(r);var n=this.parent.createElement("div",{className:"e-xlfl-radiodiv"});n.style.display="inline-block";var o=!u(e)&&Mi(e),l=!u(e)&&ds(e),h=this.parent.createElement("input",{id:o?l+"e-xlfl-frstpredicate":e+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),p=this.parent.createElement("input",{id:o?l+"e-xlfl-secndpredicate":e+"e-xlfl-secndpredicate",attrs:{type:"radio"}});n.appendChild(h),n.appendChild(p),r.appendChild(n),this.options.type==="string"&&this.renderMatchCase(e,i,r,"-xlflmtcase",s);var c=new Bh({label:this.getLocalizedLabel("AND"),name:"default",checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(c);var d=new Bh({label:this.getLocalizedLabel("OR"),name:"default",enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(d);var f=s&&s.length===2?s[1].predicate:"and";f==="and"?(c.checked=!0,d.checked=!1):(d.checked=!0,c.checked=!1),c.appendTo(h),d.appendTo(p),c.element.nextElementSibling.classList.add("e-xlfl-radio-and"),d.element.nextElementSibling.classList.add("e-xlfl-radio-or")},t.prototype.removeObjects=function(e){for(var i=0,s=e;i<s.length;i++){var r=s[i];r&&!r.isDestroyed&&(this.removeHandlersFromComponent(r),r.destroy())}},t.prototype.renderFlValueUI=function(e,i,s,r,n){var o=this.parent.createElement("td",{className:"e-xlfl-value"});i.fieldElement.appendChild(o);var l=!u(e)&&Mi(e),h=!u(e)&&ds(e),p=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),c=this.options.filteredColumns.some(function(_){return e===_.field}),d=this.options.filteredColumns.filter(function(_){return _.field===e});if(this.options.column.filterTemplate){var f={},g=this.options.column;c&&s&&(f=this.getExcelFilterData(s,f,g,r,d));var y=this.parent.isReact&&typeof this.options.column.filterTemplate!="string"&&!(this.options.column.filterTemplate.prototype&&this.options.column.filterTemplate.prototype.CSPTemplate),b=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,C=this.parent.element.id+g.uid+"filterTemplate";if(y||b)this.options.column.getFilterTemplate()(f,this.parent,"filterTemplate",C,null,null,p);else{var S=this.options.column.getFilterTemplate()(f,this.parent,"filterTemplate",C,null,null,null,this.parent.root);Ht(p,S)}y||b?this.parent.renderTemplates(function(){p.querySelector("input").id=l?h+s:e+s,o.appendChild(p)}):((this.parent.isAngular?p.children[0]:p.querySelector("input")).id=l?h+s:e+s,o.appendChild(p))}else{var I=this.parent.createElement("input",{id:l?h+s:e+s});p.appendChild(I),o.appendChild(p);var A=void 0,T=void 0;r&&r.length>0&&(T=r.length===2?n?r[0]:r[1]:n?r[0]:void 0,A=T&&T.operator===i.operator?T.value:void 0,u(A)&&(A=void 0));var L={string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),dateonly:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)};L[this.options.type](this.options,e,I,A,this.parent.enableRtl)}},t.prototype.getExcelFilterData=function(e,i,s,r,n){var o=e==="-xlfl-frstvalue"?0:1;if(e==="-xlfl-frstvalue"||n.length>1){i={column:r instanceof Array?r[parseInt(o.toString(),10)]:r};var l=this.options.column.columnData&&n.length>1?this.options.column.columnData.length===1?0:1:o;i[this.options.field]=s.foreignKeyValue?this.options.column.columnData[parseInt(l.toString(),10)][s.foreignKeyValue]:n[parseInt(l.toString(),10)].value,this.options.foreignKeyValue&&(i[this.options.foreignKeyValue]=this.options.column.columnData[parseInt(l.toString(),10)][s.foreignKeyValue])}return i},t.prototype.renderMatchCase=function(e,i,s,r,n){var o=this.parent.createElement("div",{className:"e-xlfl-matchcasediv"});o.style.display="inline-block";var l=!u(e)&&Mi(e),h=!u(e)&&ds(e),p=this.parent.createElement("input",{id:l?h+r:e+r,attrs:{type:"checkbox"}});o.appendChild(p),s.appendChild(o);var c=n&&n.length>0?n&&n.length===2?n[1].matchCase:n[0].matchCase:!1,d=new Xd({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:c,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(d),d.appendTo(p)},t.prototype.renderDate=function(e,i,s,r,n){var o=Ql(e.format,e.type)||e.format,l=new Rh(dr({format:o,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:n,value:new Date(r),locale:this.parent.locale},e.column.filter.params));this.childRefs.unshift(l),l.appendTo(s)},t.prototype.renderDateTime=function(e,i,s,r,n){var o=Ql(e.format,e.type),l=new Od(dr({format:o,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:n,value:new Date(r),locale:this.parent.locale},e.column.filter.params));this.childRefs.unshift(l),l.appendTo(s)},t.prototype.completeAction=function(e){e.result=Dy(e.result)},t.prototype.renderNumericTextBox=function(e,i,s,r,n){var o=new _c(dr({format:e.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:n,value:r,locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},e.column.filter.params));this.childRefs.unshift(o),o.appendTo(s)},t.prototype.renderAutoComplete=function(e,i,s,r,n){var o=this.options.column,l=this.isForeignColumn(o),h=l?o.dataSource:e.dataSource,p={value:l?o.foreignKeyValue:i},c=new Rd(dr({dataSource:h instanceof N?h:new N(h),fields:p,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:n,text:r},o.filter.params));if(h&&"result"in h){var d=Ja({requestType:"stringfilterrequest"},this.getQuery());this.parent.trigger(Dr,d.state);var f=d.deffered;f.promise.then(function(y){c.dataSource=new N(y)})}this.childRefs.unshift(c);var g={actionComplete:this.acActionComplete(c,i),focus:this.acFocus(c,i,e,s)};dp(s.id,[Fe,gr],g,this),c.addEventListener(gr,this.eventHandlers[s.id][gr]),c.addEventListener(Fe,this.eventHandlers[s.id][Fe]),c.appendTo(s)},t.prototype.acActionComplete=function(e,i){return function(s){var r=!u(i)&&Mi(i);s.result=s.result.filter(function(n,o,l){return l.map(function(h){return r?Zl(e.fields.value,h):h[e.fields.value]}).indexOf(r?Zl(e.fields.value,n):n[e.fields.value])===o})}},t.prototype.acFocus=function(e,i,s,r){var n=this;return function(){var o=!u(i)&&Mi(i),l=!u(i)&&ds(i),h=o?l:i;e.filterType=n.dlgDiv.querySelector("#"+h+(r.id===h+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,e.ignoreCase=s.type==="string"?!n.dlgDiv.querySelector("#"+h+"-xlflmtcase").ej2_instances[0].checked:!0,e.filterType=u(e.filterType)?"equal":e.filterType}},t})(Rr),cS=(function(){function a(t,e,i,s){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new Sh,this.currentTarget=null,this.parent=t,this.sortSettings=e,this.sortedColumns=i,this.serviceLocator=s,this.focus=s.getService("focus"),this.addEventListener(),this.setFullScreenDialog()}return a.prototype.updateModel=function(){var t={field:this.columnName,direction:this.direction},e,i=this.parent.groupSettings.columns,s=!1;if(this.isMultiSort)e=this.getSortedColsIndexByField(this.columnName),e>-1&&this.sortSettings.columns.splice(e,1),this.sortSettings.columns.push(t),this.sortSettings.columns=this.sortSettings.columns;else if(!i.length)this.sortSettings.columns=[t];else{for(var r=[],n=0,o=i.length;n<o;n++)if(e=this.getSortedColsIndexByField(i[parseInt(n.toString(),10)],r),this.columnName===i[parseInt(n.toString(),10)])s=!0,r.push(t);else{var l=this.getSortColumnFromField(i[parseInt(n.toString(),10)]);r.push({field:l.field,direction:l.direction,isFromGroup:l.isFromGroup})}s||r.push(t),this.sortSettings.columns=r}this.parent.dataBind(),this.lastSortedCol=this.columnName},a.prototype.onActionComplete=function(t){var e=this.isRemove?{requestType:"sorting",type:Fe}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:Fe};this.isRemove=!1,this.parent.trigger(Fe,$(t,e))},a.prototype.sortColumn=function(t,e,i){var s=this.parent;if(this.parent.getColumnByField(t).allowSorting===!1||this.parent.isContextMenuOpen()){this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:t});return}if(s.allowMultiSorting||(i=s.allowMultiSorting),this.isActionPrevent()){s.notify(Bi,{instance:this,handler:this.sortColumn,arg1:t,arg2:e,arg3:i});return}this.backupSettings(),this.columnName=t,this.direction=e,this.isMultiSort=i,this.removeSortIcons(),this.updateSortedCols(t,i),this.updateModel()},a.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,Ce.isSort)},a.prototype.backupSettings=function(){this.lastSortedCols=wa(this.sortSettings.columns),this.lastCols=this.sortedColumns},a.prototype.restoreSettings=function(){this.isModelChanged=!1,this.isMultiSort=!0,this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0),this.sortedColumns=this.lastCols,this.isModelChanged=!0},a.prototype.updateSortedCols=function(t,e){if(!e)if(this.parent.allowGrouping)for(var i=0,s=this.sortedColumns.length;i<s;i++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[parseInt(i.toString(),10)])<0&&(this.sortedColumns.splice(i,1),s--,i--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(t)<0&&this.sortedColumns.push(t)},a.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){if(this.contentRefresh){var e=this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:Rt,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:Rt,cancel:!1,target:this.currentTarget};this.parent.notify(os,e)}this.refreshSortSettings(),this.removeSortIcons(),this.addSortIcons()}},a.prototype.refreshSortSettings=function(){this.sortedColumns.length=0;for(var t=this.sortSettings.columns,e=0;e<t.length;e++)t[parseInt(e.toString(),10)].isFromGroup||this.sortedColumns.push(t[parseInt(e.toString(),10)].field)},a.prototype.clearSorting=function(){var t=Ih(this.sortSettings.columns);if(this.isActionPrevent()){this.parent.notify(Bi,{instance:this,handler:this.clearSorting});return}for(var e=0,i=t.length;e<i;e++)this.removeSortColumn(t[parseInt(e.toString(),10)].field)},a.prototype.isActionPrevent=function(){return Ds(this.parent)},a.prototype.removeSortColumn=function(t){var e=this.parent,i=this.sortSettings.columns;if(!(i.length===0&&this.sortedColumns.indexOf(t)<0)){if(this.isActionPrevent()){this.parent.notify(Bi,{instance:this,handler:this.removeSortColumn,arg1:t});return}this.backupSettings(),this.removeSortIcons();for(var s={requestType:"sorting",type:Rt,target:this.currentTarget},r=0,n=i.length;r<n;r++)if(i[parseInt(r.toString(),10)].field===t){if(e.allowGrouping&&e.groupSettings.columns.indexOf(i[parseInt(r.toString(),10)].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(i[parseInt(r.toString(),10)].field),1),i.splice(r,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(os,s);break}s.cancel||this.addSortIcons()}},a.prototype.getSortedColsIndexByField=function(t,e){for(var i=e||this.sortSettings.columns,s=0,r=i.length;s<r;s++)if(i[parseInt(s.toString(),10)].field===t)return s;return-1},a.prototype.getModuleName=function(){return"sort"},a.prototype.initialEnd=function(){if(this.parent.off(nt,this.initialEnd),this.parent.getColumns().length&&this.sortSettings.columns.length){var t=this.parent;this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1;for(var e=0,i=t.sortSettings.columns.slice();e<i.length;e++){var s=i[e];this.sortedColumns.indexOf(s.field)>-1&&this.sortColumn(s.field,s.direction,!0)}this.isMultiSort=!1,this.contentRefresh=!0}},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Ha,handler:this.setFullScreenDialog},{event:Xs,handler:this.renderResponsiveChangeAction},{event:nt,handler:this.initialEnd},{event:om,handler:this.onActionComplete},{event:Wt,handler:this.onPropertyChanged},{event:ls,handler:this.clickHandler},{event:mi,handler:this.refreshSortIcons},{event:hi,handler:this.keyPressed},{event:Na,handler:this.cancelBeginEvent},{event:ut,handler:this.destroy}],yi(this.parent,this.evtHandlers,!0,this),v.add(document.body,"click",this.excelFilterSortAction,this),v.add(document.body,"touchend",this.excelFilterSortAction,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(yi(this.parent,this.evtHandlers,!1),v.remove(document.body,"click",this.excelFilterSortAction),v.remove(document.body,"touchend",this.excelFilterSortAction))},a.prototype.excelFilterSortAction=function(t){var e=F(t.target,"e-grid-popup"),i=this.parent.element.id+"_e-popup";e&&e.id===i&&F(t.target,"e-excelfilter")&&this.excelFilterSortActionHandler(t)},a.prototype.destroy=function(){this.isModelChanged=!1;var t=this.parent.element;!t||!t.querySelector("."+Xt)&&!t.querySelector("."+ki)||(this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),!this.parent.refreshing&&(this.parent.isDestroyed||!this.parent.allowSorting)&&this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())},a.prototype.cancelBeginEvent=function(t){t.requestType==="sorting"&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)},a.prototype.clickHandler=function(t){var e=this.parent;this.currentTarget=null,this.popUpClickHandler(t);var i=M(t.target,".e-headercell");if(i&&!t.target.classList.contains("e-grptogglebtn")&&!i.classList.contains("e-resized")&&!t.target.classList.contains("e-rhandler")&&!t.target.classList.contains("e-columnmenu")&&!t.target.classList.contains("e-filtermenudiv")&&!F(t.target,"e-stackedheadercell")&&!(e.allowSelection&&e.selectionSettings.allowColumnSelection&&t.target.classList.contains("e-headercell"))){var s=this.parent,r=s.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("data-mappinguid"));r.type!=="checkbox"&&(this.initiateSort(i,t,r),E.isDevice&&this.showPopUp(t))}i&&i.classList.remove("e-resized"),this.excelFilterSortActionHandler(t)},a.prototype.excelFilterSortActionHandler=function(t){if(F(t.target,"e-excel-ascending")||F(t.target,"e-excel-descending")){var e=M(t.target,".e-filter-popup").getAttribute("data-uid"),i=u(F(t.target,"e-excel-descending"))?"Ascending":"Descending";this.sortColumn(this.parent.getColumnByUid(e).field,i,!1)}},a.prototype.keyPressed=function(t){var e=t.target;if(!this.parent.isEdit&&(t.action==="enter"||t.action==="ctrlEnter"||t.action==="shiftEnter")&&M(e,".e-headercell")){var i=this.focus.getFocusedElement();if(u(i)||!i.classList.contains("e-headercell")||!i.querySelector(".e-headercelldiv"))return;var s=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("data-mappinguid"));this.initiateSort(i,t,s)}},a.prototype.initiateSort=function(t,e,i){var s=this.parent,r=i.field;this.currentTarget=e.target;var n=t.getElementsByClassName("e-ascending").length?"Descending":"Ascending";this.isMultiSort=e.ctrlKey||this.enableSortMultiTouch||navigator.userAgent.indexOf("Mac OS")!==-1&&e.metaKey,e.shiftKey||this.sortSettings.allowUnsort&&t.getElementsByClassName("e-descending").length&&!(s.groupSettings.columns.indexOf(r)>-1)?this.removeSortColumn(r):this.sortColumn(r,n,this.isMultiSort)},a.prototype.showPopUp=function(t){var e=M(t.target,".e-headercell");this.parent.allowMultiSorting&&(!u(e)||this.parent.isContextMenuOpen())&&Sd(this.parent.element.querySelector(".e-gridpopup"),t,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))},a.prototype.popUpClickHandler=function(t){var e=t.target;M(e,".e-headercell")||t.target.classList.contains(He)||M(e,".e-gridpopup")?e.classList.contains("e-sortdirect")&&(e.classList.contains("e-spanclicked")?(e.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(e.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},a.prototype.addSortIcons=function(){for(var t=this.parent,e,i,s=this.sortSettings.columns,r=this.parent.getColumns().map(function(l){return l.field}),n=0,o=s.length;n<o;n++)e=t.getColumnHeaderByField(s[parseInt(n.toString(),10)].field),!(r.indexOf(s[parseInt(n.toString(),10)].field)===-1||u(e))&&(this.aria.setSort(e,s[parseInt(n.toString(),10)].direction.toLowerCase()),s.length>1&&e.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(n+1).toString()}),e.querySelector(".e-headertext")),i=e.querySelector(".e-sortfilterdiv"),s[parseInt(n.toString(),10)].direction==="Ascending"?Se(i,["e-ascending","e-icon-ascending"],[]):Se(i,["e-descending","e-icon-descending"],[]))},a.prototype.removeSortIcons=function(t){for(var e=this.parent,i,s=this.sortSettings.columns,r=this.parent.getColumns().map(function(l){return l.field}),n=t||0,o=u(t)?s.length:t+1;n<o;n++)i=e.getColumnHeaderByField(s[parseInt(n.toString(),10)].field),!(u(i)||e.allowGrouping&&e.groupSettings.columns.indexOf(s[parseInt(n.toString(),10)].field)>-1&&!i.querySelector(".e-sortfilterdiv"))&&r.indexOf(s[parseInt(n.toString(),10)].field)!==-1&&(this.aria.setSort(i,"none"),Se(i.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),i.querySelector(".e-sortnumber")&&i.querySelector(".e-headercelldiv").removeChild(i.querySelector(".e-sortnumber")))},a.prototype.getSortColumnFromField=function(t){for(var e=0,i=this.sortSettings.columns.length;e<i;e++)if(this.sortSettings.columns[parseInt(e.toString(),10)].field===t)return this.sortSettings.columns[parseInt(e.toString(),10)];return!1},a.prototype.updateAriaAttr=function(){for(var t=this.parent.getColumns().map(function(n){return n.field}),e=0,i=this.sortedColumns;e<i.length;e++){var s=i[e];if(t.indexOf(s)!==-1){var r=this.parent.getColumnHeaderByField(s);this.aria.setSort(r,this.getSortColumnFromField(s).direction)}}},a.prototype.refreshSortIcons=function(){this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr()},a.prototype.renderResponsiveChangeAction=function(t){this.responsiveDialogRenderer.action=t.action},a.prototype.showCustomSort=function(t){this.responsiveDialogRenderer.isCustomDialog=t,this.responsiveDialogRenderer.showResponsiveDialog()},a})(),UC=(function(){function a(t){this.pagerModule=t}return a.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},a.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.refreshAriaAttrLabel(),this.updateStyles()},a.prototype.refreshNumericLinks=function(){var t,e=this.pagerModule,i=e.element.querySelector(".e-numericcontainer"),s=document.createDocumentFragment();i.innerHTML="";for(var r=1;r<=e.pageCount;r++)t=pe("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{tabindex:"-1","aria-label":e.getLocalizedLabel("Page")+r+e.getLocalizedLabel("Of")+e.totalPages+e.getLocalizedLabel("Pages"),href:"#"}}),e.currentPage===r&&(Se(t,["e-currentitem","e-active"],["e-pager-default"]),t.setAttribute("aria-current","page")),s.appendChild(t);i.appendChild(s),this.links=[].slice.call(i.childNodes)},a.prototype.wireEvents=function(){v.add(this.pagerElement,"click",this.clickHandler,this),v.add(this.pagerElement,"auxclick",this.auxiliaryClickHandler,this)},a.prototype.unwireEvents=function(){v.remove(this.pagerModule.element,"click",this.clickHandler),v.remove(this.pagerModule.element,"auxclick",this.auxiliaryClickHandler)},a.prototype.destroy=function(){this.unwireEvents()},a.prototype.refreshAriaAttrLabel=function(){for(var t=this.pagerModule,e=t.element.querySelector(".e-numericcontainer"),i=e.querySelectorAll("a"),s=0;s<i.length;s++)i[parseInt(s.toString(),10)].hasAttribute("aria-label")&&i[parseInt(s.toString(),10)].hasAttribute("data-index")&&i[parseInt(s.toString(),10)].setAttribute("aria-label",t.getLocalizedLabel("Page")+i[parseInt(s.toString(),10)].getAttribute("data-index")+t.getLocalizedLabel("Of")+t.totalPages+t.getLocalizedLabel("Pages"))},a.prototype.renderNumericContainer=function(){this.element=pe("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(pe("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},a.prototype.renderFirstNPrev=function(t){this.first=pe("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1",role:"button"}}),this.prev=pe("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1",role:"button"}}),Ie([this.first,this.prev],t)},a.prototype.renderPrevPagerSet=function(t){var e=pe("div");this.PP=pe("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",href:"#"}}),e.appendChild(this.PP),t.appendChild(e)},a.prototype.renderNextPagerSet=function(t){var e=pe("div");this.NP=pe("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",href:"#"}}),e.appendChild(this.NP),t.appendChild(e)},a.prototype.renderNextNLast=function(t){this.next=pe("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1",role:"button"}}),this.last=pe("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1",role:"button"}}),Ie([this.next,this.last],t)},a.prototype.clickHandler=function(t){var e=this.pagerModule;return this.target=t.target,this.target.classList.contains("e-numericitem")&&t.preventDefault(),e.previousPageNo=e.currentPage,!this.target.classList.contains("e-disable")&&!u(this.target.getAttribute("data-index"))&&(e.currentPage=parseInt(this.target.getAttribute("data-index"),10),this.pagerModule.isInteracted=!0,e.dataBind()),!1},a.prototype.auxiliaryClickHandler=function(t){this.target=t.target,this.target.classList.contains("e-numericitem")&&t.button===1&&t.preventDefault()},a.prototype.updateLinksHtml=function(){var t=this.pagerModule,e,i,s,r=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');t.currentPage=t.totalPages===1?1:t.currentPage,t.currentPage>t.totalPages&&t.totalPages&&(t.currentPage=t.totalPages),e=parseInt((t.currentPage/t.pageCount).toString(),10),t.currentPage%t.pageCount===0&&e>0&&(e=e-1);for(var n=0;n<t.pageCount;n++){if(t.isPagerResized){var o=this.pagerElement.querySelector(".e-focus"),l=this.target?this.target:o||null,h=!1,p=!1,c=!1,d=!1,f=!1,g=!1,y=!1;if(l){var b=l.classList;if(b.contains("e-icons"))switch(!0){case b.contains("e-prev"):h=!0;break;case b.contains("e-next"):p=!0;break;case b.contains("e-first"):c=!0;break;case b.contains("e-last"):d=!0;break}else if(b.contains("e-numericitem"))switch(!0){case b.contains("e-np"):g=!0;break;case b.contains("e-pp"):y=!0;break;default:f=b.contains("e-numericitem");break}}i=d||this.pagerModule.keyAction==="End",r=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');var C=Array.from(r).some(function(A){return parseInt(A.getAttribute("data-index"),10)===t.currentPage});c||this.pagerModule.keyAction==="Home"?s=1+n:d||this.pagerModule.keyAction==="End"?s=e*t.pageCount+1+n:p||this.pagerModule.keyAction==="ArrowRight"||h||this.pagerModule.keyAction==="ArrowLeft"?C?s=parseInt(r[0].getAttribute("data-index"),10)+n:h||this.pagerModule.keyAction==="ArrowLeft"?s=parseInt(this.PP.getAttribute("data-index"),10)+n:s=t.currentPage+n:g||y?s=t.currentPage+n:f?s=parseInt(r[0].getAttribute("data-index"),10)+n:s=e*t.pageCount+1+n}else s=e*t.pageCount+1+n;s<=t.totalPages?(this.links[parseInt(n.toString(),10)].classList.remove("e-hide"),this.links[parseInt(n.toString(),10)].style.display="",this.links[parseInt(n.toString(),10)].setAttribute("data-index",s.toString()),this.links[parseInt(n.toString(),10)].innerHTML=t.customText?t.customText+s:s.toString(),t.currentPage!==s?this.links[parseInt(n.toString(),10)].classList.add("e-pager-default"):this.links[parseInt(n.toString(),10)].classList.remove("e-pager-default")):(this.links[parseInt(n.toString(),10)].innerHTML=t.customText?t.customText+s:s.toString(),this.links[parseInt(n.toString(),10)].style.display="none"),Se(this.links[parseInt(n.toString(),10)],[],["e-currentitem","e-active"]),this.links[parseInt(n.toString(),10)].removeAttribute("aria-current")}G(this.first,{"data-index":"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),G(this.pagerElement.querySelector(".e-mfirst"),{"data-index":"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),G(this.last,{"data-index":t.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),G(this.pagerElement.querySelector(".e-mlast"),{"data-index":t.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),G(this.prev,{"data-index":(t.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),G(this.pagerElement.querySelector(".e-mprev"),{"data-index":(t.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),G(this.next,{"data-index":(t.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")}),G(this.pagerElement.querySelector(".e-mnext"),{"data-index":(t.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")});var S=this.pagerModule.isPagerResized&&r.length?i?parseInt(r[0].getAttribute("data-index"),10)-t.avgNumItems:parseInt(r[0].getAttribute("data-index"),10)-r.length:parseInt(this.links[0].getAttribute("data-index"),10)-t.pageCount;G(this.PP,{"data-index":S<1?"1":S.toString(),title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip")});var I=this.pagerModule.isPagerResized&&r.length?parseInt(r[r.length-1].getAttribute("data-index"),10):parseInt(this.links[this.links.length-1].getAttribute("data-index"),10);G(this.NP,{"data-index":(I+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip")}),this.target=void 0},a.prototype.updateStyles=function(){var t=this;if(this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length){var e=this.links.findIndex(function(s){return s.getAttribute("data-index")===t.pagerModule.currentPage.toString()}),i=this.pagerModule.isPagerResized&&e!==-1?e:(this.pagerModule.currentPage-1)%this.pagerModule.pageCount;this.links[parseInt(i.toString(),10)]&&(Se(this.links[parseInt(i.toString(),10)],["e-currentitem","e-active"],[]),this.links[parseInt(i.toString(),10)].setAttribute("aria-current","page"))}},a.prototype.updateFirstNPrevStyles=function(){var t=["e-firstpage","e-pager-default"],e=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],s=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(Se(this.prev,i,s),Se(this.first,t,e),Se(this.pagerElement.querySelector(".e-mfirst"),t,e),Se(this.pagerElement.querySelector(".e-mprev"),i,s)):(Se(this.prev,s,i),Se(this.first,e,t),Se(this.pagerElement.querySelector(".e-mprev"),s,i),Se(this.pagerElement.querySelector(".e-mfirst"),e,t))},a.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount||this.pagerModule.isPagerResized&&this.links.findIndex(function(t){return parseInt(t.getAttribute("data-index"),10)===1})?Se(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):Se(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},a.prototype.updateNextPagerSetStyles=function(){var t=this.pagerModule,e=this.links[0].innerHTML.replace(t.customText,""),i=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');!e.length||!this.links.length||parseInt(e,10)+t.pageCount>t.totalPages||t.isPagerResized&&Array.from(i).some(function(s){return parseInt(s.getAttribute("data-index"),10)===t.totalPages})?Se(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):Se(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},a.prototype.updateNextNLastStyles=function(){var t=["e-lastpage","e-pager-default"],e=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],s=["e-nextpagedisabled","e-disable"],r=this.pagerModule;r.currentPage===r.totalPages||r.totalRecordsCount===0?(Se(this.last,e,t),Se(this.next,s,i),Se(this.pagerElement.querySelector(".e-mlast"),e,t),Se(this.pagerElement.querySelector(".e-mnext"),s,i)):(Se(this.last,t,e),Se(this.next,i,s),Se(this.pagerElement.querySelector(".e-mlast"),t,e),Se(this.pagerElement.querySelector(".e-mnext"),i,s))},a})(),GC=(function(){function a(t){this.pagerModule=t}return a.prototype.render=function(){var t=pe("div",{className:"e-parentmsgbar"});this.pageNoMsgElem=pe("span",{className:"e-pagenomsg"}),this.pageNoMsgElem.style.textAlign="right",this.pageCountMsgElem=pe("span",{className:"e-pagecountmsg"}),this.pageCountMsgElem.style.textAlign="right",Ie([this.pageNoMsgElem,this.pageCountMsgElem],t),this.pagerModule.element.appendChild(t),this.refresh()},a.prototype.refresh=function(){var t=this.pagerModule;this.pageNoMsgElem.textContent=this.format(t.getLocalizedLabel("currentPageInfo"),[t.totalRecordsCount===0?0:t.currentPage,t.totalPages||0,t.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(t.getLocalizedLabel(t.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[t.totalRecordsCount||0,t.totalRecordsCount?t.pageSize*(t.currentPage-1)+1:0,t.pageSize*t.currentPage>t.totalRecordsCount?t.totalRecordsCount:t.pageSize*t.currentPage]),this.pageNoMsgElem.parentElement.classList.remove("e-hide")},a.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},a.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},a.prototype.destroy=function(){},a.prototype.format=function(t,e){for(var i,s=RegExp,r=0;r<e.length;r++)i=new s("\\{"+r+"\\}","gm"),this.isValidLocale(this.pagerModule.locale)?t=t.replace(i,e[parseInt(r.toString(),10)].toLocaleString(this.pagerModule.locale)):t=t.replace(i,e[parseInt(r.toString(),10)].toString());return t},a.prototype.isValidLocale=function(t){try{return new Intl.NumberFormat(t),!0}catch{return!1}},a})(),_C=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),qt=function(a,t,e,i){var s=arguments.length,r=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(n=a[o])&&(r=(s<3?n(r):s>3?n(t,e,r):n(t,e))||r);return s>3&&r&&Object.defineProperty(t,e,r),r},hc=(function(a){_C(t,a);function t(e,i,s){var r=a.call(this,e,i)||this;return r.hasParent=!1,r.checkAll=!0,r.pageRefresh="pager-refresh",r.firstPagerFocus=!1,r.isCancel=!1,r.isInteracted=!1,r.parent=s,r}return t.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this],name:"ExternalMessage"}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this],name:"PagerDropDown"}),e},t.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager items",previousPagerTooltip:"Go to previous pager items",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager items",PreviousPagerTooltip:"Go to previous pager items",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All",Container:"Pager Container",Information:"Pager Information",ExternalMsg:"Pager external message",Page:"Page ",Of:" of ",Pages:" Pages"},this.containerModule=new UC(this),this.pagerMessageModule=new GC(this)},t.prototype.render=function(){if(this.element.setAttribute("data-role","pager"),this.element.setAttribute("tabindex","-1"),this.initLocalization(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&this.element.classList.add("e-mac-safari"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?x([this.element],this.cssClass.split(" ")):x([this.element],[this.cssClass])),this.hasParent||this.element.setAttribute("tabindex","0"),this.enableQueryString){var e=new URL(window.location.href).searchParams.get("page");if(!u(e)&&window.location.href.indexOf("?page=")>0){var i=parseInt(e,10);this.hasParent&&this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.currentPage=i}}this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount})),this.wireEvents(),this.addListener()},t.prototype.getPersistData=function(){var e=["currentPage","pageSize"];return this.addOnPersist(e)},t.prototype.destroy=function(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["pagerTemplate"])),this.removeListener(),this.unwireEvents(),a.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))},t.prototype.destroyTemplate=function(e,i){this.clearTemplate(e,i)},t.prototype.getModuleName=function(){return"pager"},t.prototype.onPropertyChanged=function(e,i){if(!this.isDestroyed){if(e.pageSize===this.getLocalizedLabel("All")&&i.pageSize===this.totalRecordsCount){this.pageSize=this.totalRecordsCount;return}e.pageCount!==i.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var s=0,r=Object.keys(e);s<r.length;s++){var n=r[s];switch(n){case"currentPage":this.checkGoToPage(e.currentPage,i.currentPage)&&this.currentPageChanged(e,i);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(i.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==i.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,i),this.isCancel&&this.hasParent&&this.parent.setProperties({pageSettings:{pageSize:i.pageSize}},!0)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage();break}}this.resizePager()}},t.prototype.wireEvents=function(){this.hasParent||(v.add(this.element,"keydown",this.keyPressHandler,this),v.add(document.body,"keydown",this.keyDownHandler,this)),v.add(this.element,"focusin",this.onFocusIn,this),v.add(this.element,"focusout",this.onFocusOut,this),v.add(window,"resize",this.resizePager,this),v.add(window,"load",this.resizePager,this)},t.prototype.unwireEvents=function(){this.hasParent||(v.remove(this.element,"keydown",this.keyPressHandler),v.remove(document.body,"keydown",this.keyDownHandler)),v.remove(this.element,"focusin",this.onFocusIn),v.remove(this.element,"focusout",this.onFocusOut),v.remove(window,"resize",this.resizePager),v.remove(window,"load",this.resizePager)},t.prototype.onFocusIn=function(e){var i=this.getFocusedTabindexElement();if(u(i)){var s=e.target,r=this.getDropDownPage();if(this.hasParent||(this.element.tabIndex=-1),s===this.element&&!this.hasParent){var n=this.getFocusablePagerElements(this.element,[]);this.addFocus(n[0],!0);return}if(s===this.element){this.element.tabIndex=0;return}s!==r&&!s.classList.contains("e-disable")&&this.addFocus(s,!0)}},t.prototype.onFocusOut=function(e){var i=this.getFocusedElement(),s=this.getDropDownPage();u(i)||this.removeFocus(i,!0),this.pageSizes&&s&&s.classList.contains("e-input-focus")&&this.removeFocus(s,!0),this.setTabIndexForFocusLastElement(),this.hasParent||(this.element.tabIndex=0),this.hasParent&&(this.element.tabIndex=-1)},t.prototype.keyDownHandler=function(e){if(e.altKey&&e.keyCode===74){var i=this.getFocusablePagerElements(this.element,[]);i.length>0&&i[0].focus()}},t.prototype.keyPressHandler=function(e){var i=$(e,{cancel:!1});this.notify(hi,i),i.cancel===!0&&e.stopImmediatePropagation()},t.prototype.addListener=function(){this.isDestroyed||this.hasParent||this.on(hi,this.onKeyPress,this)},t.prototype.removeListener=function(){this.isDestroyed||this.hasParent||this.off(hi,this.onKeyPress)},t.prototype.onKeyPress=function(e){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(e):(e.preventDefault(),this.setPagerFocus()))},t.prototype.checkPagerHasFocus=function(){return!!this.getFocusedTabindexElement()},t.prototype.setPagerContainerFocus=function(){this.element.focus()},t.prototype.setPagerFocus=function(){var e=this.getFocusablePagerElements(this.element,[]);e.length>0&&e[0].focus()},t.prototype.setPagerFocusForActiveElement=function(){var e=this.getActiveElement();e&&e.focus()},t.prototype.setTabIndexForFocusLastElement=function(){var e=this.getFocusablePagerElements(this.element,[]),i=this.getDropDownPage();this.pageSizes&&i&&!u(i.offsetParent)?i.tabIndex=0:e.length>0&&(e[e.length-1].tabIndex=0)},t.prototype.changePagerFocus=function(e){this.keyAction=e.key,e.shiftKey&&e.keyCode===9?this.changeFocusByShiftTab(e):e.keyCode===9?this.changeFocusByTab(e):e.keyCode===13||e.keyCode===32?this.navigateToPageByEnterOrSpace(e):(e.keyCode===37||e.keyCode===39||e.keyCode===35||e.keyCode===36)&&this.navigateToPageByKey(e),this.keyAction=""},t.prototype.getFocusedTabindexElement=function(){for(var e,i=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),s=0;s<i.length;s++){var r=i[parseInt(s.toString(),10)];if(r&&(r.classList.contains("e-focused")||r.classList.contains("e-input-focus"))){e=r;break}}return e},t.prototype.changeFocusByTab=function(e){var i=this.getFocusedTabindexElement(),s=this.getFocusablePagerElements(this.element,[]),r=this.getDropDownPage();if(s.length>0){if(this.pageSizes&&r&&i===s[s.length-1])r.tabIndex=0;else for(var n=0;n<s.length;n++)if(i===s[parseInt(n.toString(),10)]){var o=n+1;o<s.length&&(e.preventDefault(),s[parseInt(o.toString(),10)].focus());break}}},t.prototype.changeFocusByShiftTab=function(e){var i=this.getFocusedTabindexElement(),s=this.getFocusablePagerElements(this.element,[]),r=this.getDropDownPage();if(this.pageSizes&&r&&r.classList.contains("e-input-focus"))r.tabIndex=-1,this.addFocus(s[s.length-1],!0);else if(s.length>0){for(var n=0;n<s.length;n++)if(i===s[parseInt(n.toString(),10)]){var o=n-1;if(o>=0)e.preventDefault(),s[parseInt(o.toString(),10)].focus();else if(this.hasParent){var l=this.parent.getRows(),h=l[l.length-1],p=h.lastChild;e.preventDefault(),p.focus(),this.firstPagerFocus=!0}break}}},t.prototype.checkFirstPagerFocus=function(){return this.firstPagerFocus?(this.firstPagerFocus=!1,!0):!1},t.prototype.navigateToPageByEnterOrSpace=function(e){var i=this.getFocusedElement();if(i){this.goToPage(parseInt(i.getAttribute("data-index"),10));var s=this.getActiveElement(),r=this.getClass(i),n=this.getElementByClass(r);(r==="e-first"||r==="e-prev"||r==="e-next"||r==="e-last"||r==="e-pp"||r==="e-np")&&n&&!n.classList.contains("e-disable")?n.focus():this.checkFocusInAdaptiveMode(i)?this.changeFocusInAdaptiveMode(i):s&&s.focus()}},t.prototype.navigateToPageByKey=function(e){var i=e.keyCode===37?".e-prev":e.keyCode===39?".e-next":e.keyCode===35?".e-last":e.keyCode===36?".e-first":"",s=this.element.querySelector(i),r=this.getFocusedElement();if(!u(s)&&s.hasAttribute("data-index")&&!isNaN(parseInt(s.getAttribute("data-index"),10))){this.goToPage(parseInt(s.getAttribute("data-index"),10));var n=this.getActiveElement();this.checkFocusInAdaptiveMode(r)?this.changeFocusInAdaptiveMode(r):n&&n.focus()}},t.prototype.checkFocusInAdaptiveMode=function(e){var i=this.getClass(e);return i==="e-mfirst"||i==="e-mprev"||i==="e-mnext"||i==="e-mlast"},t.prototype.changeFocusInAdaptiveMode=function(e){var i=this.getClass(e),s=this.getElementByClass(i);if(s&&s.classList.contains("e-disable"))if(i==="e-mnext"||i==="e-mlast"){var r=this.element.querySelector(".e-mprev");r.focus()}else this.setPagerFocus()},t.prototype.removeTabindexLastElements=function(){var e=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');if(e.length>1)for(var i=1;i<e.length;i++){var s=e[parseInt(i.toString(),10)];s&&(s.tabIndex=-1)}},t.prototype.getActiveElement=function(){return this.element.querySelector(".e-active")},t.prototype.getDropDownPage=function(){var e=this.element.querySelector(".e-pagerdropdown"),i;return e&&(i=e.children[0]),i},t.prototype.getFocusedElement=function(){return this.element.querySelector(".e-focused")},t.prototype.getClass=function(e){for(var i,s=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"],r=0;r<s.length;r++)if(e&&e.classList.contains(s[parseInt(r.toString(),10)]))return i=s[parseInt(r.toString(),10)],i;return i},t.prototype.getElementByClass=function(e){return this.element.querySelector("."+e)},t.prototype.getFocusablePagerElements=function(e,i){for(var s=e,r=s.children,n=i,o=0;o<r.length;o++){var l=r[parseInt(o.toString(),10)];if(l.children.length>0&&!l.classList.contains("e-pagesizes"))n=this.getFocusablePagerElements(l,n);else{var h=r[parseInt(o.toString(),10)];h.hasAttribute("tabindex")&&!l.classList.contains("e-disable")&&l.style.display!=="none"&&!u(l.offsetParent)&&n.push(h)}}return n},t.prototype.addFocus=function(e,i){u(e)||(i&&x([e],["e-focused","e-focus"]),e.tabIndex=0)},t.prototype.removeFocus=function(e,i){i&&R([e],["e-focused","e-focus"]),e.tabIndex=-1},t.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},t.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.isInteracted=!1,this.dataBind())},t.prototype.setPageSize=function(e){this.pageSize=e,this.dataBind()},t.prototype.checkpagesizes=function(){return!!(this.pageSizes===!0||this.pageSizes.length)},t.prototype.checkGoToPage=function(e,i){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),u(i)||(this.previousPageNo=i),this.previousPageNo!==e&&e>=1&&e<=this.totalPages},t.prototype.currentPageChanged=function(e,i){if(this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage!==i.currentPage||e.pageSize!==i.pageSize){var s={currentPage:this.currentPage,newProp:e,oldProp:i,cancel:!1,isInteracted:this.isInteracted};this.trigger("click",s),s.cancel?(this.isCancel=!0,i&&i.pageSize&&(this.setProperties({pageSize:i.pageSize},!0),this.pagerdropdownModule&&(this.pagerdropdownModule.setDropDownValue("value",i.pageSize),this.pagerdropdownModule.dropDownListObject.text=i.pageSize+""))):(this.isCancel=!1,this.refresh())}},t.prototype.pagerTemplate=function(){if(!(this.isReactTemplate()&&this.hasParent)){var e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var i={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},s=this.element.parentElement.id+"_template";this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(i,this,"pagerTemplate",s,null,null,this.element),this.renderReactTemplates()):(e=this.isVue?this.getPagerTemplate()(i,this,"pagerTemplate",null,null,null,null,this.root):this.getPagerTemplate()(i),Ht(this.element,e))}},t.prototype.updateTotalPages=function(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize===0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},t.prototype.getPagerTemplate=function(){return this.templateFn},t.prototype.compile=function(e){if(e)try{typeof e=="function"?this.templateFn=qe(e):document.querySelectorAll(e).length?this.templateFn=qe(document.querySelector(e).innerHTML.trim()):this.templateFn=qe(e)}catch{this.templateFn=qe(e)}},t.prototype.refresh=function(){if(this.template)this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.parent&&this.parent.isAngular?this.parent.destroyTemplate(["pagerTemplate"]):this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate());else{this.updateRTL();var e=this.getFocusedTabindexElement();this.containerModule.refresh(),this.removeTabindexLastElements(),e&&e.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(e)?this.changeFocusInAdaptiveMode(e):this.setPagerFocusForActiveElement()),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh(),this.setTabIndexForFocusLastElement(),this.resizePager()}},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.initLocalization=function(){this.localeObj=new zt(this.getModuleName(),this.defaultConstants,this.locale)},t.prototype.updateQueryString=function(e){var i=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:i},"",i),this.isReact&&window.dispatchEvent(new PopStateEvent("popstate"))},t.prototype.getUpdatedURL=function(e,i,s){var r=RegExp,n=new r("([?|&])"+i+"=.*?(&|#|$)","i");if(e.match(n))return e.replace(n,"$1"+i+"="+s+"$2");var o="";return e.indexOf("#")!==-1&&(o=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(e.indexOf("?")!==-1?"&":"?")+i+"="+s+o},t.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(pe("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(pe("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},t.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(pe("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(pe("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},t.prototype.addAriaLabel=function(){var e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!E.isDevice)for(var i=0;i<e.length;i++){var s=this.element.querySelector(e[parseInt(i.toString(),10)]);s.setAttribute("aria-label",s.getAttribute("title"))}},t.prototype.isReactTemplate=function(){return(this.isReact||this.isVue)&&this.template&&typeof this.template!="string"&&!(this.template.prototype&&this.template.prototype.CSPTemplate)},t.prototype.calculateActualWidth=function(){for(var e=this.element.querySelectorAll(".e-mfirst, .e-mprev, .e-icon-first, .e-icon-prev, .e-pp:not(.e-disable), .e-numericitem:not(.e-hide), .e-numericitem.e-active.e-hide, .e-np:not(.e-disable), .e-icon-next, .e-icon-last, .e-parentmsgbar, .e-mnext, .e-mlast, .e-pagerdropdown, .e-pagerconstant"),i=0,s=0;s<e.length;s++)getComputedStyle(e[parseInt(s.toString(),10)]).display!=="none"&&(i+=e[parseInt(s.toString(),10)].offsetWidth+parseFloat(getComputedStyle(e[parseInt(s.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(e[parseInt(s.toString(),10)]).marginRight));var r=this.element.querySelector(".e-pagercontainer");return i+=parseFloat(getComputedStyle(r).marginLeft)+parseFloat(getComputedStyle(r).marginRight),i},t.prototype.resizePager=function(){var e=this,i=this.element.classList.contains("e-pager")?getComputedStyle(this.element).getPropertyValue("border-style").includes("solid"):null;if(!this.template&&i){var s=this.element.querySelector(".e-pagercontainer"),r=this.calculateActualWidth(),n=this.element.clientWidth-parseFloat(getComputedStyle(this.element).paddingLeft)-parseFloat(getComputedStyle(this.element).paddingRight)-parseFloat(getComputedStyle(this.element).marginLeft)-parseFloat(getComputedStyle(this.element).marginRight),o=s.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),l=s.querySelectorAll('.e-numericitem.e-hide:not([style*="display: none"])'),h=o.length,p=1,c=u(F(this.element,"e-bigger"))?5:10,d=s.querySelector(".e-np"),f=s.querySelector(".e-pp"),g=this.element.querySelectorAll('.e-parentmsgbar:not(.e-hide):not([style*="display: none"]), .e-pagesizes:not(.e-hide):not([style*="display: none"])'),y=0;g.length&&(g.forEach(function(J){y+=J.offsetWidth}),this.averageDetailWidth=y/g.length);for(var b=0,C=0;C<o.length;C++)b+=o[parseInt(C.toString(),10)].offsetWidth+parseFloat(getComputedStyle(o[parseInt(C.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(o[parseInt(C.toString(),10)]).marginRight);var S=b/o.length;if(n>0&&r>=n-(S||0)){this.isPagerResized=!0,this.currentPage!==this.totalPages&&Se(d,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]),r=this.calculateActualWidth();var I=Math.abs(r-n),A=Math.ceil(I/S);A=A===0?1:A>o.length?o.length-1:A;for(var C=1;C<=A;C++){var T=h-parseInt(C.toString(),10);o=s.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),this.currentPage!==1&&(parseInt(o[Math.abs(T)].getAttribute("data-index"),10)===this.currentPage||parseInt(o[o.length-1].getAttribute("data-index"),10)===this.currentPage)&&(T=0,Se(f,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])),o[Math.abs(T)]&&!o[Math.abs(T)].classList.contains("e-currentitem")&&o[Math.abs(T)].classList.add("e-hide")}if(o=s.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),o.length<=1&&g.length&&window.innerWidth>=768){var L=this.calculateActualWidth();if(L>n-c){var _=Math.floor((n-(L-y))/this.averageDetailWidth);_=g.length-_;for(var C=0;C<(_>g.length?g.length:_);C++)g[parseInt(C.toString(),10)].classList.add("e-hide")}}}else if(r<n&&l.length){var I=Math.abs(n-r),X=this.element.querySelectorAll(".e-parentmsgbar.e-hide, .e-pagesizes.e-hide");if(X.length&&I>this.averageDetailWidth+this.averageDetailWidth/4&&X[X.length-1].classList.remove("e-hide"),I>S*2&&!X.length&&window.innerWidth>=768){var re=Math.floor(I/(S+c));re=re>l.length?l.length:re-1;for(var ye=Array.from(l).filter(function(K){return parseInt(K.getAttribute("data-index"),10)<e.currentPage}).sort(function(K,Y){return parseInt(Y.getAttribute("data-index"),10)-parseInt(K.getAttribute("data-index"),10)}),V=Array.from(l).filter(function(K){return parseInt(K.getAttribute("data-index"),10)>e.currentPage}),q=ye.length&&ye||V.length&&V,C=1;C<=re;C++){var z=q&&q[Math.abs(p-C)];z&&(z.classList.remove("e-hide"),z===q[q.length-1]&&(q=null))}}}if(o=s.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),o.length){parseInt(o[o.length-1].getAttribute("data-index"),10)===this.totalPages&&Se(d,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),parseInt(o[0].getAttribute("data-index"),10)===1&&Se(f,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]);var U=Array.from(o).some(function(J){return parseInt(J.getAttribute("data-index"),10)===e.totalPages}),ie=parseInt(o[0].getAttribute("data-index"),10)-(U&&!u(this.avgNumItems)?this.avgNumItems:o.length);f.setAttribute("data-index",ie<1?"1":ie.toString()),d.setAttribute("data-index",(parseInt(o[o.length-1].getAttribute("data-index"),10)+1).toString()),this.avgNumItems=U?this.avgNumItems:o.length}this.element.offsetWidth<769&&window.getComputedStyle(this.element.querySelector(".e-mfirst")).getPropertyValue("display")!=="none"&&this.pageSizes?(this.element.querySelector(".e-pagesizes").classList.remove("e-hide"),this.element.querySelector(".e-parentmsgbar").classList.remove("e-hide"),this.element.classList.add("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.element.offsetWidth<481?this.currentPage+" / "+this.totalPages:this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" "):(this.element.classList.remove("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" ")}},qt([m(!1)],t.prototype,"enableQueryString",void 0),qt([m(!1)],t.prototype,"enableExternalMessage",void 0),qt([m(!0)],t.prototype,"enablePagerMessage",void 0),qt([m(12)],t.prototype,"pageSize",void 0),qt([m(10)],t.prototype,"pageCount",void 0),qt([m(1)],t.prototype,"currentPage",void 0),qt([m()],t.prototype,"totalRecordsCount",void 0),qt([m()],t.prototype,"externalMessage",void 0),qt([m(!1)],t.prototype,"pageSizes",void 0),qt([m()],t.prototype,"template",void 0),qt([m("")],t.prototype,"customText",void 0),qt([O()],t.prototype,"click",void 0),qt([m("")],t.prototype,"cssClass",void 0),qt([O()],t.prototype,"dropDownChanged",void 0),qt([O()],t.prototype,"created",void 0),t=qt([pt],t),t})(Vt),KC=(function(){function a(t){this.pagerModule=t}return a.prototype.getModuleName=function(){return"pagerdropdown"},a.prototype.render=function(){var t=this.pagerModule;this.pagerDropDownDiv=pe("div",{className:"e-pagesizes"});var e=pe("div",{className:"e-pagerdropdown"}),i=pe("div",{className:"e-pagerconstant"}),s=pe("input",{attrs:{type:"text",tabindex:"-1"}});this.pagerCons=pe("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),e.appendChild(s),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(e),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var r=this.pagerModule.pageSizes,n=r.length?this.convertValue(r):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],o=this.pagerModule.pageSize;this.dropDownListObject=new Fr({dataSource:n,value:o.toString(),change:this.onChange.bind(this),placeholder:this.pagerModule.getLocalizedLabel("pagerDropDown"),cssClass:this.pagerModule.cssClass?"e-alldrop "+this.pagerModule.cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(s),r.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),t.pageSize=o,t.dataBind(),t.trigger("dropDownChanged",{pageSize:o}),this.addEventListener()},a.prototype.onChange=function(t){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),t.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.isCancel||this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage||this.pagerModule.isAllPage===void 0&&this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})},a.prototype.refresh=function(){this.pagerCons&&(this.isPageSizeAll(this.pagerModule.pageSize)?(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerAllDropDown"),this.pagerCons.parentElement.classList.add("e-page-all")):(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerDropDown"),this.pagerCons.parentElement.classList.remove("e-page-all")),this.pagerDropDownDiv.classList.remove("e-hide"))},a.prototype.beforeValueChange=function(t){if(typeof t.newProp.value=="number"){var e=t.newProp.value.toString();t.newProp.value=e}},a.prototype.convertValue=function(t){for(var e=t,i=0;i<e.length;i++)e[parseInt(i.toString(),10)]=parseInt(e[parseInt(i.toString(),10)],10)?e[parseInt(i.toString(),10)].toString():this.pagerModule.getLocalizedLabel(e[parseInt(i.toString(),10)])!==""?this.pagerModule.getLocalizedLabel(e[parseInt(i.toString(),10)]):e[parseInt(i.toString(),10)];return e},a.prototype.isPageSizeAll=function(t){var e=typeof t=="string"&&t!==this.pagerModule.getLocalizedLabel("All")?parseInt(t,10):t;return e===this.pagerModule.totalRecordsCount||t===this.pagerModule.getLocalizedLabel("All")},a.prototype.setDropDownValue=function(t,e){if(this.dropDownListObject){var i=this.pagerModule.isAllPage;this.pagerModule.isAllPage=this.isPageSizeAll(e),this.pagerModule.isAllPage&&typeof this.pagerModule.pageSizes=="object"&&this.pagerModule.pageSizes.indexOf("All")===-1&&(this.pagerModule.isAllPage=!1),this.pagerModule.checkAll=!!(i&&this.pagerModule.isAllPage),this.dropDownListObject[""+t]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):e}},a.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},a.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},a.prototype.destroy=function(t){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),this.pagerDropDownDiv&&this.pagerDropDownDiv.parentNode&&ce(this.pagerDropDownDiv))},a})(),YC=(function(){function a(t){this.pagerModule=t}return a.prototype.getModuleName=function(){return"externalMessage"},a.prototype.render=function(){this.element=pe("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("ExternalMsg")}}),this.pagerModule.element.appendChild(this.element),this.refresh()},a.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},a.prototype.hideMessage=function(){u(this.element)||(this.element.style.display="none")},a.prototype.showMessage=function(){this.element.style.display=""},a.prototype.destroy=function(){this.element&&this.element.parentElement&&ce(this.element)},a})(),dS=(function(){function a(t,e){this.isInitialRender=!0,this.isCancel=!1,hc.Inject(YC,KC),this.parent=t,this.pageSettings=e,this.addEventListener()}return a.prototype.getModuleName=function(){return"pager"},a.prototype.render=function(){var t=this.parent;this.pagerDestroy(),u(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"});var e=dr({},$({},fn(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:t.enableRtl,locale:t.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]);e.cssClass=this.parent.cssClass?this.parent.cssClass:"",this.pagerObj=new hc(e,void 0,this.parent),this.pagerObj.root=t.root?t.root:t,this.pagerObj.hasParent=!0,this.pagerObj.on(sp,this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1},a.prototype.onSelect=function(t){this.pageSettings.pageSize=t.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},a.prototype.addAriaAttr=function(){if(!this.pageSettings.template){this.parent.getContentTable()&&this.element.setAttribute("aria-controls",this.parent.getContentTable().id);for(var t=this.parent.createElement("div",{className:"e-numericcontainer"}),e=this.element.querySelector(".e-pagercontainer"),i=document.createDocumentFragment(),s=this.element.querySelector(".e-numericcontainer"),r=s.querySelectorAll("a"),n=0;n<r.length;n++){var o=this.parent.createElement("div");o.appendChild(r[parseInt(n.toString(),10)]),i.appendChild(o)}t.appendChild(i),e.replaceChild(t,s)}},a.prototype.dataReady=function(t){this.updateModel(t)},a.prototype.refresh=function(){this.pagerObj.refresh()},a.prototype.goToPage=function(t){this.pagerObj.goToPage(t)},a.prototype.setPageSize=function(t){this.pagerObj.setPageSize(t)},a.prototype.updateModel=function(t){this.parent.pageSettings.totalRecordsCount=t.count;var e=t.action==="add"&&t.requestType==="save"||t.requestType==="batchsave",i=this.parent.filterModule&&this.parent.filterModule.isFilterCleared,s=t.searchString===""&&t.requestType==="searching"||t.requestType==="filtering"&&(t.action==="clearFilter"||t.action==="clear-filter")||i;i&&(this.parent.filterModule.isFilterCleared=!1),this.pagerObj.isAllPage&&!e&&(!s||s&&this.pagerObj.checkAll)&&(this.parent.pageSettings.pageSize=this.parent.pageSettings.totalRecordsCount),e&&this.pagerObj.isAllPage&&t.count===this.pageSettings.pageSize&&this.pagerObj.setProperties({pageSize:t.count},!0),this.parent.dataBind()},a.prototype.onActionComplete=function(t){this.parent.trigger(Fe,$(t,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:Fe}))},a.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){for(var e=t.properties,i=0,s=Object.keys(e);i<s.length;i++){var r=s[i];this.pagerObj[""+r]=e[""+r]}this.pagerObj.dataBind()}},a.prototype.clickHandler=function(t){var e=this.parent;if(this.isForceCancel||Ds(e)&&!e.prevPageMoving&&!this.isCancel){this.isForceCancel?this.isForceCancel=!1:(!u(t.newProp)&&!u(t.newProp.pageSize)?(e.notify(Bi,{instance:this,handler:this.setPageSize,arg1:t.newProp.pageSize}),this.pagerObj.setProperties({pageSize:t.oldProp.pageSize},!0),this.parent.setProperties({pageSettings:{pageSize:t.oldProp.pageSize}},!0),this.pagerObj.setProperties({currentPage:e.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:e.pageSettings.currentPage},!0)):t.currentPage&&(e.notify(Bi,{instance:this,handler:this.goToPage,arg1:t.currentPage}),this.pagerObj.currentPage=e.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:e.pageSettings.currentPage),this.isForceCancel=!0,this.pagerObj.dataBind()),t.cancel=!0;return}e.pageSettings.pageSize=this.pagerObj.pageSize,e.prevPageMoving=!1;var i=this.pageSettings.currentPage,s={cancel:!1,requestType:"paging",previousPage:i,currentPage:t.currentPage,pageSize:e.pageSettings.pageSize,type:Rt};if(this.isCancel||(this.pageSettings.currentPage=t.currentPage,this.parent.notify(os,s),e.pageRequireRefresh=!1),s.cancel){t.cancel=!0,this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.pagerObj.setProperties({currentPage:i},!0),this.isCancel=!0;return}this.isCancel=!1,this.parent.requestTypeAction="paging"},a.prototype.keyPressHandler=function(t){if(t.action in uc){t.preventDefault();var e=this.element.querySelector(uc[t.action]);e.classList.contains("e-nextprevitemdisabled")||e.click()}},a.prototype.updateExternalMessage=function(t){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=t,this.pagerObj.dataBind()},a.prototype.appendToElement=function(){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.isVue=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},a.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))},a.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},!this.parent.isDestroyed&&((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(op,this.handlers.created.bind(this)),this.evtHandlers=[{event:yh,handler:this.handlers.load},{event:Xa,handler:this.handlers.end},{event:Ar,handler:this.handlers.ready},{event:am,handler:this.handlers.complete},{event:bt,handler:this.handlers.updateLayout},{event:Wt,handler:this.handlers.inboundChange},{event:hi,handler:this.handlers.keyPress},{event:ut,handler:this.destroy}],yi(this.parent,this.evtHandlers,!0,this))},a.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},a.prototype.isReactTemplate=function(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&typeof this.pagerObj.template!="string"},a.prototype.renderReactPagerTemplate=function(){if(!this.isInitialRender&&this.isReactTemplate()){var t=void 0;this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template);var e=this.parent.pageSettings,i={currentPage:e.currentPage,pageSize:e.pageSize,pageCount:e.pageCount,totalRecordsCount:e.totalRecordsCount,totalPages:this.pagerObj.totalPages},s=this.parent.id+"_pagertemplate";this.parent.isReact?(this.pagerObj.templateFn(i,this.parent,"pagerTemplate",s,null,null,this.pagerObj.element),this.parent.renderTemplates()):(t=this.pagerObj.templateFn(i,this.parent,"pagerTemplate"),Ht(this.pagerObj.element,t))}},a.prototype.removeEventListener=function(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(op,this.handlers.created),this.parent.off(sp,this.renderReactPagerTemplate),yi(this.parent,this.evtHandlers,!1))},a.prototype.destroy=function(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()},a.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),ce(this.element))},a})(),uc={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},XC=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),QC=(function(a){XC(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-filterbarcell",attrs:{role:"columnheader"}}),e}return t.prototype.getGui=function(){return this.parent.createElement("div")},t.prototype.render=function(e,i){var s=this.parent.element.querySelector(".e-filterbar"),r=this.element.cloneNode(),n=this.getGui(),o,l=e.column;if(s.appendChild(r),r.setAttribute("data-mappinguid",l.uid),l.filterTemplate){var h={};i&&(h[l.field]=i[l.field]);var p="column";if(h[""+p]=l,l.visible){this.parent.filterSettings.type==="FilterBar"&&r.classList.add("e-fltrtemp");var c=this.parent.isReact&&typeof l.filterTemplate!="string"&&!(l.filterTemplate.prototype&&l.filterTemplate.prototype.CSPTemplate),d=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,f=this.parent.element.id+l.uid+"filterTemplate";if(c||d)l.getFilterTemplate()(h,this.parent,"filterTemplate",f,null,null,r),this.parent.renderTemplates();else{var g=l.getFilterTemplate()(h,this.parent,"filterTemplate",f,null,null,null,this.parent.root);Ht(r,g)}}else r.classList.add("e-hide")}else if(l.type!=="checkbox"){if((u(l.allowFiltering)||l.allowFiltering)&&!u(l.filterBarTemplate))if(r.classList.add("e-fltrtemp"),G(n,{class:"e-fltrtempdiv"}),u(l.filterBarTemplate.create))o=this.parent.createElement("input",{id:l.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:l.headerText}}),n.appendChild(o);else{var y={column:l,node:Element},b=l.filterBarTemplate.create;if(typeof b=="string"&&(b=H(b,window)),o=b(y),typeof o=="string"){var C=this.parent.createElement("div");C.innerHTML=o,o=C.firstChild}G(n,{class:"e-filterUi_input e-filtertext e-fltrTemp",title:l.headerText,id:l.field+"_filterBarcell"}),n.appendChild(o)}else{G(n,{class:"e-filterdiv e-fltrinputdiv"}),o=this.parent.createElement("input",{id:l.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:l.headerText+e.attributes.title,value:i[e.column.field]?i[e.column.field]:""}}),n.appendChild(o);var y={element:o,floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0,cssClass:this.parent.cssClass}};this.parent.filterModule.inputList.push(y),W.createInput(y,this.parent.createElement)}(l.allowFiltering===!1||l.field===""||u(l.field))&&(o.setAttribute("disabled","true"),o.classList.add("e-disable"));var S=n.querySelector(".e-clear-icon");if(S&&S.setAttribute("title",this.parent.localeObj.getConstant("ClearButton")),l.visible||r.classList.add("e-hide"),this.appendHtml(r,n),this.parent.filterSettings.showFilterBarOperator&&this.parent.filterSettings.type==="FilterBar"&&!this.parent.isPrinting&&u(l.filterTemplate)&&u(l.filterBarTemplate)&&this.operatorIconRender(n,l,e),(u(l.allowFiltering)||l.allowFiltering)&&!u(l.filterBarTemplate)){var I=l.filterBarTemplate.write,y={element:o,column:l};typeof I=="string"&&(I=H(I,window)),I.call(this,y)}}else l.visible||r.classList.add("e-hide");return this.parent.isFrozenGrid()&&kh(this.parent,l,r),r},t.prototype.appendHtml=function(e,i){return e.appendChild(i),e},t.prototype.operatorIconRender=function(e,i,s){var r=this.parent,n,o=this.parent.createElement("input",{className:" e-filterbaroperator e-icons e-icon-filter",id:s.column.uid});if(e.querySelector("span").appendChild(o),i.filter&&i.filter.operator)n=i.filter.operator;else if(r.filterSettings.columns.length)for(var l=0,h=r.filterSettings.columns;l<h.length;l++){var p=h[parseInt(l.toString(),10)];if(p.field===i.field){n=p.operator;break}else n="equal"}else n="equal";u(r.filterModule.operators[i.field])||(n=r.filterModule.operators[i.field]),this.dropOptr=new Fr({fields:{text:"text",value:"value"},popupHeight:"auto",value:n,width:"0px",enabled:i.allowFiltering,popupWidth:"auto",enableRtl:this.parent.enableRtl,change:this.internalEvent.bind(this),beforeOpen:function(){var d=r.filterModule.customOperators;this.dataSource=d[r.getColumnByUid(this.element.id).type+"Operator"];for(var f=0;f<this.dataSource.length;f++)i.filter&&i.filter.operator&&u(r.filterModule.operators[i.field])&&this.dataSource[parseInt(f.toString(),10)].value===i.filter.operator&&(this.value=i.filter.operator)},cssClass:this.parent.cssClass?"e-popup-flbar "+this.parent.cssClass:"e-popup-flbar"}),this.dropOptr.appendTo(o);var c=M(this.dropOptr.element,"span");c.classList.add("e-filterbardropdown"),c.removeAttribute("tabindex")},t.prototype.internalEvent=function(e){var i=this.parent,s=i.getColumnByUid(e.element.getAttribute("id"));e.column=s,i.filterModule.operators[s.field]=e.value;var r=e.value;if(i.filterModule&&i.filterModule.filterSettings.showFilterBarOperator){var n=document.getElementById(s.field+"_filterBarcell");r==="isempty"||r==="isnotempty"||r==="isnotnull"||r==="isnull"?(n.setAttribute("readOnly","true"),i.filterModule.filterByColumn(s.field,r,null,i.filterModule.predicate,i.filterModule.filterSettings.enableCaseSensitivity,i.filterModule.ignoreAccent,s.isForeignColumn())):n&&n.readOnly&&(n.removeAttribute("readOnly"),i.filterModule.removeFilteredColsByField(s.field))}i.notify(jm,e)},t})($t),$C=(function(){function a(t,e,i,s){this.ddOpen=this.dropDownOpen.bind(this),this.parent=t,this.serviceLocator=i,this.filterSettings=s,this.customFilterOperators=e,this.parent&&(this.parent.on(Qt,this.destroyDropDownList,this),this.parent.on(ut,this.destroyDropDownList,this))}return a.prototype.renderOperatorUI=function(t,e,i,s,r){var n=this;this.dialogObj=s;var o=i.type+"Operator";this.optrData=this.customOptr=u(r)?!u(this.parent.filterSettings.operators)&&!u(this.parent.filterSettings.operators[""+o])?this.parent.filterSettings.operators[""+o]:this.customFilterOperators[""+o]:r;var l=this.customOptr,h=this.dropSelectedVal(i,o),p=this.parent.createElement("div",{className:"e-flm_optrdiv"});t.appendChild(p);var c=this.parent.createElement("input",{id:i.uid+"-floptr"});p.appendChild(c),this.dropOptr=new Fr({dataSource:l,fields:{text:"text",value:"value"},cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",enableRtl:this.parent.enableRtl,text:h,change:function(){var d=document.querySelector(".e-flmenu-valuediv").querySelector("input");n.dropOptr.value==="isempty"||n.dropOptr.value==="isnotempty"||n.dropOptr.value==="isnotnull"||n.dropOptr.value==="isnull"?u(d.ej2_instances)?d.setAttribute("disabled","true"):d.ej2_instances[0].enabled=!1:u(d.getAttribute("disabled"))||(u(d.ej2_instances)?d.removeAttribute("disabled"):d.ej2_instances[0].enabled=!0),gn(n.dropOptr.value,i.uid,i,i.type,s,n.dropOptr.previousValue)}}),this.dropOptr.addEventListener(Lt,this.ddOpen),this.dropOptr.appendTo("#"+i.uid+"-floptr")},a.prototype.renderResponsiveDropDownList=function(t){t.popup.element.style.width="100%"},a.prototype.dropDownOpen=function(t){t.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString(),this.parent.enableAdaptiveUI&&this.renderResponsiveDropDownList(t)},a.prototype.dropSelectedVal=function(t,e){for(var i="",s=this.parent.filterSettings.columns,r=0,n=s;r<n.length;r++){var o=n[r];if(t.field===o.field||t.isForeignColumn()&&t.foreignKeyValue===o.field){var l=new N(this.optrData).executeLocal(new se().where("value","equal",o.operator));i=u(l[0])?"":l[0].text}}if(i==="")if(t.filter.operator)for(var h=Object.keys(this.optrData).length,p=0;p<h;p++)this.optrData[parseInt(p.toString(),10)].value===t.filter.operator&&(i=this.optrData[parseInt(p.toString(),10)].text);else i=this.optrData[0].text;return i},a.prototype.getFlOperator=function(){return this.dropOptr.value},a.prototype.destroyDropDownList=function(){this.dropOptr.isDestroyed||(this.dropOptr.removeEventListener(Lt,this.ddOpen),this.dropOptr.destroy(),this.parent.off(Qt,this.destroyDropDownList),this.parent.off(ut,this.destroyDropDownList))},a})();Or.Inject(Lh);var JC=(function(){function a(t,e,i){this.parent=t,this.serLocator=e,this.filterSettings=i,this.parent&&(this.parent.on(Qt,this.destroy,this),this.parent.on(ut,this.destroy,this))}return a.prototype.create=function(t){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"strui-"+t.column.uid}),t.target.appendChild(this.instance),this.multiSelectCheckBoxInstance=this.parent.createElement("input",{className:"multiselect-input",id:"multiselectstrui-"+t.column.uid}),t.target.appendChild(this.multiSelectCheckBoxInstance),this.dialogObj=t.dialogObj,this.processDataOperation(t),this.createMultiSelectDropDown(t),gn(t.getOptrInstance.dropOptr.value,t.column.uid,t.column,t.column.type,t.dialogObj,t.getOptrInstance.dropOptr.previousValue)},a.prototype.processDataOperation=function(t){var e=this;if(t.column.isForeignColumn()){this.parent.getDataModule().dataManager.executeQuery(this.parent.getDataModule().generateQuery(!0)).then(function(i){e.getAutoCompleteOptions(t,i),gn(t.getOptrInstance.dropOptr.value,t.column.uid,t.column,t.column.type,t.dialogObj,t.getOptrInstance.dropOptr.previousValue)});return}this.getAutoCompleteOptions(t)},a.prototype.getAutoCompleteOptions=function(t,e){var i=t.column.isForeignColumn(),s;if(i){for(var r=Rr.getDistinct(e.result,t.column.field).records||[],n=void 0,o=0;o<r.length;o++)n?n=n.or(t.column.field,"contains",r[parseInt(o.toString(),10)][t.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent):n=new we(t.column.field,"contains",r[parseInt(o.toString(),10)][t.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent);s=new se().where(n),s.params=this.parent.query.params}var l=i?t.column.dataSource:this.parent.dataSource,h={value:i?t.column.foreignKeyValue:t.column.field},p=new Rd($({dataSource:l instanceof N?l:new N(l),fields:h,locale:this.parent.locale,enableRtl:this.parent.enableRtl,query:i?s:this.parent.getDataModule().generateQuery(!0,!0),sortOrder:"Ascending",cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:t.localizeText.getConstant("EnterValue"),actionBegin:function(){if(this.query.queries.length&&this.query.queries[0].fn==="onWhere"&&this.query.queries[0].e&&this.query.queries[0].e.predicates){for(var g=0;g<this.query.queries[0].e.predicates.length;g++)this.properties.fields.value===this.query.queries[0].e.predicates[""+g].field&&(this.query.queries[0].e.predicates.splice(g,1),g=g-1);this.query.queries[0].e.predicates.length||this.query.queries.splice(0,1)}}},t.column.filter.params));if(this.acFocus=this.focus(p,t),this.acComplete=this.actionComplete(p),this.acOpen=this.openPopup.bind(this),p.addEventListener(gr,this.acFocus),p.addEventListener(Lt,this.acOpen),p.addEventListener(Fe,this.acComplete),l&&"result"in l){var c=this.parent.getQuery?this.parent.getQuery().clone():new se,d=Ja({requestType:"stringfilterrequest"},c);this.parent.trigger(Dr,d.state);var f=d.deffered;f.promise.then(function(g){p.dataSource=new N(g)})}this.actObj=p,this.actObj.appendTo(this.instance),i&&this.parent.filterModule.filterModule.afterRenderFilterUI()},a.prototype.write=function(t){var e=this.parent.filterModule.filterModule.getOperatorDropdown(),i=this.getAutoCompleteInstance(t.column.uid),s=this.getMultiSelectInstance(t.column.uid);e.value==="in"||e.value==="notin"?s.value=Array.isArray(t.filteredValue)?t.filteredValue:[]:t.filteredValue!==""&&!u(t.filteredValue)&&!Array.isArray(t.filteredValue)&&(i.value=t.filteredValue)},a.prototype.read=function(t,e,i,s){if(i==="in"||i==="notin"){var r=this.getMultiSelectInstance(e.uid).value;s.filterByColumn(e.field,i,r,"and",this.parent.filterSettings.enableCaseSensitivity)}else{var n=this.getAutoCompleteInstance(e.uid),r=n.value;E.isDevice&&(n.hidePopup(),n.focusOut()),(u(r)||r==="")&&(r=null),s.filterByColumn(e.field,i,r,"and",this.parent.filterSettings.enableCaseSensitivity)}},a.prototype.getAutoCompleteInstance=function(t){return document.querySelector("#strui-"+t).ej2_instances[0]},a.prototype.getMultiSelectInstance=function(t){return document.querySelector("#multiselectstrui-"+t).ej2_instances[0]},a.prototype.createMultiSelectDropDown=function(t){var e=t.column.isForeignColumn(),i=e?t.column.dataSource:this.parent.dataSource,s=e?t.column.foreignKeyValue:t.column.field;this.multiSelectObj=new Or($({dataSource:i instanceof N?i:new N(i),fields:{text:s,value:s},mode:"CheckBox",showDropDownIcon:!0,popupHeight:"300px",showSelectAll:!0,query:new se().select(s),cssClass:this.parent.cssClass?"e-multiselect-flmenu "+this.parent.cssClass:"e-multiselect-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},t.column.filter.params)),this.dialogObj=t.dialogObj,this.dropdownOpen=this.openPopup.bind(this),this.dropdownComplete=this.actionCompleteMultiCheckBox(s),this.multiSelectObj.addEventListener(Lt,this.dropdownOpen),this.multiSelectObj.addEventListener(Fe,this.dropdownComplete),this.multiSelectObj.appendTo(this.multiSelectCheckBoxInstance)},a.prototype.openPopup=function(t){xh(t,this.dialogObj)},a.prototype.focus=function(t,e){return function(){t.filterType=e.getOptrInstance.getFlOperator()}},a.prototype.actionComplete=function(t){return function(e){e.result=e.result.filter(function(i,s,r){return r.map(function(n){return H(t.fields.value,n)}).indexOf(H(t.fields.value,i))===s})}},a.prototype.actionCompleteMultiCheckBox=function(t){return function(e){e.result=P.distinct(e.result,t,!0)}},a.prototype.destroy=function(){this.parent.off(Qt,this.destroy),this.parent.off(ut,this.destroy),this.actObj&&!this.actObj.isDestroyed&&(this.actObj.removeEventListener(gr,this.acFocus),this.actObj.removeEventListener(Lt,this.acOpen),this.actObj.removeEventListener(Fe,this.acComplete),this.actObj.destroy()),this.multiSelectObj&&!this.multiSelectObj.isDestroyed&&(this.multiSelectObj.removeEventListener(Lt,this.dropdownOpen),this.multiSelectObj.removeEventListener(Fe,this.dropdownComplete),this.multiSelectObj.destroy())},a})();Or.Inject(Lh);var ZC=(function(){function a(t,e,i){this.filterSettings=i,this.parent=t,this.serviceLocator=e,this.parent&&(this.parent.on(Qt,this.destroy,this),this.parent.on(ut,this.destroy,this))}return a.prototype.keyEventHandler=function(t){if(t.keyCode===13||t.keyCode===9){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dispatchEvent(e)}},a.prototype.create=function(t){this.numericInstance=this.parent.createElement("input",{className:"e-flmenu-input",id:"numberui-"+t.column.uid}),this.multiSelectCheckBoxInstance=this.parent.createElement("input",{className:"multiselect-input",id:"multiselectnumberui-"+t.column.uid}),t.target.appendChild(this.numericInstance),t.target.appendChild(this.multiSelectCheckBoxInstance),this.createNumericTextBox(t),this.createMultiSelectDropDown(t),gn(t.getOptrInstance.dropOptr.value,t.column.uid,t.column,t.column.type,t.dialogObj,t.getOptrInstance.dropOptr.previousValue)},a.prototype.write=function(t){var e=this.parent.filterModule.filterModule.getOperatorDropdown(),i=this.getNumericInstance(t.column.uid),s=this.getMultiSelectInstance(t.column.uid);e.value==="in"||e.value==="notin"?s.value=Array.isArray(t.filteredValue)?t.filteredValue:[]:(i.element.addEventListener("keydown",this.keyEventHandler),Array.isArray(t.filteredValue)||(i.value=t.filteredValue))},a.prototype.read=function(t,e,i,s){if(i==="in"||i==="notin"){var r=this.getMultiSelectInstance(e.uid).value;s.filterByColumn(e.field,i,r,"and",!0)}else{var r=this.getNumericInstance(e.uid).value;s.filterByColumn(e.field,i,r,"and",!0)}},a.prototype.createNumericTextBox=function(t){this.numericTxtObj=new _c($({format:typeof t.column.format=="string"||Pt(t.column.format)?t.column.format:t.column.format.format,locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:t.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl},t.column.filter.params)),this.numericTxtObj.appendTo(this.numericInstance)},a.prototype.createMultiSelectDropDown=function(t){var e=t.column.isForeignColumn(),i=e?t.column.dataSource:this.parent.dataSource,s=e?t.column.foreignKeyValue:t.column.field;this.multiSelectObj=new Or($({dataSource:i instanceof N?i:new N(i),fields:{text:s,value:s},mode:"CheckBox",showDropDownIcon:!0,popupHeight:"300px",showSelectAll:!0,query:new se().select(s),cssClass:this.parent.cssClass?"e-multiselect-flmenu "+this.parent.cssClass:"e-multiselect-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},t.column.filter.params)),this.dialogObj=t.dialogObj,this.dropdownOpen=this.openPopup.bind(this),this.dropdownComplete=this.actionComplete(s),this.multiSelectObj.addEventListener(Lt,this.dropdownOpen),this.multiSelectObj.addEventListener(Fe,this.dropdownComplete),this.multiSelectObj.appendTo(this.multiSelectCheckBoxInstance)},a.prototype.getNumericInstance=function(t){return document.querySelector("#numberui-"+t).ej2_instances[0]},a.prototype.getMultiSelectInstance=function(t){return document.querySelector("#multiselectnumberui-"+t).ej2_instances[0]},a.prototype.openPopup=function(t){xh(t,this.dialogObj)},a.prototype.actionComplete=function(t){return function(e){e.result=P.distinct(e.result,t,!0)}},a.prototype.destroy=function(){this.parent.off(Qt,this.destroy),this.parent.off(ut,this.destroy),this.numericTxtObj&&!this.numericTxtObj.isDestroyed&&this.numericTxtObj.destroy(),this.multiSelectObj&&!this.multiSelectObj.isDestroyed&&(this.multiSelectObj.removeEventListener(Lt,this.dropdownOpen),this.multiSelectObj.removeEventListener(Fe,this.dropdownComplete),this.multiSelectObj.destroy())},a})();Or.Inject(Lh);var eS=(function(){function a(t,e,i){this.parent=t,this.serviceLocator=e,this.filterSettings=i,this.parent&&(this.parent.on(Qt,this.destroy,this),this.parent.on(ut,this.destroy,this))}return a.prototype.create=function(t){this.elem=this.parent.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+t.column.uid}),t.target.appendChild(this.elem),this.multiSelectElement=this.parent.createElement("input",{className:"multiselect-input",id:"multiselectbool-ui-"+t.column.uid}),t.target.appendChild(this.multiSelectElement),this.createDropDownList(t),this.createMultiSelectDropDown(t),gn(t.getOptrInstance.dropOptr.value,t.column.uid,t.column,t.column.type,t.dialogObj,t.getOptrInstance.dropOptr.previousValue)},a.prototype.write=function(t){var e=this.parent.filterModule.filterModule.getOperatorDropdown(),i=this.getBooleanInstance(t.column.uid),s=this.getMultiSelectInstance(t.column.uid);e.value==="in"||e.value==="notin"?s.value=Array.isArray(t.filteredValue)?t.filteredValue:[]:!u(t.filteredValue)&&!Array.isArray(t.filteredValue)&&(i.value=t.filteredValue)},a.prototype.read=function(t,e,i,s){if(i==="in"||i==="notin"){var r=this.getMultiSelectInstance(e.uid).value;s.filterByColumn(e.field,i,r,"and",!0)}else{var n=this.getBooleanInstance(e.uid),r=n.value;s.filterByColumn(e.field,i,r,"and",!1)}},a.prototype.createDropDownList=function(t){var e=this,i=t.column.isForeignColumn(),s=i?t.column.dataSource:this.parent.dataSource,r=i?t.column.foreignKeyValue:t.column.field;if(this.dialogObj=t.dialogObj,this.dropInstance=new Fr($({dataSource:s instanceof N?s:new N(s),query:new se().select(r),fields:{text:r,value:r},placeholder:t.localizeText.getConstant("SelectValue"),cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},t.column.filter.params)),this.dropdownOpen=this.openPopup.bind(this),this.dropdownComplete=this.actionComplete(r),this.dropInstance.addEventListener(Lt,this.dropdownOpen),this.dropInstance.addEventListener(Fe,this.dropdownComplete),s&&"result"in s){var n=this.parent.getQuery?this.parent.getQuery().clone():new se,o=Ja({requestType:"booleanfilterrequest"},n);this.parent.trigger(Dr,o.state);var l=o.deffered;l.promise.then(function(h){e.dropInstance.dataSource=new N(h),e.dropInstance.dataBind();for(var p=e.parent.filterSettings.columns,c=0,d=p;c<d.length;c++){var f=d[c];t.column.uid===f.uid&&(e.dropInstance.value=f.value)}})}this.dropInstance.appendTo(this.elem)},a.prototype.createMultiSelectDropDown=function(t){var e=t.column.isForeignColumn(),i=e?t.column.dataSource:this.parent.dataSource,s=e?t.column.foreignKeyValue:t.column.field;this.multiSelectCheckBoxInstance=new Or($({dataSource:i instanceof N?i:new N(i),fields:{text:s,value:s},mode:"CheckBox",showDropDownIcon:!0,popupHeight:"300px",showSelectAll:!0,query:new se().select(s),cssClass:this.parent.cssClass?"e-multiselect-flmenu "+this.parent.cssClass:"e-multiselect-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},t.column.filter.params)),this.dialogObj=t.dialogObj,this.multiSelectDropdownOpen=this.openPopup.bind(this),this.multiSelectDropdownComplete=this.actionComplete(s),this.multiSelectCheckBoxInstance.addEventListener(Lt,this.multiSelectDropdownOpen),this.multiSelectCheckBoxInstance.addEventListener(Fe,this.multiSelectDropdownComplete),this.multiSelectCheckBoxInstance.appendTo(this.multiSelectElement)},a.prototype.getBooleanInstance=function(t){return document.querySelector("#bool-ui-"+t).ej2_instances[0]},a.prototype.getMultiSelectInstance=function(t){return document.querySelector("#multiselectbool-ui-"+t).ej2_instances[0]},a.prototype.openPopup=function(t){xh(t,this.dialogObj)},a.prototype.actionComplete=function(t){return function(e){e.result=P.distinct(e.result,t,!0)}},a.prototype.destroy=function(){this.parent.off(Qt,this.destroy),this.parent.off(ut,this.destroy),this.dropInstance&&!this.dropInstance.isDestroyed&&(this.dropInstance.removeEventListener(Lt,this.dropdownOpen),this.dropInstance.removeEventListener(Fe,this.dropdownComplete),this.dropInstance.destroy()),this.multiSelectCheckBoxInstance&&!this.multiSelectCheckBoxInstance.isDestroyed&&(this.multiSelectCheckBoxInstance.removeEventListener(Lt,this.multiSelectDropdownOpen),this.multiSelectCheckBoxInstance.removeEventListener(Fe,this.multiSelectDropdownComplete),this.multiSelectCheckBoxInstance.destroy())},a})(),vl=(function(){function a(t,e,i){this.dpOpen=this.openPopup.bind(this),this.parent=t,this.locator=e,this.fltrSettings=i,this.parent&&(this.parent.on(Qt,this.destroy,this),this.parent.on(ut,this.destroy,this))}return a.prototype.create=function(t){var e=Ql(t.column.format,t.column.type);this.dialogObj=t.dialogObj,this.inputElem=this.parent.createElement("input",{className:"e-flmenu-input",id:"dateui-"+t.column.uid}),t.target.appendChild(this.inputElem),t.column.type==="date"||t.column.type==="dateonly"?this.datePickerObj=new Rh($({format:e,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:t.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},t.column.filter.params)):t.column.type==="datetime"&&(this.datePickerObj=new Od($({format:e,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:t.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},t.column.filter.params))),this.datePickerObj.addEventListener(Lt,this.dpOpen),this.datePickerObj.appendTo(this.inputElem)},a.prototype.write=function(t){var e=document.querySelector("#dateui-"+t.column.uid).ej2_instances[0];e.value=u(t.filteredValue)?null:new Date(t.filteredValue)},a.prototype.read=function(t,e,i,s){var r=document.querySelector("#dateui-"+e.uid).ej2_instances[0],n=r.value;n=u(n)?null:n,s.filterByColumn(e.field,i,n,"and",!0)},a.prototype.openPopup=function(t){t.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},a.prototype.destroy=function(){this.parent.off(Qt,this.destroy),this.parent.off(ut,this.destroy),!(u(this.datePickerObj)||this.datePickerObj.isDestroyed)&&(this.datePickerObj.removeEventListener(Lt,this.dpOpen),this.datePickerObj.destroy())},a})(),tS=(function(){function a(t,e,i,s,r){this.isDialogOpen=!1,this.maxHeight="350px",this.isMenuCheck=!1,this.colTypes={string:JC,number:ZC,date:vl,dateonly:vl,boolean:eS,datetime:vl},this.parent=t,this.filterSettings=e,this.serviceLocator=i,this.customFilterOperators=s,this.filterObj=r,this.flMuiObj=new $C(this.parent,this.customFilterOperators,this.serviceLocator),this.l10n=this.serviceLocator.getService("localization"),this.menuFilterBase=new Rr(t)}return a.prototype.clearCustomFilter=function(t){this.clearBtnClick(t)},a.prototype.applyCustomFilter=function(t){this.filterBtnClick(t.col)},a.prototype.openDialog=function(t){this.options=t,this.col=this.parent.getColumnByField(t.field),(u(this.col.filter)||u(this.col.filter.type)||this.col.filter.type==="Menu")&&this.renderDlgContent(t.target,this.col)},a.prototype.closeDialog=function(t){var e=this;if(this.dlgObj){var i=document.getElementById(this.dlgObj.element.id);if(this.dlgObj&&!this.dlgObj.isDestroyed&&i){var s={cancel:!1,column:this.col,target:t,element:i};if(s.cancel){this.parent.isColumnMenuFilterClosing=!1;return}this.parent.notify(Qt,s),this.isDialogOpen=!1,this.isMenuCheck&&(this.menuFilterBase.unWireEvents(),this.parent.off(kr,this.actionComplete),this.isMenuCheck=!1);var r=this.col;if(!u(r.filter)&&!u(r.filter.ui)&&!u(r.filter.ui.destroy)){var n=r.filter.ui.destroy;typeof n=="string"&&(n=H(n,window)),n()}if((this.parent.isReact||this.parent.isVue)&&this.col.filterTemplate&&this.col.filterTemplate instanceof Function?this.parent.clearTemplate(["filterTemplate"],void 0,function(){e.dlgObj.destroy()}):(this.dlgObj.destroy(),ce(i)),!this.parent.showColumnChooser){var o=document.getElementById(this.parent.element.id+"_e-popup");u(o)||(ce(o),o=null)}u(this.dlgObj.storeActiveElement)||this.dlgObj.storeActiveElement.focus()}this.parent.notify(Qa,{})}},a.prototype.renderDlgContent=function(t,e){var i={requestType:$c,columnName:e.field,columnType:e.type},s="filterModel";i[""+s]=this,this.parent.trigger(Rt,i);var r=this.parent.createElement("div",{className:"e-flmenu-maindiv",id:e.uid+"-flmenu"});if(this.dlgDiv=this.parent.createElement("div",{className:"e-flmenu",id:e.uid+"-flmdlg"}),this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("FilterMenuDialogARIA")),this.parent.enableAdaptiveUI){var n=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv");n.appendChild(this.dlgDiv)}else this.parent.element.appendChild(this.dlgDiv);this.dlgObj=new bn({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,t,e),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,e),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-flmenu-okbtn "+this.parent.cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,e),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:this.parent.cssClass?"e-flmenu-cancelbtn "+this.parent.cssClass:"e-flmenu-cancelbtn"}}],content:r,width:!u(F(t,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?"e-filter-popup "+this.parent.cssClass:"e-filter-popup"});var o="isStringTemplate";this.dlgObj[""+o]=!0,this.renderResponsiveDialog(),this.dlgObj.appendTo(this.dlgDiv)},a.prototype.renderResponsiveDialog=function(){var t=this.parent;t.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.buttons=[{}])},a.prototype.dialogCreated=function(t,e){!E.isDevice&&t?wd(t,this.dlgObj,this.parent):this.options.isResponsiveFilter||(this.dlgObj.position={X:"center",Y:"center"}),this.currentDialogCreatedColumn=e,this.renderFilterUI(t,e),e.isForeignColumn()&&!(!u(e.filter)&&!u(e.filter.ui)&&!u(e.filter.ui.create))||this.afterRenderFilterUI();var i=this.parent.isReact&&typeof e.filterTemplate!="string",s=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;!u(e.filterTemplate)&&!(i||s)?(this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.focus(),this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.classList.add("e-input-focus")):u(this.dlgDiv.querySelector(".e-flmenu-input"))||(this.dlgDiv.querySelector(".e-flmenu-input").focus(),this.dlgDiv.querySelector(".e-flmenu-input").parentElement.classList.add("e-input-focus"))},a.prototype.afterRenderFilterUI=function(){var t=this.currentDialogCreatedColumn;t.showColumnMenu&&this.parent.notify(Ch,{}),this.parent.enableAdaptiveUI?(this.dlgObj.element.style.left="0px",this.dlgObj.element.style.maxHeight="none"):this.dlgObj.element.style.maxHeight=this.maxHeight,this.dlgObj.show(),this.parent.getContent().firstElementChild.offsetHeight<this.dlgObj.element.offsetHeight&&!F(this.parent.element,"e-gantt-dialog")&&Dh(this.parent,this.dlgObj);var e=this.flMuiObj.getFlOperator(),i=this.dlgObj.element.querySelector(".e-flmenu-valuediv").querySelector("input");e==="isempty"||e==="isnotempty"||e==="isnull"||e==="isnotnull"?u(i.ej2_instances)?i.setAttribute("disabled","true"):i.ej2_instances[0].enabled=!1:u(i&&i.getAttribute("disabled"))||(u(i.ej2_instances)?i.removeAttribute("disabled"):i.ej2_instances[0].enabled=!0),t.filterTemplate||this.writeMethod(t,this.dlgObj.element.querySelector("#"+t.uid+"-flmenu"));var s={requestType:Qc,columnName:t.field,columnType:t.type},r="filterModel";s[""+r]=this,this.isDialogOpen=!0,this.isMenuCheck||this.parent.trigger(Fe,s)},a.prototype.renderFilterUI=function(t,e){var i=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.parent.log("column_type_missing",{column:e}),this.renderOperatorUI(i,t,e),this.renderFlValueUI(i,t,e)},a.prototype.renderOperatorUI=function(t,e,i){this.flMuiObj.renderOperatorUI(t,e,i,this.dlgObj,this.filterObj.menuOperator)},a.prototype.renderFlValueUI=function(t,e,i){var s=this.parent.createElement("div",{className:"e-flmenu-valuediv"}),r=this.filterObj;t.appendChild(s);var n=new this.colTypes[i.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(i.filterTemplate){var o={},l="value";o[i.field]=o[""+l]=r.values[i.field],i.foreignKeyValue&&(o[i.foreignKeyValue]=r.values[i.field],o[i.field]=void 0);var h="column";o[""+h]=i;var p=this.parent.isReact&&typeof i.filterTemplate!="string"&&!(i.filterTemplate.prototype&&i.filterTemplate.prototype.CSPTemplate),c=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,d=this.parent.element.id+i.uid+"filterTemplate";if(p||c)i.getFilterTemplate()(o,this.parent,"filterTemplate",d,null,null,s),this.parent.renderTemplates();else{var f=i.getFilterTemplate()(o,this.parent,"filterTemplate",d,null,null,null,this.parent.root);Ht(s,f)}this.isMenuCheck&&(this.menuFilterBase.cBox=this.dlgObj.element.querySelector(".e-checkboxlist.e-fields"),this.menuFilterBase.wireEvents(),this.parent.on(kr,this.actionComplete,this),this.menuFilterBase.getAllData())}else if(!u(i.filter)&&!u(i.filter.ui)&&!u(i.filter.ui.create)){var g=i.filter.ui.create;typeof g=="string"&&(g=H(g,window)),g({column:i,target:s,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj})}else n.create({column:i,target:s,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj})},a.prototype.writeMethod=function(t,e){for(var i,s=e.querySelector(".e-flmenu-valinput"),r=new this.colTypes[t.type](this.parent,this.serviceLocator,this.parent.filterSettings),n=this.filterSettings.columns,o=0,l=n;o<l.length;o++){var h=l[o];t.uid===h.uid&&(i=h.value)}if(!u(t.filter)&&!u(t.filter.ui)&&!u(t.filter.ui.write)){var p=t.filter.ui.write;typeof p=="string"&&(p=H(p,window)),p({column:t,target:s,parent:this.parent,filteredValue:i})}else r.write({column:t,target:s,parent:this.parent,filteredValue:i})},a.prototype.filterBtnClick=function(t){var e=this.dlgObj.element.querySelector(".e-flmenu-valuediv input"),i=this.flMuiObj.getFlOperator(),s=new this.colTypes[t.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(t.filterTemplate){var r=this.dlgDiv.querySelector(".e-flmenu-valuediv"),n=void 0;if(r.children[0].value)n=r.children[0].value;else if(!u(r.children[0].ej2_instances))n=(this.parent.isAngular?r.children[0]:r.querySelector("input")).ej2_instances[0].value;else{var o=r.querySelector(".e-control");u(o)||(n=t.type==="boolean"?o.checked:u(o.ej2_instances)?o.value:o.ej2_instances[0].value)}this.filterObj.filterByColumn(t.field,i,n)}else if(!u(t.filter)&&!u(t.filter.ui)&&!u(t.filter.ui.read)){var l=t.filter.ui.read;typeof l=="string"&&(l=H(l,window)),l({element:e,column:t,operator:i,fltrObj:this.filterObj})}else s.read(e,t,i,this.filterObj);this.closeDialog(),this.parent.showColumnMenu&&this.parent.notify(Wl,{})},a.prototype.closeResponsiveDialog=function(){this.closeDialog()},a.prototype.clearBtnClick=function(t){this.filterObj.removeFilteredColsByField(t.field),this.closeDialog(),this.parent.showColumnMenu&&this.parent.notify(Wl,{})},a.prototype.destroy=function(){this.closeDialog()},a.prototype.getFilterUIInfo=function(){return{field:this.col.field,operator:this.flMuiObj.getFlOperator()}},a.prototype.getOperatorDropdown=function(){return this.flMuiObj.dropOptr},a.prototype.renderCheckBoxMenu=function(){return this.isMenuCheck=!0,this.menuFilterBase.updateModel(this.options),this.menuFilterBase.getAndSetChkElem(this.options),this.dlgObj.buttons=[{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{content:this.menuFilterBase.getLocalizedLabel("FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{cssClass:"e-flat",content:this.menuFilterBase.getLocalizedLabel("ClearButton")}}],this.menuFilterBase.dialogObj=this.dlgObj,this.menuFilterBase.dlg=this.dlgObj.element,this.menuFilterBase.dlg.classList.add("e-menucheckbox"),this.menuFilterBase.dlg.classList.remove("e-checkboxfilter"),this.maxHeight="800px",this.menuFilterBase.sBox.innerHTML},a.prototype.actionComplete=function(t){this.isMenuCheck&&this.parent.trigger(Fe,t)},a})(),Bd=(function(){function a(t,e,i){this.parent=t,this.isresetFocus=!0,this.checkBoxBase=new Rr(t),this.addEventListener()}return a.prototype.destroy=function(){this.removeEventListener(),this.checkBoxBase.closeDialog()},a.prototype.openDialog=function(t){this.checkBoxBase.openDialog(t),this.parent.log("column_type_missing",{column:t.column})},a.prototype.closeDialog=function(){this.destroy(),this.isresetFocus&&this.parent.notify(dn,{})},a.prototype.closeResponsiveDialog=function(){this.checkBoxBase.closeDialog()},a.prototype.getModuleName=function(){return"checkboxFilter"},a.prototype.actionBegin=function(t){this.parent.trigger(Rt,t)},a.prototype.actionComplete=function(t){this.parent.trigger(Fe,t)},a.prototype.actionPrevent=function(t){Ds(this.parent)&&(this.parent.notify(Bi,t),t.cancel=!0)},a.prototype.clearCustomFilter=function(t){this.checkBoxBase.clearFilter(t)},a.prototype.applyCustomFilter=function(){this.checkBoxBase.fltrBtnHandler(),this.checkBoxBase.closeDialog()},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Nl,this.actionBegin,this),this.parent.on(kr,this.actionComplete,this),this.parent.on(cn,this.actionPrevent,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Nl,this.actionBegin),this.parent.off(kr,this.actionComplete),this.parent.off(cn,this.actionPrevent))},a})(),iS=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),sS=(function(a){iS(t,a);function t(e,i,s,r){var n=a.call(this,e,i,s)||this;return n.parent=e,n.isresetFocus=!0,n.excelFilterBase=new jC(e,r),n}return t.prototype.destroy=function(){this.excelFilterBase.closeDialog()},t.prototype.openDialog=function(e){this.excelFilterBase.openDialog(e)},t.prototype.closeDialog=function(){this.excelFilterBase.closeDialog(),this.isresetFocus&&this.parent.notify(dn,{})},t.prototype.clearCustomFilter=function(e){this.excelFilterBase.clearFilter(e)},t.prototype.closeResponsiveDialog=function(e){e?this.excelFilterBase.removeDialog():this.closeDialog()},t.prototype.applyCustomFilter=function(e){e.isCustomFilter?this.excelFilterBase.filterBtnClick(e.col.field):(this.excelFilterBase.fltrBtnHandler(),this.excelFilterBase.closeDialog())},t.prototype.filterByColumn=function(e,i,s,r,n,o,l,h){this.excelFilterBase.filterByColumn(e,i,s,r,n,o,l,h)},t.prototype.getFilterUIInfo=function(){return this.excelFilterBase.getFilterUIInfo()},t.prototype.getModuleName=function(){return"excelFilter"},t})(Bd),fS=(function(){function a(t,e,i){this.predicate="and",this.contentRefresh=!0,this.filterByMethod=!0,this.refresh=!0,this.values={},this.operators={},this.cellText={},this.nextFlMenuOpen="",this.type={Menu:tS,CheckBox:Bd,Excel:sS},this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.fltrDlgDetails={field:"",isOpen:!1},this.skipNumberInput=["="," ","!"],this.skipStringInput=[">","<","="],this.actualPredicate={},this.inputList=[],this.isFilterCleared=!1,this.parent=t,this.filterSettings=e,this.serviceLocator=i,this.addEventListener(),this.setFullScreenDialog()}return a.prototype.render=function(t){if(!P.getObject("args.isFrozen",t)){var e=this.parent;if(this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),this.parent.filterSettings.type==="FilterBar"&&e.columns.length){var i=this.parent.element.querySelector(".e-filterbar");i&&ce(i);var s=new Lr(this.serviceLocator,he.Filter,e),r=this.serviceLocator.getService("cellRendererFactory");r.addCellRenderer(he.Filter,new QC(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),s.element=this.parent.createElement("tr",{className:"e-filterbar",attrs:{role:"row"}});var n=this.generateRow();n.data=this.values,this.parent.getHeaderContent().querySelector("thead:not(.e-masked-thead)").appendChild(s.element);var o=this.parent.element.querySelector(".e-rowdragheader");if(this.element=s.render(n,e.getColumns(),null,null,s.element),this.element.querySelectorAll(".e-leftfreeze").length&&(this.element.querySelectorAll(".e-indentcell").length||this.element.querySelectorAll(".e-grouptopleftcell").length))for(var l=this.element.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),h=0;h<l.length;h++)l[parseInt(h.toString(),10)].classList.add("e-leftfreeze"),Bt(l[parseInt(h.toString(),10)],h*30,this.parent.enableRtl,"Left");Ua(this.element);var p=this.element.querySelector(".e-detailheadercell");p&&(p.className="e-filterbarcell e-mastercell"),o&&(o.classList.contains("e-leftfreeze")?o.className="e-dragheadercell e-mastercell e-leftfreeze":o.className="e-filterbarcell e-mastercell");var c=[].slice.call(this.element.getElementsByClassName("e-grouptopleftcell"));c.length&&c[c.length-1].classList.add("e-lastgrouptopleftcell"),this.wireEvents(),this.parent.notify(an,{case:"filter"})}}},a.prototype.showCustomFilter=function(t){this.responsiveDialogRenderer.isCustomDialog=t,this.responsiveDialogRenderer.showResponsiveDialog(this.column)},a.prototype.renderResponsiveChangeAction=function(t){this.responsiveDialogRenderer.action=t.action},a.prototype.setFilterModel=function(t){var e=t.filter.type||this.parent.filterSettings.type;this.filterModule=new this.type[""+e](this.parent,this.parent.filterSettings,this.serviceLocator,this.customOperators,this)},a.prototype.destroy=function(){var t=this.parent.element;if(!(!t||!t.querySelector("."+Xt)&&!t.querySelector("."+ki))){if(this.filterModule&&this.filterModule.destroy(),!this.parent.refreshing&&(this.parent.isDestroyed||!this.parent.allowFiltering)&&(this.filterSettings.columns=[]),this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),this.filterSettings.type==="FilterBar"&&!this.parent.isDestroyed){if(this.filterSettings.showFilterBarOperator)for(var e=[].slice.call(this.element.getElementsByClassName("e-filterbaroperator")),i=0;i<e.length;i++)e[parseInt(i.toString(),10)].ej2_instances[0]&&e[parseInt(i.toString(),10)].ej2_instances[0].destroy();this.parent.getColumns().map(function(r){if(r.filterBarTemplate&&!u(r.filterBarTemplate.destroy)){var n=r.filterBarTemplate.destroy;typeof n=="string"&&(n=H(n,window)),n()}})}if(this.element){if(this.element.parentElement){for(var i=0;i<this.inputList.length;i++)W.destroy(this.inputList[parseInt(i.toString(),10)],this.inputList[parseInt(i.toString(),10)].element.nextElementSibling),ce(this.inputList[parseInt(i.toString(),10)].element);this.inputList=[],ce(this.element),this.element=null}var s=this.parent.getHeaderContent().querySelector(".e-filterbar");s&&ce(s)}}},a.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,Ce.isFilter)},a.prototype.generateRow=function(){var t={},e=new tr(t);return e.cells=this.generateCells(),e},a.prototype.generateCells=function(){var t=[];if(this.parent.allowGrouping)for(var e=0,i=this.parent.groupSettings.columns.length;e<i;e++)t.push(this.generateCell({},he.HeaderIndent));(this.parent.detailTemplate||this.parent.childGrid)&&t.push(this.generateCell({},he.DetailHeader)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&t.push(this.generateCell({},he.RowDragHIcon));for(var s=0,r=this.parent.getColumns();s<r.length;s++){var n=r[s];t.push(this.generateCell(n))}return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&t.push(this.generateCell({},he.RowDragHIcon)),t},a.prototype.generateCell=function(t,e){var i={visible:t.visible,isDataCell:!1,rowId:"",column:t,cellType:e||he.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new Tr(i)},a.prototype.updateModel=function(){var t=this.column.isForeignColumn()||this.parent.enableColumnVirtualization?this.parent.getColumnByUid(this.column.uid,!0):this.parent.getColumnByField(this.fieldName);this.filterObjIndex=this.getFilteredColsIndexByField(t),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex];for(var e=Array.isArray(this.value)&&this.value.length?this.value:[this.value],i=this.parent.dataSource.adaptor&&this.parent.dataSource.adaptor.getModuleName?this.parent.dataSource.adaptor.getModuleName():void 0,s=0,r=e.length;s<r;s++){var n=t.isForeignColumn()?t.foreignKeyValue:this.fieldName,o=this.operator==="notequal";this.operator==="in"||this.operator==="notin"?(this.parent.getDataModule().isRemote()&&(t.type==="date"||t.type==="dateonly"||t.type==="datetime")&&(e=P.parse.arrayReplacer(e)),this.currentFilterObject={field:n,uid:t.uid,isForeignKey:t.isForeignColumn(),operator:this.operator,value:e,predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}},r=0):this.currentFilterObject={field:n,uid:t.uid,isForeignKey:t.isForeignColumn(),operator:this.operator,value:e[parseInt(s.toString(),10)],predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}};var l=this.getFilteredColsIndexByField(t);l>-1&&(!Array.isArray(this.value)||Array.isArray(this.value)&&(this.operator==="in"||this.operator==="notin"))?this.filterSettings.columns[parseInt(l.toString(),10)]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject),!this.column.isForeignColumn()&&this.prevFilterObject&&(u(this.prevFilterObject.value)||this.prevFilterObject.value==="")&&(this.prevFilterObject.operator==="equal"||this.prevFilterObject.operator==="notequal")&&i!=="ODataAdaptor"&&i!=="ODataV4Adaptor"&&this.handleExistingFilterCleanup(n),!this.column.isForeignColumn()&&u(this.value)&&(this.operator==="equal"||this.operator==="notequal")&&i!=="ODataAdaptor"&&i!=="ODataV4Adaptor"&&(this.handleExistingFilterCleanup(n),t.type==="string"&&this.filterSettings.columns.push({field:n,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:""}),this.filterSettings.columns.push({field:n,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:void 0}),this.filterSettings.columns.push({field:n,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:null}))}this.filterSettings.columns=this.filterSettings.columns,this.parent.dataBind()},a.prototype.handleExistingFilterCleanup=function(t){for(var e=0;e<this.filterSettings.columns.length;e++)this.filterSettings.columns[""+e].field===t&&(this.filterSettings.columns[""+e].operator==="equal"||this.filterSettings.columns[""+e].operator==="notequal")&&u(this.filterSettings.columns[""+e].value)&&(this.filterSettings.columns.splice(e,1),e=e-1)},a.prototype.getFilteredColsIndexByField=function(t){for(var e=this.filterSettings.columns,i=0,s=e.length;i<s;i++)if(e[parseInt(i.toString(),10)].uid===t.uid||t.isForeignColumn()&&this.parent.getColumnByUid(t.uid).field===t.foreignKeyValue)return i;return-1},a.prototype.onActionComplete=function(t){var e=this.isRemove?{requestType:"filtering",type:Fe}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:u(this.column)?void 0:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:Fe};this.parent.trigger(Fe,$(t,e)),this.isRemove=!1},a.prototype.wireEvents=function(){v.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate,this)},a.prototype.unWireEvents=function(){v.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate)},a.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&(this.parent.getHeaderTable().classList.add("e-sortfilter"),this.render())},a.prototype.refreshFilterValue=function(){u(this.parent.modelObserver.boundedEvents)||this.parent.removeEventListener(Dl,this.refreshFilterValueFn),(this.filterSettings.type==="FilterBar"||this.filterSettings.type==="Excel")&&this.filterSettings.columns.length&&!this.parent.getCurrentViewRecords().length&&this.initialEnd()},a.prototype.initialEnd=function(){if(this.parent.off(nt,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){var t=this.parent;this.contentRefresh=!1,this.initialLoad=!0;for(var e=0,i=t.filterSettings.columns;e<i.length;e++){var s=i[e];this.filterByColumn(s.field,s.operator,s.value,s.predicate,s.matchCase,s.ignoreAccent,s.actualFilterValue,s.actualOperator,s.isForeignKey)}this.initialLoad=!1,this.updateFilterMsg(),this.contentRefresh=!0}},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ha,this.setFullScreenDialog,this),this.parent.on(bt,this.enableAfterRender,this),this.parent.on(ju,this.onActionComplete,this),this.parent.on(Wt,this.onPropertyChanged,this),this.parent.on(hi,this.keyUpHandler,this),this.parent.on(Pa,this.columnPositionChanged,this),this.parent.on(mi,this.render,this),this.parent.on(nt,this.initialEnd,this),this.parent.on(Qt,this.filterMenuClose,this),this.parent.on(Xs,this.renderResponsiveChangeAction,this),this.docClickHandler=this.clickHandler.bind(this),v.add(document,"click",this.docClickHandler,this),v.add(this.parent.element,"mousedown",this.refreshClearIcon,this),this.parent.on(Xu,this.columnMenuFilter,this),this.parent.on(ls,this.filterIconClickHandler,this),this.parent.on("persist-data-changed",this.initialEnd,this),this.parent.on(Hl,this.clickHandler,this),this.parent.on(ut,this.destroy,this),this.refreshFilterValueFn=this.refreshFilterValue.bind(this),this.parent.addEventListener(Dl,this.refreshFilterValueFn))},a.prototype.removeEventListener=function(){v.remove(document,"click",this.docClickHandler),v.remove(this.parent.element,"mousedown",this.refreshClearIcon),!this.parent.isDestroyed&&(this.parent.off(Ha,this.setFullScreenDialog),this.parent.off(bt,this.enableAfterRender),this.parent.off(ju,this.onActionComplete),this.parent.off(Wt,this.onPropertyChanged),this.parent.off(hi,this.keyUpHandler),this.parent.off(Pa,this.columnPositionChanged),this.parent.off(mi,this.render),this.parent.off(Xu,this.columnMenuFilter),this.parent.off(Qt,this.filterMenuClose),this.parent.off(Xs,this.renderResponsiveChangeAction),this.parent.off(ls,this.filterIconClickHandler),this.parent.off(Hl,this.clickHandler),this.parent.off(ut,this.destroy))},a.prototype.refreshClearIcon=function(t){if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"&&t.target.closest("th")&&t.target.closest("th").classList.contains("e-filterbarcell")&&t.target.classList.contains("e-clear-icon")){var e=t.target.previousElementSibling;W.setValue(null,e,"Never",!0),this.filterSettings.mode==="Immediate"&&this.removeFilteredColsByField(e.id.slice(0,-14))}},a.prototype.filterMenuClose=function(){this.fltrDlgDetails.isOpen=!1},a.prototype.filterByColumn=function(t,e,i,s,r,n,o,l,h){var p=this,c=this.parent,d;if(typeof i=="string"&&(i=this.parent.sanitize(i)),this.column=c.grabColumnByFieldFromAllCols(t,h),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&u(this.column.filterBarTemplate)&&u(this.column.filterTemplate)&&(e=this.getOperatorName(t)),e==="like"&&i&&i.indexOf("%")===-1&&(i="%"+i+"%"),!!this.column){if(this.filterSettings.type==="FilterBar"&&(d=c.getHeaderContent().querySelector("[id='"+this.column.field+"_filterBarcell']")),!u(this.column.allowFiltering)&&!this.column.allowFiltering){this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:this.column.headerText});return}if(Ds(c)){c.notify(Bi,{instance:this,handler:this.filterByColumn,arg1:t,arg2:e,arg3:i,arg4:s,arg5:r,arg6:n,arg7:o,arg8:l});return}if(this.predicate=s||(Array.isArray(i)?"or":"and"),this.value=i,this.matchCase=r||!1,this.ignoreAccent=this.ignoreAccent=u(n)?this.parent.filterSettings.ignoreAccent:n,this.fieldName=t,this.operator=e,i=u(i)?i:i.toString(),i===""&&(i=null),(this.column.type==="number"||this.column.type==="date")&&(this.matchCase=!0),d&&this.filterSettings.type==="FilterBar"){if(i&&i.length<1||!this.filterByMethod&&this.checkForSkipInput(this.column,i)){this.filterStatusMsg=i&&i.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),this.updateFilterMsg();return}d.value!==i&&(d.value=i)}u(this.column.format)?this.values[this.column.field]=i:(this.applyColumnFormat(i),this.initialLoad&&this.filterSettings.type==="FilterBar"&&(d.value=this.values[this.column.field]));var f={field:this.fieldName,predicate:s,matchCase:r,ignoreAccent:n,operator:this.operator,value:this.value,type:this.column.type},g=this.parent.filterSettings.columns.filter(function(y){return y.field===p.fieldName});g.length>1&&!u(this.actualPredicate[this.fieldName])?this.actualPredicate[this.fieldName].push(f):this.actualPredicate[this.fieldName]=[f],!this.checkAlreadyColFiltered(this.column.field)&&this.updateModel()}},a.prototype.applyColumnFormat=function(t){var e=this,i=this.column.type==="date"||this.column.type==="datetime"||this.column.type==="dateonly"?new Date(t):parseFloat(t);(this.column.type==="date"||this.column.type==="datetime"||this.column.type==="dateonly")&&t&&Array.isArray(this.value)&&t.split(",").length>1?this.values[this.column.field]=t.split(",").map(function(s){return s===""&&(s=null),e.setFormatForFlColumn(new Date(s),e.column)}):this.values[this.column.field]=this.setFormatForFlColumn(i,this.column)},a.prototype.skipUid=function(t){for(var e=!0,i=Object.keys(t),s=0;s<i.length;s++){var r=Object.keys(t[i[parseInt(s.toString(),10)]]);r.length===1&&r[0]==="uid"&&(e=!1)}return e},a.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName())for(var e=0,i=Object.keys(t.properties);e<i.length;e++){var s=i[e];switch(s){case"columns":var r="columns",n={currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,action:"filter",columns:this.filterSettings.columns,requestType:"filtering",type:Rt,cancel:!1};if(this.contentRefresh&&this.skipUid(t.properties[""+r])){if(this.parent.notify(os,n),n.cancel){if(this.filterSettings.type==="CheckBox"||this.filterSettings.type==="Excel"){this.filterSettings.columns=this.actualData.length<=1?this.checkboxPrevFilterObject:this.checkboxFilterObject,this.actualPredicate[this.column.field]=this.filterSettings.columns;var o=this.parent.getColumnByField(this.column.field),l=this.parent.showColumnMenu&&o.showColumnMenu?".e-columnmenu":".e-icon-filter",h=this.parent.getColumnHeaderByField(this.column.field).querySelector(l);this.checkboxPrevFilterObject.length===0?h.classList.remove("e-filtered"):h.classList.add("e-filtered")}else u(this.prevFilterObject)?this.filterSettings.columns.splice(this.filterSettings.columns.length-1,1):this.filterSettings.columns[this.filterObjIndex]=this.prevFilterObject;return}this.updateFilterIcon(),this.refreshFilterSettings(),this.updateFilterMsg(),this.updateFilter()}break;case"showFilterBarStatus":t.properties[""+s]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("");break;case"showFilterBarOperator":case"type":this.parent.refreshHeader(),this.refreshFilterSettings(),this.parent.height==="100%"&&this.parent.scrollModule.refresh();break}}},a.prototype.refreshFilterSettings=function(){if(this.filterSettings.type==="FilterBar"){for(var t=0;t<this.filterSettings.columns.length;t++){this.column=this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[parseInt(t.toString(),10)].uid);var e=this.filterSettings.columns[parseInt(t.toString(),10)].value;if(e=!u(e)&&e.toString(),!u(this.column.format))this.applyColumnFormat(e);else{var i=this.filterSettings.columns[parseInt(t.toString(),10)].field;this.values[""+i]=this.filterSettings.columns[parseInt(t.toString(),10)].value}var s=this.getFilterBarElement(this.column.field);s&&(this.cellText[this.filterSettings.columns[parseInt(t.toString(),10)].field]!==""&&!u(this.cellText[this.filterSettings.columns[parseInt(t.toString(),10)].field])?s.value=this.cellText[this.column.field]:s.value=this.filterSettings.columns[parseInt(t.toString(),10)].value);var r={isnull:"IsNull",isnotnull:"NotNull",isnotempty:"IsNotEmpty",isempty:"IsEmpty"},n=["isnull","isnotnull","isempty","isnotempty"];s&&this.filterSettings.showFilterBarOperator&&n.indexOf(this.filterSettings.columns[parseInt(t.toString(),10)].operator)>-1&&(s.value=this.l10n.getConstant(r[this.filterSettings.columns[parseInt(t.toString(),10)].operator]))}if(this.filterSettings.columns.length===0)for(var o=this.parent.getColumns(),t=0;t<o.length;t++){var s=this.getFilterBarElement(o[parseInt(t.toString(),10)].field);s&&s.value!==""&&(s.value="",delete this.values[o[parseInt(t.toString(),10)].field])}}},a.prototype.updateFilterIcon=function(){if(this.filterSettings.columns.length===0&&this.parent.element.querySelector(".e-filtered"))for(var t=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),e=0,i=t.length;e<i;e++)t[parseInt(e.toString(),10)].classList.remove("e-filtered")},a.prototype.getFilterBarElement=function(t){var e="[id='"+t+"_filterBarcell']",i;return e&&!u(this.element)&&(i=this.element.querySelector(e)),i},a.prototype.refreshFilter=function(){this.refreshFilterSettings(),this.updateFilterMsg()},a.prototype.clearFiltering=function(t){var e=this,i=Ih(this.filterSettings.columns);if(this.isFilterCleared=!0,!u(t)){this.refresh=!1,t.forEach(function(h){e.removeFilteredColsByField(h,!1)}),this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.parent.renderModule.refresh(),this.refresh=!0;return}if(Ds(this.parent)){this.parent.notify(Bi,{instance:this,handler:this.clearFiltering});return}for(var s=0;s<i.length;s++)i[parseInt(s.toString(),10)].uid=i[parseInt(s.toString(),10)].uid||this.parent.getColumnByField(i[parseInt(s.toString(),10)].field).uid;var r=i.map(function(h){return h.uid}),n=r.filter(function(h,p){return r.indexOf(h)===p});this.refresh=!1;for(var s=0,o=n.length;s<o;s++)this.removeFilteredColsByField(this.parent.getColumnByUid(n[parseInt(s.toString(),10)]).field,!1);if(this.refresh=!0,n.length&&this.parent.renderModule.refresh(),this.parent.filterSettings.columns.length===0&&this.parent.element.querySelector(".e-filtered"))for(var l=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),s=0,o=l.length;s<o;s++)l[0].classList.remove("e-filtered");this.isRemove=!0,this.filterStatusMsg="",this.updateFilterMsg()},a.prototype.checkAlreadyColFiltered=function(t){for(var e=this.filterSettings.columns,i=0,s=e;i<s.length;i++){var r=s[i];if(r.field===t&&this.parent.filterSettings.type==="Menu"&&(r.type==="date"||r.type==="datetime"))return this.checkDateColumnValue(r.value,this.value)&&r.operator===this.operator&&r.predicate===this.predicate;if(r.field===t&&r.value===this.value&&r.operator===this.operator&&r.predicate===this.predicate)return!0}return!1},a.prototype.checkDateColumnValue=function(t,e){return u(t)&&u(e)?!0:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!1},a.prototype.columnMenuFilter=function(t){this.column=t.col;var e=M(t.target,"#"+t.id);t.isClose&&!e?this.filterModule.closeDialog():e&&this.filterDialogOpen(this.column,t.target)},a.prototype.filterDialogOpen=function(t,e,i,s){this.filterModule&&(this.filterModule.isresetFocus=!1,this.filterModule.closeDialog()),this.setFilterModel(t),this.filterModule.openDialog(this.createOptions(t,e,i,s))},a.prototype.createOptions=function(t,e,i,s){var r=this.parent,n=t.filter.dataSource||r.dataSource&&"result"in r.dataSource?r.dataSource:r.getDataModule().dataManager,o=t.filter.type||this.parent.filterSettings.type,l={type:t.type,field:t.field,displayName:t.headerText,dataSource:n,format:t.format,height:800,columns:r.getColumns(),filteredColumns:r.filterSettings.columns,target:e,dataManager:r.getDataModule().dataManager,formatFn:t.getFormatter(),ignoreAccent:r.filterSettings.ignoreAccent,parserFn:t.getParser(),query:r.query,template:t.getFilterItemTemplate(),hideSearchbox:u(t.filter.hideSearchbox)?!1:t.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:r.getLocaleConstants(),position:{X:i,Y:s},column:t,foreignKeyValue:t.foreignKeyValue,actualPredicate:this.actualPredicate,localeObj:r.localeObj,isRemote:r.getDataModule().isRemote(),allowCaseSensitive:this.filterSettings.enableCaseSensitivity,isResponsiveFilter:this.parent.enableAdaptiveUI,operator:this.actualPredicate[t.field]&&o==="Menu"?this.actualPredicate[t.field][0].operator:"equal",parentTotalDataCount:r.getDataModule().isRemote()&&r.allowPaging?r.pagerModule.pagerObj.totalRecordsCount:r.getDataModule().isRemote()?r.totalDataRecordsCount:r.getFilteredRecords().length,parentCurrentViewDataCount:r.currentViewData.length,parentFilteredLocalRecords:r.getDataModule().isRemote()?[]:r.getFilteredRecords()};return l},a.prototype.removeFilteredColsByField=function(t,e){var i,s=this.filterSettings.columns;if(Ds(this.parent)){var r={instance:this,handler:this.removeFilteredColsByField,arg1:t,arg2:e};this.parent.notify(Bi,r);return}var n=s.map(function(g){return g.uid}),o=n.filter(function(g,y){return n.indexOf(g)===y});if(!u(this.column)){var l=this.column.isForeignColumn()?this.parent.getColumnByUid(this.column.uid):this.parent.getColumnByField(t);this.filterObjIndex=this.getFilteredColsIndexByField(l),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex]}for(var h=function(g,y){s[parseInt(g.toString(),10)].uid=s[parseInt(g.toString(),10)].uid||p.parent.getColumnByField(s[parseInt(g.toString(),10)].field).uid;var b=s.length,C=p.parent.grabColumnByUidFromAllCols(o[parseInt(g.toString(),10)]);if(C.field===t||C.field===C.foreignKeyValue&&C.isForeignColumn()){var S=p.filterSettings.columns.filter(function(L){return L.uid===C.uid})[0];if(p.filterSettings.type==="FilterBar"&&!e){var I="[id='"+C.field+"_filterBarcell']";i=p.parent.getHeaderContent().querySelector(I),i&&(i.value="",delete p.values[""+t])}for(;b--;)s[parseInt(b.toString(),10)].uid===C.uid&&s.splice(b,1);var A=p.parent.getColumnHeaderByField(C.field);if(p.filterSettings.type!=="FilterBar"||p.parent.showColumnMenu){var T=p.parent.showColumnMenu&&C.showColumnMenu?".e-columnmenu":".e-icon-filter";A.querySelector(T).classList.remove("e-filtered")}return p.isRemove=!0,p.actualPredicate[""+t]&&delete p.actualPredicate[""+t],p.values[""+t]&&delete p.values[""+t],p.refresh&&p.parent.notify(os,{requestType:"filtering",type:Rt,currentFilterObject:S,currentFilterColumn:C,action:"clearFilter"}),"break"}},p=this,c=0,d=o.length;c<d;c++){var f=h(c);if(f==="break")break}this.updateFilterMsg()},a.prototype.getModuleName=function(){return"filter"},a.prototype.keyUpHandlerImmediate=function(t){t.keyCode!==13&&this.keyUpHandler(t)},a.prototype.keyUpHandler=function(t){var e=this.parent,i=t.target;if(i&&Gd(i,".e-filterbar input")){var s=M(i,"th.e-filterbarcell");if(this.column=e.getColumnByUid(s.getAttribute("data-mappinguid")),!this.column)return;if(t.action==="altDownArrow"&&this.parent.filterSettings.showFilterBarOperator){var r=M(i,"span").querySelector(".e-filterbaroperator");r.ej2_instances[0].showPopup(),r.focus()}(this.filterSettings.mode==="Immediate"||t.keyCode===13&&!t.target.classList.contains("e-filterbaroperator"))&&t.keyCode!==9&&!this.column.filterTemplate&&(this.value=i.value.trim(),this.processFilter(t))}if(t.action==="altDownArrow"&&this.filterSettings.type!=="FilterBar"&&!F(t.target,"e-toolbar")&&u(this.parent.element.querySelector(".e-filter-popup"))&&!this.parent.enableAdaptiveUI){var n=e.focusModule.currentInfo.element;if(n&&n.classList.contains("e-headercell")&&!n.classList.contains("e-stackedheadercell")){var o=e.getColumnByUid(n.firstElementChild.getAttribute("data-mappinguid"));this.openMenuByField(o.field),this.parent.focusModule.clearIndicator()}}t.action==="escape"&&this.filterSettings.type==="Menu"&&this.filterModule&&(this.parent.showColumnMenu&&this.filterModule.isDialogOpen&&(this.parent.isColumnMenuFilterClosing=!0),this.filterModule.closeDialog(),e.notify(dn,{}),this.parent.showColumnMenu||e.notify(dn,{}))},a.prototype.updateCrossIcon=function(t){t.value.length&&t.nextElementSibling.classList.remove("e-hide")},a.prototype.updateFilterMsg=function(){if(this.filterSettings.type==="FilterBar"){var t=this.parent,e=void 0,i=this.filterSettings.columns,s=void 0;if(!this.filterSettings.showFilterBarStatus)return;if(i.length>0&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage")){this.filterStatusMsg="";for(var r=0;r<i.length;r++)if(s=t.grabColumnByUidFromAllCols(i[parseInt(r.toString(),10)].uid)||t.grabColumnByFieldFromAllCols(i[parseInt(r.toString(),10)].field,i[parseInt(r.toString(),10)].isForeignKey),r&&(this.filterStatusMsg+=" && "),u(s.format))this.filterStatusMsg+=s.headerText+": "+this.values[s.field];else{var n=s.type==="date"||s.type==="datetime"||s.type==="dateonly"?this.valueFormatter.fromView(this.values[s.field],s.getParser(),s.type==="dateonly"?"date":s.type):this.values[s.field];if(s.type==="date"||s.type==="datetime"||s.type==="dateonly")e=this.setFormatForFlColumn(n,s);else{var o=this.serviceLocator.getService("valueFormatter");e=o.toView(n,s.getParser()).toString()}this.filterStatusMsg+=s.headerText+": "+e}}t.allowPaging&&(t.updateExternalMessage(this.filterStatusMsg),this.parent.height==="100%"&&this.parent.scrollModule.refresh()),this.filterStatusMsg=""}},a.prototype.setFormatForFlColumn=function(t,e){var i=this.serviceLocator.getService("valueFormatter"),s=i.toView(t,e.getFormatter());return u(s)?s:s.toString()},a.prototype.checkForSkipInput=function(t,e){var i;if(t.type==="number")(P.operatorSymbols[""+e]||this.skipNumberInput.indexOf(e)>-1)&&(i=!0);else if(t.type==="string")for(var s=0,r=e;s<r.length;s++){var n=r[s];this.skipStringInput.indexOf(n)>-1&&(i=!0)}return i},a.prototype.processFilter=function(t){this.stopTimer(),this.startTimer(t)},a.prototype.startTimer=function(t){var e=this;this.timer=window.setInterval(function(){e.onTimerTick()},t.keyCode===13?0:this.filterSettings.immediateModeDelay)},a.prototype.stopTimer=function(){window.clearInterval(this.timer)},a.prototype.onTimerTick=function(){var t="[id='"+this.column.field+"_filterBarcell']",e=this.element.querySelector(t);e||(e=this.parent.getHeaderContent().querySelector(t));var i;if(this.cellText[this.column.field]=e.value,this.stopTimer(),u(this.column.filterBarTemplate))i=JSON.parse(JSON.stringify(e.value));else{var s=this.column.filterBarTemplate.read;typeof s=="string"&&(s=H(s,window)),u(s)||(this.value=s.call(this,e))}if(u(this.value)||this.value===""){this.removeFilteredColsByField(this.column.field);return}this.validateFilterValue(this.value),this.filterByMethod=!1,this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.filterSettings.enableCaseSensitivity,this.ignoreAccent,this.column.isForeignColumn()),this.filterByMethod=!0,e.value=i,this.updateFilterMsg()},a.prototype.validateFilterValue=function(t){var e,i;switch(this.matchCase=this.filterSettings.enableCaseSensitivity,this.column.type){case"number":this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal,e=[">","<","=","!"];for(var s=0;s<t.length;s++)if(e.indexOf(t[parseInt(s.toString(),10)])>-1){i=s;break}this.getOperator(t.substring(i)),i!==0&&(this.value=t.substring(0,i)),this.value!==""&&t.length>=1&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type)),isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal,this.value!==""&&!(this.value instanceof Date)&&(this.getOperator(t),this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),u(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1,this.column.filter.operator?this.operator=this.column.filter.operator:t.indexOf("*")!==-1||t.indexOf("?")!==-1||t.indexOf("%3f")!==-1?this.operator=this.filterOperators.wildCard:t.indexOf("%")!==-1?this.operator=this.filterOperators.like:this.operator=this.filterOperators.startsWith;break;case"boolean":t.toLowerCase()==="true"||t==="1"?this.value=!0:t.toLowerCase()==="false"||t==="0"?this.value=!1:t.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")),this.operator=this.filterOperators.equal;break;default:this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal}},a.prototype.getOperator=function(t){var e=t.charAt(0),i=t.slice(0,2),s=$({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},P.operatorSymbols);(s.hasOwnProperty(e)||s.hasOwnProperty(i))&&(this.operator=s[""+e],this.value=t.substring(1),this.operator||(this.operator=s[""+i],this.value=t.substring(2))),(this.operator===this.filterOperators.lessThan||this.operator===this.filterOperators.greaterThan)&&this.value.charAt(0)==="="&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))},a.prototype.columnPositionChanged=function(){this.parent.filterSettings.type},a.prototype.getLocalizedCustomOperators=function(){var t=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}];this.customOperators={stringOperator:[{value:"startswith",text:this.l10n.getConstant("StartsWith")},{value:"endswith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"isempty",text:this.l10n.getConstant("IsEmpty")},{value:"doesnotstartwith",text:this.l10n.getConstant("NotStartsWith")},{value:"doesnotendwith",text:this.l10n.getConstant("NotEndsWith")},{value:"doesnotcontain",text:this.l10n.getConstant("NotContains")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnotempty",text:this.l10n.getConstant("IsNotEmpty")},{value:"like",text:this.l10n.getConstant("Like")}],numberOperator:t,dateOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}],datetimeOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}],dateonlyOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}],booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}]},this.filterSettings.type==="Menu"&&(this.customOperators.stringOperator.push({value:"in",text:this.l10n.getConstant("In")},{value:"notin",text:this.l10n.getConstant("NotIn")}),this.customOperators.booleanOperator.push({value:"in",text:this.l10n.getConstant("In")},{value:"notin",text:this.l10n.getConstant("NotIn")}),this.customOperators.numberOperator.push({value:"in",text:this.l10n.getConstant("In")},{value:"notin",text:this.l10n.getConstant("NotIn")}))},a.prototype.openMenuByField=function(t){var e=this.parent;if(e.enableAdaptiveUI){this.showCustomFilter(!1);return}var i=e.getColumnByField(t),s=e.getColumnHeaderByField(t),r=s.querySelector(".e-filtermenudiv");if(r){var n=e.element.getBoundingClientRect(),o=r.getBoundingClientRect();this.filterDialogOpen(i,r,o.right-n.left,o.bottom-n.top)}},a.prototype.filterIconClickHandler=function(t){var e=t.target;if(e.classList.contains("e-filtermenudiv")&&(this.parent.filterSettings.type==="Menu"||this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel")){var i=this.parent,s=i.getColumnByUid(F(e,"e-headercell").firstElementChild.getAttribute("data-mappinguid"));if(this.column=s,this.fltrDlgDetails.field===s.field&&this.fltrDlgDetails.isOpen)return;this.filterModule&&this.filterModule.closeDialog(),this.fltrDlgDetails={field:s.field,isOpen:!0},this.openMenuByField(s.field)}},a.prototype.clickHandler=function(t){if(this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator){if(F(t.target,"e-filterbarcell")&&t.target.classList.contains("e-input-group-icon")){var e=M(t.target,"div").querySelector(".e-filterbaroperator");e?e.focus():t.target.focus()}if(t.target.classList.contains("e-list-item")){var i=document.querySelector(".e-popup-open").getAttribute("id").replace("_popup","");i.indexOf("grid-column")!==-1&&M(document.getElementById(i),"div").querySelector(".e-filtertext").focus()}}if(this.filterSettings.mode==="Immediate"||this.parent.filterSettings.type==="Menu"||this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel"){var s=t.target,r=s.classList.contains("e-day"),n=F(this.parent.element,"e-dialog"),o=!1,l=F(s,"e-popup"),h=document.getElementById(this.parent.element.id+"_e-popup"),p=this.parent.element.classList.contains("e-device")?document.querySelector(".e-filter-popup"):h&&h.querySelector(".e-filter-popup")?h.querySelector(".e-filter-popup"):this.parent.element.querySelector(".e-filter-popup");if(n&&l&&(o=n.id===l.id),this.filterModule&&p&&(F(s,"e-excel-ascending")||F(s,"e-excel-descending"))&&this.filterModule.closeDialog(s),F(s,"e-filter-popup")||s.classList.contains("e-filtermenudiv"))return;this.filterModule&&!F(s,"e-date-overflow")&&!F(s,"e-popup-wrapper")&&!M(s,".e-filter-item.e-menu-item")&&!r&&!(F(s,"e-search-wrapper")&&!p)&&(o&&!F(s,"e-filter-popup")&&!F(s,"e-popup-flmenu")||!l&&p)&&(this.filterModule.isresetFocus=F(s,"e-grid")&&F(s,"e-grid").id===this.parent.element.id&&!(F(s,"e-search-wrapper")&&p),this.filterModule.closeDialog(s))}},a.prototype.filterHandler=function(t){this.actualPredicate[t.field]=t.actualPredicate,this.actualData=Object.keys(this.actualPredicate);var e=new N(this.filterSettings.columns),i=new se().where("field",this.filterOperators.equal,t.field);this.checkboxFilterObject=e.dataSource.json,this.checkboxPrevFilterObject=e.executeLocal(i);for(var s=0;s<this.checkboxPrevFilterObject.length;s++){for(var r=-1,n=0;n<this.filterSettings.columns.length;n++)if(this.checkboxPrevFilterObject[parseInt(s.toString(),10)].field===this.filterSettings.columns[parseInt(n.toString(),10)].field){r=n;break}r!==-1&&this.filterSettings.columns.splice(r,1)}this.values[t.field]&&delete this.values[t.field];var o=this.parent.getColumnByField(t.field),l=this.parent.showColumnMenu&&o.showColumnMenu?".e-columnmenu":".e-icon-filter",h=this.parent.getColumnHeaderByField(t.field).querySelector(l);t.action==="filtering"?(this.filterSettings.columns=this.filterSettings.columns.concat(t.filterCollection),this.filterSettings.columns.length&&h&&h.classList.add("e-filtered")):(h&&h.classList.remove("e-filtered"),t.requestType="filtering",this.parent.renderModule.refresh(t)),this.parent.dataBind()},a.prototype.updateFilter=function(){var t=this.filterSettings.columns;this.actualPredicate={};for(var e=0;e<t.length;e++){this.column=this.parent.getColumnByField(t[parseInt(e.toString(),10)].field)||mn(t[parseInt(e.toString(),10)].field,this.parent.getForeignKeyColumns());var i=t[parseInt(e.toString(),10)].field;this.parent.getColumnByField(t[parseInt(e.toString(),10)].field)||(i=mn(t[parseInt(e.toString(),10)].field,this.parent.getForeignKeyColumns()).field),this.refreshFilterIcon(i,t[parseInt(e.toString(),10)].operator,t[parseInt(e.toString(),10)].value,t[parseInt(e.toString(),10)].type,t[parseInt(e.toString(),10)].predicate,t[parseInt(e.toString(),10)].matchCase,t[parseInt(e.toString(),10)].ignoreAccent,t[parseInt(e.toString(),10)].uid)}},a.prototype.refreshFilterIcon=function(t,e,i,s,r,n,o,l){var h={field:t,predicate:r,matchCase:n,ignoreAccent:o,operator:e,value:i,type:s};this.actualPredicate[""+t]?this.actualPredicate[""+t].push(h):this.actualPredicate[""+t]=[h];var p=l?this.parent.grabColumnByUidFromAllCols(l).field:t;this.addFilteredClass(p)},a.prototype.addFilteredClass=function(t){var e,i=this.parent.getColumnByField(t);this.parent.showColumnMenu&&i.showColumnMenu?e=this.parent.getColumnHeaderByField(t).querySelector(".e-columnmenu"):i&&(e=this.parent.getColumnHeaderByField(t).querySelector(".e-icon-filter")),e&&e.classList.add("e-filtered")},a.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},a.prototype.getOperatorName=function(t){return document.getElementById(this.parent.getColumnByField(t).uid).ej2_instances[0].value},a.prototype.renderCheckboxOnFilterMenu=function(){return this.filterModule.renderCheckBoxMenu()},a})(),rS=(function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}})(),nS=(function(a){rS(t,a);function t(e){var i=a.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={columns:{column:{stackedColumns:"stackedColumn"}},aggregates:{aggregate:{aggregateColumns:"aggregateColumn"}}},i.statelessTemplateProps=null,i.templateProps=["template","headerTemplate","commandsTemplate","filter.itemTemplate","editTemplate","filterTemplate","columnChooserSettings.headerTemplate","columnChooserSettings.template","columnChooserSettings.footerTemplate"],i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return t.prototype.render=function(){if(this.isReactMock=!1,(this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)a.prototype.render.call(this),this.initRenderCalled=!0;else return mc.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals))},t})(vd);Pd(nS,[Nd,mc.Component]);export{pS as C,fS as F,nS as G,dS as P,cS as S,uS as a};

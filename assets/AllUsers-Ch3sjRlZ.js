import{w as f,a as i,p as e}from"./chunk-NISHYRIK-bW9Td-MD.js";import{H as n}from"./Header-1hr30dbd.js";import{G as j,C as y,a as s,P as w,S as b,F as N}from"./grid.component-C3KD7pf_.js";import{I as v}from"./template-B_1vptV0.js";import"./utils-B6NI4t93.js";import"./sanitize-helper-CTTLmxlq.js";import"./button-qKIcIH9O.js";import"./index-kCI-pDpd.js";const T=()=>{const[l,c]=i.useState([]),[m,d]=i.useState(!0),[o,p]=i.useState(null);i.useEffect(()=>{(async()=>{try{d(!0);const t=await fetch("http://localhost:3000/api/admin/users",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch users");const a=await t.json();if(a.success)c(a.data);else throw new Error(a.message||"Failed to fetch users")}catch(t){p(t.message),console.error("Error fetching users:",t)}finally{d(!1)}})()},[]);const x=r=>{const t={active:"bg-success-50 text-success-700",suspended:"bg-red-50 text-red-500",inactive:"bg-gray-200 text-gray-700",deleted:"bg-red-100 text-red-500"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[r.status]||"bg-gray-200 text-gray-700"}`,children:r.status})},h=r=>{const t={admin:"bg-pink-50 text-pink-500",security_officer:"bg-primary-50 text-primary-500",neighborhood_member:"bg-navy-50 text-navy-500"},a=r.user_type?.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase());return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[r.user_type]||"bg-gray-200 text-gray-700"}`,children:a})},u=r=>e.jsx("div",{className:"flex-center",children:r.is_approved?e.jsx("span",{className:"text-success-500 text-lg font-semibold",children:"✓"}):e.jsx("span",{className:"text-red-500 text-lg font-semibold",children:"✗"})});return m?e.jsxs("main",{className:"dashboard wrapper",children:[e.jsx(n,{title:"Users Management",description:"View and manage all users in the system"}),e.jsx("div",{className:"flex-center p-8",children:e.jsx("p",{className:"p-18-regular text-gray-500",children:"Loading users..."})})]}):o?e.jsxs("main",{className:"dashboard wrapper",children:[e.jsx(n,{title:"Users Management",description:"View and manage all users in the system"}),e.jsx("div",{className:"error p-4",children:e.jsxs("p",{children:["Error: ",o]})})]}):e.jsxs("main",{className:"all-userd wrapper",children:[e.jsx(n,{title:"Users Management",description:"View and manage all users in the system"}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"flex-between mb-6",children:[e.jsx("h1",{className:"p-24-semibold text-dark-100",children:"All Users"}),e.jsxs("p",{className:"p-16-semibold text-gray-500",children:["Total: ",l.length]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-300 p-6",children:e.jsxs(j,{dataSource:l,allowPaging:!0,allowSorting:!0,allowFiltering:!0,pageSettings:{pageSize:10,pageSizes:[10,25,50,100]},filterSettings:{type:"Excel"},width:"100%",children:[e.jsxs(y,{children:[e.jsx(s,{field:"user_id",headerText:"ID",width:"80",isPrimaryKey:!0,textAlign:"Center",visible:!0}),e.jsx(s,{field:"first_name",headerText:"First Name",width:"140"}),e.jsx(s,{field:"last_name",headerText:"Last Name",width:"140"}),e.jsx(s,{field:"email",headerText:"Email",width:"220"}),e.jsx(s,{field:"phone_number",headerText:"Phone",width:"140"}),e.jsx(s,{field:"user_type",headerText:"User Type",width:"160",template:h}),e.jsx(s,{field:"status",headerText:"Status",width:"130",template:x}),e.jsx(s,{field:"is_approved",headerText:"Approved",width:"110",template:u,textAlign:"Center"}),e.jsx(s,{field:"last_login",headerText:"Last Login",width:"140",format:"yMd",type:"date"}),e.jsx(s,{field:"created_at",headerText:"Joined Date",width:"140",format:"yMd",type:"date"})]}),e.jsx(v,{services:[w,b,N]})]})})]})]})},L=f(T);export{L as default};
